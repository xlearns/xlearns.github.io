var exports = {};
var __extends =
  (this && this.__extends) ||
  (function () {
    var o = function (t, e) {
      o =
        Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array &&
          function (t, e) {
            t.__proto__ = e;
          }) ||
        function (t, e) {
          for (var n in e)
            if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
        };
      return o(t, e);
    };
    return function (t, e) {
      if (typeof e !== "function" && e !== null)
        throw new TypeError(
          "Class extends value " + String(e) + " is not a constructor or null"
        );
      o(t, e);
      function n() {
        this.constructor = t;
      }
      t.prototype =
        e === null ? Object.create(e) : ((n.prototype = e.prototype), new n());
    };
  })();
var __spreadArray =
  (this && this.__spreadArray) ||
  function (t, e) {
    for (var n = 0, o = e.length, r = t.length; n < o; n++, r++) t[r] = e[n];
    return t;
  };
var HTMLImageElement_ = Image;
var XOF;
(function (h) {
  var s = 0;
  var t = 0;
  var u;
  var l = 30;
  var e = "mouse";
  //h为XOF
  h.version = "1.0.0.15";
  var f;
  var n;
  var c;
  var p;
  function o() {
    return ++t;
  }
  h.hashCode = o;
  var d;
  var v;
  function y() {
    return window.screen.height == window.innerHeight;
  }
  var r = function (t) {
    return f.onTouch(t);
  };
  function i(t) {
    v.removeEventListener("touchstart", r);
    v.removeEventListener("touchmove", r);
    v.removeEventListener("touchend", r);
    v.removeEventListener("touchcancel", r);
    v.removeEventListener("mousedown", r);
    v.removeEventListener("mousemove", r);
    v.removeEventListener("mouseup", r);
    v.removeEventListener("mouseout", r);
    if (t) {
      v.addEventListener("touchstart", r, false);
      v.addEventListener("touchmove", r, false);
      v.addEventListener("touchend", r, false);
      v.addEventListener("touchcancel", r, false);
      e = "touch";
    } else {
      v.addEventListener("mousedown", r, false);
      v.addEventListener("mousemove", r, false);
      v.addEventListener("mouseup", r, false);
      v.addEventListener("mouseout", r, false);
      e = "mouse";
    }
  }
  function a() {}
  function _(t, e, n, o) {
    if (n === void 0) {
      n = 800;
    }
    if (o === void 0) {
      o = 600;
    }
    if (h.player) return V("已经初始化");
    d = t;
    v = e;
    if (e) {
      u = c =
        window["requestAnimationFrame"] ||
        window["webkitRequestAnimationFrame"] ||
        window["mozRequestAnimationFrame"] ||
        window["oRequestAnimationFrame"] ||
        window["msRequestAnimationFrame"];
      p = function (t) {
        return window.setTimeout(t, 1e3 / l);
      };
      if (!u) u = p;
      h.player = new F(e, n, o);
      h.stage = new D().size(n, o);
      h.loader = new X();
      f = new A();
      h.stage.$hasAddToStage = true;
      t.onkeydown = function (t) {
        return h.player.keyboard(t ? t.keyCode : undefined, 1);
      };
      t.onkeyup = function (t) {
        return h.player.keyboard(t ? t.keyCode : undefined, 0);
      };
      var r = function (t) {
        return h.stage.event(g.MOUSE_SCROLL, [t]);
      };
      function i(t) {
        var e = 0;
        if (!t) t = window.event;
        if (t.wheelDelta) {
          e = t.wheelDelta / 120;
          if (window["opera"]) e = -e;
        } else if (t.detail) {
          e = -t.detail / 3;
        }
        if (e) r(e);
      }
      e === null || e === void 0
        ? void 0
        : e.addEventListener("DOMMouseScroll", i, false);
      e["onmousewheel"] = i;
      h.player.setTouchEventListener(1);
      var a = function (t) {
        return h.stage.event(y() ? m.FULL_SCEEN : m.FULL_SCEEN_QUIT);
      };
      t.addEventListener("fullscreenchange", a, false);
      t.addEventListener("webkitfullscreenchange", a, false);
      t.addEventListener("mozfullscreenchange", a, false);
      window.addEventListener("resize", a, false);
      window.onfocus = function () {
        return h.player.onfocus();
      };
      window.onblur = function () {
        return h.player.onblur();
      };
      a();
      s = Date.now();
      h.player.loop();
    } else {
      V("没有canvase");
    }
  }
  h.init = _;
  var m = (function () {
    function t() {}
    t.KEY_DOWN = "KEY_DOWN";
    t.KEY_UP = "KEY_UP";
    t.MOVE = "MOVE";
    t.ERROR = "ERROR";
    t.COMPLETE = "COMPLETE";
    t.RESIZE = "RESIZE";
    t.ADDED_TO_STAGE = "ADDED_TO_STAGE";
    t.REMOVED_FROM_STAGE = "REMOVED_FROM_STAGE";
    t.ADDED = "ADDED";
    t.REMOVED = "REMOVED";
    t.FULL_SCEEN = "FULL_SCEEN";
    t.FULL_SCEEN_QUIT = "FULL_SCEEN_QUIT";
    t.ENTER_FRAME = "ENTER_FRAME";
    return t;
  })();
  h.Event = m;
  var g = (function () {
    function t() {}
    t.TOUCH_MOVE = "mousemove";
    t.TOUCH_END = "mouseup";
    t.TOUCH_BEGIN = "mousedown";
    t.MOUSE_RELEASE_OUTSIDE = "MOUSE_RELEASE_OUTSIDE";
    t.TAP = "TAP";
    t.TOUCH_CANCEL = "TOUCH_CANCEL";
    t.TOUCH_ENTER = "TOUCH_ENTER";
    t.TOUCH_OUT = "TOUCH_OUT";
    t.MOUSE_SCROLL = "DOMMouseScroll";
    t.RMOUSE_BEGIN = "RMOUSE_BEGIN";
    t.RMOUSE_END = "RMOUSE_END";
    t.RMOUSE_TAP = "RMOUSE_TAP";
    return t;
  })();
  h.TouchEvent = g;
  var b = (function () {
    function t(t, e, n) {
      this.thisObj = e;
      this.func = t;
      this.params = n;
    }
    t.prototype.runWith = function (t) {
      var e, n, o;
      if (t || this.params) {
        if (t && this.params) {
          (e = this.func).call.apply(
            e,
            __spreadArray(__spreadArray([this.thisObj], this.params), t)
          );
        } else if (t) {
          (n = this.func).call.apply(n, __spreadArray([this.thisObj], t));
        } else {
          (o = this.func).call.apply(
            o,
            __spreadArray([this.thisObj], this.params)
          );
        }
      } else this.func.call(this.thisObj);
    };
    t.prototype.clear = function () {
      delete this.thisObj;
      delete this.func;
      delete this.once;
      delete this.valid;
      delete this.params;
    };
    return t;
  })();
  function O(t, e, n) {
    if ((t.width > 0 && t.height > 0) || t.touchThrough) {
      if (t.touchThrough) {
        return false;
      } else {
        var o = (e + t.pivotX * t.scaleX) * (1 / t.scaleX);
        var r = (n + t.pivotY * t.scaleX) * (1 / t.scaleY);
        return t.hitTest_(o, r);
      }
    }
    return false;
  }
  var w = (function () {
    function t() {}
    t.prototype.stopPropagation = function () {
      this.$stoped = true;
    };
    t.prototype.set = function (t, e, n) {
      this.type = t;
      this.currentTarget = e;
      this.target = n;
      return this;
    };
    return t;
  })();
  h.TouchEventDispatcher = w;
  var A = (function () {
    function t() {
      this.$press = {};
      this.$hovers = {};
      this.events_ = [];
      this.x = this.y = 0;
      this.disableMouseEvent = false;
      this.enableMouseRight = false;
      this.event = new w();
    }
    t.prototype.isTouchEvent = function (t) {
      for (var e in g) if (g[e] == t) return true;
      return false;
    };
    t.prototype.onTouch = function (t) {
      if (t) {
        var e = void 0;
        var n = 0;
        var o = 0;
        var r = t.type;
        switch (t.type) {
          case "touchstart":
          case "touchmove":
          case "touchend":
          case "touchcancel":
            {
              var i = t.changedTouches;
              for (var a = 0; a < i.length; a++) {
                var s = i[a];
                e = s.identifier;
                n = s.pageX;
                o = s.pageY;
                this.addTouchEvent_(r, e, n, o);
              }
              t.preventDefault();
              t.stopPropagation();
            }
            break;
          default: {
            e = t.button;
            n = t.offsetX;
            o = t.offsetY;
            this.addTouchEvent_(r, e, n, o);
          }
        }
      }
    };
    t.prototype.$addTouchTest = function () {
      if (e == "mouse") {
        this.addTouchEvent_("touchtest", 0, this.x, this.y);
      }
    };
    t.prototype.check = function (t, e, n, o, r) {
      var i = e - t.x,
        a = n - t.y;
      if (t instanceof j) {
        i += t.scrollH;
        a += t.scrollV;
      }
      if (t.rotate % 360 != 0) {
      }
      if (!this.disableMouseEvent) {
        t.mouseX = i;
        t.mouseY = a;
        if (!t.touchThrough && !O(t, i, a)) {
          return false;
        }
        var s = t.numChild;
        for (var u = s - 1; u >= 0; u--) {
          var l = t.getChildAt(u);
          if (l.visible && l.touchEnabled) {
            if (
              this.check(
                l,
                (i + t.pivotX * t.scaleX) * (1 / t.scaleX),
                (a + t.pivotY * t.scaleY) * (1 / t.scaleY),
                o,
                r
              )
            ) {
              return true;
            }
          }
        }
      }
      var f = false;
      if (!t.touchThrough && !this.disableMouseEvent) {
        f = true;
      } else {
        f = O(t, i, a);
      }
      if (f) {
        r.call(this, t, o);
      }
      return f;
    };
    t.prototype.addTouchEvent_ = function (t, e, n, o) {
      var r = Math.floor(
        (n * h.player.mouseScaleX - h.player.sceneX) *
          (1 / h.player.sceneScaleX)
      );
      var i = Math.floor(
        (o * h.player.mouseScaleY - h.player.sceneY) *
          (1 / h.player.sceneScaleY)
      );
      if (r < 0 || i < 0 || r > h.stage.width || i > h.stage.height) {
        if (t == "touchend") {
          t = "touchcancel";
        } else if (t == "touchstart") {
          return;
        }
      }
      this.events_.push({ type: t, x: r, y: i, key: e });
      if (t != "touchtest") {
        this.x = r;
        this.y = i;
      }
    };
    t.prototype.onTouchCancel = function (t) {
      for (var e in this.$press) {
        this.$cancelTouch(e);
      }
    };
    t.prototype.$cancelTouch = function (t) {
      var e = this.$press[t];
      if (e) {
        this.$dispatchTouchEvent(
          this.$getPropagationList(e),
          g.TOUCH_CANCEL,
          t
        );
        delete this.$press[t];
      }
    };
    t.prototype.$cancelTouchChildrend = function (t, e) {
      var n = this.$press[e];
      if (n && t) {
        this.$dispatchTouchEvent(
          this.$getPropagationList(n, t),
          g.TOUCH_CANCEL,
          e
        );
        this.$press[e] = t;
      }
    };
    t.prototype.onTouchMove = function (t, e) {
      if (t) {
        var n = this.$getPropagationList(t);
        var o = this.$hovers[e];
        if (!o) {
          this.$dispatchTouchEvent(n, g.TOUCH_ENTER, e);
          this.$hovers[e] = t;
        } else if (o != t) {
          if (o.contains(t)) {
            var r = this.$getPropagationList(t, o);
            this.$dispatchTouchEvent(r, g.TOUCH_ENTER, e);
          } else if (t.contains(o)) {
            var r = this.$getPropagationList(o, t);
            this.$dispatchTouchEvent(r, g.TOUCH_OUT, e);
          } else {
            var i = void 0,
              r = [];
            var a = this.$getPropagationList(o);
            var s = this.$getPropagationList(t);
            var u = a.length;
            for (var l = 0; l < u; l++) {
              i = a[l];
              var f = s.indexOf(i);
              if (f >= 0) {
                s.splice(f, 1);
                break;
              } else {
                r.push(i);
              }
            }
            if (r.length) {
              this.$dispatchTouchEvent(r, g.TOUCH_OUT, e);
            }
            if (s) {
              this.$dispatchTouchEvent(s, g.TOUCH_ENTER, e);
            }
          }
          this.$hovers[e] = t;
        }
        this.$dispatchTouchEvent(n, g.TOUCH_MOVE, e);
      }
    };
    t.prototype.onTouchBegin = function (t, e) {
      if (t) {
        var n = this.enableMouseRight ? e == 2 : false;
        var o = this.$getPropagationList(t);
        this.$press[e] = t;
        this.$dispatchTouchEvent(o, n ? g.RMOUSE_BEGIN : g.TOUCH_BEGIN, e);
      }
    };
    t.prototype.onTouchEnd = function (t, e) {
      var n = this.$press[e];
      if (t) {
        var o = this.enableMouseRight ? e == 2 : false;
        var r = this.$getPropagationList(t);
        this.$dispatchTouchEvent(r, o ? g.RMOUSE_END : g.TOUCH_END, e);
        if (n == t && !t.disabledTap) {
          this.$dispatchTouchEvent(r, o ? g.RMOUSE_TAP : g.TAP, e);
        }
      }
      if (n != t && n != undefined) {
        this.$dispatchTouchEvent(
          this.$getPropagationList(this.$press[e]),
          g.MOUSE_RELEASE_OUTSIDE,
          e
        );
      }
      delete this.$press[e];
    };
    t.prototype.onTouchTest = function (t, e) {
      if (this.$hovers[e] != t) {
        this.onTouchMove(t, e);
      }
    };
    t.prototype.$getPropagationList = function (t, e) {
      var n = [];
      while (t != e) {
        n.push(t);
        t = t.parent;
      }
      return n;
    };
    t.prototype.$dispatchTouchEvent = function (t, e, n) {
      var o = this.event;
      o.$stoped = false;
      o.touchId = n;
      var r = t.length;
      for (var i = 0, a = void 0; i < r; i++) {
        a = t[i];
        if (o.$stoped) return;
        a.event(e, [o.set(e, a, t[0])]);
      }
    };
    t.prototype.runEvent = function () {
      var t = this.events_.length;
      for (var e = 0; e < t; e++) {
        var n = this.events_.shift();
        if (n.type == "touchstart") {
          this.check(h.stage, n.x, n.y, n.key, this.onTouchBegin);
        } else if (n.type == "touchmove") {
          this.check(h.stage, n.x, n.y, n.key, this.onTouchMove);
        } else if (n.type == "touchend") {
          this.check(h.stage, n.x, n.y, n.key, this.onTouchEnd);
        } else if (n.type == g.TOUCH_END) {
          this.check(h.stage, n.x, n.y, n.key, this.onTouchEnd);
        } else if (n.type == g.TOUCH_BEGIN) {
          this.check(h.stage, n.x, n.y, n.key, this.onTouchBegin);
        } else if (n.type == g.TOUCH_MOVE) {
          this.check(h.stage, n.x, n.y, n.key, this.onTouchMove);
        } else if (n.type == "mouseout" || n.type == "touchcancel") {
          this.onTouchCancel(n);
        } else if (n.type == "touchtest") {
          this.check(h.stage, n.x, n.y, n.key, this.onTouchTest);
        }
      }
    };
    return t;
  })();
  var E = (function () {
    function t() {
      this.hashCode_ = o();
      this.events_ = {};
    }
    Object.defineProperty(t.prototype, "hashCode", {
      get: function () {
        return this.hashCode_;
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.createListener_ = function (t, e, n, o, r, i) {
      if (t && e) {
        if (i || this.hasListener(t)) {
          this.removeListener_(t, e, n);
        }
        var a = new b(e, n, o);
        a.once = r;
        this.events_ = this.events_ || {};
        this.events_[t] = this.events_[t] || [];
        this.events_[t].push(a);
      } else {
        G("type或func不能为空值");
      }
      return this;
    };
    t.prototype.removeListener_ = function (t, e, n, o) {
      if (this.events_ && this.events_[t]) {
        var r = this.events_[t].length;
        for (var i = r - 1; i >= 0; i--) {
          var a = this.events_[t][i];
          if (a.func == e && a.thisObj == n && (o ? a.once : true)) {
            var s = this.events_[t].splice(i, 1)[0];
            s.clear();
            break;
          }
        }
      }
      return this;
    };
    t.prototype.hasListener = function (t) {
      if (this.events_ && this.events_[t]) {
        return this.events_[t].length > 0;
      }
      return false;
    };
    t.prototype.once = function (t, e, n, o) {
      this.createListener_(t, e, n, o, true);
    };
    t.prototype.on = function (t, e, n, o, r) {
      this.createListener_(t, e, n, o, undefined, r);
    };
    t.prototype.off = function (t, e, n, o) {
      this.removeListener_(t, e, n, o);
      return this;
    };
    t.prototype.event = function (t, e) {
      if (this.events_ && this.events_[t]) {
        var n = this.events_[t].length;
        for (var o = 0; o < n; o++) {
          var r = this.events_[t][o];
          if (r) r.runWith(e);
        }
        for (var o = n - 1; o >= 0; o--) {
          var r = this.events_[t][o];
          if (!r || r.once) this.events_[t].splice(o, 1);
        }
      }
      return this;
    };
    return t;
  })();
  h.EventDispatcher = E;
  var T = (function (e) {
    __extends(n, e);
    function n() {
      var t = e.call(this) || this;
      t.$initRenderer();
      t.x_ = 0;
      t.y_ = 0;
      t.scaleX_ = 1;
      t.scaleY_ = 1;
      t.$alpha = 1;
      t.$rotate = 0;
      t.gs = {
        x: t.x_,
        y: t.y_,
        scaleX: t.scaleX_,
        scaleY: t.scaleY_,
        rotate: t.rotate,
        alpha: t.$alpha,
      };
      return t;
    }
    Object.defineProperty(n.prototype, "visible", {
      get: function () {
        return this.$renderer.visible;
      },
      set: function (t) {
        this.$renderer.visible = t;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(n.prototype, "pivotX", {
      get: function () {
        return this.$getPivotX();
      },
      set: function (t) {
        this.$setPivotX(t);
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(n.prototype, "pivotY", {
      get: function () {
        return this.$getPivotY();
      },
      set: function (t) {
        this.$setPivotY(t);
      },
      enumerable: false,
      configurable: true,
    });
    n.prototype.$setPivotX = function (t) {
      this.$renderer.pivot.x = t;
    };
    n.prototype.$getPivotX = function () {
      return this.$renderer.pivot.x;
    };
    n.prototype.$setPivotY = function (t) {
      this.$renderer.pivot.y = t;
    };
    n.prototype.$getPivotY = function () {
      return this.$renderer.pivot.y;
    };
    n.prototype.$setAlpha = function (t) {
      this.$renderer.alpha = t;
      this.$alpha = t;
      this.gs = {
        x: this.x_,
        y: this.y_,
        scaleX: this.scaleX_,
        scaleY: this.scaleY_,
        rotate: this.rotate,
        alpha: this.$alpha,
      };
    };
    n.prototype.$getAlpha = function () {
      return this.$alpha;
    };
    n.prototype.$initRenderer = function () {
      this.$renderer = new PIXI.Container();
    };
    n.prototype.$renderAddChild = function (t, e) {
      this.$renderer.addChildAt(t, e);
    };
    n.prototype.$renderRemoveChild = function (t) {
      this.$renderer.removeChild(t);
    };
    n.prototype.$renderUpdate = function (t) {
      this.$renderer.position.set(this.x_ || 0, this.y_ || 0);
      this.$renderer.scale.set(this.scaleX_, this.scaleY_);
    };
    Object.defineProperty(n.prototype, "alpha", {
      get: function () {
        return this.$getAlpha();
      },
      set: function (t) {
        this.$setAlpha(t);
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(n.prototype, "rotate", {
      get: function () {
        return this.$rotate;
      },
      set: function (t) {
        this.$rotate = t;
        this.$renderer.angle = this.$rotate;
        this.gs = {
          x: this.x_,
          y: this.y_,
          scaleX: this.scaleX_,
          scaleY: this.scaleY_,
          rotate: this.rotate,
          alpha: this.$alpha,
        };
      },
      enumerable: false,
      configurable: true,
    });
    n.prototype.touchEnable_ = function (t) {
      var e = this;
      while (e) {
        e.touchEnabled = t;
        e = e.parent;
      }
    };
    Object.defineProperty(n.prototype, "parent", {
      get: function () {
        return this.parent_;
      },
      set: function (t) {
        this.setParent_(t);
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(n.prototype, "x", {
      get: function () {
        return this.x_;
      },
      set: function (t) {
        this.pos(t);
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(n.prototype, "y", {
      get: function () {
        return this.y_;
      },
      set: function (t) {
        this.pos(undefined, t);
      },
      enumerable: false,
      configurable: true,
    });
    n.prototype.pos = function (t, e) {
      if (t == this.x_ && e == this.y_) return this;
      this.$setX(t, false);
      this.$setY(e, false);
      this.event(m.MOVE);
      return this;
    };
    n.prototype.$setX = function (t, e) {
      if (e === void 0) {
        e = true;
      }
      if (t == this.x_) return this;
      this.x_ = t == undefined ? this.x_ : t;
      this.gs = {
        x: this.x_,
        y: this.y_,
        scaleX: this.scaleX_,
        scaleY: this.scaleY_,
        rotate: this.rotate,
        alpha: this.alpha,
      };
      this.$renderUpdate();
      if (e) this.event(m.MOVE);
      h.player.mouseTestCount += 1;
      return this;
    };
    n.prototype.$setY = function (t, e) {
      if (e === void 0) {
        e = true;
      }
      if (t == this.y_) return this;
      this.y_ = t == undefined ? this.y_ : t;
      this.gs = {
        x: this.x_,
        y: this.y_,
        scaleX: this.scaleX_,
        scaleY: this.scaleY_,
        rotate: this.rotate,
        alpha: this.alpha,
      };
      this.$renderUpdate();
      if (e) this.event(m.MOVE);
      h.player.mouseTestCount += 1;
      return this;
    };
    Object.defineProperty(n.prototype, "scaleX", {
      get: function () {
        return this.scaleX_;
      },
      set: function (t) {
        this.scale(t);
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(n.prototype, "scaleY", {
      get: function () {
        return this.scaleY_;
      },
      set: function (t) {
        this.scale(undefined, t);
      },
      enumerable: false,
      configurable: true,
    });
    n.prototype.scale = function (t, e) {
      this.scaleX_ = t === undefined ? this.scaleX_ : t;
      this.scaleY_ = e === undefined ? this.scaleY_ : e;
      this.$renderUpdate();
      this.gs = {
        x: this.x_,
        y: this.y_,
        scaleX: this.scaleX_,
        scaleY: this.scaleY_,
        rotate: this.rotate,
        alpha: this.alpha,
      };
      h.player.mouseTestCount += 1;
      return this;
    };
    Object.defineProperty(n.prototype, "width", {
      get: function () {
        return this.getWidth_();
      },
      set: function (t) {
        this.setWidth_(t, true);
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(n.prototype, "height", {
      get: function () {
        return this.getHeight_();
      },
      set: function (t) {
        this.setHeight_(t, true);
      },
      enumerable: false,
      configurable: true,
    });
    n.prototype.getWidth_ = function () {
      return this.width_;
    };
    n.prototype.getHeight_ = function () {
      return this.height_;
    };
    n.prototype.setWidth_ = function (t, e) {
      this.width_ = t;
      this.$renderUpdate();
      if (e) this.event(m.RESIZE);
    };
    n.prototype.setHeight_ = function (t, e) {
      if (e === void 0) {
        e = true;
      }
      this.height_ = t;
      this.$renderUpdate();
      if (e) this.event(m.RESIZE);
    };
    n.prototype.size = function (t, e) {
      this.setWidth_(t);
      this.setHeight_(e, true);
      h.player.mouseTestCount += 1;
      return this;
    };
    n.prototype.pivot = function (t, e) {
      this.pivotX = t;
      this.pivotY = e;
    };
    n.prototype.setParent_ = function (t) {
      this.parent_ = t;
      return this;
    };
    n.prototype.$ = function () {
      return this;
    };
    n.prototype.localToGlobal = function (t, e) {
      var n = 0,
        o = 0;
      var r = this.localToParent(t, e);
      n = r.x;
      o = r.y;
      var i = this.parent;
      if (i) {
        r = i.localToGlobal(n, o);
        n = r.x;
        o = r.y;
      }
      return { x: n, y: o };
    };
    n.prototype.globalToLocal = function (t, e) {
      var n = this.parent;
      var o = t,
        r = e;
      if (n) {
        var i = n.globalToLocal(t, e);
        o = i.x;
        r = i.y;
      }
      return this.parentToLocal(o, r);
    };
    n.prototype.parentToLocal = function (t, e) {
      t = t - this.x;
      e = e - this.y;
      var n = (-this.rotate * Math.PI) / 180;
      var o = Math.cos(n);
      var r = Math.sin(n);
      var i = o * t - r * e;
      var a = r * t + o * e;
      t = i;
      e = a;
      t = t / this.scaleX;
      e = e / this.scaleY;
      return { x: t, y: e };
    };
    n.prototype.localToParent = function (t, e) {
      t = t * this.scaleX;
      e = e * this.scaleY;
      var n = (this.rotate * Math.PI) / 180;
      var o = Math.cos(n);
      var r = Math.sin(n);
      var i = o * t - r * e;
      var a = r * t + o * e;
      t = i;
      e = a;
      t = t + this.x;
      e = e + this.y;
      return { x: t, y: e };
    };
    n.prototype.hitTest_ = function (t, e) {
      return t >= 0 && e >= 0 && t <= this.width && e <= this.height;
    };
    n.prototype.$onAddToStage = function () {
      var t = this;
      t.$hasAddToStage = true;
      n.$EVENT_ADD_TO_STAGE_LIST.push(this);
    };
    n.prototype.$onRemoveFromStage = function () {
      n.$EVENT_REMOVE_FROM_STAGE_LIST.push(this);
    };
    n.$EVENT_ADD_TO_STAGE_LIST = [];
    n.$EVENT_REMOVE_FROM_STAGE_LIST = [];
    return n;
  })(E);
  h.GameObject = T;
  var C = (function (i) {
    __extends(r, i);
    function r() {
      var t = i.call(this) || this;
      t.children_ = [];
      return t;
    }
    Object.defineProperty(r.prototype, "numChild", {
      get: function () {
        return this.children_.length;
      },
      enumerable: false,
      configurable: true,
    });
    r.prototype.contains = function (t) {
      while (t) {
        if (t == this) return true;
        t = t.parent;
      }
      return false;
    };
    r.prototype.on = function (t, e, n, o, r) {
      if (f.isTouchEvent(t)) this.touchEnable_(true);
      return i.prototype.on.call(this, t, e, n, o, r);
    };
    r.prototype.removeSelf = function () {
      if (this.parent != undefined) {
        this.parent.removeChild(this);
      }
      return this;
    };
    r.prototype.removeChild = function (t) {
      return this.removeChildAt(this.getChildIndex(t));
    };
    r.prototype.removeChildren = function (t, e) {
      t = t || 0;
      e = e || this.numChild - 1;
      for (var n = e; n >= t; n--) {
        this.removeChildAt(n);
      }
      return this;
    };
    r.prototype.removeChildAt = function (t) {
      if (t >= 0 && t < this.children_.length) {
        var e = this.children_.splice(t, 1)[0];
        if (e) {
          this.$renderRemoveChild(e.$renderer);
          e.parent = undefined;
          if (this.$hasAddToStage) {
            h.player.mouseTestCount += 1;
            e.$onRemoveFromStage();
            var n = r.$EVENT_REMOVE_FROM_STAGE_LIST;
            while (n.length > 0) {
              var o = n.shift();
              if (o.$hasAddToStage) {
                o.$hasAddToStage = false;
                o.event(m.REMOVED_FROM_STAGE);
              }
              o.$hasAddToStage = false;
            }
          }
          e.event(m.REMOVED);
        }
        return e;
      }
    };
    r.prototype.getChildIndex = function (t) {
      for (var e = this.children_.length - 1; e >= 0; e--) {
        if (t == this.children_[e]) {
          return e;
        }
      }
      return -1;
    };
    r.prototype.getChildByName = function (t) {
      var e = this.numChild;
      for (var n = 0; n < e; n++) {
        if (t == this.children_[n].name) {
          return this.children_[n];
        }
      }
    };
    r.prototype.removeChildByName = function (t) {
      return this.removeChild(this.getChildByName(t));
    };
    r.prototype.getChildAt = function (t) {
      return this.children_[t];
    };
    r.prototype.setChildIndex = function (t, e) {
      var n = this.children_.indexOf(t);
      if (e > this.numChild - 1) {
        e = this.numChild - 1;
      }
      if (n < 0 || n == e) return t;
      var o = t.parent;
      if (o) o.removeChild(t);
      this.addChildAt(t, e);
      return t;
    };
    r.prototype.addChild = function (t) {
      this.addChildAt(t, this.children_.length);
      return this;
    };
    r.prototype.addChildren = function () {
      var t = [];
      for (var e = 0; e < arguments.length; e++) {
        t[e] = arguments[e];
      }
      for (var n = 0, o = t; n < o.length; n++) {
        var r = o[n];
        this.addChild(r);
      }
      return this;
    };
    r.prototype.addTo = function (t) {
      t && t.addChild(this);
      return this;
    };
    r.prototype.addChildAt = function (t, e) {
      if (
        this.destroyed ||
        t == undefined ||
        t.destroyed ||
        t == this ||
        h.stage == t
      ) {
        return this;
      }
      if (t.contains(this)) {
        this.removeSelf();
      }
      if (t.parent) {
        t.parent.removeChild(t);
      }
      e = Math.min(e, this.children_.length);
      this.children_.splice(e, 0, t);
      t.setParent_(this);
      this.$renderAddChild(t.$renderer, e);
      if (this.$hasAddToStage) {
        t.$onAddToStage();
        h.player.mouseTestCount += 1;
      }
      if (this.$hasAddToStage) {
        var n = r.$EVENT_ADD_TO_STAGE_LIST;
        while (n.length) {
          var o = n.shift();
          if (o.$hasAddToStage) {
            o.event(m.ADDED_TO_STAGE);
            o.$renderUpdate(m.ADDED_TO_STAGE);
          }
        }
      }
      if (t.touchEnabled) this.touchEnable_(true);
      t.event(m.ADDED);
      return this;
    };
    r.prototype.replaceChild = function (t, e) {
      var n = this.getChildIndex(t);
      if (n > 0 && e) {
        if (e.parent) {
          var o = e.parent.getChildIndex(e);
          e.parent.addChildAt(t, o);
        } else {
          t.removeSelf();
        }
        this.addChildAt(e, n);
      }
      return this;
    };
    r.prototype.$onAddToStage = function () {
      i.prototype.$onAddToStage.call(this);
      var t = this.children_;
      var e = t.length;
      for (var n = 0; n < e; n++) {
        var o = t[n];
        o.$onAddToStage();
      }
    };
    r.prototype.$onRemoveFromStage = function () {
      i.prototype.$onRemoveFromStage.call(this);
      var t = this.children_;
      var e = t.length;
      for (var n = 0; n < e; n++) {
        var o = t[n];
        o.$onRemoveFromStage();
      }
    };
    return r;
  })(T);
  h.GameObjectContainer = C;
  var P = (function (t) {
    __extends(e, t);
    function e() {
      return (t !== null && t.apply(this, arguments)) || this;
    }
    e.prototype.isUseTransform = function () {
      if (this.rotate % 360 != 0) return true;
      if (this.numChild || this.width > 0 || this.height > 0) {
        if (this.scaleX != 1 || this.scaleY != 1) return true;
        if (this.pivotX != 0 || this.pivotY != 0) return true;
      }
      return false;
    };
    e.prototype.$render = function (t) {
      if (this.visible) {
        var e = this.cacheObject;
        if (e) {
          var n = this.isUseTransform();
          t.push(this.gs, n);
          e.render(t);
          t.pop(n);
          return;
        } else {
          this.render(t);
        }
      }
    };
    e.prototype.render = function (t) {
      var e = this.isUseTransform();
      t.push(this.gs, e);
      this.draw(t);
      if (this.numChild) t.$.translate(-this.pivotX, -this.pivotY);
      this.renderChildren(t);
      t.pop(e);
    };
    e.prototype.renderChildren = function (t) {
      if (this.children_) {
        for (var e = 0, n = this.children_; e < n.length; e++) {
          var o = n[e];
          if (o.$render) {
            o.$render(t);
          }
        }
      }
    };
    e.prototype.draw = function (t) {};
    Object.defineProperty(e.prototype, "cacheAsBitmap_", {
      get: function () {
        return !!this.cacheObject;
      },
      set: function (t) {
        if (this.cacheAsBitmap_ == t) return;
        if (t) {
          this.$cache();
        } else {
          this.$uncache();
        }
      },
      enumerable: false,
      configurable: true,
    });
    e.prototype.$cache = function () {
      if (!this.cacheObject) {
        this.cacheObject = new U(this);
      }
      this.cacheObject.update();
    };
    e.prototype.$uncache = function () {
      if (this.cacheObject) {
        this.cacheObject = undefined;
      }
    };
    return e;
  })(C);
  h.Sprite = P;
  var j = (function (e) {
    __extends(t, e);
    function t() {
      var t = e.call(this) || this;
      t.$scrollV = t.$scrollH = 0;
      t.autoSize = true;
      t.scrollEnabled = false;
      return t;
    }
    t.prototype.$initRenderer = function () {
      e.prototype.$initRenderer.call(this);
      this.$renderer2 = new PIXI.Container();
      this.$renderer.addChild(this.$renderer2);
    };
    t.prototype.$renderAddChild = function (t, e) {
      this.$renderer2.addChildAt(t, e);
    };
    t.prototype.$renderRemoveChild = function (t) {
      this.$renderer2.removeChild(t);
    };
    Object.defineProperty(t.prototype, "scrollH", {
      get: function () {
        return this.$scrollH;
      },
      set: function (t) {
        this.$setScrollH(t);
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.$setScrollH = function (t) {
      if (this.$scrollH != t) {
        this.$scrollH = t;
        this.$renderer2.x = -this.$scrollH;
      }
    };
    Object.defineProperty(t.prototype, "scrollV", {
      get: function () {
        return this.$scrollV;
      },
      set: function (t) {
        this.$setScrollV(t);
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.$setScrollV = function (t) {
      if (this.$scrollV != t) {
        this.$scrollV = t;
        this.$renderer2.y = -this.$scrollV;
      }
    };
    Object.defineProperty(t.prototype, "scrollEnabled", {
      get: function () {
        return this.$scrollEnabled;
      },
      set: function (t) {
        this.setScrollEnabled(t);
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.setScrollEnabled = function (t) {
      this.$scrollEnabled = t;
      this.$renderUpdate();
    };
    Object.defineProperty(t.prototype, "autoSize", {
      get: function () {
        return this.$autoSize;
      },
      set: function (t) {
        this.$autoSize = t;
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.renderChildren = function (t) {
      if (this.scrollEnabled) {
        t.$.save();
        t.$.beginPath();
        t.$.rect(t.x, t.y, this.width, this.height);
        t.$.clip();
        t.push(
          {
            x: -this.scrollH,
            y: -this.scrollV,
            scaleX: 1,
            scaleY: 1,
            alpha: 1,
            rotate: 0,
          },
          false
        );
        e.prototype.renderChildren.call(this, t);
        t.pop(false);
        t.$.closePath();
        t.$.restore();
      } else {
        e.prototype.renderChildren.call(this, t);
      }
    };
    t.prototype.hitTest_ = function (t, e) {
      var n = 0,
        o = 0;
      if (this.scrollEnabled) {
        n = this.scrollH;
        o = this.scrollV;
      }
      return (
        t >= n &&
        e >= o &&
        t <= this.width + this.scrollH &&
        e <= this.height + this.scrollV
      );
    };
    t.prototype.$renderUpdate = function () {
      e.prototype.$renderUpdate.call(this);
      if (this.scrollEnabled) {
        if (this.width && this.height) {
          if (!this.$mask) {
            this.$renderer.mask = this.$mask = new PIXI.Graphics();
            this.$renderer.addChildAt(this.$mask, 0);
          }
          this.$mask.clear();
          this.$mask.beginFill(0);
          this.$mask.drawRect(
            -this.pivotX,
            -this.pivotY,
            this.width,
            this.height
          );
          this.$mask.endFill();
        }
      }
    };
    return t;
  })(P);
  h.Box = j;
  var S = (function (n) {
    __extends(e, n);
    function e() {
      var t = n.call(this) || this;
      t.textColor = "#ffffff";
      t.textAlign = "left";
      t.vAlign = "top";
      t.lineSpacing = 0;
      t.fontSize = 12;
      return t;
    }
    e.prototype.$initRenderer = function () {
      this.$renderer = new PIXI.Text("");
    };
    e.prototype.$renderUpdate = function () {
      if (this.texts) {
        this.$renderer.text = this.texts.join("\n");
        var t = this.x_ || 0,
          e = this.y_ || 0,
          n = this.width || 0,
          o = this.height || 0;
        var r = n - this.$renderer.width;
        if (this.textAlign == "right") {
          t += r;
        } else if (this.textAlign == "center") {
          t += r / 2;
        }
        var i = o - this.$renderer.height;
        if (this.vAlign == "bottom") {
          e += i;
        } else if (this.vAlign == "middle") {
          e += i / 2;
        }
        this.$renderer.position.set(t, e);
      }
    };
    Object.defineProperty(e.prototype, "textAlign", {
      get: function () {
        return this.$renderer.style.align;
      },
      set: function (t) {
        this.$renderer.style.align = t;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(e.prototype, "lineSpacing", {
      get: function () {
        return this.$renderer.style.leading;
      },
      set: function (t) {
        this.$renderer.style.leading = t;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(e.prototype, "strokeColor", {
      get: function () {
        return this.$renderer.style.stroke;
      },
      set: function (t) {
        this.$renderer.style.stroke = t;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(e.prototype, "stroke", {
      get: function () {
        return this.$renderer.style.strokeThickness;
      },
      set: function (t) {
        this.$renderer.style.strokeThickness = t;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(e.prototype, "textColor", {
      get: function () {
        return this.$renderer.style.fill;
      },
      set: function (t) {
        this.$renderer.style.fill = t;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(e.prototype, "fontSize", {
      get: function () {
        return this.$fontSize;
      },
      set: function (t) {
        this.$fontSize = t;
        this.$renderer.style.fontSize = t;
        this.$renderer.style.lineHeight = t;
        this.text_ && this.$setText(this.text_);
        this.$renderUpdate();
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(e.prototype, "text", {
      get: function () {
        return this.text_;
      },
      set: function (t) {
        if (t == this.text_) if (this.texts != undefined) return;
        this.texts = undefined;
        this.text_ = t;
        this.$setText(t);
        this.$renderUpdate();
      },
      enumerable: false,
      configurable: true,
    });
    e.prototype.setWidth_ = function (t, e) {
      n.prototype.setWidth_.call(this, t, e);
      this.text_ && this.$setText(this.text_);
      this.$renderUpdate();
    };
    e.prototype.$setText = function (t) {
      var u = this;
      var e;
      var l = [];
      if (t && (t.indexOf("\n") >= 0 || t.indexOf("\r") >= 0)) {
        e = t.split(/(?:\r\n|\r|\n)/);
      } else {
        e = [t];
      }
      var f = this.width_;
      if (f) {
        e.forEach(function (t) {
          if (u.measureText(t).width > f) {
            var e = t.split("");
            var n = "";
            var o = 0;
            for (var r = 0, i = e; r < i.length; r++) {
              var a = i[r];
              var s = u.measureText(a).width;
              if (o + s > f) {
                if (o == 0) {
                  l.push(n);
                } else {
                  l.push(n);
                  n = a;
                  o = 0;
                }
              } else {
                n += a;
              }
              o += s;
            }
            if (n) l.push(n);
          } else {
            l.push(t);
          }
        });
      } else l = e;
      this.texts = l;
    };
    Object.defineProperty(e.prototype, "lineNum", {
      get: function () {
        return this.$getLineNum();
      },
      enumerable: false,
      configurable: true,
    });
    e.prototype.$getLineNum = function () {
      if (this.texts) {
        return this.texts.length;
      }
      return 0;
    };
    e.prototype.draw = function (t) {
      if (this.text) {
        var e = 0;
        var n = this.texts ? this.texts.length : 0;
        var o = this.text_;
        var r =
          n > 1
            ? this.fontSize * n + (this.lineSpacing - 1) * n
            : this.fontSize;
        t.pushStyle("textAlign", "fillStyle", "lineWidth", "strokeStyle");
        var i = t.$.fillStyle;
        t.$.textAlign = this.textAlign;
        t.$.font = this.fontSize + "px Arial";
        do {
          if (this.texts) o = this.texts[e];
          var a = 0,
            s = e * (this.lineSpacing + this.fontSize);
          var u = this.width || 0;
          var l = this.height > r ? this.height : r;
          if (this.textAlign == "center") {
            a = u / 2;
          } else if (this.textAlign == "right") {
            a = u;
          }
          if (this.vAlign == "middle") {
            s += Math.floor((l - r) / 2);
          } else if (this.vAlign == "bottom") {
            s += Math.floor(l - r);
          }
          if (this.stroke) {
            t.setColor(this.strokeColor);
            if (1) {
              t.print(o, a - 1 - this.pivotX, +s - this.pivotY);
              t.print(o, a + 1 - this.pivotX, +s - this.pivotY);
              t.print(o, a - this.pivotX, -1 + s - this.pivotY);
              t.print(o, a - this.pivotX, 1 + s - this.pivotY);
            } else {
              t.$.lineWidth = this.stroke;
              t.print2(o, a - this.pivotX, s - this.pivotY);
            }
          }
          t.$.fillStyle = this.textColor;
          t.print(o, a - this.pivotX, s - this.pivotY);
          t.$.fillStyle = i;
        } while (++e < n);
        t.popStyle();
      }
    };
    e.prototype.measureText = function (t) {
      return e.measureText(this, t);
    };
    e.measureText = function (t, e) {
      return PIXI.TextMetrics.measureText(e, t.$renderer.style);
    };
    return e;
  })(P);
  h.Label = S;
  var M = (function () {
    function t() {}
    return t;
  })();
  h.ImageSheet = M;
  var k = {
    add: PIXI.BLEND_MODES.ADD,
    normal: PIXI.BLEND_MODES.NORMAL,
    xor: PIXI.BLEND_MODES.DARKEN,
  };
  var x = (function (o) {
    __extends(t, o);
    function t() {
      return (o !== null && o.apply(this, arguments)) || this;
    }
    t.prototype.$initRenderer = function () {
      o.prototype.$initRenderer.call(this);
      this.$renderer2 = new PIXI.Sprite(undefined);
      this.$renderer.addChildAt(this.$renderer2, 0);
    };
    t.prototype.$renderAddChild = function (t, e) {
      this.$renderer.addChildAt(t, e + 1);
    };
    t.prototype.$renderRemoveChild = function (t) {
      this.$renderer.removeChild(t);
    };
    Object.defineProperty(t.prototype, "blendMode", {
      get: function () {
        return k[this.$renderer2.blendMode] || PIXI.BLEND_MODES.NORMAL;
      },
      set: function (t) {
        this.$renderer2.blendMode = k[t] || PIXI.BLEND_MODES.NORMAL;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "skin", {
      get: function () {
        return this.skin_ || this.texture_;
      },
      set: function (t) {
        if (t == this.skin_) return;
        this.skin_ = t;
        this.texture_ = undefined;
        this.$renderer2.renderable = false;
        if (this.skin) {
          var e = h.loader.get(this.skin_);
          if (e) {
            this.texture_ = e;
            this.$renderUpdate();
          } else if (h.player.preLoadImage)
            h.loader.loadImage(
              this.skin_,
              undefined,
              undefined,
              this.$renderUpdate,
              this
            );
        }
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "grid", {
      get: function () {
        return this.$grid;
      },
      set: function (t) {
        this.$grid = t;
        this.$renderUpdate();
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.$renderUpdate = function () {
      o.prototype.$renderUpdate.call(this);
      var t = h.loader.get(this.skin_);
      if (t) {
        if (this.grid) {
          if (!(this.$renderer2 instanceof PIXI.NineSlicePlane)) {
            this.$renderer.removeChild(this.$renderer2);
            this.$renderer2 = new PIXI.NineSlicePlane(
              PIXI.Texture.from(t),
              0,
              0,
              0,
              0
            );
            this.$renderer2.leftWidth = this.grid[0];
            this.$renderer2.topHeight = this.grid[1];
            this.$renderer2.rightWidth = t.width - this.grid[0] - this.grid[2];
            this.$renderer2.bottomHeight =
              t.height - this.grid[1] - this.grid[3];
            this.$renderer.addChildAt(this.$renderer2, 0);
          }
        }
        var e = N.getImageConf(this.skin);
        if (e) {
          var n = N.addSpriteSheet(e.url);
          if (n && n.textures && n.textures[this.skin]) {
            this.$renderer2.texture = n.textures[this.skin];
          }
        } else {
          this.$renderer2.texture = PIXI.Texture.from(t);
          this.$renderer2.width = this.width;
          this.$renderer2.height = this.height;
        }
        this.$renderer2.renderable = true;
      }
    };
    t.prototype.$setTexture = function () {
      if (this.skin && !this.texture_) {
        this.texture_ = h.loader.get(this.skin);
      }
    };
    t.prototype.getWidth_ = function () {
      if (this.width_ != undefined) {
        return this.width_;
      }
      this.$setTexture();
      if (this.texture_) {
        return this.texture_.width;
      }
      return o.prototype.getWidth_.call(this);
    };
    t.prototype.getHeight_ = function () {
      if (this.height_ != undefined) {
        return this.height_;
      }
      this.$setTexture();
      if (this.texture_) {
        return this.texture_.height;
      }
      return o.prototype.getHeight_.call(this);
    };
    t.prototype.draw = function (t) {
      this.$setTexture();
      if (this.texture_) {
        t.pushStyle();
        t.setBlendMode(this.blendMode);
        t.draw(
          this.skin_ || this.texture_,
          -this.pivotX,
          -this.pivotY,
          this.width,
          this.height,
          this.fillMode,
          this.grid,
          this.quad
        );
        t.popStyle();
      }
    };
    return t;
  })(P);
  h.Image = x;
  var D = (function (n) {
    __extends(t, n);
    function t() {
      return (n !== null && n.apply(this, arguments)) || this;
    }
    t.prototype.$initRenderer = function () {
      this.$renderer = new PIXI.Container();
    };
    t.prototype.sumChild = function (t) {
      if (!t) t = this;
      var e = 0;
      if (t.visible) {
        e += 1;
        for (var n in t.children_) {
          e += this.sumChild(t.children_[n]);
        }
      }
      return e;
    };
    t.prototype.isDown = function (t) {
      return h.player.keyboards[t] == 1;
    };
    t.prototype.size = function (t, e) {
      n.prototype.size.call(this, t, e);
      h.player.canvasChanged();
      return this;
    };
    return t;
  })(P);
  var I = (function () {
    function t() {}
    t.callLater = function (t, e, n) {
      L.push(new b(t, e, n));
    };
    t.startTimer = function (t, e) {
      if (R) {
        this.stopTimer(t, e);
        var n = new b(t, e);
        n.valid = true;
        R.push(n);
      } else {
        G("需要先启动引擎");
      }
    };
    t.stopTimer = function (t, e) {
      if (R) {
        var n = this.getTimerIndex(t, e);
        if (n >= 0) {
          R[n].valid = false;
          return;
        }
      }
    };
    t.getTimerIndex = function (t, e) {
      if (R) {
        var n = R.length;
        for (var o = n - 1; o >= 0; o--) {
          var r = R[o];
          if (t == r.func && e == r.thisObj) {
            return o;
          }
        }
      }
    };
    return t;
  })();
  h.Timer = I;
  var R;
  var L;
  var F = (function (r) {
    __extends(t, r);
    function t(t, e, n) {
      var o = r.call(this) || this;
      o.backgroundColor = "#444";
      o.preLoadImage = false;
      o.cleanScreen = true;
      o.showType = "ShowAll";
      o.mouseScaleX = 1;
      o.mouseScaleY = 1;
      o.sceneScaleX = 1;
      o.sceneScaleY = 1;
      o.sceneX = 0;
      o.sceneY = 0;
      o.lastTime = 0;
      o.totalTime = 0;
      o.totalTick = 0;
      o.$fps = 0;
      o.delta = 0;
      o.then = 0;
      o.now = 0;
      R = [];
      L = [];
      o.keyboards = {};
      o.$renderer = PIXI.autoDetectRenderer({
        view: t,
        width: e,
        height: n,
        forceCanvas: false,
        autoDensity: false,
      });
      o.mouseTestCount = 0;
      return o;
    }
    t.prototype.canvasChanged = function () {
      if (
        (h.stage === null || h.stage === void 0 ? void 0 : h.stage.width) > 0
      ) {
        this.$renderer.screen.width = this.canvas.width;
        this.$renderer.screen.height = this.canvas.height;
        if (this.showType == "ShowAll") {
          this.sceneScaleX = this.canvas.width / h.stage.width;
          this.sceneScaleY = this.canvas.height / h.stage.height;
        } else if (this.showType == "ShowCenter") {
          var t = Math.min(
            this.canvas.width / h.stage.width,
            this.canvas.height / h.stage.height
          );
          this.sceneScaleX = t;
          this.sceneScaleY = t;
          this.sceneX = Math.floor((this.canvas.width - h.stage.width * t) / 2);
          this.sceneY = Math.floor(
            (this.canvas.height - h.stage.height * t) / 2
          );
        }
        h.stage.$renderer.scale.set(this.sceneScaleX, this.sceneScaleY);
      }
      return this;
    };
    Object.defineProperty(t.prototype, "isFullSceen", {
      get: function () {
        return y();
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "canvas", {
      get: function () {
        return v;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "enableMouseMode", {
      get: function () {
        return f.enableMouseRight;
      },
      set: function (t) {
        f.enableMouseRight = t;
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.setTouchEventListener = function (t) {
      if (t === void 0) {
        t = 1;
      }
      i(t == 2);
    };
    t.prototype.keyboard = function (t, e) {
      if (t >= 0 && e >= 0 && this.keyboards[t] != e) {
        this.keyboards[t] = e;
        if (this.keyboards[t] == 1) {
          h.stage.event(m.KEY_DOWN, [t]);
        } else {
          h.stage.event(m.KEY_UP, [t]);
        }
      }
    };
    t.prototype.requestFullScreen = function () {
      var t = document.documentElement;
      var e =
        t.requestFullscreen ||
        t["mozRequestFullScreen"] ||
        t["webkitRequestFullScreen"];
      e && e.call(t);
    };
    t.prototype.exitFullscreen = function () {
      var t = document;
      var e =
        t.exitFullscreen ||
        t["mozCancelFullScreen"] ||
        t["webkitCancelFullScreen"];
      e && e.call(t);
    };
    t.prototype.$childrendCancelTouch = function (t, e) {
      f.$cancelTouchChildrend(t, e);
    };
    t.prototype.onfocus = function () {};
    t.prototype.onblur = function () {
      for (var t in this.keyboards) {
        if (this.keyboards[t] == 1) {
          this.keyboard(parseInt(t), 0);
        }
      }
    };
    t.prototype.update = function (t) {
      I.dt = t;
      var e = R.length;
      h.stage.event(m.ENTER_FRAME);
      for (var n = 0; n < e; n++) {
        var o = R[n];
        if (o && o.valid) o.runWith();
      }
      for (var n = e - 1; n >= 0; n--) {
        var o = R[n];
        if (!o || !o.valid) {
          var r = R.splice(n, 1)[0];
          r.clear();
        }
      }
      while (L.length) {
        var i = L.shift();
        i.runWith();
        i.clear();
      }
      if (this.enableAutoTestMouse && this.mouseTestCount > 0) {
        this.mouseTestCount = 0;
        f.$addTouchTest();
      }
      f.runEvent();
    };
    t.prototype.draw = function () {
      this.$renderer.render(h.stage.$renderer);
    };
    t.prototype.fillBackground = function (t) {};
    t.prototype.loop = function () {
      var t = this;
      if (u) {
        t.update(t.delta);
        if (t.cleanScreen) t.fillBackground();
        t.draw();
        var e = l;
        var n = H();
        this.totalTime += n - this.lastTime;
        this.lastTime = n;
        this.totalTick += 1;
        if (this.totalTime >= 1e3) {
          var o = Math.min(
            Math.ceil((this.totalTick * 1e3) / this.totalTime),
            e
          );
          this.$fps = o;
          this.totalTime = this.totalTime % 1e3;
          this.totalTick = 0;
        }
        while ((t.then = H()) - t.now <= 1e3 / e);
        t.delta = (t.then - t.now) / 1e3;
        t.now = H();
        u(function () {
          t.loop();
        });
      }
    };
    Object.defineProperty(t.prototype, "frameRate", {
      get: function () {
        return l;
      },
      set: function (t) {
        l = t;
        if (l <= 0) l = 300;
        if (l > 0 && l <= 60) {
          u = c || p;
        } else {
          u = p;
        }
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "fps", {
      get: function () {
        return this.$fps;
      },
      enumerable: false,
      configurable: true,
    });
    return t;
  })(E);
  h.Player = F;
  var B = (function () {
    function t(t) {
      this.$ = t;
      this.styles = [];
      this.states = [];
      if (!t.resetTransform) {
        t.resetTransform = function () {
          t.setTransform(1, 0, 0, 1, 0, 0);
        };
      }
      this.reset();
    }
    Object.defineProperty(t.prototype, "globalTransform", {
      get: function () {
        return this.globalTransformCount > 0;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "x", {
      get: function () {
        return this.cur ? this.cur.x : 0;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "y", {
      get: function () {
        return this.cur ? this.cur.y : 0;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "scaleX", {
      get: function () {
        return this.cur ? this.cur.scaleX : 1;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "scaleY", {
      get: function () {
        return this.cur ? this.cur.scaleY : 1;
      },
      enumerable: false,
      configurable: true,
    });
    Object.defineProperty(t.prototype, "alpha", {
      get: function () {
        return this.cur ? this.cur.alpha : 1;
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.reset = function () {
      this.useTransform = false;
      this.$.resetTransform();
      this.$.fillStyle = this.$.strokeStyle = "#fff";
      this.$.font = "12px Arial";
      this.$.textBaseline = "top";
      this.$.globalCompositeOperation = "source-over";
      this.$.lineWidth = 1;
      this.$.globalAlpha = 1;
      this.globalTransformCount = 0;
    };
    t.prototype.clone = function (t) {
      t.useTransform = this.useTransform;
      var e = [
        "globalCompositeOperation",
        "font",
        "fillStyle",
        "textBaseline",
        "lineWidth",
        "globalAlpha",
        "strokeStyle",
      ];
      for (var n in e) {
        t.$[n] = this.$[n];
      }
      for (var o in this.states) {
        var r = this.states[o];
        t.states[o] = {
          x: r.x,
          y: r.y,
          scaleX: r.scaleX,
          scaleY: r.scaleY,
          rotate: r.rotate,
          alpha: r.alpha,
        };
      }
      var i = t.states.length;
      t.cur = i ? t.states[i - 1] : undefined;
    };
    t.prototype.push = function (t, e) {
      this.useTransform = e;
      if (e) {
        this.globalTransformCount += 1;
        this.$.save();
        this.$.translate(this.x + t.x, this.y + t.y);
        this.$.scale(t.scaleX, t.scaleY);
        this.$.rotate((t.rotate * Math.PI) / 180);
        this.states.push({
          x: 0,
          y: 0,
          scaleX: 1,
          scaleY: 1,
          rotate: 0,
          alpha: this.alpha * t.alpha,
        });
      } else {
        var n = this.x + t.x;
        var o = this.y + t.y;
        var r = this.scaleX * t.scaleX;
        var i = this.scaleY * t.scaleY;
        var a = this.alpha * t.alpha;
        this.states.push({
          x: n,
          y: o,
          scaleX: r,
          scaleY: i,
          rotate: 0,
          alpha: a,
        });
      }
      var s = this.states.length;
      this.cur = s ? this.states[s - 1] : undefined;
      this.$.globalAlpha = this.alpha;
    };
    t.prototype.pop = function (t) {
      this.useTransform = t;
      this.states.pop();
      var e = this.states.length;
      this.cur = e ? this.states[e - 1] : undefined;
      this.$.globalAlpha = this.alpha;
      if (this.useTransform) {
        this.globalTransformCount -= 1;
        this.$.restore();
      }
    };
    t.prototype.pushStyle = function () {
      var t = [];
      for (var e = 0; e < arguments.length; e++) {
        t[e] = arguments[e];
      }
      var n = this.$;
      var o = {
        fillStyle: n.fillStyle,
        strokeStyle: n.strokeStyle,
        globalAlpha: n.globalAlpha,
        globalCompositeOperation: n.globalCompositeOperation,
        font: n.font,
      };
      if (t && t.length) {
        for (var r = 0, i = t; r < i.length; r++) {
          var a = i[r];
          o[a] = n[a];
        }
      }
      this.styles.push(o);
    };
    t.prototype.popStyle = function () {
      if (this.styles.length) {
        var t = this.styles.pop();
        for (var e in t) {
          this.$[e] = t[e];
        }
      }
    };
    t.prototype.drawRepeact = function (t, e, n, o, r, i) {
      if (e === void 0) {
        e = 0;
      }
      if (n === void 0) {
        n = 0;
      }
      var a = t.width,
        s = t.height,
        u = 0,
        l = 0;
      if (i) {
        u = i[0];
        l = i[1];
        a = i[2];
        s = i[3];
      }
      if (o == undefined) o = a;
      if (r == undefined) r = s;
      if (o > a || r > s) {
        var f = 0,
          c = void 0;
        do {
          c = 0;
          do {
            var p = Math.min(a, o - c * a);
            var d = Math.min(s, r - f * s);
            this.$.drawImage(
              t,
              u,
              l,
              p,
              d,
              this.x + e + c * a,
              this.y + n + f * s,
              p,
              d
            );
          } while (++c * a < o);
        } while (++f * s < r);
      } else if (o > 0 && r > 0) {
        this.$.drawImage(t, u, l, o, r, this.x + e, this.y + n, o, r);
      }
    };
    t.prototype.drawScale = function (t, e, n, o, r, i) {
      var a = t.width,
        s = t.height,
        u = 0,
        l = 0;
      if (i) {
        u = i[0];
        l = i[1];
        a = i[2];
        s = i[3];
      }
      if (o == undefined) o = a;
      if (r == undefined) r = s;
      this.$.drawImage(t, u, l, a, s, this.x + e, this.y + n, o, r);
    };
    t.prototype.draw9Grid = function (t, e, n, o, r, i, a, s) {
      var u = 0,
        l = 0,
        f = t.width,
        c = t.height;
      if (s) {
        u = s[0];
        l = s[1];
        f = s[2];
        c = s[3];
      }
      var p = a[0],
        d = a[1],
        h = a[2],
        v = a[3];
      var y = f - p - h,
        _ = c - v - d;
      if (o > 0) {
        var m = p > o ? o : p;
        this.drawScale(t, e, n, m, d, [u, l, m, d]);
        this.drawScale(t, e, n + d, m, r - d - _, [u, l + d, m, v]);
        this.drawScale(t, e, n + (r - _), m, _, [u, l + d + v, m, _]);
      }
      if (o - p - y > 0) {
        this.drawScale(t, e + p, n, o - p - y, d, [u + p, l, h, d]);
        this.drawScale(t, e + p, n + d, o - p - y, r - d - _, [
          u + p,
          l + d,
          h,
          v,
        ]);
        this.drawScale(t, e + p, n + (r - _), o - p - y, _, [
          u + p,
          l + d + v,
          h,
          _,
        ]);
      }
      if (o - p > 0) {
        var g = y;
        y = o - p >= y ? y : o - p;
        this.drawScale(t, e + o - y, n, y, d, [u + p + h + g - y, l, y, d]);
        this.drawScale(t, e + o - y, n + d, y, r - d - _, [
          u + p + h + g - y,
          l + d,
          y,
          v,
        ]);
        this.drawScale(t, e + o - y, n + (r - _), y, _, [
          u + p + h + g - y,
          l + d + v,
          y,
          _,
        ]);
      }
    };
    t.prototype.draw = function (t, e, n, o, r, i, a, s) {
      if (e === void 0) {
        e = 0;
      }
      if (n === void 0) {
        n = 0;
      }
      if (i === void 0) {
        i = "scale";
      }
      if (typeof t == "string") {
        var u = N.getImageConf(t);
        if (u) {
          t = u.url;
          e += u.offX;
          n += u.offY;
          o = o || u.width;
          r = r || u.height;
          var l = [u.x, u.y, u.width, u.height];
          if (!s) {
            s = l;
          } else {
            s[0] += l[0];
            s[1] += l[1];
            s[2] += l[2];
            s[3] += l[3];
          }
        }
        t = h.loader.get(t);
      }
      if (!t) return;
      if (a) {
        this.draw9Grid(t, e, n, o, r, i, a, s);
      } else if (i == "repeat" || i == "clip") {
        this.drawRepeact(t, e, n, o, r, s);
      } else {
        this.drawScale(t, e, n, o, r, s);
      }
    };
    t.prototype.drawSheets = function (t, e, n, o, r, i, a, s) {
      if (e === void 0) {
        e = 0;
      }
      if (n === void 0) {
        n = 0;
      }
      if (i === void 0) {
        i = "scale";
      }
      this.draw(t, e, n, o, r, i, a, s);
    };
    t.prototype.createImageData = function (t, e) {
      if (typeof t == "number") {
        return this.$.createImageData(t, e);
      }
      return this.$.createImageData(t);
    };
    t.prototype.putImageData = function (t, e, n, o, r, i) {
      this.$.putImageData(t, this.x + e, this.y + n);
    };
    t.prototype.print = function (t, e, n) {
      var o = [];
      for (var r = 3; r < arguments.length; r++) {
        o[r - 3] = arguments[r];
      }
      this.$.fillText(t, this.x + e, this.y + n);
    };
    t.prototype.print2 = function (t, e, n) {
      var o = [];
      for (var r = 3; r < arguments.length; r++) {
        o[r - 3] = arguments[r];
      }
      this.$.strokeText(t, this.x + e, this.y + n);
    };
    t.prototype.rect = function (t, e, n, o, r) {
      if (r == "fill") {
        this.$.fillRect(
          this.x + t,
          this.y + e,
          n * this.scaleX,
          o * this.scaleY
        );
      } else {
        this.$.strokeRect(
          this.x + t,
          this.y + e,
          n * this.scaleX,
          o * this.scaleY
        );
      }
    };
    t.prototype.setColor = function (t) {
      this.$.strokeStyle = this.$.fillStyle = t;
    };
    t.prototype.setBlendMode = function (t) {
      if (!t) return;
      var e = t;
      if (t == "add") {
        e = "lighter";
      }
      if (this.$.globalCompositeOperation == e) return;
      this.$.globalCompositeOperation = e;
    };
    return t;
  })();
  h.Graphic = B;
  var N = (function () {
    function t() {}
    t.setConf = function (t, e) {
      var n = t + "/" + e.file;
      if (this.confs[n]) {
        G("BitmapSheet配置覆盖:" + n);
      }
      for (var o in e.frames) {
        var r = e.frames[o];
        this.images[t + "/" + o + ".png"] = {
          x: r.x,
          y: r.y,
          width: r.w,
          height: r.h,
          sourceWidth: r.sourceW,
          sourceHeight: r.sourceH,
          offX: r.offX,
          offY: r.offY,
          url: n,
        };
      }
      this.confs[n] = { dir: t, url: n, conf: e };
    };
    t.getImageConf = function (t) {
      return this.images[t];
    };
    t.getSheets = function (t) {
      if (!this.newConfs[t]) {
        var e = this.confs[t];
        var n = {};
        if (e) {
          for (var o in e.conf.frames) {
            var r = e.conf.frames[o];
            var i = {
              frame: { x: r.x, y: r.y, w: r.w, h: r.h },
              spriteSourceSize: {
                x: r.offX,
                y: r.offY,
                w: r.sourceW,
                h: r.sourceH,
              },
              rotated: false,
              trimmed: false,
              pivot: { x: 0, y: 0 },
              SourceSize: { w: r.sourceW, h: r.sourceH },
            };
            n[e.dir + "/" + o + ".png"] = i;
          }
        }
        this.newConfs[t] = {
          frames: n,
          meta: {
            app: "https://www.codeandweb.com/texturepacker",
            version: "1.0",
            image: t,
            format: "RGBA8888",
            size: { w: 1024, h: 1024 },
            scale: "1",
            smartupdate:
              "$TexturePacker:SmartUpdate:2a3cee502340a8c8243e96dff9985f01:667d5a1a354c7d2debf3b718a5db978e:d31de202d7213cc8961db402b7b4c95a$",
          },
        };
      }
      return this.newConfs[t];
    };
    t.getBaseTexture = function (t) {
      if (this.baseTexture[t]) {
        return this.baseTexture[t];
      }
    };
    t.getSpriteSheet = function (t) {
      if (this.spriteSheets[t]) {
        return this.spriteSheets[t];
      }
    };
    t.addSpriteSheet = function (t, e, n) {
      var o = this;
      var r = this.getSpriteSheet(t);
      if (r) return r;
      if (this.spriteSheetParses.indexOf(t) >= 0) return;
      if (!e) return;
      this.spriteSheetParses.push(t);
      var i = new PIXI.Spritesheet(new PIXI.BaseTexture(e), this.getSheets(t));
      i.parse(function () {
        o.spriteSheets[t] = i;
        n && n();
      });
    };
    t.confs = {};
    t.images = {};
    t.newConfs = {};
    t.baseTexture = {};
    t.spriteSheets = {};
    t.spriteSheetParses = [];
    return t;
  })();
  h.BitmapSheets = N;
  var X = (function (e) {
    __extends(t, e);
    function t() {
      var t = e.call(this) || this;
      t.asyncLimit = 10;
      t.loadings_ = {};
      t.res_ = {};
      t.loadList = [];
      t.prefix = "";
      return t;
    }
    t.prototype.cache = function (t, e) {
      if (this.res_[e]) {
        V("已经存在的数据", e);
      }
      this.res_[e] = t;
    };
    t.prototype.remove = function (t) {
      this.res_[t] = undefined;
      delete this.res_[t];
    };
    t.prototype.get = function (t, e) {
      if (this.res_[t]) {
        return this.res_[t];
      }
      if (N.images[t] && this.res_[N.images[t].url]) {
        return N.images[t];
      }
      if (this.getItem) {
        var n = this.getItem(t);
        if (n) {
          return n;
        }
      }
      return e;
    };
    Object.defineProperty(t.prototype, "nowLoadingCount", {
      get: function () {
        var t = 0;
        for (var e in this.loadings_) t += 1;
        return t;
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.urlFromat = function (t) {
      var e = t;
      if (t.startsWith("blob:")) {
      } else {
        e = this.prefix + t;
      }
      return e;
    };
    t.prototype.loadImage = function (l, o, t, e, n, r, i) {
      var f = this;
      var a = N.images[l] && N.images[l].url;
      var s = a ? f.get(a) : f.get(l);
      if (s) {
        e && e.apply(n, [s]);
      } else {
        e && f.once(l, e, n);
        if (f.loadings_[l] > 0) {
          f.loadings_[l] += 1;
          return;
        } else {
          if (!f.loadings_[l] && f.nowLoadingCount >= this.asyncLimit) {
            f.loadList.push({
              url: l,
              alias: o,
              group: t,
              callback: e,
              thisObj: n,
              errCallback: r,
              errThisObj: i,
            });
          } else {
            l = a || l;
            f.loadings_[l] = 1;
            var u = function (t) {
              delete f.loadings_[l];
              while (
                f.loadList.length > 0 &&
                f.nowLoadingCount < f.asyncLimit
              ) {
                var e = f.loadList.shift(),
                  n = e.url,
                  o = e.alias,
                  r = e.group,
                  i = e.callback,
                  a = e.thisObj,
                  s = e.errCallback,
                  u = e.errThisObj;
                f.loadImage(n, o, r, i, a, s, u);
              }
            };
            var c = function (e) {
              if (a) {
                var n = N.confs[a];
                if (n) {
                  N.addSpriteSheet(n.url, d, function () {
                    if (!f.res_[l]) {
                      h.loader.cache(d, l);
                      o && h.loader.cache(d, o);
                    }
                    for (var t in n.conf.frames) {
                      f.event(n.dir + "/" + t + ".png", [f.res_[l]]);
                    }
                    u(e);
                  });
                }
              } else {
                if (!f.res_[l]) {
                  h.loader.cache(d, l);
                  o && h.loader.cache(d, o);
                }
                f.event(l, [f.res_[l]]);
                u(e);
              }
            };
            var p = function (t) {
              r && r.apply(i, [l]);
              f.event(m.ERROR, [l]);
              u(t);
            };
            var d = new HTMLImageElement_();
            d.crossOrigin = "anonymous";
            d.onload = c;
            d.onerror = p;
            d.src = this.urlFromat(l);
          }
        }
      }
    };
    return t;
  })(E);
  h.Loader = X;
  var U = (function () {
    function t(t) {
      this.target = t;
      this.update();
    }
    Object.defineProperty(t.prototype, "canvas", {
      get: function () {
        if (!this.canvas_) {
          var t = document.createElement("canvas");
          this.canvas_ = t;
          this.gr = new B(t.getContext("2d"));
        }
        this.canvas_.width = this.target.width;
        this.canvas_.height = this.target.height;
        return this.canvas_;
      },
      enumerable: false,
      configurable: true,
    });
    t.prototype.render = function (t) {
      this.render_();
      if (this.target.width > 1 && this.target.height > 1) {
        t.$.drawImage(this.canvas_, t.x, t.y);
      }
    };
    t.prototype.render_ = function () {
      var t = this.repaint;
      this.repaint = false;
      if (t && this.target.width > 1 && this.target.height > 1) {
        var e = this.canvas.getContext("2d");
        e.clearRect(0, 0, this.target.width + 1, this.target.height + 1);
        this.gr.reset();
        e.save();
        this.target["render"](this.gr);
        e.restore();
      }
    };
    t.prototype.update = function () {
      this.repaint = true;
    };
    return t;
  })();
  function H() {
    return Date.now() - s;
  }
  h.now = H;
  function G() {
    var t = [];
    for (var e = 0; e < arguments.length; e++) {
      t[e] = arguments[e];
    }
    console.log.apply(console, t);
  }
  h.log = G;
  function V() {
    var t = [];
    for (var e = 0; e < arguments.length; e++) {
      t[e] = arguments[e];
    }
    console.warn.apply(console, t);
  }
  h.warn = V;
})(XOF || (XOF = {}));
(function () {
  "use strict";
  var mo =
    typeof globalThis !== "undefined"
      ? globalThis
      : typeof window !== "undefined"
      ? window
      : typeof global !== "undefined"
      ? global
      : typeof self !== "undefined"
      ? self
      : {};
  function t(t) {
    return t &&
      t.__esModule &&
      Object.prototype.hasOwnProperty.call(t, "default")
      ? t["default"]
      : t;
  }
  function e(t, e) {
    return (e = { exports: {} }), t(e, e.exports), e.exports;
  }
  function n(t) {
    return (t && t["default"]) || t;
  }
  var p = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.ArraySort = function (t) {
        if (Object.prototype.toString.call(t) === "[object Function]") {
          for (var e = 0; e < this.length - 1; e++) {
            if (t.call(this, this[e], this[e + 1]) > 0) {
              var n = this[e],
                o = this[e + 1];
              this[e] = u(n, o).a;
              this[e + 1] = u(n, o).b;
              if (e > 0) {
                for (var r = e - 1; r >= 0; r--) {
                  if (t.call(this, this[r], this[r + 1]) > 0) {
                    var n = this[r],
                      o = this[r + 1];
                    this[r] = u(n, o).a;
                    this[r + 1] = u(n, o).b;
                  }
                }
              }
            }
          }
        } else {
          for (var e = 0; e < this.length - 1; e++) {
            var i = this[e];
            var a = this[e + 1];
            if (l(i, a)) {
              this[e] = u(i, a).a;
              this[e + 1] = u(i, a).b;
              if (e > 0) {
                for (var s = e - 1; s >= 0; s--) {
                  var i = this[s];
                  var a = this[s + 1];
                  if (l(i, a)) {
                    this[s] = u(i, a).a;
                    this[s + 1] = u(i, a).b;
                  }
                }
              }
            }
          }
        }
        function u(t, e) {
          return { a: e, b: t };
        }
        function l(t, e) {
          t = t.toString();
          e = e.toString();
          var n = t.length > e.length ? e.length : t.length;
          if (t !== "[object Object]" && e !== "[object Object]") {
            for (var o = 0; o < n; o++) {
              if (!isNaN(t.charCodeAt(o)) && !isNaN(e.charCodeAt(o))) {
                if (t.charCodeAt(o) > e.charCodeAt(o)) {
                  return true;
                } else if (t.charCodeAt(o) == e.charCodeAt(o)) {
                  continue;
                } else {
                  return false;
                }
              }
            }
            if (
              !isNaN(t.charCodeAt(n)) &&
              isNaN(e.charCodeAt(n)) &&
              t.charCodeAt(n - 1) == e.charCodeAt(n - 1)
            ) {
              return true;
            }
          }
          return false;
        }
        return this;
      };
      return t;
    })();
    e.default = n;
  });
  t(p);
  var u = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = {
      z: 90,
      x: 88,
      c: 67,
      v: 66,
      space: 32,
      1: 49,
      2: 50,
      3: 51,
      4: 52,
      5: 53,
      6: 54,
      a: 65,
      s: 83,
      d: 68,
      f: 70,
      g: 71,
      h: 72,
      q: 81,
      w: 87,
      e: 69,
      r: 82,
      t: 84,
      y: 86,
      u: 85,
      esc: 27,
      i: 73,
      n: 78,
      m: 77,
      k: 75,
      f1: 84,
      b: 66,
      f5: 80,
      up: 38,
      down: 40,
      left: 37,
      right: 39,
      enter: 13,
      buff: 32,
    };
    e.default = n;
  });
  t(u);
  var V = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.setConf = function (t, e) {
        this.i18n = t;
        this.dofState = e;
      };
      t.tr = function (t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        if (t && this.i18n.zhcn[t] && this.i18n.zhcn[t].value) {
          var o = this.i18n.zhcn[t].value;
          if (e.length)
            for (var r in e) {
              var i = "{" + r + "}";
              while (o.indexOf(i) >= 0) o = o.replace(i, e[r]);
            }
          return o;
        }
        return "{" + t + "}";
      };
      t.sr = function (t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        if (t && this.dofState[t] && this.dofState[t].value) {
          var o = this.dofState[t].value;
          if (e.length)
            for (var r in e) {
              var i = "{" + r + "}";
              while (o.indexOf(i) >= 0) o = o.replace(i, e[r]);
            }
          return o;
        }
        return "{" + t + "}";
      };
      return t;
    })();
    e.default = n;
  });
  t(V);
  var k = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function o() {}
      o.pointHitRect = function (t, e, n, o, r, i) {
        return t >= n && t <= n + r && e >= o && e < o + i;
      };
      o.testRect = function (t, e, n, o, r, i, a, s) {
        return t < r + a && e < i + s && t + n > r && e + o > i;
      };
      o.getScenePos = function (t, e, n, o, r, i) {
        var a = r / 2,
          s = i / 2;
        var u = 0,
          l = 0;
        if (n > r) {
          if (t > a && t < n - a) {
            u = -(t - a);
          } else if (t <= a) {
            u = 0;
          } else if (t >= n - a) {
            u = -(n - r);
          }
        }
        if (o > i) {
          if (e > s && e < o - s) {
            l = -(e - s);
          } else if (e <= s) {
            l = 0;
          } else if (e >= o - s) {
            l = -(o - i);
          }
        }
        return [u, l];
      };
      o.mapKeyMax = function (t) {
        return Math.max.apply(undefined, Object.keys(t));
      };
      o.format = function (t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        if (e.length) {
          for (var o in e) {
            var r = "{" + o + "}";
            while (t.indexOf(r) >= 0) t = t.replace(r, e[o]);
          }
          return t;
        }
        return t;
      };
      o.replace = function (t, e, n) {
        while (t.indexOf(e) >= 0) t = t.replace(e, n);
        return t;
      };
      o.JsonExtends = function (t, e) {
        var n;
        n = t instanceof Array ? [] : {};
        for (var o in t) n[o] = t[o];
        for (var o in e) n[o] = e[o];
        return n;
      };
      o.copy = function (t) {
        if (typeof t != "object") {
          return t;
        } else {
          var e = t instanceof Array ? [] : {};
          for (var n in t) {
            if (t.hasOwnProperty(n)) {
              e[n] = o.copy(t[n]);
            }
          }
          return e;
        }
      };
      o.merge = function (t, e) {
        if (Object.assign) {
          return Object.assign(t, e);
        } else {
          var n = void 0;
          if (e instanceof Array == t instanceof Array) {
            n = JSON.parse(JSON.stringify(t));
            for (var o in e) {
              if (typeof e[o] == "object") {
                n[o] = this.merge(t[o], e[o]);
              } else {
                n[o] = JSON.parse(JSON.stringify(e[o]));
              }
            }
          } else {
            n = JSON.parse(JSON.stringify(e));
          }
          return n;
        }
      };
      o.clone = function (t) {
        if (typeof t == "object") return JSON.parse(JSON.stringify(t));
        return t;
      };
      o.kvmap2arr = function (t) {
        var e = [];
        for (var n in t) {
          e.push({ k: parseFloat(n), v: t[n] });
        }
        return e;
      };
      o.kvMarge = function (t, e, n) {
        var o = {};
        for (var r in t) o[r] = 0;
        for (var r in e) o[r] = 0;
        for (var r in t) o[r] += t[r];
        for (var r in e) o[r] += e[r];
        if (n) {
          for (var r in o) t[r] = o[r];
          return t;
        }
        return o;
      };
      o.isVoidObject = function (t) {
        if (typeof t == "object") {
          for (var e in t) {
            return false;
          }
        }
        return true;
      };
      o.removeAllEvents = function (t, e) {
        for (var n in t.events_) {
          for (var o in t.events_[n]) {
            var r = t.events_[n][o];
            t.off(n, r.func, r.thisObj);
          }
        }
      };
      o.isIphone = function (t) {
        var e = navigator.userAgent;
        var n = !!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
        if (n) {
          if (screen.height == 812 && screen.width == 375) {
            return true;
          } else {
            return false;
          }
        }
      };
      o.unitFormat = function (o, t, r, i) {
        var a = "";
        t.forEach(function (t, e) {
          var n = Math.max(0, (o || t || 0) && Math.floor(o / t));
          o -= n * t;
          if (i) a += i(n, r[e], e);
          else a += "" + n + r[e];
        });
        return a;
      };
      o.hasLinefeed = function (t) {
        return t && (t.indexOf("\n") >= 0 || t.indexOf("\r") >= 0);
      };
      o.formatMoney = function (t, e, n) {
        var o;
        if (!isNaN(parseFloat(t)) && isFinite(t)) {
          t = Number(t);
          t = (
            typeof e !== "undefined"
              ? (Math.round(t * Math.pow(10, e)) / Math.pow(10, e)).toFixed(e)
              : t
          ).toString();
          o = t.split(".");
          o[0] = o[0]
            .toString()
            .replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1" + (n || ","));
          return o.join(".");
        }
        return NaN;
      };
      o.compareVersion = function (t, e) {
        var n = t.split(".");
        var o = e.split(".");
        var r = n.length;
        var i = o.length;
        if (r == 0 || i == 0) {
          return r <= i ? -1 : 1;
        } else
          for (var a = 0; a < Math.max(r, i); a++) {
            var s = a < r ? parseInt(n[a]) : 0;
            var u = a < i ? parseInt(o[a]) : 0;
            if (s != u) {
              return (s < u ? -1 : 1) * (a + 1);
            }
          }
        return 0;
      };
      o.ArrayUnique = function (t) {
        var e = [],
          n;
        for (var o = 0, r = t.length; o < r; o++) {
          n = false;
          for (var i = 0, a = e.length; i < a; i++) {
            if (t[o] == e[i]) {
              n = true;
              break;
            }
          }
          if (!n) {
            e.push(t[o]);
          }
        }
        return e;
      };
      o.timeFormat = function (t, e) {
        var n = new Date(t);
        var o = {
          "M+": n.getMonth() + 1,
          "d+": n.getDate(),
          "h+": n.getHours(),
          "m+": n.getMinutes(),
          "s+": n.getSeconds(),
          "q+": Math.floor((n.getMonth() + 3) / 3),
          S: n.getMilliseconds(),
        };
        if (/(y+)/.test(e)) {
          e = e.replace(
            RegExp.$1,
            (n.getFullYear() + "").substr(4 - RegExp.$1.length)
          );
        }
        for (var r in o) {
          if (new RegExp("(" + r + ")").test(e)) {
            e = e.replace(
              RegExp.$1,
              RegExp.$1.length == 1
                ? o[r]
                : ("00" + o[r]).substr(("" + o[r]).length)
            );
          }
        }
        return e;
      };
      return o;
    })();
    e.default = n;
  });
  t(k);
  var dt = e(function (t, e) {
    var o =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(u);
    var i = n(V);
    var s = n(k);
    var a = (function () {
      function a() {}
      a.init = function () {};
      a.tr = function (t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        return i.default.tr.apply(i.default, o([t], e));
      };
      a.setConf = function (t) {
        this.conf = t["conf.json"];
        this.font = t["font.json"];
        this.i18n = t["i18n.json"];
        this.ai = t["ai.json"];
        this.offsets = t["offset.json"];
        this.pvf = t["pvf.json"];
        this.swordman_effect_animations = a.getPvfConf(
          "role/swordman/effect/animation.ani.json"
        );
      };
      a.setOImg = function (t) {
        this.oimgs = t;
      };
      a.getPath = function (t) {
        return t;
      };
      a.getFile = function (t) {
        return this.pvf[(this.getPath(t) + "").toLowerCase()];
      };
      a.getPvfConf = function (t) {
        var e = this.getFile(t);
        if (!e) {
          XOF.log(t + " file not found.");
        }
        return e;
      };
      a.getPvfAnimation = function (t, e) {
        return this.getPvfConf(t)[e];
      };
      a.getAnimationData = function (t, e) {
        var n = this.getFile(t);
        if (!n) {
          n = this.getFile(t + ".json");
        }
        if (n && e) {
          if (!n[e]) {
            return n[e + ".json"];
          }
          return n[e];
        }
        return n;
      };
      a.getKey = function (t) {
        return this.key[t];
      };
      a.getKeyIcon = function (t) {
        return a.conf.key.image[String.fromCharCode(t).toLowerCase()];
      };
      a.getEquipmentPath = function (t, e, n) {
        var o = a.conf.equanistaticdata.job_animation_detail_data[t];
        var r = a.conf.equanistaticdata.draw_detail_specification[e];
        var i = "";
        if (n == "weapon") {
          i = o.path + r.dir;
        } else if (n == "body");
        else {
          i = o.path + r.dir + o.prefix;
        }
        return i;
      };
      a.getSkinParkAnimation = function () {
        if (!this.parkAnimationGroup) {
          var t = s.default.clone(
            this.getPvfConf(
              a.conf.equanistaticdata.animation_detail_data["sm_body"].ani
            )
          );
          for (var e in t) {
            for (var n in t[e].frames) {
              t[e].frames[n].image[0] = "%s";
            }
          }
          this.parkAnimationGroup = t;
        }
        return this.parkAnimationGroup;
      };
      a.key = r.default;
      return a;
    })();
    e.default = a;
  });
  t(dt);
  var $ = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.default = {
      version: "1.0.0.44",
      gameVersion: "1.0.29",
      localVerstion: "1.0.0",
      maxWdith: 1600,
      width: 1280,
      height: 720,
      mapWidth: 853,
      mapHeight: 515,
      homeFramerate: 30,
      cityFramerate: 45,
      fightFrameRate: 60,
      update: "http://103.45.161.68:8818/update/",
      request: "http://103.45.161.68:8189/",
      socket: "http://103.45.161.68:9090/",
      exchangeLink: "https://www.yiranpay.com/mall/?link=u6159f7bac77ff",
      debug2: false,
    };
  });
  t($);
  var h = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t["onInit"] = "$onInit";
      t["onOpen"] = "$onOpen";
      t["onOpened"] = "$onOpened";
      t["onClose"] = "$onClose";
    })(n || (n = {}));
    e.default = n;
  });
  t(h);
  var f = e(function (t, e) {
    var s =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n($);
    var u = n(h);
    var r = (function () {
      function t() {
        this.views_ = {};
        this.opens_ = {};
        this.caches_ = {};
      }
      t.prototype.scale = function (t, e) {
        if (t === void 0) {
          t = 1;
        }
        if (e === void 0) {
          e = 1;
        }
        this.layer.scale(t, e);
      };
      Object.defineProperty(t.prototype, "mouseX", {
        get: function () {
          return this.layer ? this.layer.mouseX * (1 / this.layer.scaleX) : 0;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "mouseY", {
        get: function () {
          return this.layer ? this.layer.mouseY * (1 / this.layer.scaleY) : 0;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.localToLayer = function (t, e, n) {
        if (e === void 0) {
          e = 0;
        }
        if (n === void 0) {
          n = 0;
        }
        var o = 0,
          r = 0;
        if (this.layer.contains(t)) {
          var i = t.localToParent(e, n);
          o = i.x;
          r = i.y;
          var a = t.parent;
          if (a && a != this.layer) {
            i = this.localToLayer(a, o, r);
            o = i.x;
            r = i.y;
          }
        } else {
          o = e;
          r = n;
        }
        return { x: o, y: r };
      };
      t.prototype.init = function () {
        var t = (this.layer = new XOF.Sprite());
        t.size(o.default.width, o.default.height);
        XOF.stage.addChildAt(t, 0);
      };
      t.prototype.getOpenView = function (t) {
        return this.opens_[t];
      };
      t.prototype.popupTop = function (t) {
        var e = this.layer.getChildIndex(t);
        if (e >= 0) {
          var n = void 0;
          for (var o = this.layer.numChild - 1; o > e; o--) {
            if (this.layer.getChildAt(o).orderIndex == t.orderIndex) {
              n = o;
              break;
            }
          }
          if (n) {
            this.layer.removeChildAt(e);
            this.layer.addChildAt(t, n);
          }
        }
      };
      t.prototype.setHot = function (t) {
        if (t == this.hot) return;
        if (this.hot) this.hot.setHot(false);
        this.hot = t;
        if (this.hot) {
          this.hot.setHot(true);
        } else {
          var e = this.layer.children_;
          for (var n = e.length - 1; n >= 0; n--) {
            if (e[n].setHot) {
              this.setHot(e[n]);
              break;
            }
          }
        }
      };
      t.prototype.open = function (e, t, n) {
        if (n === void 0) {
          n = false;
        }
        if (n) this.close(e);
        if (!this.opens_[e]) {
          try {
            var o = this.createView(e);
            if (o) {
              this.opens_[e] = o;
              o.event(u.default.onOpen, t ? s([], t) : undefined);
              var r = this.layer.children_;
              var i = 0;
              for (var a = r.length - 1; a >= 0; a--) {
                if (r[a].orderIndex <= o.orderIndex) {
                  i = a + 1;
                  break;
                }
              }
              this.layer.addChildAt(o, i);
              this.order();
              o.event(u.default.onOpened);
            } else {
              XOF.log("无法正确初始化界面", e);
            }
          } catch (t) {
            XOF.log("无法正确初始化界面:" + e, t);
            delete this.opens_[e];
          }
        }
      };
      t.prototype.order = function () {
        var t = this.layer.children_.length;
        var e = false;
        for (var n = t - 1; n >= 0; n--) {
          var o = this.layer.getChildAt(n);
          o.visible = !e;
          if (o.fullview) {
            e = true;
          }
        }
      };
      t.prototype.createView = function (t) {
        if (this.caches_[t]) {
          var e = this.caches_[t];
          delete this.caches_[t];
          return e;
        } else {
          var n = this.views_[t];
          if (n) {
            return new n();
          }
        }
      };
      t.prototype.close = function (t, e) {
        if (this.opens_[t]) {
          var n = this.opens_[t];
          n.event(u.default.onClose, e ? s([], e) : undefined);
          n.removeSelf();
          if (n.viewCache) this.caches_[t] = n;
          delete this.opens_[t];
          this.order();
        }
      };
      t.prototype.closeAll = function () {
        for (var t in this.opens_) {
          this.closeView(this.opens_[t]);
        }
      };
      t.prototype.closeView = function (t, e) {
        for (var n in this.opens_) {
          if (this.opens_[n] == t) {
            this.close(n, e);
          }
        }
      };
      t.prototype.isOpen = function (t) {
        return !!this.getOpenView(t);
      };
      t.prototype.register = function (t, e) {
        this.views_[t] = e;
      };
      return t;
    })();
    e.default = r;
  });
  t(f);
  var c = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.ctrls_ = {};
      }
      t.prototype.register = function (t, e) {
        this.ctrls_[t] = e;
      };
      t.prototype.getCtrl = function (t) {
        return this.ctrls_[t];
      };
      return t;
    })();
    e.default = n;
  });
  t(c);
  var d = e(function (t, e) {
    var r =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.TimerHandler = void 0;
    var n = (function () {
      function t() {
        this.timers = [];
        XOF.Timer.startTimer(this.update, this);
        XOF.stage.on(XOF.Event.ENTER_FRAME, this.updateFrame, this);
      }
      t.prototype.callLater = function (t, e) {
        var n = [];
        for (var o = 2; o < arguments.length; o++) {
          n[o - 2] = arguments[o];
        }
        var r = new s(t, e, n);
        r.count = 1;
        r.cur = 0;
        r.time = 0;
        r.type = "calllater";
        this.timers.push(r);
        return r;
      };
      t.prototype.cleanAll = function () {
        var t = this.timers.length;
        for (var e = t - 1; e >= 0; e--) {
          var n = this.timers[e];
          n.valid = false;
        }
      };
      t.prototype.frame = function (t, e, n, o) {
        var r = [];
        for (var i = 4; i < arguments.length; i++) {
          r[i - 4] = arguments[i];
        }
        var a = new s(n, o, r);
        a.count = e;
        a.cur = 0;
        a.time = t;
        a.type = "frame";
        this.timers.push(a);
        return a;
      };
      t.prototype.delay = function (t, e, n, o) {
        var r = [];
        for (var i = 4; i < arguments.length; i++) {
          r[i - 4] = arguments[i];
        }
        var a = new s(n, o, r);
        a.count = e;
        a.cur = 0;
        a.time = t;
        a.type = "delay";
        this.timers.push(a);
        return a;
      };
      t.prototype.removeTimerHandler = function (t) {
        if (t) {
          t.valid = false;
        }
      };
      t.prototype.remove = function (t, e) {
        for (var n = 0; n < this.timers.length; n++) {
          var o = this.timers[n];
          if (o.func == t && o.thisObj == e) {
            o.valid = false;
          }
        }
      };
      t.prototype.update = function (t) {
        t = XOF.Timer.dt;
        for (var e = 0; e < this.timers.length; e++) {
          var n = this.timers[e];
          if (n.valid) {
            if (n.type == "delay") {
              n.cur += t * 1e3;
              if (n.cur >= n.time) {
                n.cur -= n.time;
                n.runWith();
              }
            } else if (n.type == "calllater") {
              n.runWith();
            }
          }
        }
        this.cleanUnvalid();
      };
      t.prototype.updateFrame = function () {
        for (var t = 0; t < this.timers.length; t++) {
          var e = this.timers[t];
          if (e.valid && e.type == "frame") {
            e.cur += 1;
            if (e.cur >= e.time) {
              e.cur = 0;
              e.runWith();
            }
          }
        }
        this.cleanUnvalid();
      };
      t.prototype.cleanUnvalid = function () {
        var t = this.timers.length;
        for (var e = t - 1; e >= 0; e--) {
          var n = this.timers[e];
          if (!n.valid) this.timers.splice(e, 1);
        }
      };
      return t;
    })();
    e.default = n;
    var s = (function () {
      function t(t, e, n) {
        this.thisObj = e;
        this.func = t;
        this.params = n;
        this.valid = true;
      }
      t.prototype.runWith = function (t) {
        var e, n, o;
        if (this.valid) {
          if (t || this.params) {
            if (t && this.params) {
              (e = this.func).call.apply(
                e,
                r(r([this.thisObj], this.params), t)
              );
            } else if (t) {
              (n = this.func).call.apply(n, r([this.thisObj], t));
            } else {
              (o = this.func).call.apply(o, r([this.thisObj], this.params));
            }
          } else this.func.call(this.thisObj);
          this.count--;
          this.valid = this.count != 0;
        }
      };
      t.prototype.clear = function () {
        delete this.thisObj;
        delete this.func;
        delete this.params;
        delete this.count;
        delete this.valid;
        delete this.cur;
        delete this.time;
        delete this.type;
      };
      return t;
    })();
    e.TimerHandler = s;
  });
  t(d);
  d.TimerHandler;
  var w = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.randomInt = function (t, e) {
        if (e <= t) return e;
        return Math.floor(Math.random() * (e - t + 1) + t);
      };
      t.randomList = function (t, e) {
        var n = 0;
        e.map(function (t) {
          return (n += t);
        });
        var o = this.randomInt(1, n);
        for (var r = 0, i = 1; r < e.length; r++) {
          if (this.isRange(o, i, i + e[r])) return t[r];
          i += e[r];
        }
        return [0];
      };
      t.rangeFixed = function (t, e, n) {
        if (n < e) n = e;
        if (t < e) t = e;
        if (t > n) t = n;
        return t;
      };
      t.randomHit = function (t) {
        if (t >= 1) return true;
        var e = Math.random();
        return e <= t;
      };
      t.toFixed = function (t, e) {
        var n = Math.pow(10, e);
        return Math.floor(t * n) / n;
      };
      t.isRange = function (t, e, n, o) {
        if (o === void 0) {
          o = true;
        }
        if ((o && t == n) || t == e) return true;
        return t > e && t < n;
      };
      t.radom1d1 = function () {
        return Math.random() > 0.5 ? -1 : 1;
      };
      t.beizer2 = function (t, e, n, o, r, i, a) {
        var s =
          Math.pow(1 - a, 2) * t + 2 * a * (1 - a) * n + Math.pow(a, 2) * r;
        var u =
          Math.pow(1 - a, 2) * e + 2 * a * (1 - a) * o + Math.pow(a, 2) * i;
        return [s, u];
      };
      t.toNumber = function (t) {
        t = parseFloat(t);
        if (typeof t == "number") {
          if (isNaN(t)) {
            t = 0;
          }
          if (t > Number.MAX_SAFE_INTEGER) {
            t = Number.MAX_SAFE_INTEGER;
          }
          if (t < Number.MIN_SAFE_INTEGER) {
            t = Number.MIN_SAFE_INTEGER;
          }
        }
        return t;
      };
      return t;
    })();
    e.default = n;
  });
  t(w);
  var v = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = n(w);
    var p = "GlobalSound";
    var o = (function () {
      function t() {
        this.mute = false;
        this.bgmVolume = 0.8;
        this.paused = false;
        this.keys = { move: "sound/move.ogg" };
        this.backgrounds = [];
        this.loadings = [];
        this.loadingComplete = [];
      }
      t.prototype.resume = function () {
        this.paused = false;
        while (this.pauseds.length) {
          var t = this.pauseds.pop();
          t.paused = false;
        }
        var e = this.getBindSoundList(p);
        for (var n = 0, o = this.backgrounds; n < o.length; n++) {
          var r = o[n];
          if (e.indexOf(r) == -1) {
            this.playBGM(r, true);
          }
        }
      };
      t.prototype.pause = function () {
        this.paused = true;
        for (var t in this.binds) {
          for (var e = 0, n = this.binds[t]; e < n.length; e++) {
            var o = n[e];
            var r = o.sound;
            if (r.playState == "playSucceeded") {
              if (!r.paused) {
                this.pauseds.push(r);
                r.paused = true;
              }
            }
          }
        }
      };
      t.prototype.setConf = function (t) {
        this.conf = t;
      };
      t.prototype.getSoundData = function (t) {
        var e;
        var n = (e = this.conf) !== null && e !== void 0 ? e : {};
        return n[t];
      };
      t.prototype.addSound = function (t, e) {
        var n = this.getSoundData(t);
        if (n && t) {
          if (
            n.type == "EFFECT" ||
            n.type == "VOICE" ||
            n.type == "MUSIC" ||
            n.type == "AMBIENT"
          ) {
            this.keys[t] = n.file;
          } else if (n.type == "RANDOM") {
            for (var o = 0; o < n.random.length - 1; o += 2) {
              this.addSound(n.random[o]);
            }
          }
        }
      };
      t.prototype.getSounds = function (t) {
        var e = [];
        var n = this.getSoundData(t);
        if (n) {
          if (
            n.type == "EFFECT" ||
            n.type == "VOICE" ||
            n.type == "MUSIC" ||
            n.type == "AMBIENT"
          ) {
            e.push(t);
          } else if (n.type == "RANDOM") {
            for (var o = 0; o < n.random.length - 1; o += 2) {
              e.push(n.random[o]);
            }
          }
        }
        return e;
      };
      t.prototype.getSoundsSrc = function (t) {
        var e = this;
        var n = this.getSounds(t);
        return n.map(function (t) {
          return e.getSoundData(t).file;
        });
      };
      t.prototype.getSound = function (t, e) {
        var n = this.getSoundData(t);
        if (n) {
          if (n.type == "EFFECT" || n.type == "VOICE" || n.type == "MUSIC") {
            return t;
          } else if (n.type == "RANDOM") {
            var o = n.random;
            var r = [],
              i = [];
            for (var a = 0; a < o.length - 2; a += 2) {
              r.push(o[a]);
              i.push(o[a + 1]);
            }
            return s.default.randomList(r, i);
          }
        }
      };
      t.prototype.soundLoaded = function (t) {
        var e = t.id,
          n = t.src,
          o = t.data,
          r = t.cache;
        var a = this;
        a.$caches[n] = e;
        function i(t, e) {
          if (typeof e == "object") {
            var n = e,
              o = n.timestamp,
              r = n.params,
              i = n.bind;
            if (r === null || r === void 0 ? void 0 : r.isBgm) {
              if (a.backgrounds.indexOf(t) >= 0) {
                if (a.getBindSoundList(p).indexOf(t) >= 0) {
                  return;
                }
                a.play(t, r, i);
              }
            } else {
              if (
                (r === null || r === void 0 ? void 0 : r.loop) == -1
                  ? true
                  : XOF.now() - o < 800
              ) {
                a.play(t, r, i);
              }
            }
          }
        }
        if (!r) {
          i(e, o);
        }
        var s = a.loadings.indexOf(e);
        if (s >= 0) {
          a.loadings.splice(s, 1);
          for (var u = a.loadingComplete.length - 1; u >= 0; u--) {
            if (a.loadingComplete[u].name == e) {
              i(a.loadingComplete[u].name, a.loadingComplete[u]);
              a.loadingComplete.splice(u, 1);
            }
          }
        }
      };
      t.prototype.loadSound = function (t, e) {
        if (!this.isLoad(t)) {
          this.addSound(t);
          if (this.keys[t]) {
            if (this.loadings.indexOf(t) >= 0) {
              if (e) this.loadingComplete.push(e);
              return;
            }
            createjs.Sound.registerSound(
              this.keys[t],
              t,
              e ? e : { cache: true }
            );
            this.loadings.push(t);
          } else {
            XOF.log("不存在的音效", t);
          }
        }
      };
      t.prototype.init = function () {
        if (this.$init) return;
        this.$init = true;
        if (!createjs.Sound.initializeDefaultPlugins()) {
          console.log("音效组件初始化失败..");
          return;
        }
        this.pauseds = [];
        this.$caches = {};
        this.binds = {};
        createjs.Sound.addEventListener(
          "fileload",
          createjs.proxy(this.soundLoaded, this)
        );
      };
      t.prototype.getBindId = function (t, e) {
        if (e === void 0) {
          e = false;
        }
        if (!this.bindsMap) this.bindsMap = {};
        var n;
        if (typeof t == "object") {
          for (var o in this.bindsMap) {
            if (this.bindsMap[o] == t) {
              n = o;
              break;
            }
          }
          if (!n && e) {
            n = XOF.hashCode();
            this.bindsMap[n] = t;
          }
        } else {
          n = t;
        }
        return n;
      };
      t.prototype.getBindSounds = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        var n = this.getBindId(t, true);
        var o = this.binds[n];
        if (!o && e) o = this.binds[n] = [];
        return o;
      };
      t.prototype.getBindSoundList = function (t) {
        var e = this.getBindId(t, true);
        var n = this.binds[e];
        var o = [];
        for (var r in n) {
          o.push(n[r].name);
        }
        return o;
      };
      t.prototype.isLoad = function (t) {
        return !!this.$caches[this.keys[t]];
      };
      t.prototype.hasPlay = function (t) {
        var e = this;
        var n = [];
        for (var o = 1; o < arguments.length; o++) {
          n[o - 1] = arguments[o];
        }
        var r = n.map(function (t) {
          return e.getSoundsSrc(t);
        });
        var i = this.getBindSounds(t);
        var a = n.length == 0;
        for (var s = 0, u = i; s < u.length; s++) {
          var l = u[s];
          var f = l.sound;
          if (a ? true : r.indexOf(f.src) >= 0) {
            if (f.playState == "playSucceeded") {
              return true;
            }
          }
        }
        return false;
      };
      t.prototype.playBGM = function (t, e) {
        if (this.backgrounds.indexOf(t) >= 0) {
          if (e == false) return;
        } else {
          this.backgrounds.push(t);
        }
        this.play(t, { name: t, loop: -1, volume: 0.4, isBgm: true }, p);
      };
      t.prototype.play = function (t, e, n) {
        var o;
        if (this.mute) return;
        if (this.paused) return;
        this.addSound(t);
        var r = this.getSound(t);
        if (r) t = r;
        if (this.isLoad(t)) {
          n = n || p;
          var i = this.keys[t];
          var a = this.getBindSounds(n);
          var s = void 0;
          for (var u = 0, l = a; u < l.length; u++) {
            var f = l[u];
            var c = f.sound;
            if (c.src == i) {
              if (c.playState == "playFinished") {
                s = c;
                break;
              }
              if (e === null || e === void 0 ? void 0 : e.overload) {
                break;
              }
              return;
            }
          }
          if (s) {
            s.play();
          } else {
            s = createjs.Sound.play(t, e);
            s.volume =
              (o = e === null || e === void 0 ? void 0 : e.volume) !== null &&
              o !== void 0
                ? o
                : 1;
            a.push({ name: t, sound: s });
            if (e === null || e === void 0 ? void 0 : e.completeDestroy) {
              s.on("complete", this.clean(s, t, n), this);
            }
          }
        } else {
          this.loadSound(t, {
            name: t,
            params: e,
            timestamp: XOF.now(),
            bind: n,
          });
        }
      };
      t.prototype.stopAll = function (t) {
        var e = this.getBindSounds(t);
        for (var n = 0, o = e; n < o.length; n++) {
          var r = o[n];
          r.sound.stop();
        }
      };
      t.prototype.stop = function (t, e) {
        var i = this;
        var a = this.getBindId(e);
        var s = this.binds[a];
        var n = this.getSounds(t);
        var o = function (t) {
          if (i.isLoad(t)) {
            var e = i.keys[t];
            if (!s) s = i.binds[a] = [];
            var n = s.length;
            for (var o = n - 1; o >= 0; o--) {
              var r = s[o].sound;
              if (r.src == e) {
                r.stop();
                r.destroy();
                s.splice(o, 1);
                break;
              }
            }
          }
        };
        if (n.length) {
          for (var r in n) {
            var u = n[r];
            o(u);
          }
        } else {
          o(t);
        }
      };
      t.prototype.clean = function (i, a, s) {
        return function () {
          var t = this.getBindId(s);
          var e = this.binds[t];
          if (this.isLoad(a)) {
            this.keys[a];
            if (!e) e = this.binds[t] = [];
            var n = e.length;
            for (var o = n - 1; o >= 0; o--) {
              var r = e[o].sound;
              if (r == i) {
                r.stop();
                r.destroy();
                e.splice(o, 1);
                break;
              }
            }
          }
        };
      };
      t.prototype.cleanAll = function (t) {
        this.stopAll(t);
        var e = this.getBindId(t);
        if (e) {
          delete this.bindsMap[e];
          delete this.binds[e];
        }
      };
      t.prototype.stopBgm = function (t) {
        if (t) {
          var e = this.backgrounds.indexOf(t);
          if (e >= 0) {
            this.backgrounds.splice(e, 1);
            this.stop(t, p);
          }
        } else {
          while (this.backgrounds.length) {
            this.stop(this.backgrounds.pop(), p);
          }
        }
      };
      return t;
    })();
    e.default = o;
  });
  t(v);
  var q = e(function (t, e) {
    var o =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(f);
    var i = n(c);
    var a = n(d);
    var s = n(v);
    var u = n($);
    var l = (function () {
      function n() {}
      n.init = function () {
        n.ctrlMgr = new i.default();
        n.viewMgr = new r.default();
        n.timerMgr = new a.default();
        n.sound = new s.default();
      };
      n.log = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        n.log2.apply(n, o([0], t));
      };
      n.log2 = function (t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        if (t > 0) {
          if (u.default.debug2) {
            XOF.log.apply(XOF, e);
          }
        } else {
          XOF.log.apply(XOF, e);
        }
      };
      n.logx = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        n.log.apply(n, o([2], t));
      };
      n.log3 = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        for (var n in t) {
          this.str += t[n] + "\t";
        }
        this.str += "\n";
      };
      n.log3t = function () {
        XOF.log(this.str);
        this.str = "";
      };
      n.str = "";
      return n;
    })();
    e.default = l;
  });
  t(q);
  var K = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.STEP1_LOGIN_ACCOUNTS = "STEP_LOGIN_ACCOUNTS";
      t.STEP2_LOGIN_SERVER_ROLE = "STEP_LOGIN_SERVER_ROLE";
      t.STEP3_ROLE_SELECT = "STEP_ROLE_SELECT";
      t.STEP4_ROLE_DATA_LOADED = "STEP_ROLE_DATA_LOADED";
      t.STEP5_ENTER_CITY = "STEP5_ENTER_CITY";
      t.STEP6_START_BEFORE = "STEP6_START_BEFORE";
      t.LOGIN_ANOTHER_OFFLINE = "LOGIN_ANOTHER_OFFLINE";
      t.LOGIN_LOADED = "LOGIN_LOADED";
      t.BACKHOME = "BACKHOME";
      t.GAME_LOGIN = "GAME_LOGIN";
      t.GAME_START = "GAME_START";
      t.GAME_OFFLINE = "GAME_OFFLINE";
      t.INIT_CONFIGS = "INIT_CONFIGS";
      t.INIT_MODULES = "INIT_MODULES";
      t.CHARACTER_CREATE_COMPLETE = "CHARACTOR_CREATE_COMPLETE";
      t.CHARACTER_SELECT_COMPLETE = "CHARACTER_SELECT_COMPLETE";
      t.SOCKET_CONNECT = "SOCKET_CONNECT";
      t.SOCKET_DISCONNECT = "SOCKET_DISCONNECT";
      t.SOCKET_RECEICE = "SOCKET_RECEICE";
      t.SOCKET_ERROR = "SOCKET_ERROR";
      t.HOT_UPDATE_STATE = "HOT_UPDATE_STATE";
      t.HOT_UPDATE = "HOT_UPDATE";
      return t;
    })();
    e.default = n;
  });
  t(K);
  var Y = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["Hero"] = 0)] = "Hero";
      t[(t["Map"] = 1)] = "Map";
      t[(t["Home"] = 2)] = "Home";
      t[(t["Login"] = 3)] = "Login";
      t[(t["Bag"] = 4)] = "Bag";
      t[(t["Mouse"] = 5)] = "Mouse";
      t[(t["Setting"] = 6)] = "Setting";
      t[(t["Shop"] = 7)] = "Shop";
      t[(t["Quest"] = 8)] = "Quest";
      t[(t["Skill"] = 9)] = "Skill";
      t[(t["Mail"] = 10)] = "Mail";
      t[(t["Dungeon"] = 11)] = "Dungeon";
      t[(t["Vip"] = 12)] = "Vip";
      t[(t["Storage"] = 13)] = "Storage";
      t[(t["Rank"] = 14)] = "Rank";
    })(n || (n = {}));
    e.default = n;
  });
  t(Y);
  var D = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      return t;
    })();
    e.default = n;
  });
  t(D);
  var I = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["Map"] = 0)] = "Map";
      t[(t["Home"] = 1)] = "Home";
      t[(t["Bottom"] = 2)] = "Bottom";
      t[(t["MonsterHp"] = 3)] = "MonsterHp";
      t[(t["MapLoading"] = 4)] = "MapLoading";
      t[(t["Login"] = 5)] = "Login";
      t[(t["LoginNotice"] = 6)] = "LoginNotice";
      t[(t["LoginRegister"] = 7)] = "LoginRegister";
      t[(t["LoginResetPassword"] = 8)] = "LoginResetPassword";
      t[(t["Tips"] = 9)] = "Tips";
      t[(t["FightUI"] = 10)] = "FightUI";
      t[(t["HomeUI"] = 11)] = "HomeUI";
      t[(t["CityUI"] = 12)] = "CityUI";
      t[(t["RoleMenu"] = 13)] = "RoleMenu";
      t[(t["ItemDetails"] = 14)] = "ItemDetails";
      t[(t["EquipSuitDetails"] = 15)] = "EquipSuitDetails";
      t[(t["Loading"] = 16)] = "Loading";
      t[(t["Loading2"] = 17)] = "Loading2";
      t[(t["Loading3"] = 18)] = "Loading3";
      t[(t["LoadingSimple"] = 19)] = "LoadingSimple";
      t[(t["NetLoading"] = 20)] = "NetLoading";
      t[(t["Finger"] = 21)] = "Finger";
      t[(t["Setting"] = 22)] = "Setting";
      t[(t["TextPopup"] = 23)] = "TextPopup";
      t[(t["NpcOption"] = 24)] = "NpcOption";
      t[(t["NpcDialog"] = 25)] = "NpcDialog";
      t[(t["ShopTips"] = 26)] = "ShopTips";
      t[(t["ShopCount"] = 27)] = "ShopCount";
      t[(t["MsgBox"] = 28)] = "MsgBox";
      t[(t["mHome"] = 29)] = "mHome";
      t[(t["ChangeRoom"] = 30)] = "ChangeRoom";
      t[(t["DungeonPaused"] = 31)] = "DungeonPaused";
      t[(t["DungeonStay"] = 32)] = "DungeonStay";
      t[(t["CharacterCreate"] = 33)] = "CharacterCreate";
      t[(t["GameQuit"] = 34)] = "GameQuit";
      t[(t["DungeonReward"] = 35)] = "DungeonReward";
      t[(t["DungeonDropMask"] = 36)] = "DungeonDropMask";
      t[(t["ItemAutoSell"] = 37)] = "ItemAutoSell";
      t[(t["FightSet"] = 38)] = "FightSet";
      t[(t["BagPackageList"] = 39)] = "BagPackageList";
      t[(t["RoleRename"] = 40)] = "RoleRename";
      t[(t["EquipmentUpgradeBook"] = 41)] = "EquipmentUpgradeBook";
      t[(t["EquipmentQualityAdjust"] = 42)] = "EquipmentQualityAdjust";
      t[(t["SystemSetting"] = 43)] = "SystemSetting";
      t[(t["DungeonMap"] = 44)] = "DungeonMap";
      t[(t["CharacterSelect"] = 45)] = "CharacterSelect";
      t[(t["Skill"] = 1e3)] = "Skill";
      t[(t["MenuProfile"] = 1001)] = "MenuProfile";
      t[(t["Bag"] = 1002)] = "Bag";
      t[(t["Shop"] = 1003)] = "Shop";
      t[(t["CDK"] = 1004)] = "CDK";
      t[(t["Mail"] = 1005)] = "Mail";
      t[(t["EquipmentUpgrade"] = 1006)] = "EquipmentUpgrade";
      t[(t["VipMonthGift"] = 1007)] = "VipMonthGift";
      t[(t["HellTower"] = 1008)] = "HellTower";
      t[(t["Activity"] = 1009)] = "Activity";
      t[(t["DungeonSelect"] = 1010)] = "DungeonSelect";
      t[(t["TaskMain"] = 1011)] = "TaskMain";
      t[(t["ItemCollect"] = 1012)] = "ItemCollect";
      t[(t["Storage"] = 1013)] = "Storage";
      t[(t["StorageCount"] = 1014)] = "StorageCount";
      t[(t["RankMain"] = 1015)] = "RankMain";
      t[(t["TestTower"] = 1016)] = "TestTower";
      t[(t["MailDetails"] = 1017)] = "MailDetails";
      t[(t["Quest"] = 1018)] = "Quest";
      t[(t["HeroProfile"] = 1019)] = "HeroProfile";
      t[(t["TowerSelect"] = 1020)] = "TowerSelect";
      t[(t["SkillUpgrade"] = 1021)] = "SkillUpgrade";
      t[(t["DungeonItemSet"] = 1022)] = "DungeonItemSet";
      t[(t["DungeonItemSetList"] = 1023)] = "DungeonItemSetList";
      t[(t["HeroProfileAttribute"] = 1024)] = "HeroProfileAttribute";
    })(n || (n = {}));
    e.default = n;
  });
  t(I);
  var ht = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.AttributeKeys =
      e.HitType =
      e.RoleCamp =
      e.RoleOrder =
      e.RoleEvent =
      e.RoleDirction =
      e.RoleActionMotion =
      e.RoleAction =
        void 0;
    var n = (function () {
      function t() {}
      t.ATTACK = "attack";
      t.MOVE = "move";
      t.MOVE_BACK = "moveback";
      t.STAY = "stay";
      t.REST = "rest";
      t.SIT = "sit";
      t.DOWN = "down";
      t.JUMP = "jump";
      t.DASH = "dash";
      t.DASH_ATTACK = "dashattack";
      t.DAMAGE1 = "damage1";
      t.DAMAGE2 = "damage2";
      t.DEATH = "death";
      t.LAST = "last";
      return t;
    })();
    e.RoleAction = n;
    var o = (function () {
      function t() {}
      t.ATTACK_MOTION_0 = "attack_motion_0";
      t.ATTACK_MOTION_1 = "attack_motion_1";
      t.ATTACK_MOTION_2 = "attack_motion_2";
      t.ATTACK_MOTION_3 = "attack_motion_3";
      t.ATTACK_MOTION_4 = "attack_motion_4";
      t.ATTACK_MOTION_5 = "attack_motion_5";
      t.ETC_MOTION_0 = "etc_motion_0";
      t.ETC_MOTION_1 = "etc_motion_1";
      t.ETC_MOTION_2 = "etc_motion_2";
      t.ETC_MOTION_3 = "etc_motion_3";
      t.ETC_MOTION_4 = "etc_motion_4";
      return t;
    })();
    e.RoleActionMotion = o;
    var r = (function () {
      function t() {}
      t.left = -1;
      t.right = 1;
      return t;
    })();
    e.RoleDirction = r;
    var i = (function () {
      function t() {}
      t.DEATH = "DEATH";
      return t;
    })();
    e.RoleEvent = i;
    (function (t) {
      t[(t["MAP_ITEM"] = 0)] = "MAP_ITEM";
      t[(t["NONE"] = 1)] = "NONE";
      t[(t["NPC"] = 1)] = "NPC";
      t[(t["HERO"] = 1)] = "HERO";
      t[(t["MONSTER"] = 1)] = "MONSTER";
      t[(t["EFFECT"] = 3)] = "EFFECT";
      t[(t["MAP_ITEM_TIP"] = 4)] = "MAP_ITEM_TIP";
    })(e.RoleOrder || (e.RoleOrder = {}));
    (function (t) {
      t[(t["NONE"] = 0)] = "NONE";
      t[(t["HERO"] = 1)] = "HERO";
      t[(t["MONSTER"] = 2)] = "MONSTER";
    })(e.RoleCamp || (e.RoleCamp = {}));
    var a = (function () {
      function t() {}
      t.SLASH = "slash";
      t.KNOCK = "knock";
      return t;
    })();
    e.HitType = a;
    var s = (function () {
      function t() {}
      t.STR = 100;
      t.STR_ADD = 101;
      t.STR_FINAL = 102;
      t.INT = 110;
      t.INT_ADD = 111;
      t.INT_FINAL = 112;
      t.CON = 120;
      t.CON_ADD = 121;
      t.CON_FINAL = 122;
      t.DEX = 130;
      t.MND = 140;
      t.ATK = 200;
      t.BASE_ATK = 201;
      t.ATK_ADD = 202;
      t.EXTRA_ATK = 203;
      t.MGK = 210;
      t.BASE_MGK = 211;
      t.MGK_ADD = 212;
      t.EXTRA_MGK = 213;
      t.PHY_DEF = 220;
      t.BASE_PHY_DEF = 221;
      t.PHY_DEF_ADD = 222;
      t.EXTRA_PHY_DEF = 223;
      t.MAG_DEF = 230;
      t.BASE_MAG_DEF = 231;
      t.MAG_DEF_ADD = 232;
      t.EXTRA_MAG_DEF = 233;
      t.HP = 240;
      t.BASE_HP = 241;
      t.HP_ADD = 242;
      t.EXTRA_HP = 243;
      t.MP = 250;
      t.BASE_MP = 251;
      t.MP_ADD = 252;
      t.EXTRA_MP = 253;
      t.Q = 260;
      t.BASE_Q = 261;
      t.Q_ADD = 262;
      t.EXTRA_Q = 263;
      t.BASE_ATK_SPD = 270;
      t.BASE_SKL_SPD = 271;
      t.BASE_MOV_SPD = 272;
      t.BASE_CRIT_DMG_ADD = 273;
      t.BASE_CITY_MOV_SPD = 274;
      t.ATK_SPD = 300;
      t.SKL_SPD = 301;
      t.MOV_SPD = 302;
      t.HIT_RATIO = 303;
      t.DODGE_RATIO = 304;
      t.CRIT_RATIO = 305;
      t.ATK_CRIT_RATIO = 306;
      t.MGK_CRIT_RATIO = 307;
      t.CRIT_DMG_ADD = 308;
      t.ATK_BACK_DMG_ADD = 309;
      t.MGK_BACK_DMG_ADD = 310;
      t.DMG_ADD = 311;
      t.DMG_REDUCE = 312;
      t.DMG_STIFF = 313;
      t.DMG_STIFF_ENEMY = 314;
      t.CITY_MOV_SPD = 315;
      t.BASE_SKILL_DMG_ADD = 316;
      t.DMG_EXTRA_ADD = 317;
      t.HP_REGEN = 400;
      t.MP_REGEN = 401;
      t.Q_REGEN = 402;
      t.HP_REGEN_RATE = 410;
      t.MP_REGEN_RATE = 411;
      t.Q_REGEN_RATE = 412;
      t.FIRE = 320;
      t.FIRE_STRENGTH = 321;
      t.FIRE_DEF = 322;
      t.FIRE_ADD_DAMAGE = 323;
      t.WATER = 330;
      t.WATER_STRENGTH = 331;
      t.WATER_DEF = 332;
      t.WATER_ADD_DAMAGE = 333;
      t.DARK = 340;
      t.DARK_STRENGTH = 341;
      t.DARK_DEF = 342;
      t.DARK_ADD_DAMAGE = 343;
      t.LIGHT = 350;
      t.LIGHT_STRENGTH = 351;
      t.LIGHT_DEF = 352;
      t.LIGHT_ADD_DAMAGE = 353;
      t.ELEMENT_STRENGTH = 360;
      t.ELEMENT_DEF = 361;
      t.DMG_REAL = 500;
      t.CD = 501;
      t.ALL_STATE_DEF = 590;
      return t;
    })();
    e.AttributeKeys = s;
  });
  t(ht);
  ht.AttributeKeys;
  ht.HitType;
  ht.RoleCamp;
  ht.RoleOrder;
  ht.RoleEvent;
  ht.RoleDirction;
  ht.RoleActionMotion;
  ht.RoleAction;
  var vt = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.MAP_ETC_VALUE = e.layerConst = e.layerConstValue = void 0;
    var n = (function () {
      function t() {}
      t.distantback = "distantback";
      t.distantback2 = "[distantback]";
      t.middleback = "middleback";
      t.middleback2 = "[middleback]";
      t.tile = "[tile]";
      t.extended_tile = "[extended tile]";
      t.closeback = "[closeback]";
      t.bottom = "[bottom]";
      t.close = "[close]";
      t.normal = "[normal]";
      t.cover = "[cover]";
      t.upper = "[upper]";
      return t;
    })();
    e.layerConstValue = n;
    e.layerConst = [
      n.distantback,
      n.distantback2,
      n.middleback,
      n.middleback2,
      n.extended_tile,
      n.tile,
      n.closeback,
      n.bottom,
      n.normal,
      n.close,
      n.cover,
      n.upper,
    ];
    e.MAP_ETC_VALUE = { MapObjectId: "$MapObjectId$" };
  });
  t(vt);
  vt.MAP_ETC_VALUE;
  vt.layerConst;
  vt.layerConstValue;
  var T = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["NORUMAL"] = 0)] = "NORUMAL";
      t[(t["SKILL"] = 1)] = "SKILL";
      t[(t["NPC_DIALOG"] = 2)] = "NPC_DIALOG";
      t[(t["MINIMAP"] = 3)] = "MINIMAP";
      t[(t["MAIN_UI_BOTTOM"] = 4)] = "MAIN_UI_BOTTOM";
      t[(t["MAIN_UI"] = 5)] = "MAIN_UI";
      t[(t["MAIN_UI2"] = 6)] = "MAIN_UI2";
      t[(t["WORLD_MAP"] = 7)] = "WORLD_MAP";
      t[(t["LOGIN"] = 8)] = "LOGIN";
      t[(t["TIPS"] = 9)] = "TIPS";
      t[(t["TIPS2"] = 10)] = "TIPS2";
      t[(t["LOADING_SIMPLE"] = 11)] = "LOADING_SIMPLE";
      t[(t["LOADING"] = 12)] = "LOADING";
      t[(t["FINGER"] = 13)] = "FINGER";
    })(n || (n = {}));
    e.default = n;
  });
  t(T);
  var x = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["CONFIRM"] = 9901)] = "CONFIRM";
      t[(t["CLOSE"] = 9902)] = "CLOSE";
      t[(t["NPC_OPTION_SELECT"] = 9903)] = "NPC_OPTION_SELECT";
      t[(t["CLOSE_ITEM_DETAILS"] = 9904)] = "CLOSE_ITEM_DETAILS";
      t[(t["SCROLLBAR_CHANGE"] = 9905)] = "SCROLLBAR_CHANGE";
      t[(t["ITEM_SLOT_UPDATE"] = 9906)] = "ITEM_SLOT_UPDATE";
      t[(t["MAP_RES_LOADED"] = 9907)] = "MAP_RES_LOADED";
      t[(t["PROGRESS"] = 9908)] = "PROGRESS";
      t[(t["ITEM_TAP"] = 9909)] = "ITEM_TAP";
      t[(t["RADIOGROUP_CHANGED"] = 9910)] = "RADIOGROUP_CHANGED";
      t[(t["SHOP_ITEM_TAP"] = 9911)] = "SHOP_ITEM_TAP";
      t[(t["DUNGEON_REWARD_ANIMATION"] = 9912)] = "DUNGEON_REWARD_ANIMATION";
      t[(t["DUNGEON_REWARD_SELECT"] = 9913)] = "DUNGEON_REWARD_SELECT";
    })(n || (n = {}));
    e.default = n;
  });
  t(x);
  var W = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function u() {}
      u.initComponent = function (t) {
        var e, n;
        if ((e = this.components[t])) {
          n = new e();
        } else if ((e = this.packageComponents[(t + "").toLowerCase()])) {
          n = this.parser(e);
        } else {
          XOF.log("实例类型'" + t + "'不存在.");
          n = new XOF.Sprite();
        }
        return n;
      };
      u.parser = function (t, e, n) {
        if (!n) {
          n = this.initComponent(t.className);
        }
        for (var o = 0, r = this.firstProps; o < r.length; o++) {
          var i = r[o];
          if (t.attributes[i] != undefined) n[i] = t.attributes[i];
        }
        for (var i in t.attributes) {
          if (this.firstProps.indexOf(i) >= 0) continue;
          n[i] = t.attributes[i];
        }
        if (e) {
          if (t.var) {
            e[t.var] = n;
          }
        } else {
          e = n;
        }
        for (var i in t.children) {
          var a = t.children[i];
          var s = u.parser(a, e);
          n.addChild(s);
        }
        return n;
      };
      u.initSkin = function (t, e, n) {
        var o = this.packageComponents[t.toLowerCase()];
        if (!o) {
          XOF.log("实例UI组件失败" + t);
          return;
        }
        this.parser(o, e, n);
      };
      u.registerComponent = function (t, e) {
        if (!(typeof e == "function" || typeof e == "object")) {
          XOF.log("组件" + t + "非正确的对象类型.");
          return;
        }
        if (this.components[t]) {
          XOF.log("组件" + t + "已存在将被重写.");
        }
        this.components[t] = e;
      };
      u.loadPackage = function (t) {
        if (t.list) {
          for (var e in t) {
            this.packageComponents[e.toLowerCase()] = t[e];
          }
        }
      };
      u.components = {};
      u.packageComponents = {};
      u.firstProps = ["font", "x", "y", "width", "height"];
      return u;
    })();
    e.default = n;
  });
  t(W);
  var N = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o($);
    var i = o(q);
    var a = o(x);
    var s = o(W);
    var u = o(k);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/RoleMenu/RoleMenu", t, t);
        t.size(r.default.width, r.default.height);
        t.imgBg.size(t.width, t.height);
        t.touchEnabled = t.imgBg.touchEnabled = true;
        t.bgCoin.grid = t.bgGold.grid = [7, 8, 5, 5];
        t.imgTitleBg.width = t.width;
        return t;
      }
      Object.defineProperty(t.prototype, "title", {
        get: function () {
          return this.labTitle.text;
        },
        set: function (t) {
          this.labTitle.text = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onClose = function () {
        this.btnBack.off(XOF.TouchEvent.TAP, this.close, this);
        i.default.eventMgr.off(1032, this.updateView, this);
        this.btnGoldAdd.off(XOF.TouchEvent.TAP, this.onClickGoldAdd, this);
        this.btnCoinAdd.off(XOF.TouchEvent.TAP, this.onClickCoinAdd, this);
      };
      t.prototype.onOpen = function () {
        this.btnBack.on(XOF.TouchEvent.TAP, this.close, this);
        i.default.eventMgr.on(1032, this.updateView, this);
        this.btnGoldAdd.on(XOF.TouchEvent.TAP, this.onClickGoldAdd, this);
        this.btnCoinAdd.on(XOF.TouchEvent.TAP, this.onClickCoinAdd, this);
        this.updateView();
      };
      t.prototype.updateView = function () {
        this.labCoin.text = u.default.formatMoney(i.default.userData.bag.coin);
        this.labGold.text = u.default.formatMoney(i.default.userData.bag.gold);
      };
      t.prototype.onClickGoldAdd = function () {
        i.default.comm.msgBox("可以通过兑换获取点券");
      };
      t.prototype.onClickCoinAdd = function () {
        i.default.comm.msgBox("可以在商城中使用点券兑换金币");
      };
      t.prototype.close = function () {
        this.event(a.default.CLOSE);
      };
      return t;
    })(XOF.Sprite);
    e.default = l;
  });
  t(N);
  var R = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(T);
    var a = o(h);
    var s = o($);
    var u = o(N);
    function l(t) {
      if (t["$adjustRelative"]) {
        t["$adjustRelative"]();
      }
      if (t.children_) {
        for (var e in t.children_) {
          l(t.children_[e]);
        }
      }
    }
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.viewCache = false;
        t.orderIndex = i.default.NORUMAL;
        t.touchThrough = true;
        t.on(a.default.onClose, t.onClose, t);
        t.on(a.default.onOpen, t.onOpen, t);
        t.on(a.default.onOpened, t.onOpened, t);
        return t;
      }
      t.prototype.onOpen = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        this.timestamp = XOF.hashCode();
        if (this.width == 1280 && this.height == 720) {
          this.size(s.default.width, s.default.height);
          if (this["imgBlack"]) {
            this["imgBlack"].size(this.width, this.height);
          }
          if (this["bg"] instanceof u.default) {
            this["bg"].x = this.pivotX = -(s.default.width - 1280) / 2;
          }
        }
        l(this);
      };
      t.prototype.onClose = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
      };
      t.prototype.onOpened = function () {};
      t.prototype.loadRes = function () {};
      t.prototype.close = function () {
        r.default.viewMgr.closeView(this);
      };
      return t;
    })(XOF.Box);
    e.default = f;
  });
  t(R);
  var C = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    function n(t) {
      var e = [];
      for (var n = 1; n < arguments.length; n++) {
        e[n - 1] = arguments[n];
      }
      function y(t, e, n) {
        t = t || "";
        e = e || "";
        if (n) {
          if (typeof n == "object") {
            n = ": " + n.constructor.name;
          } else {
            n = ": " + n;
          }
        } else {
          n = "";
        }
        return "%!" + e + "(" + t + n + ")";
      }
      var o = /((%([\[\]\d*.+\-# ]+|)[vT%tbcdoqxXUeEfFgGsptg])|%%|%)/g,
        _ = /[vT%tbcdoqxXUeEfFgGsq]/;
      var m = 6;
      var g = e;
      g.splice(0, 0, null);
      var b = 0;
      t.search(/[\[\]]/g) >= 0;
      t = t.replace(o, function (t, e, n) {
        if (t == "%") {
          return y("No Variable");
        }
        var o = t.charAt(t.length - 1);
        if (!o.match(_)) {
          return y("Wrong Format", o);
        }
        if (o == "%") {
          return "%";
        }
        var r = t.substr(1, t.length - 2);
        var i = {
          minus: false,
          plus: false,
          sharp: false,
          space: false,
          zero: false,
        };
        var a = "";
        if (r.search(/[\[\]1-9.]/g) >= 0) {
          a = r.substr(0, r.search(/[\[\]1-9.]/g));
        } else {
          a = r;
        }
        (a.match(/[\+\-# 0]/g) || []).forEach(function (t) {
          switch (t) {
            case "+":
              i.plus = true;
              break;
            case "-":
              i.minus = true;
              break;
            case "#":
              i.sharp = true;
              break;
            case " ":
              i.space = true;
              break;
            case "0":
              i.zero = true;
              break;
          }
        });
        r = r.replace(a, "");
        while (r.indexOf("*") >= 0) {
          var s = r.indexOf("*"),
            u = r.indexOf("["),
            l = r.indexOf("]");
          if (u > s || l > s || l + 1 != s) {
            return y("Missing Index", o);
          }
          var f = r.substr(u + 1, l - u - 1);
          if (isNaN(Number(f)) || Number(f) < 1 || Number(f) != parseInt(f)) {
            return y("Bad Width", o);
          }
          if (f >= g.length) {
            return y("Bad Precision", o);
          }
          b = f;
          if (
            isNaN(Number(g[b])) ||
            Number(g[b]) < 1 ||
            Number(g[b]) != parseInt(g[b])
          ) {
            return y("Bad Precision", o, g[b]);
          }
          r = r.replace(r.substring(u, s + 1), g[b]);
        }
        if (r.match(/[\[\]]/g) && r.match(/[\[\]]/g).length == 2) {
          var u = r.indexOf("["),
            l = r.indexOf("]");
          if (u > l) {
            return y("MISSING INDEX", o);
          }
          var f = r.substr(u + 1, l - u - 1);
          if (isNaN(f) || f >= g.length || Number(f) != parseInt(f)) {
            return y("Bad Index", o, f);
          }
          b = Number(f);
          r = r.replace(r.substring(u, f + 1), "");
        } else {
          b++;
          if (b >= g.length) {
            return y("Bad Index", o);
          }
        }
        if (r.search(/[^\d\.]/g) >= 0) {
          return y("Bad Width", o, r);
        }
        var c = g[b];
        if (c === undefined) {
          return y("undefined");
        }
        if (c === null) {
          return y("null");
        }
        var p = m;
        if (r == "") {
          r = "1";
        } else if (r.includes(".")) {
          p = r.substr(r.indexOf(".") + 1);
          r = r.substr(0, r.indexOf("."));
        }
        p = Number(p);
        switch (o) {
          case "%":
            break;
          case "f":
          case "F":
            if (isNaN(Number(c))) {
              return y("Wrong Type", o, c);
            }
            try {
              c =
                (Number(c) >= 0 && i.plus ? "+" : "") +
                parseFloat(c).toPrecision(p + 1);
            } catch (t) {
              return y("Bad Precision", c, p);
            }
            break;
          case "T":
            if (typeof c == "object") {
              if (c.constructor.name == "") {
                c = "class anonymous";
              } else {
                c = "class " + c.constructor.name;
              }
            } else {
              c = typeof c;
            }
            break;
          case "U":
            if (isNaN(Number(c))) {
              return y("Wrong Type", o, c);
            }
            var d = parseInt(c).toString(16).toUpperCase();
            c =
              (Number(c) >= 0 && i.plus ? "+" : "") +
              "U+" +
              "0".repeat(4 - d.length >= 0 ? 4 - d.length : 0) +
              d;
            break;
          case "b":
            if (isNaN(Number(c))) {
              return y("Wrong Type", o, c);
            }
            c = (Number(c) >= 0 && i.plus ? "+" : "") + Number(c).toString(2);
            break;
          case "c":
            if (!isNaN(Number(c))) {
              c = String.fromCharCode(Number(c));
            } else if (typeof c == "string") {
              c = c.charAt(0);
              if (c == "") {
                return y("Empty Character", o, c);
              }
            } else {
              return y("Wrong Type", o, c);
            }
            break;
          case "d":
            if (isNaN(Number(c))) {
              return y("Wrong Type", o, c);
            }
            c = (Number(c) >= 0 && i.plus ? "+" : "") + parseInt(c);
            break;
          case "o":
            if (isNaN(Number(c))) {
              return y("Wrong Type", o, c);
            }
            c = (Number(c) >= 0 && i.plus ? "+" : "") + Number(c).toString(8);
            break;
          case "x":
          case "X":
            if (isNaN(Number(c))) {
              return y("Wrong Type", o, c);
            }
            c = (Number(c) >= 0 && i.plus ? "+" : "") + Number(c).toString(16);
            if (o == "X") {
              c = c.toUpperCase();
            }
            break;
          case "e":
          case "E":
            if (isNaN(Number(c))) {
              return y("Wrong Type", o, c);
            }
            try {
              c =
                (Number(c) >= 0 && i.plus ? "+" : "") +
                parseFloat(c).toExponential(p);
            } catch (t) {
              return y("Bad Precision", c, p);
            }
            if (o == "E") {
              c = c.toUpperCase();
            }
            break;
          case "g":
          case "G":
            if (isNaN(Number(c))) {
              return y("Wrong Type", o, c);
            }
            if (Number(c) >= 1e6);
            else if (Number(c) == parseInt(c)) {
              c = (Number(c) >= 0 && i.plus ? "+" : "") + parseInt(c);
            } else {
              c =
                (Number(c) >= 0 && i.plus ? "+" : "") +
                Number(c).toPrecision(p);
            }
            break;
          case "p":
            break;
          case "q":
            switch (typeof c) {
              case "number":
                c = "'" + String.fromCharCode(Math.floor(Math.abs(c))) + "'";
                break;
              case "string":
                c = '"' + c + '"';
                break;
              default:
                return y("Wrong Type", o, c);
            }
            break;
          case "s":
            c = c + "";
            break;
          case "t":
            c = Boolean(c);
            break;
          case "v":
            if (i.sharp && typeof c == "object") {
              c = JSON.stringify(c);
            } else if (Number(c) == parseInt(c)) {
              c = (Number(c) >= 0 && i.plus ? "+" : "") + parseInt(c);
            } else if (!isNaN(Number(c))) {
              c =
                (Number(c) >= 0 && i.plus ? "+" : "") +
                parseFloat(c).toPrecision(p + 1);
            } else {
              c = c + "";
            }
            break;
        }
        var h = " ";
        if (i.zero) {
          h = "0";
        }
        if (i.space) {
          c = " " + c;
        }
        var v = parseInt(r) - (c + "").length;
        if (v < 0) {
          v = 0;
        }
        if (i.minus) {
          c = c + "" + h.repeat(v);
        } else {
          c = h.repeat(v) + "" + c;
        }
        return c;
      });
      return t;
    }
    e.default = n;
  });
  t(C);
  var L = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.SET_FLAG = "SET_FLAG";
      t.CHANGE = "CHANAGE";
      t.DAMAGE_TYPE = "[DAMAGE TYPE]";
      t.PLAY_SOUND = "[PLAY SOUND]";
      t.LOOP = "LOOP";
      t.ATTACK_BOX = "ATTACK_BOX";
      t.DAMAGE_BOX = "DAMAGE_BOX";
      t.COMPLETE = "COMPLETE";
      t.UPDATE_DELAY = "UPDATE_DELAY";
      return t;
    })();
    e.default = n;
  });
  t(L);
  var y = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.centerX = t.centerY = t.offsetX = t.offsetY = 0;
        return t;
      }
      t.prototype.$renderUpdate = function () {
        var t;
        n.prototype.$renderUpdate.call(this);
        this.$renderer.pivot.set(
          this.centerX - this.offsetX,
          this.centerY - this.offsetY
        );
        this.$renderer.position.set(this.x_ + 0, this.y_ + 0);
        this.$renderer.scale.set(this.scaleX_, this.scaleY_);
        if (
          ((t = this === null || this === void 0 ? void 0 : this.$horizon) ===
            null || t === void 0
            ? void 0
            : t.visible) &&
          this.$renderer2.renderable &&
          this.$renderer2.texture
        ) {
          this.$horizon.texture = this.$renderer2.texture;
          this.$horizon.blendMode = this.$renderer2.blendMode;
          var e = -1;
          this.$horizon.pivot.set(this.$renderer.pivot.x, 0);
          this.$horizon.position.set(this.$horizon.texture.width, 0);
          this.$horizon.scale.set(e, 1);
        }
      };
      t.prototype.horizon = function (t) {
        if (t) {
          if (!this.$horizon) {
            this.$horizon = new PIXI.Sprite(undefined);
            this.$renderer.addChild(this.$horizon);
          }
        }
        if (this.$horizon) {
          this.$horizon.visible = t;
        }
      };
      t.prototype.center = function (t, e) {
        this.centerX = t;
        this.centerY = e;
        this.$renderUpdate();
        return this;
      };
      t.prototype.offset = function (t, e) {
        this.offsetX = t;
        this.offsetY = e;
        this.$renderUpdate();
        return this;
      };
      return t;
    })(XOF.Image);
    e.default = n;
  });
  t(y);
  var A = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var s =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = o(C);
    var f = o(dt);
    var c = o(L);
    var r = o(y);
    var i = (function (u) {
      n(t, u);
      function t() {
        var t = u.call(this) || this;
        t.reset();
        return t;
      }
      Object.defineProperty(t.prototype, "blend", {
        get: function () {
          return this.$blend || this.$blend2;
        },
        set: function (t) {
          this.$blend = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.reset = function () {
        this.rotate = 0;
        this.alpha2 =
          this.scaleX2 =
          this.scaleY2 =
          this.size_ =
          this.rate =
          this.alpha =
            1;
        this.$blend2 = this.offsets = this.skin = this.animation = undefined;
        this.count =
          this.time =
          this.max =
          this.index =
          this.offsetX =
          this.offsetY =
          this.centerY =
          this.centerX =
            0;
        this.resetFrameValue();
      };
      Object.defineProperty(t.prototype, "size_", {
        get: function () {
          return this.$size_;
        },
        set: function (t) {
          if (this.$size_ == t) return;
          this.$size_ = t;
          this.scaleX *= this.$size_ * this.scaleX2;
          this.scaleY *= this.$size_ * this.scaleY2;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.resetFrameValue = function () {
        var t;
        this.frameValue =
          ((t = {}),
          (t["[RGBA]"] = [255, 255, 255, 255]),
          (t["[IMAGE RATE]"] = [1, 1]),
          (t["[IMAGE ROTATE]"] = 0),
          (t["offset"] = [0, 0]),
          t);
      };
      Object.defineProperty(t.prototype, "totalTime", {
        get: function () {
          var t = 0;
          for (var e = 0; e < this.max; e++) {
            t += this.getFrameData(e).delay;
          }
          return t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.getWidth_ = function () {
        if (!this.width_) {
          if (this.skin) {
            var t = XOF.loader.get(this.skin);
            if (t) {
              return t.width;
            }
          }
        }
        return this.width_;
      };
      t.prototype.getHeight_ = function () {
        if (!this.height_) {
          if (this.skin) {
            var t = XOF.loader.get(this.skin);
            if (t) {
              return t.height;
            }
          }
        }
        return this.height_;
      };
      Object.defineProperty(t.prototype, "frame", {
        get: function () {
          return this.getFrameData(this.index);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.to = function (t, e) {
        if (t > this.max) return;
        if (e >= 0) this.time = e;
        this.index = t;
        this.updateFrame();
      };
      t.prototype.isUseTransform = function () {
        if (this.flipType == "HORIZON") return true;
        return u.prototype.isUseTransform.call(this);
      };
      t.prototype.draw = function (t, e, n, o, r) {
        if (e === void 0) {
          e = 0;
        }
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 1;
        }
        if (r === void 0) {
          r = 1;
        }
        u.prototype.draw.call(this, t);
        if (this.skin) {
          var i = XOF.loader.get(this.skin);
          if (i) {
            if (this.blend) {
              t.pushStyle("globalCompositeOperation");
              t.setBlendMode(this.blend);
            }
            var a = (this.width < i.width ? i.width : this.width) * Math.abs(o);
            var s = this.height * Math.abs(r);
            t.drawSheets(
              this.skin,
              (-this.centerX + this.offsetX) * o + e,
              (-this.centerY + this.offsetY) * r + n,
              a,
              s,
              this.fillMode
            );
            if (this.flipType == "HORIZON") {
              t.$.save();
              t.$.scale(-1, 1);
              t.drawSheets(
                this.skin,
                (-this.centerX + this.offsetX) * o + e,
                (-this.centerY + this.offsetY) * r + n,
                a,
                s,
                this.fillMode
              );
              t.$.restore();
            }
            if (this.blend) t.popStyle();
          }
        }
      };
      t.prototype.setParams = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        this.params = t;
        return this;
      };
      t.prototype.setAnimation = function (t, e) {
        var n, o, r;
        this.reset();
        if (t) {
          if (e) this.setParams.apply(this, e);
          this.animation = t;
          this.max =
            (r =
              (o =
                (n = this.animation) === null || n === void 0
                  ? void 0
                  : n.frames) === null || o === void 0
                ? void 0
                : o.length) !== null && r !== void 0
              ? r
              : 0;
          this.count = this.animation.loop ? -1 : 1;
          this.$blend2 = this.animation.blend;
          this.updateFrame();
          this.event(c.default.CHANGE);
        }
      };
      t.prototype.sync = function (t) {
        if (this.index == t.index) return this;
        this.index = t.index;
        this.updateFrame();
        this.event(c.default.CHANGE);
        return this;
      };
      t.prototype.updateInterPolation = function () {
        var t = this.frame;
        var e = this.index + 1;
        var n = this.getFrameData(e >= this.max ? 0 : e);
        if (
          t &&
          n &&
          (t["[INTERPOLATION]"] ||
            (n === null || n === void 0 ? void 0 : n["[INTERPOLATION]"]))
        ) {
          var o = Math.min(1, this.time / this.delay);
          var r = this.frameValue;
          for (var i in n) {
            if (r[i] || r[i] >= 0) {
              switch (i) {
                case "[RGBA]": {
                  this.alpha =
                    (p(r["[RGBA]"][3], n["[RGBA]"][3], o) / 255) * this.alpha2;
                  break;
                }
                case "[IMAGE RATE]": {
                  var a = p(r["[IMAGE RATE]"][0], n["[IMAGE RATE]"][0], o);
                  var s = p(r["[IMAGE RATE]"][1], n["[IMAGE RATE]"][1], o);
                  this.scale(
                    a * this.size_ * this.scaleX2,
                    s * this.size_ * this.scaleY2
                  );
                  break;
                }
                case "offset": {
                  var a = p(r["offset"][0], n["offset"][0], o);
                  var s = p(r["offset"][1], n["offset"][1], o);
                  if (this.animation.version == 1) {
                    this.center(-a, -s);
                  } else this.center(a, s);
                  break;
                }
                case "[IMAGE ROTATE]": {
                  this.rotate =
                    -p(r["[IMAGE ROTATE]"], n["[IMAGE ROTATE]"], o) *
                    (180 / Math.PI);
                  break;
                }
              }
            }
          }
        }
      };
      t.prototype.update = function (t) {
        if (this.count == 0 || this.max < 1) return;
        this.time += t * this.rate;
        this.updateInterPolation();
        while (this.time >= this.delay) {
          this.index += 1;
          if (this.index >= this.max) {
            this.count -= 1;
            if (this.count == 0) {
              this.index = this.max - 1;
              this.event(c.default.CHANGE);
              this.event(XOF.Event.COMPLETE);
              return;
            } else {
              this.index = 0;
              this.resetFrameValue();
              this.event(c.default.LOOP);
            }
          }
          this.time -= this.delay;
          this.updateFrame();
          this.event(c.default.CHANGE);
        }
        this.event(c.default.UPDATE_DELAY, [this.delay - this.time]);
      };
      t.prototype.getFrameData = function (t) {
        if (
          this.animation &&
          this.animation.frames &&
          this.animation.frames[t]
        ) {
          return this.animation.frames[t];
        }
        return undefined;
      };
      t.prototype.updateFrame = function () {
        var t;
        if (this.animation) {
          var e = this.animation.frames;
          if (e && e.length) {
            var n = e[this.index];
            if (n) {
              this.skin = n.img;
              if (
                !n.img &&
                ((t = n.image) === null || t === void 0 ? void 0 : t[0])
              ) {
                var o = n.image[1];
                var r = n.image[0];
                if (this.params && r.indexOf("%") >= 0)
                  r = l.default.apply(void 0, s([n.image[0]], this.params));
                this.skin = r + "/" + o + ".png";
                var i = this.offsets || f.default.offsets[r];
                if (i && i[o]) this.offset(i[o][0], i[o][1]);
              }
              this.skin &&
                !XOF.loader.get(this.skin) &&
                XOF.loader.loadImage(this.skin);
              this.scale(
                1 * this.size_ * this.scaleX2,
                1 * this.size_ * this.scaleY2
              );
              this.flipType = undefined;
              if (n["[DAMAGE TYPE]"] == "SUPERARMOR")
                this.event(c.default.DAMAGE_TYPE, [
                  n["[DAMAGE TYPE]"] == "SUPERARMOR",
                ]);
              this.$blend2 = undefined;
              switch (n["[GRAPHIC EFFECT]"]) {
                case "LINEARDODGE":
                  this.$blend2 = "add";
                  break;
                case "DARK":
                  this.$blend2 = "xor";
                  break;
              }
              this.blendMode = this.blend;
              this.alpha = this.alpha2;
              if (n["[RGBA]"])
                this.alpha = (n["[RGBA]"][3] / 255) * this.alpha2;
              if (n["[IMAGE RATE]"])
                this.scale(
                  n["[IMAGE RATE]"][0] * this.size_ * this.scaleX2,
                  n["[IMAGE RATE]"][1] * this.size_ * this.scaleY2
                );
              this.rotate = 0;
              if (n["[IMAGE ROTATE]"])
                this.rotate = -n["[IMAGE ROTATE]"] * (180 / Math.PI);
              if (n["[SET FLAG]"] >= 0)
                this.event(c.default.SET_FLAG, [n["[SET FLAG]"]]);
              if (n["attack box"]) this.event(c.default.ATTACK_BOX);
              if (n["damage box"]) this.event(c.default.DAMAGE_BOX);
              if (n["[PLAY SOUND]"])
                this.event(c.default.PLAY_SOUND, [n["[PLAY SOUND]"]]);
              if (n["[FLIP TYPE]"]) this.flipType = n["[FLIP TYPE]"];
              this.horizon(this.flipType == "HORIZON");
              if (n.pivot) this.pivot(n.pivot[0], n.pivot[1]);
              this.delay = n.delay || 1e3;
              if (this.animation.version == 1) {
                this.center(-n.offset[0], -n.offset[1]);
              } else this.center(n.offset[0], n.offset[1]);
              for (var a in n) {
                this.frameValue[a] = n[a];
              }
            }
          }
        }
      };
      return t;
    })(r.default);
    e.default = i;
    function p(t, e, n) {
      if (n >= 1) return e;
      if (n <= 0) return t;
      var o = e - t;
      return t + o * n;
    }
  });
  t(A);
  var g = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(A);
    var i = (function (d) {
      n(t, d);
      function t(t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        var o = d.call(this) || this;
        o.strokeAlpha = 1;
        o.autoRemove = true;
        if (t) o.setAnimation(t, e);
        o.on(XOF.Event.COMPLETE, o.onPlayComplete, o);
        return o;
      }
      Object.defineProperty(t.prototype, "shadow", {
        get: function () {
          var t;
          return this.$shadow
            ? this.$shadow
            : (t =
                this === null || this === void 0 ? void 0 : this.animation) ===
                null || t === void 0
            ? void 0
            : t.shadow;
        },
        set: function (t) {
          this.$shadow = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onPlayComplete = function () {
        if (this.autoRemove) {
          this.removeSelf();
        }
      };
      t.prototype.draw = function (t) {
        if (this.shadow) this.shadow_(t);
        if (this.stroke) this.stroke_(t);
        d.prototype.draw.call(this, t);
      };
      t.prototype.shadow_ = function (t, e, n, o, r) {
        if (o === void 0) {
          o = 1;
        }
        if (r === void 0) {
          r = 0.7;
        }
        var i = XOF.loader.get(this.skin);
        if (i) {
          t.pushStyle("globalCompositeOperation");
          t.$.globalAlpha *= 0.5;
          t.$.globalCompositeOperation = "xor";
          d.prototype.draw.call(this, t, 0, 0, o, r);
          t.$.globalAlpha = 1;
          t.$.fillStyle = "#000000";
          t.$.globalCompositeOperation = "destination-over";
          var a = t.x;
          var s = t.y;
          t.$.fillRect(
            (-this.centerX + this.offsetX) * o + a,
            (-this.centerY + this.offsetY) * r + s,
            (this.width < i.width ? i.width : this.width) * o,
            this.height * r
          );
          t.popStyle();
        }
      };
      t.prototype.stroke_ = function (t, e, n, o, r) {
        if (o === void 0) {
          o = 1;
        }
        if (r === void 0) {
          r = 1;
        }
        var i = XOF.loader.get(this.skin);
        if (i) {
          var a = 1;
          t.pushStyle("globalCompositeOperation");
          var s = [
            [-a, 0],
            [a, 0],
            [0, -a],
            [0, a],
          ];
          for (var u = 0, l = s; u < l.length; u++) {
            var f = l[u];
            t.$.globalAlpha = this.strokeAlpha || 1;
            t.$.globalCompositeOperation = "xor";
            d.prototype.draw.call(this, t, f[0], f[1], o, r);
            t.$.globalAlpha = 1;
            t.$.fillStyle = this.strokeColor || "#ff0000";
            t.$.globalCompositeOperation = "destination-over";
            var c = f[0] + t.x;
            var p = f[1] + t.y;
            t.$.fillRect(
              (-this.centerX + this.offsetX) * o + c,
              (-this.centerY + this.offsetY) * r + p,
              (this.width < i.width ? i.width : this.width) * o,
              this.height * r
            );
          }
          t.popStyle();
        }
      };
      t.prototype.setRate = function (t) {
        if (t === void 0) {
          t = 1;
        }
        this.rate = t;
      };
      t.prototype.addDelay = function (t) {
        this.delay += t;
      };
      Object.defineProperty(t.prototype, "isLast", {
        get: function () {
          return this.max - 1 == this.index && this.max > 0;
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(r.default);
    e.default = i;
  });
  t(g);
  var _ = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(g);
    var i = (function (n) {
      o(t, n);
      function t() {
        return (n !== null && n.apply(this, arguments)) || this;
      }
      t.prototype.setAnimationGroup = function (t, e) {
        this.order = 0;
        this.animationGroup = t;
        if (e) this.setParams(e);
        return this;
      };
      t.prototype.setAnimation = function (t, e) {
        if (typeof t == "string") t = this.animationGroup[t];
        n.prototype.setAnimation.call(this, t, e);
      };
      t.prototype.setAction = function (t, e) {
        this.setAnimation(t, e);
      };
      t.prototype.resetDelay = function () {
        if (this.frame) this.delay = this.frame.delay / 1e3;
      };
      t.prototype.onPlayComplete = function () {};
      t.prototype.destroy = function () {
        this.off(XOF.Event.COMPLETE, this.onPlayComplete, this);
        this.animation = this.animationGroup = undefined;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(_);
  var m = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.IActorComponentType = void 0;
    (function (t) {
      t["SKIN"] = "skin";
      t["EFFECT"] = "effect";
      t["DAMAGE_LABEL"] = "damage_label";
    })(e.IActorComponentType || (e.IActorComponentType = {}));
  });
  t(m);
  m.IActorComponentType;
  var E = e(function (t, e) {
    var l =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var f = n(dt);
    var c = n(C);
    var p = n(_);
    var o = (function () {
      function t(t) {
        if (t) this.setEquipment(t);
        this.hitBox = true;
      }
      Object.defineProperty(t.prototype, "visible", {
        get: function () {
          var t, e;
          return ((e =
            (t = this.animations) === null || t === void 0
              ? void 0
              : t.length) !== null && e !== void 0
            ? e
            : 0) > 0
            ? this.animations[0].visible
            : true;
        },
        set: function (t) {
          for (var e = 0, n = this.animations; e < n.length; e++) {
            var o = n[e];
            o.visible = t;
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.reset = function () {
        this.animations = [];
        this.zOrder = 0;
      };
      t.prototype.hasType = function (t) {
        var e, n;
        if (
          ((n =
            (e = this.equipmentTypes) === null || e === void 0
              ? void 0
              : e.indexOf(t)) !== null && n !== void 0
            ? n
            : 0) >= 0
        )
          return true;
        return this.equipmentType == t;
      };
      t.prototype.animationReset = function () {
        for (var t = 0, e = this.animations; t < e.length; t++) {
          var n = e[t];
          n.reset();
        }
      };
      t.prototype.setEquipment = function (t) {
        var e;
        if (this.equId == t) return;
        this.reset();
        this.equId = t;
        var n = (this.data = f.default.conf.equipment[t]);
        this.equipmentTypes = n.position;
        this.class = n.class;
        if (n) {
          this.equipmentType = n.type;
          if (this.equipmentType == "title") {
            XOF.log("称号需要在其他地方处理");
            return;
          }
          if (n.class == "character") {
            this.animationGroup = f.default.getPvfConf(
              f.default.conf.equanistaticdata.animation_detail_data[n["sani"]]
                .ani
            );
            if (n.sani == "sm_skin") {
              this.animationGroup = f.default.getSkinParkAnimation();
            }
            if (n["layer_variation"]) {
              var o = "swordman";
              switch (n.type) {
                case "weapon":
                  for (var r in n.layer_variation) {
                    var i = new p.default();
                    var a =
                      f.default.conf.equanistaticdata.draw_detail_specification[
                        r
                      ];
                    var s =
                      f.default.getEquipmentPath(o, r, this.equipmentType) +
                      c.default.apply(void 0, l([a.img], n.variation));
                    var u = s;
                    i.setParams(u);
                    if (a.blend == "LINEARDODGE") i.blend = "add";
                    i.order = n.layer_variation[r];
                    i.shadow = true;
                    i.skinType = this.equipmentType;
                    i.type = m.IActorComponentType.SKIN;
                    this.animations.push(i);
                  }
                  break;
                case "body":
                  XOF.log("todo: body...");
                  break;
                default:
                  for (var r in n.layer_variation) {
                    var i = new p.default();
                    var a =
                      f.default.conf.equanistaticdata.draw_detail_specification[
                        r
                      ];
                    var s =
                      f.default.getEquipmentPath(o, r, this.equipmentType) +
                      c.default.apply(void 0, l([a.img], n.variation));
                    var u = s;
                    if (a.blend == "LINEARDODGE") i.blend = "add";
                    i.order = n.layer_variation[r];
                    i.skinType = this.equipmentType;
                    i.type = m.IActorComponentType.SKIN;
                    i.setParams(u);
                    this.animations.push(i);
                  }
                  break;
              }
            } else {
              var i = new p.default();
              i.order = n["layer"];
              i.shadow = true;
              i.skinType = this.equipmentType;
              i.type = m.IActorComponentType.SKIN;
              this.animations.push(i);
            }
          } else if (n.class == "monster") {
            this.animationGroup = f.default.getPvfConf(n["ani"]);
            var i = new p.default();
            i.order = n["layer"];
            i.shadow = true;
            i.skinType = this.equipmentType;
            i.type = m.IActorComponentType.SKIN;
            this.animations.push(i);
            if (
              (e = n === null || n === void 0 ? void 0 : n.variation) ===
                null || e === void 0
                ? void 0
                : e.length
            ) {
              i.setParams.apply(i, n.variation);
            }
          }
        } else {
          console.log("不存在装备id:", t);
        }
      };
      t.prototype.setAnimationGroup = function (t, e) {
        this.animationGroup = t;
        return this;
      };
      t.prototype.setMotionAction = function (t, e) {
        var n;
        if (this.class == "monster") {
          if (e == "attack" || e == "etc") {
            var o = this.data[e + "_motion"];
            n = o[t];
          }
        }
        if (this.animationGroup && this.animationGroup[n]) {
          for (var r = 0, i = this.animations; r < i.length; r++) {
            var a = i[r];
            if (a.animation != this.animationGroup[n]) {
              a.setAnimation(this.animationGroup[n]);
            }
          }
        } else if (n) {
          XOF.log("缺失动画数据", n);
        } else {
          for (var s = 0, u = this.animations; s < u.length; s++) {
            var a = u[s];
            a.setAnimation(undefined);
          }
        }
      };
      t.prototype.setAction = function (t, e) {
        if (this.class == "monster") {
          t = this.data[e];
        }
        if (this.animationGroup) {
          for (var n = 0, o = this.animations; n < o.length; n++) {
            var r = o[n];
            if (r.animation != this.animationGroup[t]) {
              r.setAnimation(this.animationGroup[t]);
            }
          }
        } else {
          XOF.log("错误的动画数据", t);
        }
      };
      Object.defineProperty(t.prototype, "animation", {
        get: function () {
          return this.animations.length
            ? this.animations[0].animation
            : undefined;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "frame", {
        get: function () {
          return this.animations.length ? this.animations[0].frame : undefined;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.attach = function (t) {
        for (var e = 0, n = this.animations; e < n.length; e++) {
          var o = n[e];
          o.addTo(t);
        }
      };
      t.prototype.unAttach = function () {
        for (var t = 0, e = this.animations; t < e.length; t++) {
          var n = e[t];
          n.removeSelf();
        }
      };
      t.prototype.sync = function (t) {
        for (var e = 0, n = this.animations; e < n.length; e++) {
          var o = n[e];
          o.sync(t);
        }
      };
      Object.defineProperty(t.prototype, "shadow", {
        get: function () {
          var t;
          return (
            (t = this.animations) === null || t === void 0 ? void 0 : t.length
          )
            ? this.animations[0].shadow
            : false;
        },
        set: function (t) {
          var e = this.animations.length;
          for (var n = 0; n < e; n++) {
            this.animations[n].shadow = t;
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setPos = function (t, e) {
        for (var n = 0, o = this.animations; n < o.length; n++) {
          var r = o[n];
          r.pos(t, e);
        }
      };
      return t;
    })();
    e.default = o;
  });
  t(E);
  var b = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(_);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.type = m.IActorComponentType.SKIN;
        t.skinType = "body";
        t.shadow = true;
        return t;
      }
      t.prototype.hasType = function (t) {
        var e, n;
        if (
          ((n =
            (e = this.equipmentTypes) === null || e === void 0
              ? void 0
              : e.indexOf(t)) !== null && n !== void 0
            ? n
            : 0) >= 0
        )
          return true;
        return this.skinType == t;
      };
      Object.defineProperty(t.prototype, "equipmentType", {
        get: function () {
          return this.skinType;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.hitTest = function (t, e, n, o, r, i) {
        if (r) {
          var a = this.frame;
          if (a && a["damage box"]) {
            console.log("todo : useDamageBox 暂未完成..");
          }
        }
        var s = XOF.loader.get(this.skin);
        if (s) {
          var u = s.width;
          var l = -this.centerX + this.offsetX;
          var f = (-this.centerY + this.offsetY) * o;
          if (n == -1) {
            return t > -(u + l) && e > f && t <= -l && e <= 0;
          }
          return t > l && e > f && t <= u + l && e <= 0;
        }
        return false;
      };
      t.prototype.addTime = function (t) {
        this.time += t;
        return this;
      };
      t.prototype.getFrameToFrameTime = function (t, e) {
        var n = 0;
        e = e || Number.MAX_VALUE;
        if (this.animation) {
          e = Math.min(this.max - 1, e);
          t = Math.max(0, t);
          for (var o = t; o < e; o++) {
            n += this.getFrameData(o).delay;
          }
        }
        return n;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(b);
  var O = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(g);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.type = m.IActorComponentType.EFFECT;
        t.order = 1;
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(O);
  var a = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(b);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.testa = true;
        return t;
      }
      t.prototype.draw = function (t) {
        this.centerX = this.centerY = this.pivotX = this.pivotY = 0;
        t.$.save();
        t.$.translate(-250, -250);
        e.prototype.draw.call(this, t);
        t.$.restore();
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(a);
  var l = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var c = o(A);
    var p = o(g);
    var d = o(O);
    var r = o(L);
    var h = o(a);
    var i = (function (f) {
      n(t, f);
      function t() {
        var t = f.call(this) || this;
        t.delay = 0;
        t.$strokeAlpha = 1;
        t.cacheBody = new h.default();
        t.cacheBody.visible = false;
        t.addChild(t.cacheBody);
        return t;
      }
      Object.defineProperty(t.prototype, "strokeColor", {
        get: function () {
          return this.$strokeColor;
        },
        set: function (t) {
          var e = this;
          this.$strokeColor = t;
          this.children_.forEach(function (t) {
            return e.adjustAniColor(t);
          });
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "strokeAlpha", {
        get: function () {
          return this.$strokeAlpha;
        },
        set: function (t) {
          var e = this;
          this.$strokeAlpha = t;
          this.children_.forEach(function (t) {
            return e.adjustAniColor(t);
          });
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setFrameIndex = function (t, e) {
        if (this.body) {
          this.body.to(t, e);
          this.update(0);
        }
      };
      t.prototype.setFrameDelay = function (t, e) {
        this.body.delay = t;
        var n = this.numChild;
        for (var o = n - 1; o >= 0; o--) {
          var r = this.getChildAt(o);
          if (!r || r == this.body || r.type == m.IActorComponentType.SKIN)
            continue;
          r.delay = t;
        }
        this.update(0);
      };
      t.prototype.isSyncEquipment = function (t) {
        switch (t.type) {
          case m.IActorComponentType.SKIN:
            if (t.skinType == "title") {
              return false;
            }
            return true;
        }
        return false;
      };
      t.prototype.addDelay = function (t, e) {
        if (e === void 0) {
          e = 0;
        }
        if (e == 1) {
          this.delay = t;
        } else {
          this.delay += t;
        }
      };
      t.prototype.addTime = function (t) {
        var e;
        (e = this.body) === null || e === void 0 ? void 0 : e.addTime(t);
        this.update(0);
      };
      t.prototype.update = function (t) {
        if (t > this.delay) {
          t -= this.delay;
        } else {
          this.delay -= t;
          return;
        }
        var e = this === null || this === void 0 ? void 0 : this.body;
        if (e) {
          this.body.update(t);
          if (this.cacheBody.visible) {
            this.cacheBody.animation = this.body.animation;
            this.cacheBody.sync(this.body);
          }
        }
        var n = this.children_.length;
        for (var o = 0; o < n; o++) {
          var r = this.getChildAt(o);
          if (r && r != this.body)
            if (this.body && this.isSyncEquipment(r)) {
              r.sync(this.body);
            } else {
              r.update(t);
            }
        }
      };
      t.prototype.adjustAniColor = function (t) {
        if (this.isSyncEquipment(t)) {
          t.strokeColor = this.$strokeColor;
          t.strokeAlpha = this.$strokeAlpha;
        }
      };
      t.prototype.addChildAt = function (t, e) {
        f.prototype.addChildAt.call(this, t, e);
        this.adjustAniColor(t);
        if (t instanceof h.default) {
          return this;
        }
        if (t.type == m.IActorComponentType.SKIN && t.skinType == "body") {
          this.body = t;
        }
        t.on(r.default.ATTACK_BOX, this.onAttackBox, this);
        this.orderEquipment();
        return this;
      };
      t.prototype.orderEquipment = function () {
        var n = this;
        var t = this.children_.map(function (t) {
          return t;
        });
        t.sort(function (t, e) {
          return (t.order || 0) - (e.order || 0);
        });
        t.forEach(function (t, e) {
          return n.setChildIndex(t, e);
        });
        return this;
      };
      t.prototype.removeChildAt = function (t) {
        var e = f.prototype.removeChildAt.call(this, t);
        e.off(r.default.ATTACK_BOX, this.onAttackBox, this);
        if (e == this.body) delete this.body;
        return e;
      };
      t.prototype.onAttackBox = function () {
        this.event(r.default.ATTACK_BOX);
      };
      t.prototype.renderChildren = function (t) {
        var e = this.children_;
        if ((e === null || e === void 0 ? void 0 : e.length) > 1) {
          for (var n = 0, o = e; n < o.length; n++) {
            var r = o[n];
            if (r.visible && r.shadow && r.blend == undefined) {
              var i = r.isUseTransform();
              t.push(r.gs, i);
              r.shadow_(t);
              t.pop(i);
            }
          }
          if (this.stroke)
            for (var a = 0, s = e; a < s.length; a++) {
              var r = s[a];
              if (r instanceof d.default) continue;
              if (r.visible && r.stroke_ && r.blend == undefined) {
                var i = r.isUseTransform();
                t.push(r.gs, i);
                r.stroke_(t);
                t.pop(i);
              }
            }
          for (var u = 0, l = e; u < l.length; u++) {
            var r = l[u];
            if (r.visible) {
              var i = r.isUseTransform();
              t.push(r.gs, i);
              if (r instanceof h.default && r.testa) {
                r.draw(t);
              } else if (r instanceof p.default) {
                c.default.prototype.draw.call(r, t);
              } else {
                r.draw(t);
              }
              t.pop(i);
            }
          }
        } else {
          f.prototype.renderChildren.call(this, t);
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(l);
  var P = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t(t, e, n, o) {
        if (e === void 0) {
          e = 0;
        }
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 0;
        }
        this.obj = t;
        this.set(e, n, o);
      }
      t.prototype.setX = function (t) {
        this.$realX = new Big(t);
        this.$sync();
        return this;
      };
      t.prototype.getX = function () {
        var t, e;
        return (e =
          (t = this === null || this === void 0 ? void 0 : this.$realX) ===
            null || t === void 0
            ? void 0
            : t.toNumber()) !== null && e !== void 0
          ? e
          : 0;
      };
      t.prototype.addX = function (t) {
        this.$realX = this.$realX.plus(t);
        this.$sync();
        return this;
      };
      t.prototype.setY = function (t) {
        this.$realY = new Big(t);
        this.$sync();
        return this;
      };
      t.prototype.getY = function () {
        var t, e;
        return (e =
          (t = this === null || this === void 0 ? void 0 : this.$realY) ===
            null || t === void 0
            ? void 0
            : t.toNumber()) !== null && e !== void 0
          ? e
          : 0;
      };
      t.prototype.addY = function (t) {
        this.$realY = this.$realY.plus(t);
        this.$sync();
        return this;
      };
      t.prototype.setZ = function (t) {
        this.$realZ = new Big(t);
        this.$sync();
        return this;
      };
      t.prototype.getZ = function () {
        var t, e;
        return (e =
          (t = this === null || this === void 0 ? void 0 : this.$realZ) ===
            null || t === void 0
            ? void 0
            : t.toNumber()) !== null && e !== void 0
          ? e
          : 0;
      };
      t.prototype.addZ = function (t) {
        this.$realZ = this.$realZ.plus(t);
        this.$sync();
        return this;
      };
      t.prototype.set = function (t, e, n) {
        if (t !== undefined) this.setX(t);
        if (e !== undefined) this.setY(e);
        if (n !== undefined) this.setZ(n);
      };
      t.prototype.add = function (t, e, n) {
        if (n === void 0) {
          n = 0;
        }
        this.addX(t);
        this.addY(e);
        this.addZ(n);
        return this;
      };
      Object.defineProperty(t.prototype, "x", {
        get: function () {
          return this.getX();
        },
        set: function (t) {
          this.setX(t);
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "y", {
        get: function () {
          return this.getY();
        },
        set: function (t) {
          this.setY(t);
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "z", {
        get: function () {
          return this.getZ();
        },
        set: function (t) {
          this.setZ(t);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.$sync = function () {
        var t = this.x;
        var e = this.y - this.z;
        this.obj.pos(t, e);
      };
      t.prototype.destroy = function () {
        this.obj = undefined;
        this.$realX = this.$realY = this.$realZ = undefined;
      };
      return t;
    })();
    e.default = n;
  });
  t(P);
  var j = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(b);
    var i = o(l);
    var a = o(P);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.order = ht.RoleOrder.NONE;
        t.actor = new i.default();
        t.actor.size(1, 1);
        t.actor.addTo(t);
        t.body = new r.default();
        t.actor.addChild(t.body);
        t.position = new a.default(t);
        t.$float = 0;
        t.defaultDirection = t.$direction = t.$size = 1;
        t.labName = new XOF.Label();
        t.labName.y = -125;
        t.labName.stroke = 1;
        t.labName.textAlign = "center";
        t.labName.strokeColor = "rgb(46,31,25)";
        t.addChild(t.labName);
        return t;
      }
      t.prototype.setSize = function (t) {
        this.$size = t;
        this.actor.scale(this.$size * this.$direction, this.$size);
      };
      Object.defineProperty(t.prototype, "direction", {
        get: function () {
          return this.$direction;
        },
        set: function (t) {
          this.$setDrection(t);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.$setDrection = function (t) {
        this.$direction = t;
        this.actor.scale(
          this.$size * this.$direction * this.defaultDirection,
          this.$size
        );
      };
      t.prototype.setBodyAnimationGroup = function (t, e) {
        this.body.setAnimationGroup(t, e);
        this.body.updateFrame();
        this.actor.cacheBody.setAnimationGroup(t);
        return this;
      };
      t.prototype.move = function (t, e) {
        this.setPos(t, e);
        return this;
      };
      t.prototype.setMap = function (t) {
        this.map = t;
      };
      t.prototype.update = function (t) {
        if (this.labName) this.labName.pivotY = this.$float;
        this.actor.update(t);
      };
      t.prototype.onDataUpdate = function (t) {};
      t.prototype.floatBy = function (t) {
        this.$float += t;
        if (this.$float < 0) this.$float = 0;
        this.setPos(this.position.x, this.position.y, false);
      };
      t.prototype.moveBy = function (t, e) {
        this.position.add(t, e);
        return this;
      };
      t.prototype.setPos = function (t, e, n) {
        this.actor.pos(0, Math.floor(-this.$float));
        this.position.set(t, e);
        return this;
      };
      t.prototype.onStart = function () {};
      t.prototype.onRemove = function () {};
      t.prototype.removeSelfFormMap = function () {
        if (this.map) {
          this.map.removeObject(this);
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = s;
  });
  t(j);
  var F = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t(t) {
        this.$POOL_TYPE = "AttributeVo";
        this.reset();
        this.valid = true;
        t && this.setAttr(t);
      }
      t.prototype.setRoot = function (t) {
        if (t == this.root) return;
        if (t) {
          t.invalidate();
        }
        this.root = t;
      };
      t.prototype.reset = function () {
        this.$attributes = {};
        this.setDefaultValue(this.$attributes);
        this.invalidate();
      };
      t.prototype.setAttr = function (t) {
        for (var e in this.$attributes) {
          if (typeof t[e] == "number") this.$attributes[e] = t[e];
        }
        this.invalidate();
      };
      t.prototype.add = function (t) {
        for (var e in this.$attributes) {
          if (typeof t[e] == "number") this.$attributes[e] += t[e];
        }
        this.invalidate();
      };
      Object.defineProperty(t.prototype, "valid", {
        get: function () {
          return this.$valid;
        },
        set: function (t) {
          if (this.$valid != t) {
            this.invalidate();
          }
          this.$valid = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.invalidate = function () {
        if (this.root) this.root.invalidate();
      };
      t.prototype.validate = function () {};
      t.prototype.$getAttribute = function () {
        this.validate();
        return this.$attributes;
      };
      Object.defineProperty(t.prototype, "attributes", {
        get: function () {
          return this.$getAttribute();
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setDefaultValue = function (t) {
        for (var e in ht.AttributeKeys) {
          t[ht.AttributeKeys[e]] = 0;
        }
      };
      return t;
    })();
    e.default = n;
  });
  t(F);
  var B = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.seed = function (t) {
        XOF.log("种子:", t);
        this.seed_ = t;
        this.randomCount = 0;
      };
      t.random = function () {
        this.randomCount++;
        this.seed_ = (this.seed_ * 9301 + 49297) % 233280;
        var t = this.seed_ / 233280;
        return t;
      };
      t.randomHit = function (t) {
        if (t >= 1) return true;
        return this.random() <= t;
      };
      t.randomInt = function (t, e) {
        if (e <= t) return e;
        return Math.floor(this.random() * (e - t + 1) + t);
      };
      t.count = function (t) {
        for (var e = 0; e < t; e++) {
          this.random();
        }
      };
      t.romdom0 = function () {
        return Math.random();
      };
      t.seed_ = 1;
      t.randomCount = 0;
      return t;
    })();
    e.default = n;
  });
  t(B);
  var s = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(F);
    var _ = n(B);
    var i = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.subs = [];
        t && e.setAttr(t);
        return e;
      }
      t.prototype.reset = function () {
        var t;
        n.prototype.reset.call(this);
        while ((t = this.subs) === null || t === void 0 ? void 0 : t.length) {
          this.unattach(this.subs[0]);
        }
        this.fireStrength =
          this.waterStrength =
          this.lightStrength =
          this.darkStrength =
          this.fireDefence =
          this.waterDefence =
          this.lightDefence =
          this.darkDefence =
            0;
      };
      t.prototype.invalidate = function () {
        this.$invalidate = 1;
      };
      t.prototype.validate = function () {
        if (this.$invalidate > 0) {
          var t = ht.AttributeKeys;
          var e = this.$attributes;
          for (var n in t) {
            var o = t[n];
            e[o] = 0;
            for (var r = 0, i = this.subs; r < i.length; r++) {
              var a = i[r];
              if (a.valid) {
                e[o] += a.attributes[o];
              }
            }
          }
          this.total();
          this.$invalidate = 0;
          this.eventChange();
        }
      };
      t.isHit = function (t, e) {
        var n = ht.AttributeKeys;
        var o = 1 + t.attributes[n.HIT_RATIO] - e.attributes[n.DODGE_RATIO];
        if (!_.default.randomHit(o)) {
          return 0;
        }
        return 1;
      };
      t.damage = function (t, e, n) {
        var o = ht.AttributeKeys;
        var r = {
          state: 1,
          damage: 0,
          stiff: 1,
          crit: 0,
          baseDamage: 0,
          critDamage: 0,
          addDamage: 0,
          attributeDamage: 0,
          extraDamage: 0,
          realDamge: t.attributes[o.DMG_REAL],
        };
        var i = n.attackLv;
        n.damageLv;
        var a = n.type,
          s = n.special;
        var u = _.default.random();
        var l = false,
          f = 0;
        if (a == 0) {
          l = u <= t.attributes[o.CRIT_RATIO] + t.attributes[o.ATK_CRIT_RATIO];
          var c = Math.max(0, 1 - e.phy / (i * 100 + e.phy));
          f = t.atk * c;
        } else if (a == 1) {
          l = u <= t.attributes[o.CRIT_RATIO] + t.attributes[o.MGK_CRIT_RATIO];
          var c = Math.max(0, 1 - e.mag / (i * 100 + e.mag));
          f = t.mgk * c;
        }
        var p = Math.min(1, 1 - e.attributes[o.DMG_REDUCE]);
        var d =
          (l
            ? t.attributes[o.BASE_CRIT_DMG_ADD] + t.attributes[o.CRIT_DMG_ADD]
            : 1) - 1;
        r.baseDamage = Math.floor(
          f * (1 + t.attributes[o.BASE_SKILL_DMG_ADD]) * p
        );
        r.critDamage = Math.floor(r.baseDamage * d);
        if (s > 0 && f > 0) {
          r.addDamage = Math.floor(r.baseDamage * t.attributes[o.DMG_ADD]);
          r.extraDamage = Math.floor(
            r.baseDamage * t.attributes[o.DMG_EXTRA_ADD]
          );
          var h = 0;
          {
            if (t.attributes[o.WATER] > 0) {
              var v = t.waterStrength - e.waterDefence;
              if (v > 0 && v > h) {
                o.WATER;
                h = v;
              }
            }
            if (t.attributes[o.FIRE] > 0) {
              var v = t.fireStrength - e.fireDefence;
              if (v > 0 && v > h) {
                o.FIRE;
                h = v;
              }
            }
            if (t.attributes[o.LIGHT] > 0) {
              var v = t.lightStrength - e.lightDefence;
              if (v > 0 && v > h) {
                o.LIGHT;
                h = v;
              }
            }
            if (t.attributes[o.DARK] > 0) {
              var v = t.darkStrength - e.darkDefence;
              if (v > 0 && v > h) {
                o.DARK;
                h = v;
              }
            }
          }
          if (h > 0) {
            r.attributeDamage = Math.floor(r.baseDamage * (h / 25 / 10));
          }
        }
        r.crit = l ? 1 : 0;
        var y = 0;
        if (f > 10) {
          if (f < 100) {
            y = _.default.randomInt(-3, 3);
          } else {
            y = _.default.randomInt(-5, 5);
          }
          r.baseDamage += Math.floor(y);
        }
        r.damage = Math.max(
          r.baseDamage +
            r.critDamage +
            r.addDamage +
            r.extraDamage +
            r.attributeDamage +
            r.realDamge,
          1
        );
        return r;
      };
      t.prototype.attach = function (t) {
        if (this.index(t) >= 0) return;
        this.subs.push(t);
        t.setRoot(this);
        this.invalidate();
      };
      t.prototype.unattach = function (t) {
        if (t) {
          var e = this.index(t);
          t.setRoot(undefined);
          if (e >= 0) {
            this.subs.splice(e, 1);
            this.invalidate();
          }
        }
      };
      t.prototype.index = function (t) {
        return this.subs.indexOf(t);
      };
      t.prototype.eventChange = function () {};
      t.prototype.total = function () {
        var t = ht.AttributeKeys;
        var e = this.$attributes;
        e[t.ATK] =
          e[t.MGK] =
          e[t.PHY_DEF] =
          e[t.MAG_DEF] =
          e[t.HP] =
          e[t.MP] =
          e[t.Q] =
          e[t.STR_FINAL] =
          e[t.INT_FINAL] =
          e[t.CON_FINAL] =
            0;
        this.fireStrength =
          this.waterStrength =
          this.lightStrength =
          this.darkStrength =
          this.fireDefence =
          this.waterDefence =
          this.lightDefence =
          this.darkDefence =
            0;
        e[t.STR_FINAL] = e[t.STR] * (1 + e[t.STR_ADD]);
        e[t.INT_FINAL] = e[t.INT] * (1 + e[t.INT_ADD]);
        e[t.CON_FINAL] = e[t.CON] * (1 + e[t.CON_ADD]);
        e[t.ATK] =
          e[t.STR_FINAL] * 3 +
          e[t.BASE_ATK] * (1 + e[t.ATK_ADD]) +
          e[t.EXTRA_ATK];
        e[t.MGK] =
          e[t.INT_FINAL] * 3.5 +
          e[t.BASE_MGK] * (1 + e[t.MGK_ADD]) +
          e[t.EXTRA_MGK];
        e[t.PHY_DEF] =
          (e[t.CON_FINAL] * 3 + e[t.BASE_PHY_DEF]) * (1 + e[t.PHY_DEF_ADD]) +
          e[t.EXTRA_PHY_DEF];
        e[t.MAG_DEF] =
          (e[t.MND] * 1.5 + e[t.CON_FINAL] * 1.5 + e[t.BASE_MAG_DEF]) *
            (1 + e[t.MAG_DEF_ADD]) +
          e[t.EXTRA_MAG_DEF];
        e[t.HP] =
          (e[t.CON_FINAL] * 9 + e[t.BASE_HP]) * (1 + e[t.HP_ADD]) +
          e[t.EXTRA_HP];
        e[t.MP] =
          (e[t.CON_FINAL] * 2 +
            e[t.INT_FINAL] * 6 +
            e[t.BASE_MP] +
            e[t.MND] * 4 +
            e[t.BASE_MP]) *
            (1 + e[t.MP_ADD]) +
          e[t.EXTRA_MP];
        e[t.Q] =
          (e[t.CON_FINAL] * 6 + e[t.BASE_Q]) * (1 + e[t.Q_ADD]) + e[t.EXTRA_Q];
        this.fireStrength = e[t.FIRE_STRENGTH] + e[t.ELEMENT_STRENGTH];
        this.waterStrength = e[t.WATER_STRENGTH] + e[t.ELEMENT_STRENGTH];
        this.darkStrength = e[t.DARK_STRENGTH] + e[t.ELEMENT_STRENGTH];
        this.lightStrength = e[t.LIGHT_STRENGTH] + e[t.ELEMENT_STRENGTH];
        this.fireDefence = e[t.FIRE_DEF] + e[t.ELEMENT_DEF];
        this.waterDefence = e[t.WATER_DEF] + e[t.ELEMENT_DEF];
        this.darkDefence = e[t.DARK_DEF] + e[t.ELEMENT_DEF];
        this.lightDefence = e[t.LIGHT_DEF] + e[t.ELEMENT_DEF];
      };
      Object.defineProperty(t.prototype, "hp", {
        get: function () {
          return this.attributes[ht.AttributeKeys.HP];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "mp", {
        get: function () {
          return this.attributes[ht.AttributeKeys.MP];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "q", {
        get: function () {
          return this.attributes[ht.AttributeKeys.Q];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "atk", {
        get: function () {
          return this.attributes[ht.AttributeKeys.ATK];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "mgk", {
        get: function () {
          return this.attributes[ht.AttributeKeys.MGK];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "phy", {
        get: function () {
          return this.attributes[ht.AttributeKeys.PHY_DEF];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "mag", {
        get: function () {
          return this.attributes[ht.AttributeKeys.MAG_DEF];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "con", {
        get: function () {
          return this.attributes[ht.AttributeKeys.CON_FINAL];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "speed", {
        get: function () {
          return (
            (1 + this.attributes[ht.AttributeKeys.MOV_SPD]) *
            this.attributes[ht.AttributeKeys.BASE_MOV_SPD]
          );
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "cityMoveSpeed", {
        get: function () {
          return (
            (1 + this.attributes[ht.AttributeKeys.CITY_MOV_SPD]) *
            this.attributes[ht.AttributeKeys.BASE_CITY_MOV_SPD]
          );
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "cd", {
        get: function () {
          return 1 - this.attributes[ht.AttributeKeys.CD];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "speedRate", {
        get: function () {
          return this.attributes[ht.AttributeKeys.MOV_SPD];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "attackRate", {
        get: function () {
          return this.attributes[ht.AttributeKeys.ATK_SPD];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "castRate", {
        get: function () {
          return this.attributes[ht.AttributeKeys.SKL_SPD];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "hpRegen", {
        get: function () {
          return this.attributes[ht.AttributeKeys.HP_REGEN];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "mpRegen", {
        get: function () {
          return this.attributes[ht.AttributeKeys.MP_REGEN];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "hpRegenRate", {
        get: function () {
          return this.attributes[ht.AttributeKeys.HP_REGEN_RATE];
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "mpRegenRate", {
        get: function () {
          return this.attributes[ht.AttributeKeys.MP_REGEN_RATE];
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(r.default);
    e.default = i;
  });
  t(s);
  var S = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(s);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.$event = new XOF.EventDispatcher();
        return t;
      }
      t.prototype.setRoot = function () {};
      t.prototype.eventChange = function () {
        this.event(9001);
      };
      t.prototype.hasListener = function (t) {
        return this.$event.hasListener(t);
      };
      t.prototype.once = function (t, e, n, o) {
        return this.$event.once(t, e, n, o);
      };
      t.prototype.on = function (t, e, n, o, r) {
        return this.$event.on(t, e, n, o, r);
      };
      t.prototype.off = function (t, e, n, o) {
        return this.$event.off(t, e, n, o);
      };
      t.prototype.event = function (t, e) {
        return this.$event.event(t, e);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(S);
  var M = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(dt);
    var r = (function () {
      function c() {}
      c.getData = function (t) {
        return o.default.conf.buff[t];
      };
      c.getBuffLevelProperty = function (t, e) {
        var n;
        var o = c.getData(t).levelProperty;
        var r =
          (n = o === null || o === void 0 ? void 0 : o.length) !== null &&
          n !== void 0
            ? n
            : 0;
        if (r) {
          var i = o[0];
          var a = 1 + (e - 1) * i;
          return o.slice(a, a + i);
        }
        return [];
      };
      c.getBuffLevelAttribute = function (t, e) {
        var n = c.getData(t);
        var o = {};
        if (!n) return o;
        if (!n.levelAttribute) return o;
        for (var r = 0, i = n.levelAttribute; r < i.length; r++) {
          var a = i[r];
          var s = a[1];
          var u = 0;
          if (a[0] == 1) {
            u = a[2];
          } else if (a[0] == 2) {
            var l = this.getBuffLevelProperty(t, e);
            var f = a[2];
            if (l.length < f) {
              XOF.log("BUFF属性数值配置异常");
              continue;
            }
            u = l[f];
          }
          if (u) {
            if (o[s] == undefined) o[s] = 0;
            o[s] += u;
          }
        }
        return o;
      };
      return c;
    })();
    e.default = r;
  });
  t(M);
  var X = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["STAY"] = 1)] = "STAY";
      t[(t["MOVE"] = 2)] = "MOVE";
      t[(t["DASH"] = 3)] = "DASH";
      t[(t["IN_MOVE"] = 4)] = "IN_MOVE";
      t[(t["IN_DASH"] = 5)] = "IN_DASH";
      t[(t["DAMAGE"] = 6)] = "DAMAGE";
      t[(t["BE_DAMAGE"] = 7)] = "BE_DAMAGE";
      t[(t["GET"] = 8)] = "GET";
      t[(t["SKILL"] = 9)] = "SKILL";
      t[(t["CITY"] = 10)] = "CITY";
      t[(t["DUNGEON"] = 11)] = "DUNGEON";
      t[(t["DEATH"] = 12)] = "DEATH";
      t[(t["SIT"] = 13)] = "SIT";
      t[(t["SKILL_"] = 14)] = "SKILL_";
      t[(t["IN_STATUS"] = 15)] = "IN_STATUS";
      t[(t["IN_BUFF"] = 16)] = "IN_BUFF";
      t[(t["NOT_IN_STATUS"] = 17)] = "NOT_IN_STATUS";
      t[(t["NOT_IN_BUFF"] = 18)] = "NOT_IN_BUFF";
      t[(t["CRIT"] = 19)] = "CRIT";
      t[(t["MISS"] = 20)] = "MISS";
      t[(t["JUMP"] = 21)] = "JUMP";
      t[(t["IN_JUMP"] = 22)] = "IN_JUMP";
      t[(t["JUMP_BACK"] = 23)] = "JUMP_BACK";
      t[(t["ACTIVE"] = 24)] = "ACTIVE";
    })(n || (n = {}));
    e.default = n;
  });
  t(X);
  var U = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var f = n(dt);
    var r = n(q);
    var i = n(M);
    var a = n(F);
    var s = n(X);
    var u = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.buffs = [];
        if (t) e.setRoot(t);
        return e;
      }
      t.prototype.setRoot = function (t) {
        this.unattachRoot();
        this.root = t;
        this.attachRoot();
      };
      t.prototype.action = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        var n = false;
        for (var o = 0, r = this.buffs; o < r.length; o++) {
          var i = r[o];
          var a = i.attr.valid;
          if (this.active(i.id, t, e, undefined, false)) {
            if (a != i.attr.valid) {
              n = true;
            }
          }
        }
        if (n) {
          this.dispatchUpdate();
        }
      };
      t.prototype.dispatchUpdate = function () {
        r.default.eventMgr.event(1037);
        this.event("action");
      };
      t.prototype.getBuffLevel = function (t) {
        for (var e = 0, n = this.buffs; e < n.length; e++) {
          var o = n[e];
          if (o.id == t) {
            return o.level;
          }
        }
        return 0;
      };
      t.prototype.has = function (t) {
        return this.indexOf(t) >= 0;
      };
      t.prototype.isActive = function (t) {
        var e = this.indexOf(t);
        if (e >= 0) {
          return this.buffs[e].attr.valid;
        }
        return false;
      };
      t.prototype.active = function (t, e, n, o, r) {
        if (n === void 0) {
          n = true;
        }
        if (o === void 0) {
          o = 1;
        }
        if (r === void 0) {
          r = true;
        }
        for (var i = 0, a = this.buffs; i < a.length; i++) {
          var s = a[i];
          if (s.id == t) {
            var u = s.attr.valid;
            var l = f.default.conf.buff[s.id];
            if (e == l.activeId) {
              if (n) {
                if (s.attr.valid == true ? l.cover : true) {
                  s.timestamp = 0;
                }
              }
              s.attr.valid = n;
              if (o) {
                this.setLevel(t, o);
              }
              if (r ? u != s.attr.valid : false) {
                this.dispatchUpdate();
              }
            }
            return true;
          }
        }
        return false;
      };
      t.prototype.update = function (n) {
        var e = this;
        var o = [];
        this.buffs.forEach(function (t) {
          var e = f.default.conf.buff[t.id];
          if (e.activeId == s.default.STAY) {
            t.timestamp = 0;
            t.attr.valid = true;
          }
          if (t.attr.valid) {
            t.timestamp += n * 1e3;
            if (e.duration > 0) {
              if (t.timestamp > e.duration) {
                t.attr.valid = false;
                if (e.autoRmove) {
                  o.push(t.id);
                }
              }
            }
          }
        });
        o.forEach(function (t) {
          return e.rm(t);
        });
      };
      t.prototype.add = function (t, e) {
        if (e === void 0) {
          e = 1;
        }
        var n = f.default.conf.buff[t];
        if (!n) return false;
        if (e <= 0) return false;
        if (this.indexOf(t) >= 0) {
          if (n.cover) {
            this.rm(t);
          } else {
            return false;
          }
        }
        var o = new a.default(i.default.getBuffLevelAttribute(t, e));
        o.valid = false;
        this.buffs.push({ id: t, attr: o, timestamp: 0, level: e });
        this.attachRoot();
        this.update(0);
        this.dispatchUpdate();
        return true;
      };
      t.prototype.setLevel = function (t, e) {
        var n = this.indexOf(t);
        if (n >= 0) {
          var o = this.buffs[n];
          var r = o.attr;
          r.reset();
          o.level = e;
          if (e > 0) {
            r.setAttr(i.default.getBuffLevelAttribute(t, e));
            this.attachRoot();
            this.update(0);
          } else {
            r.setAttr({});
          }
        }
      };
      t.prototype.rm = function (t) {
        var e = this.indexOf(t);
        if (e >= 0) {
          var n = this.buffs.splice(e, 1)[0];
          this.root.unattach(n.attr);
          this.dispatchUpdate();
        }
      };
      t.prototype.attachRoot = function () {
        var e = this;
        if (this.root)
          this.buffs.forEach(function (t) {
            e.root.attach(t.attr);
          });
      };
      t.prototype.unattachRoot = function () {
        var e = this;
        if (this.root)
          this.buffs.forEach(function (t) {
            e.root.unattach(t.attr);
          });
      };
      t.prototype.clean = function () {
        while (this.buffs.length) {
          var t = this.buffs.pop();
          this.root.unattach(t.attr);
        }
      };
      t.prototype.cleanCity = function () {
        var t = this.buffs.length;
        var e = [];
        for (var n = t - 1; n >= 0; n--) {
          var o = this.buffs[n].id;
          var r = f.default.conf.buff[o];
          if (!r.cityValid) {
            e.push(o);
          }
        }
        while (e.length) {
          var o = e.shift();
          this.rm(o);
        }
      };
      t.prototype.indexOf = function (t) {
        for (var e = 0; e < this.buffs.length; e++)
          if (this.buffs[e].id == t) return e;
        return -1;
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = u;
  });
  t(U);
  var H = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.G = 22 * 60;
      t.downPowerMax = 500;
      t.MapGridWidth = 16;
      t.MapGridHeight = 16;
      t.MapTileXGridCount = 14;
      t.MapTileYGridCount = 30;
      return t;
    })();
    e.default = n;
  });
  t(H);
  var G = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var v = n(H);
    var o = (function () {
      function _(t) {
        this.downSpeed = 0;
        this.role = t;
        this.forces = [];
        this.lastFloatState = this.lastFloatPowerState = false;
      }
      _.prototype.clean = function () {
        this.forces = [];
        this.powers = [];
      };
      _.prototype.has = function (t) {
        for (var e = 0; e < this.forces.length; e++) {
          if (this.forces[e].name == t) {
            return this.forces[e].state != 0;
          }
        }
        return false;
      };
      _.prototype.move = function (t, e, n, o, r, i) {
        if (n == 0) n = 1;
        this.forces.push({
          name: i || XOF.hashCode().toString(),
          power: t,
          resistance: e,
          direction: n,
          state: 1,
          type: 1,
          ySpeed: o,
        });
        return this;
      };
      Object.defineProperty(_.prototype, "floatPower", {
        get: function () {
          var t = 0;
          for (var e in this.forces) {
            if (this.forces[e].state == 1 && this.forces[e].direction == 0) {
              if (this.forces[e].power > t) {
                t = this.forces[e].power;
              }
            }
          }
          return t;
        },
        enumerable: false,
        configurable: true,
      });
      _.prototype.float = function (t, e, n, o, r) {
        this.downSpeed = 0;
        this.forces.push({
          name: r || XOF.hashCode().toString(),
          power: t,
          resistance: e,
          direction: 0,
          y: o,
          move: n,
          state: 1,
          type: 2,
        });
        return this;
      };
      _.prototype.hasFloatPower = function () {
        for (var t in this.forces) {
          if (this.forces[t].direction == 0 && this.forces[t].power > 0) {
            return true;
          }
        }
        return false;
      };
      _.prototype.removeForce = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        for (var n in t) {
          this.removePowereOne(t[n]);
        }
      };
      _.prototype.removePowereOne = function (t) {
        for (var e in this.powers) {
          if (this.powers[e].name == t && this.powers[e].valid != 0) {
            this.powers[e].valid = 0;
          }
        }
        for (var e in this.forces) {
          if (this.forces[e].name == t && this.forces[e].state != 0) {
            this.forces[e].state = 0;
          }
        }
      };
      _.prototype.AddPower = function (t, e, n, o, r) {
        if (e === void 0) {
          e = 0;
        }
        if (o === void 0) {
          o = "linear";
        }
        var i = Math.abs(t) / n;
        if (!this.powers) this.powers = [];
        this.powers.push({
          name: r || XOF.hashCode().toString(),
          distance: Math.abs(t),
          height: e,
          moveUnit: i,
          ease: o,
          time: n,
          moveTime: 0,
          movedDistance: 0,
          movedHeight: 0,
          moveDirection: t > 0 ? 1 : -1,
          valid: 1,
        });
      };
      _.prototype.runPower = function (t) {
        var e, n;
        var o =
          (n =
            (e = this.powers) === null || e === void 0 ? void 0 : e.length) !==
            null && n !== void 0
            ? n
            : 0;
        for (var r = 0; r < o; r++) {
          var i = this.powers[r];
          var a = i.movedDistance >= i.distance;
          var s = i.movedHeight >= i.height;
          if (i.valid == 0 || (a && s)) {
            continue;
          } else {
            var u = i.moveUnit;
            var l = 0,
              f = 0;
            if (!a) {
              if (i.ease == "linear") {
                l = t * u;
                var c = i.distance - i.movedDistance;
                if (l > c) l = c;
              } else if (i.ease == "easeIn") {
                var p = Math.min(i.time, i.moveTime + t);
                var d = _.getPowIn(2)(p / i.time);
                var h = d * i.distance;
                l = h - i.moveDirection;
              } else if (i.ease == "easeOut") {
                var v = i.distance / 2;
                v / i.time;
                var y = i.time / 2;
                if (i.moveTime < y) {
                  i.moveTime / y;
                }
              }
            }
            i.movedDistance += l;
            i.moveTime += t;
            this.role.moveBy2(l * i.moveDirection, f);
          }
        }
        for (var r = o - 1; r >= 0; r--) {
          if (this.powers[r].valid == 0) {
            this.powers.splice(r, 1);
          }
        }
      };
      _.getPowIn = function (e) {
        return function (t) {
          return Math.pow(t, e);
        };
      };
      _.getPowOut = function (e) {
        return function (t) {
          return 1 - Math.pow(1 - t, e);
        };
      };
      _.prototype.onUpdate = function (t) {
        var e, n;
        var o = v.default.G;
        var r = v.default.downPowerMax;
        this.runPower(t);
        t = t / 1e3;
        for (var i = 0; i < this.forces.length; i++) {
          var a = this.forces[i];
          if (a.state == 0) continue;
          var s = a.resistance * t;
          if (a.direction == 0) {
            a.power -= a.resistance * t;
            if (a.power > 0)
              this === null || this === void 0
                ? void 0
                : this.role.floatBy(a.power * t);
            var u =
              (e = a === null || a === void 0 ? void 0 : a.move) !== null &&
              e !== void 0
                ? e
                : 0;
            var l =
              (n = a === null || a === void 0 ? void 0 : a.y) !== null &&
              n !== void 0
                ? n
                : 0;
            this === null || this === void 0 ? void 0 : this.role.moveBy(u, l);
          } else if (a.power > 0) {
            var f = a.power > s;
            var c = f ? a.power - s : a.power;
            var p = 0;
            if (a.ySpeed) {
              p = a.ySpeed;
            }
            this === null || this === void 0
              ? void 0
              : this.role.moveBy(c * a.direction, p);
            a.power -= s;
            if (!f) a.state = 0;
          }
        }
        var d = this === null || this === void 0 ? void 0 : this.role.isFloat();
        for (var i = this.forces.length - 1; i >= 0; i--) {
          var a = this.forces[i];
          if (a.state == 0) this.forces.splice(i, 1);
          if (a.direction == 0 && a.power < 0 && !d) this.forces.splice(i, 1);
        }
        var h = this.hasFloatPower();
        if (!h) {
          if (d) {
            this.downSpeed += t * o;
            if (this.downSpeed > r) this.downSpeed = r;
            this === null || this === void 0
              ? void 0
              : this.role.floatBy(-this.downSpeed * t);
            if (this.lastFloatPowerState != h) {
              this.role.event("down");
            }
          } else {
            if (this.lastFloatState != d) {
              this.role.event("lie");
            }
          }
        }
        this.lastFloatPowerState = h;
        this.lastFloatState = d;
      };
      return _;
    })();
    e.default = o;
  });
  t(G);
  var z = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.CHANGE = "CHANGE";
      return t;
    })();
    e.default = n;
  });
  t(z);
  var Q = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var d = o(z);
    var r = (function (o) {
      n(i, o);
      function i(t, e) {
        var n = o.call(this) || this;
        n.initialize(t, e);
        if (!i.tweens_) {
          i.tweens_ = [];
          XOF.Timer.startTimer(i.update_, i);
        }
        i.tweens_.push(n);
        return n;
      }
      i.update_ = function (t) {
        t = t || XOF.Timer.dt * 1e3;
        var e = i.tweens_;
        for (var n = 0, o = e; n < o.length; n++) {
          var r = o[n];
          r.$update(t);
        }
      };
      i.prototype.initialize = function (t, e) {
        this.target_ = t;
        this.steps_ = [];
        this.time = 0;
        this.duration = 0;
        this.loop = e ? e.loop : false;
        this.paused = false;
      };
      i.prototype.to = function (t, e, n) {
        this.steps_.push({
          duration: e,
          type: "step",
          p1: this.cloneProps_(t),
          ease: n,
        });
        this.duration += e || 0;
        return this;
      };
      i.prototype.wait = function (t) {
        this.steps_.push({ duration: t, type: "step" });
        this.duration += t;
        return this;
      };
      i.prototype.set = function (t) {
        this.steps_.push({ duration: 0, p1: t, type: "step" });
        return this;
      };
      i.prototype.call = function (t, e, n) {
        this.steps_.push({
          type: "action",
          callback: t,
          thisObj: e,
          params: n,
        });
        return this;
      };
      i.prototype.remove = function () {
        this.steps_.push({
          type: "action",
          callback: i.removeTween,
          thisObj: i,
          params: [this],
        });
        return undefined;
      };
      i.prototype.$update = function (t) {
        if (this.paused || this.steps_ == undefined) return;
        this.setPostion(this.time + t);
      };
      i.prototype.setPostion = function (t, e) {
        var n = t,
          o;
        var r = 1;
        if (n > this.duration) {
          if (this.loop) {
            r = Math.floor(n / this.duration);
            o = n - this.duration * r;
          } else {
            this.setPaused(true);
          }
          n = this.duration;
        }
        var i = e == undefined ? n > this.time : e;
        for (var a = 0; a < r; a++) {
          if (this.target_ && this.steps_.length) {
            var s = this.steps_.length;
            var u = this.time;
            var l = 0;
            if (this.time > 0) {
              for (; l < s; l++) {
                var f = this.steps_[l];
                if (f.type == "step") {
                  if (u - f.duration < 0) break;
                  u -= f.duration;
                }
              }
            }
            var c = n - (this.time - u);
            for (var p = l; p < s; p++) {
              var f = this.steps_[p];
              if (f.type == "step") {
                f.p0 = f.p0 || this.cloneProps_(this.target_, f.p1);
                this.updateTargetProps_(
                  f,
                  Math.min(1, f.duration == 0 ? 1 : c / f.duration)
                );
                if (c - f.duration < 0) break;
                c -= f.duration;
                delete f.p0;
              } else {
                if (i) this.doAction_(f);
              }
            }
          }
        }
        this.time = n;
        if (o > 0) {
          this.time = 0;
          this.setPostion(o);
          return;
        }
        this.event(d.default.CHANGE);
      };
      i.prototype.updateTargetProps_ = function (t, e) {
        if (t.ease) e = t.ease(e);
        var n = t.p0,
          o = t.p1;
        var r, i, a;
        for (var s in o) {
          r = n[s];
          i = o[s];
          if (r == i || e == 0 || e == 1 || typeof r != "number") {
            a = e == 1 ? i : r;
          } else {
            a = r + (i - r) * e;
          }
          this.target_[s] = a;
        }
      };
      i.prototype.doAction_ = function (t) {
        t.callback.apply(t.thisObj, t.params);
      };
      i.prototype.setPaused = function (t) {
        if (this.paused == t) {
          return this;
        }
        this.paused = t;
        return this;
      };
      i.prototype.clean = function () {
        this.paused = true;
        this.loop = this.time = this.steps_ = this.target_ = undefined;
      };
      i.prototype.cloneProps_ = function (t, e) {
        var n = {};
        e = e || t;
        for (var o in e) {
          n[o] = t[o];
        }
        return n;
      };
      i.get = function (t, e, n) {
        if (n) this.removeTweens(t);
        return new i(t, e);
      };
      i.removeTweenFromList = function (t) {
        var e = i.tweens_.indexOf(t);
        if (e >= 0) i.tweens_.splice(e, 1);
      };
      i.removeTween = function (t) {
        var e = i.tweens_.indexOf(t);
        if (e >= 0) i.tweens_.splice(e, 1);
        t === null || t === void 0 ? void 0 : t.clean();
      };
      i.removeTweens = function (t) {
        var e = i.tweens_;
        if (e)
          for (var n = e.length - 1; n >= 0; n--) {
            var o = e[n];
            if (o.target_ == t) {
              e.splice(n, 1);
              o.clean();
            }
          }
      };
      return i;
    })(XOF.EventDispatcher);
    e.default = r;
  });
  t(Q);
  var J = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(y);
    var i = o(Q);
    var a = o(P);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.$POOL_TYPE = "BloodstainEffect";
        t.order = ht.RoleOrder.NONE;
        t.position = new a.default(t);
        t.skin = "monster/common/monsterdieblood.img/0.png";
        t.centerX = 20;
        t.centerY = 21;
        t.alpha = t.offsetX = t.offsetY = 0;
        if (!XOF.loader.get(t.skin)) XOF.loader.loadImage(t.skin);
        t.$renderer2.tint = PIXI.utils.string2hex("#cc0000");
        return t;
      }
      Object.defineProperty(t.prototype, "color", {
        get: function () {
          return "";
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.draw = function (t) {
        var e = XOF.loader.get(this.skin);
        if (e) {
          t.pushStyle("globalCompositeOperation");
          var n = this.scaleX,
            o = this.scaleY;
          t.$.globalAlpha = this.alpha;
          t.$.globalCompositeOperation = "xor";
          t.draw(
            e,
            (-this.centerX + this.offsetX) * n,
            (-this.centerY + this.offsetY) * o,
            e.width * n,
            e.height * o
          );
          t.$.fillStyle = this.color || "#ff0000";
          t.$.globalAlpha = 1;
          t.$.globalCompositeOperation = "destination-over";
          t.$.fillRect(
            t.x + (-this.centerX + this.offsetX) * n,
            t.y + (-this.centerY + this.offsetY) * o,
            e.width * n,
            e.height * o
          );
          t.popStyle();
        }
      };
      t.prototype.onStart = function () {
        this.tw = i.default
          .get(this)
          .set({ scaleX: 0.2, scaleY: 0.2, alpha: 0.2 })
          .wait(50)
          .to({ alpha: 1, scaleX: 0.7, scaleY: 0.3 }, 500)
          .wait(50)
          .to({ alpha: 0.1, scaleX: 1.1, scaleY: 0.6 }, 2e3)
          .wait(5e3)
          .to({ alpha: 0 }, 1e3)
          .call(this.removeSelfFormMap, this);
        i.default.removeTweenFromList(this.tw);
      };
      t.prototype.onRemove = function () {
        if (this.tw) {
          this.tw.clean();
          this.tw = undefined;
        }
      };
      t.prototype.update = function (t) {
        this.tw.$update(t);
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        set: function (t) {
          this.position.setZ(this.float);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setMap = function (t) {
        this.map = t;
      };
      t.prototype.removeSelfFormMap = function () {
        if (this.map) {
          this.map.removeObject(this);
        }
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(J);
  var Z = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (
          t.call(
            this,
            null,
            "precision mediump float;\n\n        varying vec2 vTextureCoord;\n        varying vec4 vColor;\n        \n        uniform sampler2D uSampler;\n        uniform float colorR;\n        uniform float colorG;\n        uniform float colorB;\n        uniform float colorA;\n        \n        void main(void)\n        {\n            vec2 uvs = vTextureCoord.xy;\n            vec4 fg = texture2D(uSampler, vTextureCoord);\n            if(fg.a > 0.0) {\n                fg.r = colorR;\n                fg.g = colorG;\n                fg.b = colorB;\n            }\n            gl_FragColor = vec4(fg.r, fg.g, fg.b, fg.a) * colorA;\n        \n        }",
            { colorR: 1, colorG: 1, colorB: 1, colorA: 1 }
          ) || this
        );
      }
      Object.defineProperty(e.prototype, "alpha", {
        get: function () {
          return this.uniforms.colorA;
        },
        set: function (t) {
          this.uniforms.colorA = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(e.prototype, "color", {
        get: function () {
          return PIXI.utils.hex2string(
            PIXI.utils.rgb2hex([
              this.uniforms.colorR,
              this.uniforms.colorG,
              this.uniforms.colorB,
            ])
          );
        },
        set: function (t) {
          var e = PIXI.utils.hex2rgb(PIXI.utils.string2hex(t));
          this.uniforms.colorR = e[0];
          this.uniforms.colorG = e[1];
          this.uniforms.colorB = e[2];
        },
        enumerable: false,
        configurable: true,
      });
      return e;
    })(PIXI.Filter);
    e.default = o;
  });
  t(Z);
  var tt = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(y);
    var i = n(Z);
    var a = n(Q);
    var s = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.order = -1;
        t.type = m.IActorComponentType.EFFECT;
        t.size(1, 1);
        var e = (t.filter = new i.default());
        t.$renderer2.filters = [e];
        return t;
      }
      Object.defineProperty(t.prototype, "color", {
        get: function () {
          return this.filter.color;
        },
        set: function (t) {
          this.filter.color = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.clone = function (t, e) {
        this.skin = t.skin;
        this.centerX = t.centerX;
        this.centerY = t.centerY;
        this.offsetX = t.offsetX;
        this.offsetY = t.offsetY;
        this.scale(e, e);
        this.alpha = 0.7;
        return this;
      };
      t.prototype.draw = function (t) {
        var e = XOF.loader.get(this.skin);
        if (e) {
          t.pushStyle("globalCompositeOperation");
          t.$.globalAlpha = this.alpha;
          t.$.globalCompositeOperation = "xor";
          t.draw(
            this.skin,
            -this.centerX + this.offsetX,
            -this.centerY + this.offsetY,
            e.width,
            e.height
          );
          t.$.fillStyle = this.color || "#ff0000";
          t.$.globalAlpha = 1;
          t.$.globalCompositeOperation = "destination-over";
          t.$.fillRect(
            t.x + -this.centerX + this.offsetX,
            t.y + (-this.centerY + this.offsetY),
            e.width,
            e.height
          );
          t.popStyle();
        }
      };
      t.prototype.remove = function () {
        this.event(XOF.Event.COMPLETE);
        if (this.parent) this.parent.event(XOF.Event.COMPLETE);
        this.removeSelf();
        this.tween = undefined;
      };
      t.prototype.update = function (t) {
        var e;
        if (!this.tween) {
          this.tween = a.default
            .get(this)
            .to({ scaleX: 1, scaleY: 1 }, 80)
            .to({ alpha: 0.1 }, 250)
            .call(this.remove, this);
          this.tween.remove();
          a.default.removeTweenFromList(this.tween);
        } else {
          (e = this.tween) === null || e === void 0 ? void 0 : e.$update(t);
        }
      };
      t.prototype.$setAlpha = function (t) {
        n.prototype.$setAlpha.call(this, t);
        this.filter.alpha = t;
      };
      t.prototype.addDelay = function (t) {};
      return t;
    })(r.default);
    e.default = s;
  });
  t(tt);
  var it = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.ItemClass = void 0;
    var n = (function () {
      function t() {}
      t.EQUIP = "1";
      t.ITEM = "2";
      t.RAW = "3";
      t.TASK = "4";
      t.EMBLEM = "5";
      t.CARD = "6";
      t.SKIN = "9";
      return t;
    })();
    e.default = n;
    var o = (function () {
      function t() {}
      t.ITEM = "1";
      t.CITY_ITEM = "4";
      t.PACKAGE = "2";
      t.PACKAGE_SELECT = "5";
      t.EQUIP_UPGRADE = "6";
      t.RENAME = "7";
      t.BOX = "10";
      t.BOX_QUALITY = "11";
      t.BOX_RANDOM = "12";
      t.EMBLEM_RED = "1";
      t.EMBLEM_BLUE = "2";
      t.EMBLEM_YELLOW = "3";
      t.EMBLEM_GREEN = "4";
      t.EMBLEM_COLORFUL = "5";
      t.EMBLEM_RED_GREEN = "6";
      t.EMBLEM_YELLOW_BLUE = "7";
      return t;
    })();
    e.ItemClass = o;
  });
  t(it);
  it.ItemClass;
  var at = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.SkinClass = void 0;
    var n = (function () {
      function t() {}
      t.SHOULDER = "1";
      t.COAT = "2";
      t.PANTS = "3";
      t.BELT = "4";
      t.SHOES = "5";
      t.WEAPON = "6";
      t.RING = "7";
      t.AMULET = "8";
      t.WRIST = "9";
      t.TITLE = "10";
      return t;
    })();
    e.default = n;
    var o = (function () {
      function t() {}
      t.HAT = "1";
      t.HAIR = "2";
      t.FACE = "3";
      t.CHEST = "4";
      t.COAT = "5";
      t.PANTS = "6";
      t.SHOES = "7";
      t.BELT = "8";
      t.BODY = "9";
      t.WEAPON = "10";
      t.AURA = "11";
      return t;
    })();
    e.SkinClass = o;
  });
  t(at);
  at.SkinClass;
  var st = e(function (t, e) {
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var n =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var i =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = n(it);
    var s = i(dt);
    var u = i(V);
    var l = n(at);
    var f = (function () {
      function r() {}
      r.getItemData = function (t) {
        return s.default.conf.items[t];
      };
      r.getItemIcon = function (t) {
        var e;
        var n = this.getItemData(t);
        return (e = n === null || n === void 0 ? void 0 : n.icon) !== null &&
          e !== void 0
          ? e
          : "";
      };
      r.getItemName = function (t) {
        var e;
        var n = this.getItemData(t);
        return (e = n === null || n === void 0 ? void 0 : n.name) !== null &&
          e !== void 0
          ? e
          : "";
      };
      r.getTypeText = function (t, e) {
        if (t == a.default.EQUIP) {
          return u.default.tr(3);
        } else if (t == a.default.ITEM) {
          if (e == a.ItemClass.PACKAGE) {
            return u.default.tr(210);
          }
          return u.default.tr(4);
        } else if (t == a.default.RAW) {
          return u.default.tr(5);
        } else if (t == a.default.EMBLEM) {
          return u.default.tr(294);
        } else if (t == a.default.CARD) {
          if (e == 1) return u.default.tr(312);
          return u.default.tr(313);
        } else if (t == a.default.SKIN) {
          var n = u.default.tr(128);
          switch (e) {
            case l.SkinClass.HAT:
              n = u.default.tr(132);
              break;
            case l.SkinClass.HAIR:
              n = u.default.tr(131);
              break;
            case l.SkinClass.FACE:
              n = u.default.tr(133);
              break;
            case l.SkinClass.CHEST:
              n = u.default.tr(130);
              break;
            case l.SkinClass.COAT:
              n = u.default.tr(134);
              break;
            case l.SkinClass.PANTS:
              n = u.default.tr(135);
              break;
            case l.SkinClass.SHOES:
              n = u.default.tr(137);
              break;
            case l.SkinClass.BELT:
              n = u.default.tr(136);
              break;
            case l.SkinClass.BODY:
              n = u.default.tr(139);
              break;
            case l.SkinClass.WEAPON:
              n = u.default.tr(138);
              break;
            case l.SkinClass.AURA:
              n = u.default.tr(170);
              break;
          }
          return n;
        }
        return u.default.tr(129);
      };
      r.getQualityColor = function (t) {
        if (t == 2) {
          return "rgb(104,213,237)";
        } else if (t == 3 || t == 5) {
          return "rgb(179,107,255)";
        } else if (t == 4) {
          return "rgb(255,9,255)";
        } else if (t == 5) {
          return "rgb(255,9,255)";
        } else if (t == 6) {
          return "rgb(255,180,0)";
        }
        return "#FFFFFF";
      };
      r.isEquipment = function (t) {
        return t < 1e6;
      };
      r.isEquipSlot = function (t) {
        var e = [605, 602, 603, 604, 606, 601, 607, 610, 609, 608];
        if (e.indexOf(t) >= 0) return true;
        return false;
      };
      r.isProfileEquipSlot = function (t) {
        if (t >= 621 && t < 621 + 10) {
          return true;
        }
        return false;
      };
      r.isBagOrQuickSlot = function (t) {
        if (t >= 1 && t < 1 + 40) {
          return true;
        } else if (t >= 501 && t < 501 + 6) {
          return true;
        }
        return false;
      };
      r.isQuickSkillSlot = function (t) {
        if (t >= 511 && t < 511 + 12) {
          return true;
        }
        return false;
      };
      r.isSkillOrQuickSkillSlot = function (t) {
        if (this.isQuickSkillSlot(t)) {
          return true;
        }
        if (t >= 301 && t < 301 + 300) {
          return true;
        }
        return false;
      };
      r.equipClassGetSlot = function (t, e) {
        switch (t) {
          case l.default.WEAPON:
            return 601;
          case l.default.BELT:
            return 604;
          case l.default.WRIST:
            return 610;
          case l.default.TITLE:
            return 607;
          case l.default.COAT:
            return 602;
          case l.default.PANTS:
            return 603;
          case l.default.SHOES:
            return 606;
          case l.default.RING:
            return 608;
          case l.default.AMULET:
            return 609;
          case l.default.SHOULDER:
            return 605;
        }
      };
      r.equipEqualsClass = function (t, e) {
        var n = r.getItemData(t);
        var o = r.getItemData(e);
        return n && o && n.type == o.type && n.class == o.class;
      };
      r.resourceIds = {
        coin: 3000001,
        gold: 3009001,
        skin: 3009002,
        upgradeProtect: 3002003,
        uppowerProtect: 3002004,
      };
      r.commonIds = { color: 3000002 };
      return r;
    })();
    e.default = f;
  });
  t(st);
  var et = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (d) {
      n(t, d);
      function t(t, e, n) {
        var o = d.call(this) || this;
        o.$loadCount = o.$loadMax = o.letterSpacing = 0;
        if (t) o.set(t, e, n);
        return o;
      }
      t.prototype.$measure_ = function () {
        var t, e;
        var n = 0;
        var o = 0;
        if (this.$loadCount >= this.$loadMax) {
          var r =
            (e =
              (t = this === null || this === void 0 ? void 0 : this.chars) ===
                null || t === void 0
                ? void 0
                : t.length) !== null && e !== void 0
              ? e
              : 0;
          for (var i = 0; i < r; i++) {
            var a = this.chars[i];
            var s = XOF.loader.get(this.charsTex[a]);
            if (s) {
              if (i) n += this.letterSpacing;
              n += s.width;
              o = s.height > o ? s.height : o;
            }
          }
        }
        this.$measureWidth_ = n;
        this.$measureHeight_ = o;
        this.updateText();
      };
      t.prototype.updateText = function () {
        var t, e;
        this.removeChildren();
        if (this.$loadCount >= this.$loadMax) {
          var n = this.width;
          var o = this.height;
          var r = 0;
          var i = 0;
          if (this.align == "center") {
            i = -n / 2;
          } else if (this.align == "right") {
            i = -n;
          }
          var a = 0;
          var s = 0;
          if (this.valign == "bottom") {
            s = -o;
          } else if (this.valign == "middle") {
            s = -o / 2;
          }
          var u =
            (e =
              (t = this === null || this === void 0 ? void 0 : this.chars) ===
                null || t === void 0
                ? void 0
                : t.length) !== null && e !== void 0
              ? e
              : 0;
          for (var l = 0; l < u; l++) {
            var f = this.chars[l];
            var c = XOF.loader.get(this.charsTex[f]);
            if (c) {
              if (l) r += this.letterSpacing;
              var p = new XOF.Image();
              p.skin = this.charsTex[f];
              this.addChild(p);
              p.pos(i + r - this.pivotX, s + a - this.pivotY);
              r += c.width;
            }
          }
        }
      };
      Object.defineProperty(t.prototype, "text", {
        get: function () {
          return this.$text;
        },
        set: function (t) {
          this.$text = t + "";
          this.chars = this.text.split("");
          this.$measure_();
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.getWidth_ = function () {
        return this.width_ >= 0 ? this.width_ : this.$measureWidth_;
      };
      t.prototype.getHeight_ = function () {
        return this.height_ >= 0 ? this.height_ : this.$measureHeight_;
      };
      t.prototype.onLoaded = function () {
        this.$loadCount += 1;
        if (this.$loadCount >= this.$loadMax) {
          this.$measure_();
        }
      };
      t.prototype.set = function (t, e, n) {
        this.charsTex = {};
        this.dir = t;
        var o = n.split("");
        this.$loadCount = this.$loadMax = 0;
        for (var r = e, i = 0; i < o.length; r++, i++) {
          var a = this.dir + "/" + r + ".png";
          this.charsTex[o[i]] = a;
          if (!XOF.loader.get(a)) {
            this.$loadMax += 1;
            XOF.loader.loadImage(a, undefined, undefined, this.onLoaded, this);
          }
        }
        this.$measure_();
      };
      t.prototype.draw = function (t) {
        var e, n;
        var o = this.width;
        var r = this.height;
        var i = 0;
        var a = 0;
        if (this.align == "center") {
          a = -o / 2;
        } else if (this.align == "right") {
          a = -o;
        }
        var s = 0;
        var u = 0;
        if (this.valign == "bottom") {
          u = -r;
        } else if (this.valign == "middle") {
          u = -r / 2;
        }
        var l =
          (n =
            (e = this === null || this === void 0 ? void 0 : this.chars) ===
              null || e === void 0
              ? void 0
              : e.length) !== null && n !== void 0
            ? n
            : 0;
        for (var f = 0; f < l; f++) {
          var c = this.chars[f];
          var p = XOF.loader.get(this.charsTex[c]);
          if (p) {
            if (f) i += this.letterSpacing;
            t.draw(p, a + i - this.pivotX, u + s - this.pivotY);
            i += p.width;
          }
        }
        d.prototype.draw.call(this, t);
      };
      return t;
    })(XOF.Sprite);
    e.default = o;
  });
  t(et);
  var nt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(P);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.order = ht.RoleOrder.NONE;
        t.position = new r.default(t);
        return t;
      }
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        set: function (t) {
          this.position.setZ(this.float);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {};
      t.prototype.setMap = function (t) {
        this.map = t;
      };
      t.prototype.onStart = function () {};
      t.prototype.onRemove = function () {};
      t.prototype.removeSelfFormMap = function () {
        if (this.map) {
          this.map.removeObject(this);
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(nt);
  var ot = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(et);
    var i = o(Q);
    var a = o(nt);
    var s = o(P);
    var u = (function (o) {
      n(t, o);
      function t(t, e) {
        var n = o.call(this) || this;
        n.$POOL_TYPE = "RoleDamageLabel";
        n.centerX = 0;
        n.centerY = 0;
        n.lab = new r.default("common/etc/combo.img", t || 143, "0123456789");
        n.lab.align = "center";
        n.lab.valign = "middle";
        n.addChild(n.lab);
        n.position = new s.default(n);
        n.order = ht.RoleOrder.NONE;
        n.lab.text = e;
        return n;
      }
      t.prototype.setPath = function (t) {
        this.lab.set("common/etc/combo.img", t || 143, "0123456789");
      };
      Object.defineProperty(t.prototype, "text", {
        get: function () {
          return this.lab.text;
        },
        set: function (t) {
          this.lab.text = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "letterSpacing", {
        get: function () {
          return this.lab.letterSpacing;
        },
        set: function (t) {
          this.lab.letterSpacing = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.center = function (t, e) {
        this.lab.pivot(t, e);
        return this;
      };
      t.prototype.update = function (t) {
        var e;
        (e = this.tween) === null || e === void 0 ? void 0 : e.$update(t);
        this.time += t;
        if (this.time >= this.max) {
          this.removeSelfFormMap();
        }
      };
      t.prototype.onStart = function () {
        this.tween = i.default
          .get(this)
          .wait(100)
          .to({ scaleX: 1.6, scaleY: 1.6, alpha: 1 }, 80)
          .wait(100)
          .to({ scaleX: 1, scaleY: 1 }, 80)
          .wait(100)
          .to({ alpha: 0, y: this.y - 50 }, 400);
        this.tween.remove();
        i.default.removeTweenFromList(this.tween);
        this.time = 0;
        this.max = 1e3;
      };
      return t;
    })(a.default);
    e.default = u;
  });
  t(ot);
  var rt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(y);
    var i = o(Z);
    var a = o(P);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.$POOL_TYPE = "FigureEffect";
        t.order = ht.RoleOrder.NONE;
        t.position = new a.default(t);
        t.$renderer2.filters = [];
        t.color = "#ffffff";
        return t;
      }
      t.prototype.clone = function (t) {
        this.skin = t.skin;
        this.centerX = t.centerX;
        this.centerY = t.centerY;
        this.offset(t.offsetX, t.offsetY);
        return this;
      };
      t.prototype.$setAlpha = function (t) {
        e.prototype.$setAlpha.call(this, t);
        this.filter.alpha = t;
      };
      Object.defineProperty(t.prototype, "color", {
        get: function () {
          return this.filter.color;
        },
        set: function (t) {
          if (t) {
            if (!this.filter) {
              this.filter = new i.default();
            }
            this.$renderer2.filters = [this.filter];
            this.filter.color = t;
          } else {
            this.$renderer2.filters = undefined;
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.draw = function (t) {
        var e = XOF.loader.get(this.skin);
        if (e) {
          if (this.color == null) {
            t.draw(
              this.skin,
              -this.centerX + this.offsetX,
              -this.centerY + this.offsetY,
              e.width,
              e.height
            );
          } else {
            t.pushStyle("globalCompositeOperation");
            t.$.globalAlpha = this.alpha;
            t.$.globalCompositeOperation = "xor";
            t.draw(
              this.skin,
              -this.centerX + this.offsetX,
              -this.centerY + this.offsetY,
              e.width,
              e.height
            );
            t.$.fillStyle = this.color || "#ff0000";
            t.$.globalAlpha = 1;
            t.$.globalCompositeOperation = "destination-over";
            t.$.fillRect(
              t.x + (-this.centerX + this.offsetX),
              t.y + (-this.centerY + this.offsetY),
              e.width,
              e.height
            );
            t.popStyle();
          }
        }
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        set: function (t) {
          this.position.setZ(t);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {};
      t.prototype.setMap = function (t) {
        this.map = t;
      };
      t.prototype.onStart = function () {};
      t.prototype.onRemove = function () {};
      t.prototype.removeSelfFormMap = function () {
        if (this.map) {
          this.map.removeObject(this);
        }
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(rt);
  var yt = e(function (t, e) {
    var i =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = {};
    var n = (function () {
      function t() {}
      t.reset = function () {
        a = {};
      };
      t.push = function (t) {
        if (!t.$POOL_TYPE) return;
        if (!a[t.$POOL_TYPE]) {
          a[t.$POOL_TYPE] = [];
        }
        var e = a[t.$POOL_TYPE];
        if (e.indexOf(t) < 0) {
          e.push(t);
          this.objectReset(t);
        }
      };
      t.pop = function (t, e) {
        var n = [];
        for (var o = 2; o < arguments.length; o++) {
          n[o - 2] = arguments[o];
        }
        var r = a[t];
        if (r === null || r === void 0 ? void 0 : r.length) {
          return r.pop();
        }
        if (e) return new (e.bind.apply(e, i([void 0], n)))();
      };
      t.objectReset = function (t) {
        switch (t.$POOL_TYPE) {
          case "RoleDamageLabel": {
            t.centerX = 0;
            t.centerY = 0;
            t.letterSpacing = 0;
          }
          case "FigureEffect": {
            t.color = "#ffffff";
          }
        }
      };
      t.release = function (t) {
        var e = a[t];
        while (e === null || e === void 0 ? void 0 : e.length) {
          this.pop(t, null);
        }
      };
      return t;
    })();
    e.default = n;
  });
  t(yt);
  var r = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.dirname = function (t) {
        return t.replace(/\/.[^/]+$/, "");
      };
      return t;
    })();
    e.default = n;
  });
  t(r);
  var _t = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var b = n(dt);
    var O = n(k);
    var i = n(r);
    var o = (function () {
      function r() {}
      r.importScript = function (t) {
        var e = b.default.getPvfConf("map/" + t.toLowerCase() + ".json");
        return O.default.copy(e);
      };
      r.getPvfMap = function (t) {
        var e = b.default.conf.map.map[t];
        var n = b.default.getPvfConf("map/" + e.map + ".json");
        if (n["[import script]"]) {
          var o = n;
          n = r.importScript(n["[import script]"]);
          n = O.default.merge(n, o);
        }
        return n;
      };
      r.getMapAnimations = function (t) {
        var e = b.default.conf.map.map[t];
        var n = b.default.getPvfConf("map/" + e.map + ".json");
        var o = e.map;
        if (n["[import script]"]) {
          o = n["[import script]"].toLowerCase();
        }
        return b.default.getPvfConf(
          "map/" + i.default.dirname(o) + "/animation.ani.json"
        );
      };
      r.getNpcAnimation = function (t) {
        return b.default.getPvfConf("npc/animation.ani.json")[t];
      };
      r.getTownMovePos = function (t, e) {
        if (t && e) {
          var n = b.default.conf.map.map[t];
          var o = this.getPvfMap(e);
          for (var r = 0; r < o.townMoveArea.length; r += 6) {
            var i = o.townMoveArea[r + 4];
            var a = o.townMoveArea[r + 5];
            if (i == n.city && a == n.town) {
              var s = o.townMoveArea[r] + o.townMoveArea[r + 2] / 2;
              var u = o.townMoveArea[r + 1] + o.townMoveArea[r + 3] / 2;
              var l = void 0,
                f = void 0;
              for (var c = 0; c < 10; c++) {
                for (var p = -1; p <= 1; p += 2) {
                  for (var d = -1; d <= 1; d += 2) {
                    for (
                      var h = 0, v = 4;
                      h < o.moveArea.length - (v - 1);
                      h += v
                    ) {
                      var y = s + c * 5 * p;
                      var _ = u + c * 5 * d;
                      if (
                        O.default.pointHitRect(
                          y,
                          _,
                          o.moveArea[h],
                          o.moveArea[h + 1],
                          o.moveArea[h + 2],
                          o.moveArea[h + 3]
                        )
                      ) {
                        l = y;
                        f = _;
                      }
                      if (c == 0 || l != undefined) break;
                    }
                    if (c == 0 || l != undefined) break;
                  }
                  if (c == 0 || l != undefined) break;
                }
                if (l != undefined) break;
              }
              var m = l || s;
              var g = f || u;
              return [m, g];
            }
          }
        }
        return [0, 0];
      };
      r.getMapByCityandTown = function (t, e) {
        for (var n in b.default.conf.map.map) {
          var o = b.default.conf.map.map[n];
          if (o.city == t && o.town == e) {
            return o;
          }
        }
      };
      r.getMapId = function (t, e) {
        var n = r.getMapByCityandTown(t, e);
        return n === null || n === void 0 ? void 0 : n.id;
      };
      r.getTowerData = function (t, e) {
        for (var n in b.default.conf.tower) {
          var o = b.default.conf.tower[n];
          if (o.level == t && o.round == e) {
            return o;
          }
        }
      };
      r.getTowerCount = function () {
        var t = 0;
        for (var e = 1; e < Number.MAX_SAFE_INTEGER; e++) {
          if (!r.getTowerData(e, 1)) break;
          t++;
        }
        return t;
      };
      r.getTowerRoundCount = function (t) {
        var e = 0;
        for (var n = 1; n < Number.MAX_SAFE_INTEGER; n++) {
          if (!r.getTowerData(t, n)) break;
          e++;
        }
        return e;
      };
      r.TowerHasBoss = function (t, e) {
        var n, o, r, i;
        if (e) {
          return (
            ((o =
              (n = this.getTowerData(t, e).boss) === null || n === void 0
                ? void 0
                : n.length) !== null && o !== void 0
              ? o
              : 0) > 0
          );
        }
        return (
          ((i =
            (r = this.getTowerData(t, this.getTowerRoundCount(t)).boss) ===
              null || r === void 0
              ? void 0
              : r.length) !== null && i !== void 0
            ? i
            : 0) > 0
        );
      };
      r.getDungeonData = function (t) {
        return b.default.conf.dungeon[t];
      };
      r.greedList = function (t, e, n) {
        var o = [];
        for (var r = 0, i = 0; r < n; r++) {
          o[r] = [];
          for (var a = 0; a < e; a++, i += 2) {
            o[r][a] = t.substr(i, 2);
          }
        }
        return o;
      };
      r.getGreed = function (t, e, n) {
        var o = e.indexOf(n) * 2;
        return t.substr(o, 2);
      };
      r.getGreedPathgateDirections = function (t) {
        var e = [];
        var n = 2,
          o = 3,
          r = 0,
          i = 1;
        switch (t) {
          case "AA":
            break;
          case "EE":
            e = [r];
            break;
          case "GG":
            e = [n, r];
            break;
          case "FF":
            e = [r, i];
            break;
          case "MM":
            e = [r, o];
            break;
          case "HH":
            e = [r, n, i];
            break;
          case "OO":
            e = [r, n, o];
            break;
          case "PP":
            e = [r, n, i, o];
            break;
          case "NN":
            e = [r, o, i];
            break;
          case "CC":
            e = [n];
            break;
          case "DD":
            e = [n, i];
            break;
          case "KK":
            e = [n, o];
            break;
          case "LL":
            e = [n, o, i];
            break;
          case "BB":
            e = [i];
            break;
          case "JJ":
            e = [i, o];
            break;
          case "II":
            e = [o];
            break;
        }
        return e;
      };
      r.hasPathgate = function (t, e) {
        var n = this.getGreedPathgateDirections(t);
        return n.indexOf(e) >= 0;
      };
      r.getMapType = function (t) {
        var e, n;
        var o =
          (e = b.default.conf.map.map) === null || e === void 0 ? void 0 : e[t];
        return (n =
          b.default.conf.dungeon[
            o === null || o === void 0 ? void 0 : o.city
          ]) === null || n === void 0
          ? void 0
          : n.type;
      };
      r.getDungeonTypeByDungeonId = function (t) {
        var e, n;
        return (n =
          (e = b.default.conf.dungeon) === null || e === void 0
            ? void 0
            : e[t]) === null || n === void 0
          ? void 0
          : n.type;
      };
      r.getDungeonLineMapBy = function (t, e) {
        for (var n in b.default.conf.dungeonMap) {
          var o = b.default.conf.dungeonMap[n];
          if (o.level == t && e == e) {
            return o;
          }
        }
      };
      r.dungeonPathgateBy = function (t, e, n) {
        switch (n) {
          case 0:
            t -= 1;
            break;
          case 1:
            t += 1;
            break;
          case 2:
            e -= 1;
            break;
          case 3:
            e += 1;
            break;
        }
        return [t, e];
      };
      return r;
    })();
    e.default = o;
  });
  t(_t);
  var mt = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n($);
    var u = n(q);
    var r = n(I);
    var s = n(yt);
    var l = n(ot);
    var f = n(_t);
    var c = n(dt);
    var i = (function () {
      function t() {}
      Object.defineProperty(t, "map", {
        get: function () {
          return u.default.viewMgr.getOpenView(r.default.Map);
        },
        enumerable: false,
        configurable: true,
      });
      t.curIsBossDungeon = function () {
        return u.default.userData.map.isBoss();
      };
      t.isFight = function () {
        return u.default.userData.map.currentScreen() == 2;
      };
      t.updateFramerate = function () {
        if (!u.default.isMobile) return;
        var t = u.default.userData.map.currentScreen();
        if (t == 2) {
          XOF.player.frameRate = o.default.fightFrameRate;
        } else if (t == 1) {
          XOF.player.frameRate = o.default.cityFramerate;
        } else {
          XOF.player.frameRate = o.default.homeFramerate;
        }
      };
      t.number = function (t, e, n, o) {
        var r;
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 0;
        }
        var i =
          (r = this === null || this === void 0 ? void 0 : this.map) === null ||
          r === void 0
            ? void 0
            : r.curScene;
        if (i) {
          var a = s.default.pop("RoleDamageLabel", l.default);
          a.setPath(e);
          a.text = t + "";
          a.letterSpacing = -3;
          a.position.set(n, o);
          a.order = ht.RoleOrder.EFFECT;
          i.addObject(a);
        }
      };
      t.isMyDungeon = function (t, e) {
        return (
          u.default.userData.map.dungeonCurPos[0] == t &&
          u.default.userData.map.dungeonCurPos[1] == e
        );
      };
      t.isBossDungeon = function (t, e) {
        return (
          t == u.default.userData.map.dungeonBoss[0] &&
          e == u.default.userData.map.dungeonBoss[1]
        );
      };
      t.isMyAroundDungeon = function (t, e) {
        var n = u.default.userData.map;
        var o = 1;
        var r = t - n.dungeonCurPos[0];
        var i = e - n.dungeonCurPos[1];
        o -= Math.abs(r);
        o -= Math.abs(i);
        if (o == 0) {
          var a = c.default.conf.dungeon[c.default.conf.map.map[n.id].city];
          var s = 0;
          if (r > 0) {
            s = 1;
          } else if (i < 0) {
            s = 2;
          } else if (i > 0) {
            s = 3;
          }
          return f.default.hasPathgate(
            a.greeds[n.dungeonCurPos[1]][n.dungeonCurPos[0]],
            s
          );
        }
        return false;
      };
      t.isEnteredDungeon = function (t, e) {
        return u.default.userData.map.isEnteredDungeon(t, e);
      };
      return t;
    })();
    e.default = i;
  });
  t(mt);
  var ut = e(function (t, e) {
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var n =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var i =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = i(dt);
    var s = i(q);
    var u = i(X);
    var l = i(w);
    var f = i(J);
    var c = i(O);
    var p = i(tt);
    var d = i(st);
    var h = n(it);
    var m = i(ot);
    var v = i(rt);
    var g = i(yt);
    var y = i(mt);
    var _ = (function () {
      function t(t) {
        this.role = t;
        this.actor = t.actor;
      }
      t.prototype.playSound = function (t, e) {
        if (e === void 0) {
          e = false;
        }
        s.default.sound.play(
          t,
          { overload: true, completeDestroy: true },
          e ? undefined : this.role
        );
      };
      t.prototype.AddStateLayerAnimation = function (t, e, n, o) {
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 0;
        }
        e.order = t > 0 ? 9999 : 0;
        e.pos(n, o);
        if (t < 0) {
          this.actor.addChildAt(e, 0);
        } else {
          this.actor.addChild(e);
        }
      };
      t.prototype.AddBooldstain = function () {
        var t = g.default.pop("BloodstainEffect", f.default);
        this.role.map.addObject(
          t,
          vt.layerConstValue.bottom,
          this.role.position.x + l.default.randomInt(-33, 33),
          this.role.position.y + l.default.randomInt(-25, 10)
        );
      };
      t.prototype.CreateAnimation = function (t) {
        if (!a.default.swordman_effect_animations[t]) {
          XOF.log("不存在的动画", a.default.swordman_effect_animations, t);
        }
        var e = new c.default(a.default.swordman_effect_animations[t]);
        e.name = t;
        return e;
      };
      t.prototype.CreateAnimationByPath = function (t, e, n) {
        var o = a.default.getAnimationData(t, e);
        if (!o) {
          XOF.log("不存在的动画:", t);
        }
        var r = this.CreateAnimationByAnimationData(o, e || t, n);
        return r;
      };
      t.prototype.CreateAnimationByAnimationData = function (t, e, n) {
        if (n === void 0) {
          n = 1;
        }
        if (!t) {
          XOF.log("错误的资源动画:" + t);
        }
        var o = new c.default(t);
        o.name = e;
        o.size_ = n;
        return o;
      };
      t.prototype.createPassiveObject = function (t, e, n, o, r, i) {
        var a = this.role.map.createPassiveObject(
          t,
          this.role.position.x + this.role.direction * e,
          this.role.position.y + n,
          o,
          r,
          i
        );
        a.direction = this.role.direction;
        if (a === null || a === void 0 ? void 0 : a.fu)
          a.fu.camp = this.role.fu.camp;
        if (a === null || a === void 0 ? void 0 : a.attribute) {
          a.attribute.attach(this.role.attribute);
          a.fu.level = this.role.fu.level;
        }
        return a;
      };
      t.prototype.subAnimation = function (t, e, n) {
        if (e === void 0) {
          e = 1;
        }
        return this.subAnimationUpdate(t, e > 0 ? 0 : -1, n);
      };
      t.prototype.subAnimationUpdate = function (t, e, n) {
        var o = [];
        for (var r = 0; r < t.length; r += 3) {
          var i = t[r].toLocaleLowerCase();
          if (e >= 0) {
            var a = t[r + 1];
            if (e == a) {
              var s = t[r + 2];
              var u = void 0;
              if (this.HasAnimation(i)) continue;
              if (n) {
                u = this.CreateAnimationByPath(n, i);
              } else {
                u = this.CreateAnimationByPath(i);
              }
              o.push(u);
              this.AddStateLayerAnimation(s, u, 0, 0);
            }
          } else {
            this.RemoveAnimation(i);
          }
        }
        return o;
      };
      t.prototype.HasAnimation = function (t) {
        var e = this.actor.getChildByName(t);
        return !!e;
      };
      t.prototype.RemoveAnimation = function (t) {
        var e = this.actor.getChildByName(t);
        if (e) {
          this.actor.removeChild(e);
        }
      };
      t.prototype.shake = function (t, e, n, o, r) {};
      t.prototype.CreateShadowEffect = function (t) {
        if (t === void 0) {
          t = 1.2;
        }
        var e = new p.default().clone(this.role.body, t);
        this.actor.addChild(e);
      };
      t.prototype.createFigureEffect = function (t) {
        if (t === void 0) {
          t = "#ffffff";
        }
        var e = this.role;
        var n = g.default.pop("FigureEffect", v.default);
        n.scale(e.actor.scaleX, e.actor.scaleY);
        n.color = t;
        n.float = e.$float;
        return n;
      };
      t.prototype.createRoleEffect = function (t) {
        if (t === void 0) {
          t = "#ffffff";
        }
        var e = this.role;
        var n = this.createFigureEffect(t);
        n.clone(this.role.body);
        n.alpha = 0.9;
        this.role.map.addObject(n, undefined, e.x, e.y - 1);
        var o = this.role.map
          .tween(n)
          .to({ alpha: 0 }, 800)
          .wait(220)
          .call(this.role.map.removeObject, this.role.map, [n]);
        o.call(this.role.map.removeTween, this.role.map, [o]);
      };
      t.prototype.createWeaponEffect = function (t, e) {
        if (t === void 0) {
          t = "#ffffff";
        }
        var n = this.role;
        var o = n.weapon;
        if (o) {
          for (var r in o.animations) {
            var i = o.animations[r];
            var a = this.createFigureEffect(t);
            a.clone(i);
            a.alpha = 0.9;
            this.role.map.addObject(a, undefined, n.x, n.y - 1);
            var s = this.role.map
              .tween(a)
              .to({ alpha: 0 }, 800)
              .wait(220)
              .call(this.role.map.removeObject, this.role.map, [a]);
            s.call(this.role.map.removeTween, this.role.map, [s]);
          }
        }
      };
      t.prototype.AddBuff = function (t, e, n) {
        if (e === void 0) {
          e = false;
        }
        if (n === void 0) {
          n = 1;
        }
        if (n <= 0) return;
        var o = this.role.buffAttribute.add(t, n);
        if (o && e) {
          this.role.buffAttribute.active(t, u.default.ACTIVE, undefined, n);
        }
      };
      t.prototype.getBuffLevel = function (t) {
        return this.role.buffAttribute.getBuffLevel(t);
      };
      t.prototype.GetSkillLevel = function (t) {
        var e, n, o, r;
        if ((e = this.role) === null || e === void 0 ? void 0 : e.roleContext) {
          return (r =
            (o =
              (n = this.role.roleContext) === null || n === void 0
                ? void 0
                : n.skills) === null || o === void 0
              ? void 0
              : o[t]) !== null && r !== void 0
            ? r
            : 0;
        }
        return 0;
      };
      t.prototype.getJob = function () {
        var t, e;
        return (e =
          (t = this.role) === null || t === void 0 ? void 0 : t.roleData) ===
          null || e === void 0
          ? void 0
          : e.role;
      };
      t.prototype.isBeamswd = function () {
        var t, e;
        return (e =
          (t = this.role) === null || t === void 0 ? void 0 : t.isBeamswd) !==
          null && e !== void 0
          ? e
          : false;
      };
      t.prototype.IsKeyDown = function (t) {
        return this.role.key
          ? this.role.key.isDown(t)
          : s.default.gameControler.isDown(t);
      };
      t.prototype.RemoveBuff = function (t) {
        this.role.buffAttribute.rm(t);
      };
      t.prototype.cleanAllForce = function () {
        this.role.force.clean();
      };
      t.prototype.hasForce = function (t) {
        return this.role.force.has(t);
      };
      t.prototype.addForce = function (t, e, n, o, r) {
        this.role.force.move(t, e, n, o, undefined, r);
      };
      t.prototype.float = function (t, e, n, o) {
        this.role.force.float(t, 24 * 60, e, n, o);
      };
      t.prototype.removePower = function (t) {
        this.role.force.removeForce(t);
      };
      t.prototype.setValue = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        var n = t.length;
        if (n > 0) {
          var o = this.$value;
          if (!o) {
            o = this.$value = {};
          }
          if (n % 2 == 0) {
            for (var r = 0, i = 2, a = void 0, s = void 0; r <= n - i; r += i) {
              (a = t[r]), (s = t[r + 1]);
              if (s == undefined) {
                delete o[a];
              } else {
                o[a] = s;
              }
            }
          } else if (n == 1) {
            delete o[t[0]];
          } else {
            XOF.log("SetValue参数不匹配");
          }
        } else {
          this.$value = undefined;
          delete this.$value;
        }
      };
      t.prototype.getValue = function (t, e) {
        var n, o;
        if (t)
          return (o =
            (n = this === null || this === void 0 ? void 0 : this.$value) ===
              null || n === void 0
              ? void 0
              : n[t]) !== null && o !== void 0
            ? o
            : e;
        return this.$value;
      };
      t.prototype.getMp = function () {
        return this.role.mp;
      };
      t.prototype.item = function (t) {
        var e, n;
        var o = d.default.getItemData(t);
        if (o && o.type == h.default.ITEM && o.class == h.ItemClass.ITEM) {
          if ((e = o.recovery) === null || e === void 0 ? void 0 : e.length) {
            for (var r = 0, i = o.recovery; r < i.length; r++) {
              var a = i[r];
              this.recovery(a[0], a[1], a[2], a[3]);
            }
          }
          if ((n = o.effect) === null || n === void 0 ? void 0 : n.length) {
            for (var s = 0, u = o.effect; s < u.length; s++) {
              var a = u[s];
              if (a[0] == "buff") {
                this.AddBuff(a[2], true, 1);
              }
            }
          }
        }
      };
      t.prototype.recovery = function (t, e, n, o, r) {
        var i, a, s, u, l, f;
        if (o === void 0) {
          o = 1e3;
        }
        if (r === void 0) {
          r = true;
        }
        if (this.role.isDeath) return;
        var c = 0,
          p = 0,
          d = this.role.maxHp,
          h = this.role.maxMp;
        if (t == "hp") {
          c = n;
        } else if (t == "mp") {
          p = n;
        }
        if (e == "%") {
          c = Math.ceil((d * c) / 100);
          p = Math.ceil((h * p) / 100);
        }
        var v = this.role.map.getObjectId(this.role);
        if (c > 0) {
          this.role.map.consumable.hpRecovery(v, c, o);
        } else if (p > 0) {
          this.role.map.consumable.mpRecovery(v, p, o);
        }
        if (r)
          if (c > 0) {
            this.playSound("HP_RECOVERED");
            var y = this.CreateAnimationByPath(
              "common/commoneffect/animation/heal.ani"
            );
            this.AddStateLayerAnimation(
              1,
              y,
              0,
              -((s =
                (a =
                  (i = this.role) === null || i === void 0
                    ? void 0
                    : i.roleData) === null || a === void 0
                  ? void 0
                  : a.height) !== null && s !== void 0
                ? s
                : 50) / 2
            );
            var _ = g.default.pop("RoleDamageLabel", m.default);
            _.setPath(64);
            _.text = c + "";
            _.letterSpacing = -3;
            _.position.set(
              this.role.x,
              -(this.role.roleData.height + this.role.float) + this.role.y + 1
            );
            _.order = ht.RoleOrder.EFFECT;
            this.role.map.addObject(_);
          } else if (p > 0) {
            this.playSound("MP_RECOVERED");
            var y = this.CreateAnimationByPath(
              "common/commoneffect/animation/mpup.ani"
            );
            this.AddStateLayerAnimation(
              1,
              y,
              0,
              -((f =
                (l =
                  (u = this.role) === null || u === void 0
                    ? void 0
                    : u.roleData) === null || l === void 0
                  ? void 0
                  : l.height) !== null && f !== void 0
                ? f
                : 50) / 2
            );
            var _ = g.default.pop("RoleDamageLabel", m.default);
            _.setPath(74);
            _.text = p + "";
            _.letterSpacing = -3;
            _.position.set(
              this.role.x,
              -(this.role.roleData.height + this.role.float) + this.role.y + 1
            );
            _.order = ht.RoleOrder.EFFECT;
            this.role.map.addObject(_);
          }
      };
      t.prototype.hpMpAdd = function (t, e) {
        if (t === void 0) {
          t = 0;
        }
        if (e === void 0) {
          e = 0;
        }
        if (this.role.hp + t < 0) {
          t = -this.role.hp;
        }
        if (this.role.mp + e < 0) {
          e = -this.role.mp;
        }
        if (this.role.hp + t > this.role.maxHp) {
          t = this.role.maxHp - this.role.hp;
        }
        if (this.role.mp + e > this.role.maxMp) {
          e = this.role.maxMp - this.role.mp;
        }
        this.role.hp += t;
        this.role.mp += e;
      };
      t.prototype.damage = function (t, e) {
        var n = this.role.hp;
        this.hpMpAdd(-t, 0);
        if (this.role.hp <= 0) {
          this.role.hp = 0;
          this.role.death();
        }
        this.role.event(1023, [this.role, this.role.hp, n, this.role.maxHp]);
      };
      t.prototype.number = function (t, e, n, o) {
        var r, i, a;
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 0;
        }
        y.default.number(
          t,
          e,
          n + this.role.position.x,
          o +
            this.role.position.y +
            -(
              ((a =
                (i =
                  (r = this.role) === null || r === void 0
                    ? void 0
                    : r.roleData) === null || i === void 0
                  ? void 0
                  : i.height) !== null && a !== void 0
                ? a
                : 80) -
              15 +
              this.role.float +
              22
            ) +
            1
        );
      };
      t.prototype.cleanBuff = function () {
        this.role.buffAttribute.update(Number.MAX_SAFE_INTEGER);
        this.role.buffAttribute.cleanCity();
      };
      t.prototype.resetHits = function (t) {
        this.role.fu.resetHits(t);
      };
      t.prototype.fightObjectIsValid = function (t) {
        return !(
          t == undefined ||
          t.destroyed == true ||
          t.camp == this.role.fu.camp ||
          t.isDeath
        );
      };
      t.prototype.findFightObject = function (t) {
        if (t === void 0) {
          t = Number.MAX_VALUE;
        }
        var e = this.role.fu.camp;
        var n = this.role.map;
        var o;
        if (e == ht.RoleCamp.HERO) {
          o = n.getFightObjects(ht.RoleCamp.MONSTER);
        } else if (e == ht.RoleCamp.MONSTER) {
          o = n.getFightObjects(ht.RoleCamp.HERO);
        }
        for (var r in o) {
          var i = o[r];
          if (n.getDistance(this.role, i, true, false) > t) continue;
          if (i.script.isFeignDeath()) continue;
          return i;
        }
        return undefined;
      };
      t.prototype.isFeignDeath = function () {
        return false;
      };
      t.prototype.hasEnemyCount = function (t) {};
      return t;
    })();
    e.default = _;
  });
  t(ut);
  var gt = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var i = n(st);
    var a = (function (n) {
      o(s, n);
      function s(t) {
        var e = n.call(this) || this;
        e.role = t;
        e.countdowns = {};
        return e;
      }
      s.prototype.onUpdate = function (t) {
        for (var e in this.countdowns) {
          this.countdowns[e].timestamp -= t;
          if (this.countdowns[e].timestamp <= 0) {
            this.clean(e);
          }
        }
      };
      s.prototype.skill = function (t, e) {
        if (e === void 0) {
          e = 1;
        }
        var n = r.default.conf.skills.all[t];
        if (n) {
          if (n.cd > 0) {
            var o = (n.cd / 1e3) * e * this.role.attribute.cd;
            this.countdowns[t] = { timestamp: o, max: o };
            this.event(s.CD_ON, [t]);
          }
        } else {
          XOF.log("不存在的技能", t);
        }
      };
      s.prototype.item = function (t, e) {
        if (e === void 0) {
          e = 1;
        }
        var n = i.default.getItemData(t);
        if (n) {
          if (n.cd > 0) {
            this.cd2(t, n.cd, 0, e);
          }
        } else {
          XOF.log("不存在的物品:", t);
        }
      };
      s.prototype.cd2 = function (t, e, n, o) {
        var r, i;
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 1;
        }
        if (
          ((i =
            (r = this.countdowns) === null || r === void 0 ? void 0 : r[t]) ===
            null || i === void 0
            ? void 0
            : i.timestamp) > 0
        ) {
          XOF.log("id:" + t + " 已经进入冷却了 将会覆盖");
        }
        var a = ((e - n) / 1e3) * o;
        this.countdowns[t] = { timestamp: a, max: a };
        this.event(s.CD_ON, [t]);
      };
      s.prototype.clean = function (t) {
        delete this.countdowns[t];
        this.event(s.CD_OFF, [t]);
      };
      s.prototype.cleanAllCd = function () {
        for (var t in this.countdowns) {
          this.clean(t);
        }
      };
      s.prototype.get = function (t) {
        var e, n, o;
        return (
          ((o =
            (n =
              (e = this.countdowns) === null || e === void 0
                ? void 0
                : e[t]) === null || n === void 0
              ? void 0
              : n.timestamp) !== null && o !== void 0
            ? o
            : 0) * 1e3
        );
      };
      s.prototype.getCDRate = function (t) {
        var e, n, o;
        var r = this.get(t);
        var i =
          ((o =
            (n =
              (e = this.countdowns) === null || e === void 0
                ? void 0
                : e[t]) === null || n === void 0
              ? void 0
              : n.max) !== null && o !== void 0
            ? o
            : 0) * 1e3;
        return r > 0 && i > 0 ? r / i : 0;
      };
      s.CD_OFF = "CD_COMPLETE";
      s.CD_ON = "CD_ON";
      s.CD_CHANGED = "CD_CHANGED";
      return s;
    })(XOF.EventDispatcher);
    e.default = a;
  });
  t(gt);
  var lt = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(u);
    var r = (function () {
      function t(t) {
        this.keys = [];
        this.role = t;
      }
      t.prototype.setConf = function (t) {
        this.conf = t;
      };
      t.prototype.getKeyCode = function (t) {
        if (this.conf) {
          var e = void 0;
          for (var n in this.conf) {
            if (this.conf[n] == t) {
              e = n;
              break;
            }
          }
          if (o.default[e] > 0) {
            t = o.default[e];
          } else {
            for (var n in o.default) {
              if (o.default[n] == t) {
                if (this.conf[n]) {
                  t = -1;
                  break;
                }
              }
            }
          }
        }
        return t;
      };
      t.prototype.addKeyLogic = function () {
        this.role.on(XOF.Event.KEY_DOWN, this.onKeyDown, this);
        this.role.on(XOF.Event.KEY_UP, this.onKeyUp, this);
      };
      t.prototype.removeKeyLogic = function () {
        this.role.off(XOF.Event.KEY_DOWN, this.onKeyDown, this);
        this.role.off(XOF.Event.KEY_UP, this.onKeyUp, this);
      };
      t.prototype.onKeyDown = function (t) {
        this.keyPress(this.getKeyCode(t), true);
      };
      t.prototype.onKeyUp = function (t) {
        this.keyRelease(this.getKeyCode(t));
      };
      t.prototype.isDown = function (t) {
        return this.keys.indexOf(this.getKeyCode(t)) >= 0;
      };
      t.prototype.isDownMoveKey = function () {
        var e = this;
        return [
          o.default.left,
          o.default.up,
          o.default.down,
          o.default.right,
        ].some(function (t) {
          return e.isDown(t);
        });
      };
      t.prototype.keyPress = function (t, e) {
        if (e === void 0) {
          e = false;
        }
        if (!this.isDown(t)) {
          this.roleKey(XOF.Event.KEY_DOWN, t);
          if (e) {
            this.keys.push(t);
          } else {
            this.roleKey(XOF.Event.KEY_UP, t);
          }
        }
      };
      t.prototype.keyRelease = function (t) {
        var e = this.keys.indexOf(t);
        if (e >= 0) {
          this.keys.splice(e, 1);
          this.roleKey(XOF.Event.KEY_UP, t);
        }
      };
      t.prototype.roleKey = function (t, e) {
        if (t == XOF.Event.KEY_UP) {
          this.role.onKeyUp(e);
        } else if (t == XOF.Event.KEY_DOWN) {
          this.role.onKeyDown(e);
        }
      };
      t.prototype.allRelease = function () {
        while (this.keys.length) {
          this.keyRelease(this.keys[0]);
        }
      };
      t.prototype.clean = function () {
        this.role = this.keys = this.conf = undefined;
      };
      return t;
    })();
    e.default = r;
  });
  t(lt);
  var ft = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.name = "bleeding";
      }
      t.prototype.update = function (t, e) {};
      t.prototype.delay = function (t, e) {
        if (e === void 0) {
          e = 5;
        }
        if (!t) return;
        if (t.isDeath) return;
        t.script.damage(e);
        t.script.number(e, 154);
      };
      t.prototype.apply = function (t) {
        var e, n;
        t.script.AddBuff(11003);
        if (
          t.script.HasAnimation(
            "common/activestatus/animation/bleeding.ani.json"
          )
        )
          return;
        var o = t.script.CreateAnimationByPath(
          "common/activestatus/animation/bleeding.ani.json"
        );
        t.script.AddStateLayerAnimation(
          1e3,
          o,
          0,
          -(
            ((n =
              (e = t === null || t === void 0 ? void 0 : t.roleData) === null ||
              e === void 0
                ? void 0
                : e.height) !== null && n !== void 0
              ? n
              : 80) - 30
          )
        );
      };
      t.prototype.unApply = function (t) {
        t.script.RemoveAnimation(
          "common/activestatus/animation/bleeding.ani.json"
        );
        t.script.RemoveBuff(11003);
      };
      return t;
    })();
    e.default = n;
  });
  t(ft);
  var ct = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.name = "lightning";
      }
      t.prototype.update = function (t, e) {};
      t.prototype.delay = function (t, e) {};
      t.prototype.apply = function (t) {
        var e, n;
        t.script.AddBuff(11001);
        if (
          t.script.HasAnimation(
            "common/activestatus/animation/lightning.ani.json"
          )
        )
          return;
        var o = t.script.CreateAnimationByPath(
          "common/activestatus/animation/lightning.ani.json"
        );
        var r =
          (n =
            (e = t === null || t === void 0 ? void 0 : t.roleData) === null ||
            e === void 0
              ? void 0
              : e.height) !== null && n !== void 0
            ? n
            : 40;
        t.script.AddStateLayerAnimation(1e3, o, 0, -((r - 40) / 2));
      };
      t.prototype.unApply = function (t) {
        t.script.RemoveAnimation(
          "common/activestatus/animation/lightning.ani.json"
        );
        t.script.RemoveBuff(11001);
      };
      return t;
    })();
    e.default = n;
  });
  t(ct);
  var bt = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(j);
    var i = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.order = ht.RoleOrder.NONE;
        e.body.setAnimation(t);
        e.body.shadow = false;
        e.body.on(XOF.Event.COMPLETE, e.onComplelte, e);
        return e;
      }
      t.prototype.onComplelte = function () {
        this.map.removeObject(this);
        this.body.off(XOF.Event.COMPLETE, this.onComplelte, this);
        this.body.destroy();
      };
      t.prototype.update = function (t) {
        n.prototype.update.call(this, t);
        if (this.map) {
          if (this.follow) {
            if (this.map.getObjectId(this.follow)) {
              this.position.set(this.follow.position.x, this.follow.position.y);
              if (this.map.isRole(this.follow)) {
                if (this.follow.isDeath) {
                  if (this.deathDestroy) {
                    this.remove();
                  }
                }
              }
            } else {
              this.remove();
            }
          }
        }
      };
      t.prototype.remove = function () {
        this.map.removeObject(this);
        this.setFollowObject(undefined);
      };
      t.prototype.setFollowObject = function (t) {
        this.follow = t;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(bt);
  var pt = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = n(bt);
    var s = n(dt);
    var o = (function () {
      function t() {
        this.name = "freeze";
      }
      t.prototype.update = function (t, e) {};
      t.prototype.delay = function (t, e) {};
      t.prototype.apply = function (t) {
        var e, n;
        t.script.AddBuff(11e3);
        if (
          t.script.HasAnimation(
            "common/activestatus/animation/freeze1.ani.json"
          )
        )
          return;
        var o = 128;
        var r =
          ((n =
            (e = t.roleData) === null || e === void 0 ? void 0 : e.height) !==
            null && n !== void 0
            ? n
            : 128) / o;
        var i = t.script.CreateAnimationByPath(
          "common/activestatus/animation/freeze1.ani.json",
          undefined,
          r
        );
        var a = t.script.CreateAnimationByPath(
          "common/activestatus/animation/freeze2.ani.json",
          undefined,
          r
        );
        i.autoRemove = a.autoRemove = false;
        t.script.AddStateLayerAnimation(-1e3, i, 0, 0);
        t.script.AddStateLayerAnimation(1e3, a, 0, 0);
        t.ai.stop();
        if (t.hasAction(ht.RoleAction.DAMAGE2)) {
          t.setAction(ht.RoleAction.DAMAGE2, true);
        } else if (t.hasAction(ht.RoleAction.DAMAGE1)) {
          t.setAction(ht.RoleAction.DAMAGE1, true);
        } else {
          t.setAction(ht.RoleAction.STAY, true);
        }
        t.force.clean();
      };
      t.prototype.unApply = function (t) {
        var e, n;
        var o = 128;
        var r =
          ((n =
            (e = t.roleData) === null || e === void 0 ? void 0 : e.height) !==
            null && n !== void 0
            ? n
            : 128) / o;
        t.script.RemoveAnimation(
          "common/activestatus/animation/freeze1.ani.json"
        );
        t.script.RemoveAnimation(
          "common/activestatus/animation/freeze2.ani.json"
        );
        var i = new a.default(
          s.default.getAnimationData(
            "common/activestatus/animation/freezedie.ani.json"
          )
        );
        i.setSize(r);
        t.map.addObject(i, undefined, t.x, t.y + 1);
        t.script.RemoveBuff(11e3);
        if (!t.isFloat()) {
          t.stay(true);
        }
      };
      return t;
    })();
    e.default = o;
  });
  t(pt);
  var Ot = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.name = "burn";
      }
      t.prototype.update = function (t, e) {};
      t.prototype.delay = function (t, e) {
        if (e === void 0) {
          e = 5;
        }
        if (!t) return;
        if (t.isDeath) return;
        t.script.damage(e);
        t.script.number(e, 154);
      };
      t.prototype.apply = function (t) {
        var e, n, o, r;
        t.script.AddBuff(11010);
        if (
          t.script.HasAnimation(
            "common/activestatus/animation/activestatus_burndamage_effect.ani.json"
          )
        )
          return;
        var i = 128;
        var a =
          (((n =
            (e = t.roleData) === null || e === void 0 ? void 0 : e.height) !==
            null && n !== void 0
            ? n
            : 128) *
            ((r =
              (o = t.roleData) === null || o === void 0 ? void 0 : o.size) !==
              null && r !== void 0
              ? r
              : 1)) /
          i;
        var s = t.script.CreateAnimationByPath(
          "common/activestatus/animation/activestatus_burndamage_effect.ani.json",
          undefined,
          a
        );
        t.script.AddStateLayerAnimation(1e3, s, 0, 0);
      };
      t.prototype.unApply = function (t) {
        t.script.RemoveAnimation(
          "common/activestatus/animation/activestatus_burndamage_effect.ani.json"
        );
        t.script.RemoveBuff(11010);
      };
      return t;
    })();
    e.default = n;
  });
  t(Ot);
  var wt = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.name = "superarmor";
      }
      t.prototype.update = function (t, e) {};
      t.prototype.delay = function (t, e) {};
      t.prototype.apply = function (t) {
        t.script.AddBuff(11015);
      };
      t.prototype.unApply = function (t) {
        t.script.RemoveBuff(11015);
      };
      return t;
    })();
    e.default = n;
  });
  t(wt);
  var At = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.name = "stun";
      }
      t.prototype.update = function (t, e) {};
      t.prototype.delay = function (t, e) {};
      t.prototype.apply = function (t) {
        var e, n;
        t.script.AddBuff(11009);
        if (
          t.script.HasAnimation("common/activestatus/animation/stun1.ani.json")
        )
          return;
        var o =
          -((n =
            (e = t.roleData) === null || e === void 0 ? void 0 : e.height) !==
            null && n !== void 0
            ? n
            : 128) - 6;
        var r = t.script.CreateAnimationByPath(
          "common/activestatus/animation/stun1.ani.json"
        );
        t.script.AddStateLayerAnimation(-1e3, r, 0, o);
        var i = t.script.CreateAnimationByPath(
          "common/activestatus/animation/stun2.ani.json"
        );
        t.script.AddStateLayerAnimation(1e3, i, 0, o);
      };
      t.prototype.unApply = function (t) {
        t.script.RemoveAnimation(
          "common/activestatus/animation/stun1.ani.json"
        );
        t.script.RemoveAnimation(
          "common/activestatus/animation/stun2.ani.json"
        );
        t.script.RemoveBuff(11009);
        if (!t.isFloat()) {
          t.stay(true);
        }
      };
      return t;
    })();
    e.default = n;
  });
  t(At);
  var Et = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.name = "blind";
      }
      t.prototype.update = function (t, e) {};
      t.prototype.delay = function (t, e) {};
      t.prototype.apply = function (t) {
        var e, n;
        t.script.AddBuff(11005, true);
        if (
          t.script.HasAnimation("common/activestatus/animation/blind1.ani.json")
        )
          return;
        var o =
          -((n =
            (e = t.roleData) === null || e === void 0 ? void 0 : e.height) !==
            null && n !== void 0
            ? n
            : 128) - 6;
        var r = t.script.CreateAnimationByPath(
          "common/activestatus/animation/blind1.ani.json"
        );
        t.script.AddStateLayerAnimation(-1e3, r, 0, o);
        var i = t.script.CreateAnimationByPath(
          "common/activestatus/animation/blind2.ani.json"
        );
        t.script.AddStateLayerAnimation(1e3, i, 0, o);
      };
      t.prototype.unApply = function (t) {
        t.script.RemoveAnimation(
          "common/activestatus/animation/blind1.ani.json"
        );
        t.script.RemoveAnimation(
          "common/activestatus/animation/blind2.ani.json"
        );
        t.script.RemoveBuff(11005);
      };
      return t;
    })();
    e.default = n;
  });
  t(Et);
  var Tt = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.name = "ctrlDamage";
      }
      t.prototype.update = function (t, e) {};
      t.prototype.delay = function (t, e) {};
      t.prototype.apply = function (t) {
        if (t.hasAction(ht.RoleAction.DAMAGE1)) {
          t.setAction(ht.RoleAction.DAMAGE1, true);
        } else if (t.hasAction(ht.RoleAction.DAMAGE2)) {
          t.setAction(ht.RoleAction.DAMAGE2, true);
        } else if (t.hasAction(ht.RoleAction.STAY)) {
          t.setAction(ht.RoleAction.STAY, true);
          t.action = ht.RoleAction.DAMAGE1;
        }
      };
      t.prototype.unApply = function (t) {
        if (t.isFloat()) return;
        if (t.isDeath) return;
        t.stay(true);
      };
      return t;
    })();
    e.default = n;
  });
  t(Tt);
  var Ct = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(ft);
    var r = n(ct);
    var i = n(pt);
    var a = n(Ot);
    var s = n(wt);
    var u = n(At);
    var f = n(Et);
    var c = n(Tt);
    var l = (function () {
      function l(t) {
        this.role = t;
        this.states = [];
        this.delay = 0;
      }
      l.prototype.apply = function (t, e, n, o) {
        var r, i, a;
        if (o === void 0) {
          o = 5;
        }
        if (this.indexOf(t) >= 0) return;
        if (n) {
          (a =
            (i =
              (r = n.attribute) === null || r === void 0
                ? void 0
                : r.attributes) === null || i === void 0
              ? void 0
              : i[ht.AttributeKeys.STR_FINAL]) !== null && a !== void 0
            ? a
            : 1;
        }
        if (e < 0) e = Number.MIN_SAFE_INTEGER;
        var s = this.role;
        if (t == l.burn) {
          this.unApply(l.freeze);
        } else if (t == l.freeze) {
          if (this.hasState(l.burn)) return;
        }
        var u = this.getState(t);
        if (u) {
          u.apply(s);
          this.states.push({ state: u, time: e, damage: o });
        }
      };
      l.prototype.update = function (t) {
        this.delay += t;
        var e = this.delay > 1;
        var n = this.states.length;
        for (var o = 0; o < n; o++) {
          var r = this.states[o];
          var i = r.state;
          if (r.time !== Number.MIN_SAFE_INTEGER) {
            r.time -= t * 1e3;
          }
          if (e) i.delay(this.role, r.damage);
          i.update(this.role, t);
        }
        for (var o = n - 1; o >= 0; o--) {
          var r = this.states[o];
          if (r.time !== Number.MIN_SAFE_INTEGER && r.time <= 0) {
            this.unApply(r.state.name);
          }
        }
        if (e) this.delay -= 1;
      };
      l.prototype.unApply = function (t) {
        var e = this.indexOf(t);
        if (e >= 0) {
          this.states[e].state.unApply(this.role);
          this.states.splice(e, 1);
        }
      };
      l.prototype.indexOf = function (t) {
        var e = this.states.length;
        for (var n = 0; n < e; n++) {
          if (this.states[n].state.name == t) {
            return n;
          }
        }
        return -1;
      };
      l.prototype.cleanAll = function () {
        while (this.states.length) {
          this.unApply(this.states[0].state.name);
        }
      };
      l.prototype.hasState = function (t) {
        return this.indexOf(t) >= 0;
      };
      l.prototype.getState = function (t) {
        var e;
        switch (t) {
          case l.bleeding:
            e = o.default;
            break;
          case l.lightning:
            e = r.default;
            break;
          case l.freeze:
            e = i.default;
            break;
          case l.burn:
            e = a.default;
            break;
          case l.superarmor:
            e = s.default;
            break;
          case l.stun:
            e = u.default;
            break;
          case l.blind:
            e = f.default;
            break;
          case l.ctrlDamage:
            e = c.default;
            break;
        }
        if (e) {
          return new e(this.role);
        }
      };
      l.prototype.isCtrlState = function () {
        if (this.indexOf(l.freeze) >= 0) {
          return true;
        }
        if (this.indexOf(l.ctrlDamage) >= 0) {
          return true;
        }
        return false;
      };
      l.prototype.isCanHitfly = function () {
        if (this.indexOf(l.freeze) >= 0) {
          return false;
        }
        if (this.indexOf(l.ctrlDamage) >= 0) {
          return false;
        }
        return true;
      };
      l.prototype.isCanHitBack = function () {
        if (this.indexOf(l.freeze) >= 0) {
          return false;
        }
        if (this.indexOf(l.ctrlDamage) >= 0) {
          return false;
        }
        return true;
      };
      l.prototype.isCanStay = function () {
        if (this.indexOf(l.freeze) >= 0) {
          return false;
        }
        if (this.indexOf(l.stun) >= 0) {
          return false;
        }
        if (this.indexOf(l.ctrlDamage) >= 0) {
          return false;
        }
        return true;
      };
      l.prototype.isSuperArmor = function () {
        return this.indexOf(l.superarmor) >= 0;
      };
      l.bleeding = "bleeding";
      l.lightning = "lightning";
      l.freeze = "freeze";
      l.burn = "burn";
      l.stun = "stun";
      l.blind = "blind";
      l.superarmor = "superarmor";
      l.ctrlDamage = "ctrlDamage";
      return l;
    })();
    e.default = l;
  });
  t(Ct);
  var Pt = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t(t) {
        this.role = t;
      }
      t.prototype.update = function (t) {};
      t.prototype.beforeAttack = function () {};
      t.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
      };
      t.prototype.attackMiss = function (t) {};
      t.prototype.attacked = function () {};
      t.prototype.skilled = function (t) {};
      t.prototype.setActioned = function (t) {};
      t.prototype.unApply = function () {};
      return t;
    })();
    e.default = n;
  });
  t(Pt);
  var jt = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(F);
    var i = n(w);
    var a = n(yt);
    var s = n(Ct);
    var u = n(Pt);
    var l = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this, t) || this;
        e.attr = a.default.pop("AttributeVo", r.default);
        e.attr.reset();
        e.attr.setAttr({ 311: 0.3 });
        e.attr.valid = false;
        e.role.attribute.attach(e.attr);
        return e;
      }
      t.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = i.default.randomHit(0.05);
        if (e) {
          t.state.apply(s.default.bleeding, 1e4, this.role);
        }
        if (t.state.hasState(s.default.bleeding)) {
          this.attr.valid = true;
        } else {
          this.attr.valid = false;
        }
      };
      t.prototype.unApply = function () {
        this.role.attribute.unattach(this.attr);
        delete this.attr;
      };
      return t;
    })(u.default);
    e.default = l;
  });
  t(jt);
  var St = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.BOSS = "[boss]";
      t.SPECIAL = "[special]";
      t.NORMAL = "[normal]";
      return t;
    })();
    e.default = n;
  });
  t(St);
  var Mt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(St);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.02);
        if (e) {
          var n = 1;
          if (t.monsterClass == i.default.BOSS) {
            n = 1 / 6;
          } else if (t.monsterClass == i.default.SPECIAL) {
            n = 1 / 3;
          }
          var o = Math.floor(t.hp * 0.2 * n);
          if (o > 0) {
            t.script.damage(o);
            t.script.number(o, 154);
          }
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Mt);
  var kt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(St);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.03);
        if (e) {
          var n = 1;
          if (t.monsterClass == i.default.BOSS) {
            n = 1 / 6;
          } else if (t.monsterClass == i.default.SPECIAL) {
            n = 1 / 3;
          }
          var o = Math.floor(t.hp * 0.3 * n);
          if (o > 0) {
            t.script.damage(o);
            t.script.number(o, 154);
          }
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(kt);
  var xt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Pt);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.07);
        if (e) {
          var n = this.role.script.getBuffLevel(10012) + 1;
          this.role.script.AddBuff(10012, true, Math.min(n, 5));
        }
      };
      e.prototype.unApply = function () {
        this.role.script.RemoveBuff(10012);
      };
      return e;
    })(i.default);
    e.default = a;
  });
  t(xt);
  var Dt = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(F);
    var i = n(Pt);
    var a = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this, t) || this;
        e.attr = new r.default({ 202: 0.4, 212: 0.4 });
        e.role.attribute.attach(e.attr);
        e.attr.valid = false;
        return e;
      }
      t.prototype.beforeAttack = function () {
        if (this.role.hasSkillState(125) || this.role.hasSkillState(137)) {
          this.attr.valid = true;
        } else {
          this.attr.valid = false;
        }
      };
      t.prototype.unApply = function () {
        this.role.attribute.unattach(this.attr);
        if (this.attr) {
          this.attr = undefined;
        }
      };
      return t;
    })(i.default);
    e.default = a;
  });
  t(Dt);
  var It = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var f = o(S);
    var c = o(w);
    var r = o(Pt);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        var e, n, o, r;
        var i = this.role.script.getBuffLevel(10013) > 0;
        if (!i && c.default.randomHit(0.05)) {
          this.role.script.AddBuff(10013, true, 1);
          i = true;
        }
        if (i) {
          var a = this.role;
          var s = t;
          var u = f.default.damage(a.fu.attribute, s.fu.attribute, {
            type: 1,
            attackLv:
              (n =
                (e = a === null || a === void 0 ? void 0 : a.fu) === null ||
                e === void 0
                  ? void 0
                  : e.level) !== null && n !== void 0
                ? n
                : 1,
            damageLv:
              (r =
                (o = s === null || s === void 0 ? void 0 : s.fu) === null ||
                o === void 0
                  ? void 0
                  : o.level) !== null && r !== void 0
                ? r
                : 1,
            special: 0,
          });
          var l = Math.floor(u.damage * 0.3);
          if (l > 0) {
            t.script.damage(l);
            t.script.number(l, 74);
          }
        }
      };
      e.prototype.unApply = function () {
        this.role.script.RemoveBuff(10013);
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(It);
  var Rt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var c = o(s);
    var p = o(F);
    var d = o(S);
    var h = o(w);
    var r = o(Pt);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        var e, n, o, r;
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var i = h.default.randomHit(0.1);
        if (i) {
          var a = this.role;
          var s = t;
          var u = new c.default();
          u.attach(new p.default({ 201: 1200 }));
          var l = d.default.damage(u, s.fu.attribute, {
            type: 0,
            attackLv:
              (n =
                (e = a === null || a === void 0 ? void 0 : a.fu) === null ||
                e === void 0
                  ? void 0
                  : e.level) !== null && n !== void 0
                ? n
                : 1,
            damageLv:
              (r =
                (o = s === null || s === void 0 ? void 0 : s.fu) === null ||
                o === void 0
                  ? void 0
                  : o.level) !== null && r !== void 0
                ? r
                : 1,
            special: 0,
          });
          var f = Math.floor(l.damage * 0.3);
          if (f > 0) {
            t.script.damage(f);
            t.script.number(f, 74);
          }
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Rt);
  var Lt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(Pt);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.update = function (t) {
        var e = this.role.hp > this.role.maxHp / 2;
        if (this.last != e) {
          this.role.buffAttribute.active(10015, r.default.ACTIVE, e);
        }
        this.last = e;
      };
      return e;
    })(i.default);
    e.default = a;
  });
  t(Lt);
  var Ft = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Pt);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.update = function (t) {
        var e = this.role.roleContext.lv;
        if (this.last != e) {
          this.role.buffAttribute.setLevel(10016, e);
        }
        this.last = e;
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Ft);
  var Bt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(w);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        var e = i.default.randomHit(0.05);
        if (e) {
          if (!this.role.buffAttribute.isActive(10017)) {
            this.role.buffAttribute.active(10017, r.default.ACTIVE, true);
          }
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Bt);
  var Nt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(Pt);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.update = function (t) {
        var e = 0;
        if (this.role.isMyControler()) {
          e = Math.min(30, Math.max(1, r.default.userData.equip.equips.length));
        } else {
          e = 1;
        }
        if (this.last != e) {
          this.role.buffAttribute.setLevel(10018, e);
        }
        this.last = e;
      };
      return e;
    })(i.default);
    e.default = a;
  });
  t(Nt);
  var Xt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(X);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.update = function (t) {
        var e = 0;
        if (this.role.isMyControler()) {
          e = Math.min(4, Math.max(0, r.default.userData.equip.equips.length));
        }
        if (this.last != e) {
          if (e > 0) {
            this.role.buffAttribute.active(10020, i.default.ACTIVE, true);
            this.role.buffAttribute.setLevel(10020, e);
          } else {
            this.role.buffAttribute.active(10020, i.default.ACTIVE, false);
          }
        }
        this.last = e;
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Xt);
  var Ut = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(w);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        var e = i.default.randomHit(0.01);
        if (e) {
          this.role.buffAttribute.active(10021, r.default.ACTIVE, true);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Ut);
  var Ht = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Ct);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (this.role.hasSkillState(136)) {
          t.state.apply(i.default.lightning, 3e3, this.role);
        }
        if (t.state.hasState(i.default.lightning)) {
          var e = Math.floor(20);
          if (e > 0) {
            t.script.damage(e);
            t.script.number(e, 154);
          }
        }
      };
      e.prototype.skilled = function (t) {
        if (t == 125) {
          var e = r.default.randomHit(0.25);
          if (e) {
            this.role.rs.clean(125);
          }
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Ht);
  var Gt = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(F);
    var i = n(w);
    var a = n(yt);
    var s = n(Ct);
    var u = n(Pt);
    var l = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this, t) || this;
        e.attr = a.default.pop("AttributeVo", r.default);
        e.attr.reset();
        e.attr.setAttr({ 311: 0.5 });
        e.attr.valid = false;
        e.role.attribute.attach(e.attr);
        return e;
      }
      t.prototype.attackSuccess = function (t) {
        var e = i.default.randomHit(0.03);
        if (e) {
          t.state.apply(s.default.freeze, 2e3, this.role);
        }
        if (t.state.hasState(s.default.freeze)) {
          this.attr.valid = true;
        } else {
          this.attr.valid = false;
        }
      };
      t.prototype.unApply = function () {
        this.role.attribute.unattach(this.attr);
        delete this.attr;
      };
      return t;
    })(u.default);
    e.default = l;
  });
  t(Gt);
  var Vt = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(F);
    var i = n(w);
    var a = n(yt);
    var s = n(Ct);
    var u = n(Pt);
    var l = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this, t) || this;
        e.attr = a.default.pop("AttributeVo", r.default);
        e.attr.reset();
        e.attr.setAttr({ 311: 0.5 });
        e.attr.valid = false;
        e.role.attribute.attach(e.attr);
        return e;
      }
      t.prototype.attackSuccess = function (t) {
        var e = i.default.randomHit(0.03);
        if (e) {
          t.state.apply(s.default.burn, 7e3, this.role, 20);
        }
        if (t.state.hasState(s.default.burn)) {
          this.attr.valid = true;
        } else {
          this.attr.valid = false;
        }
      };
      t.prototype.unApply = function () {
        this.role.attribute.unattach(this.attr);
        delete this.attr;
      };
      return t;
    })(u.default);
    e.default = l;
  });
  t(Vt);
  var $t = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Pt);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.setActioned = function (t) {
        if (this.role.isNormalAttackAction()) {
          this.role.script.createPassiveObject(8085, 0, 2, 50);
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t($t);
  var qt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Ct);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        var e = r.default.randomHit(0.03);
        if (e) {
          this.role.state.apply(i.default.superarmor, 1e4);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(qt);
  var Kt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Ct);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.05);
        if (e) {
          t.state.apply(i.default.stun, 5e3, this.role);
        }
      };
      e.prototype.unApply = function () {};
      return e;
    })(a.default);
    e.default = s;
  });
  t(Kt);
  var Yt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(w);
    var a = o(Ct);
    var s = o(Pt);
    var u = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = i.default.randomHit(0.04);
        if (e) {
          t.state.apply(a.default.bleeding, 8e3, this.role, 20);
        }
        if (t.state.hasState(a.default.bleeding)) {
          this.role.buffAttribute.active(10022, r.default.ACTIVE, true);
        }
        if (i.default.randomHit(0.02)) {
          t.state.apply(a.default.stun, 2e3, this.role);
        }
      };
      return e;
    })(s.default);
    e.default = u;
  });
  t(Yt);
  var Wt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Ct);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.05);
        if (e) {
          t.state.apply(i.default.lightning, 4e3, this.role, 20);
        }
        if (t.state.hasState(i.default.lightning)) {
          var n = 20;
          t.script.damage(n);
          t.script.number(n, 74);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Wt);
  var zt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Ct);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.04);
        if (e) {
          t.state.apply(i.default.blind, 9e3, this.role);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(zt);
  var Qt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Ct);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.02);
        if (e) {
          t.state.apply(i.default.blind, 2e3, this.role);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Qt);
  var Jt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Ct);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.02);
        if (e) {
          t.state.apply(i.default.blind, 2e3, this.role);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Jt);
  var Zt = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Ct);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var e = r.default.randomHit(0.02);
        if (e) {
          t.state.apply(i.default.blind, 2e3, this.role);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(Zt);
  var te = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(X);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.update = function (t) {
        var e = 0;
        if (this.role.isMyControler()) {
          e = Math.min(6, Math.max(0, r.default.userData.equip.equips.length));
        }
        if (this.last != e) {
          if (e > 0) {
            this.role.buffAttribute.active(10025, i.default.ACTIVE, true);
            this.role.buffAttribute.setLevel(10025, e);
          } else {
            this.role.buffAttribute.active(10025, i.default.ACTIVE, false);
          }
        }
        this.last = e;
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(te);
  var ee = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(w);
    var a = o(Ct);
    var s = o(Pt);
    var u = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        if (i.default.randomHit(0.05)) {
          this.role.state.apply(a.default.blind, 1e4, this.role);
        }
        if (this.role.state.hasState(a.default.blind)) {
          this.role.buffAttribute.active(10026, r.default.ACTIVE, true);
        }
      };
      return e;
    })(s.default);
    e.default = u;
  });
  t(ee);
  var ne = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(w);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        var e = i.default.randomHit(0.03);
        if (e) {
          this.role.buffAttribute.active(10033, r.default.ACTIVE, true);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(ne);
  var oe = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(w);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        var e = i.default.randomHit(0.03);
        if (e) {
          this.role.buffAttribute.active(10034, r.default.ACTIVE, true);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(oe);
  var re = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(Pt);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.update = function (t) {
        if (this.role.buffAttribute.has(10036)) {
          var e = Math.min(Math.floor(this.role.attribute.con / 100), 7);
          if (e > 0) {
            this.role.buffAttribute.active(10036, r.default.ACTIVE, true, e);
          } else {
            this.role.buffAttribute.active(10036, r.default.ACTIVE, false, 1);
          }
        }
      };
      return e;
    })(i.default);
    e.default = a;
  });
  t(re);
  var ie = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(X);
    var i = o(w);
    var a = o(Pt);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.attackSuccess = function (t) {
        var e = i.default.randomHit(0.03);
        if (e) {
          this.role.buffAttribute.active(10037, r.default.ACTIVE, true);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(ie);
  var ae = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    var o;
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(jt);
    var i = n(Mt);
    var a = n(kt);
    var s = n(xt);
    var u = n(Dt);
    var l = n(It);
    var f = n(Rt);
    var c = n(Lt);
    var p = n(Ft);
    var d = n(Bt);
    var h = n(Nt);
    var v = n(Xt);
    var y = n(Ut);
    var _ = n(Ht);
    var m = n(Gt);
    var g = n(Vt);
    var b = n($t);
    var O = n(qt);
    var w = n(Kt);
    var A = n(Yt);
    var E = n(Wt);
    var T = n(zt);
    var C = n(Qt);
    var P = n(Jt);
    var j = n(Zt);
    var S = n(te);
    var M = n(ee);
    var k = n(ne);
    var x = n(oe);
    var D = n(re);
    var I = n(ie);
    var R =
      ((o = {}),
      (o[1001063] = r.default),
      (o[1001068] = a.default),
      (o[1001061] = i.default),
      (o[1001071] = s.default),
      (o[1001075] = u.default),
      (o[1001076] = l.default),
      (o[1002070] = f.default),
      (o[1002072] = f.default),
      (o[1002075] = c.default),
      (o[1002076] = p.default),
      (o[1002077] = d.default),
      (o[1002079] = h.default),
      (o[1002084] = v.default),
      (o[1003042] = y.default),
      (o[1003057] = y.default),
      (o[1003052] = _.default),
      (o[1003054] = m.default),
      (o[1003055] = g.default),
      (o[1003058] = b.default),
      (o[1003059] = O.default),
      (o[1004062] = w.default),
      (o[1004070] = M.default),
      (o[1004071] = A.default),
      (o[1004074] = w.default),
      (o[1004075] = E.default),
      (o[1004077] = T.default),
      (o[1004078] = C.default),
      (o[1004079] = P.default),
      (o[1004082] = j.default),
      (o[1005107] = S.default),
      (o[1201005] = k.default),
      (o[1201006] = x.default),
      (o[1141144] = D.default),
      (o[1201008] = I.default),
      o);
    var L = (function () {
      function t(t) {
        this.role = t;
        this.effects = [];
      }
      t.prototype.apply = function (t) {
        var e = this.indexOf(parseInt(t));
        if (e >= 0) return;
        var n = R[t];
        if (n) {
          var o = new n(this.role);
          o.index = t;
          this.effects.push(o);
        }
      };
      t.prototype.has = function (t) {
        var e = this.indexOf(parseInt(t));
        return e >= 0;
      };
      t.prototype.unApply = function (t) {
        var e = this.indexOf(parseInt(t));
        if (e >= 0) {
          this.effects[e].unApply();
          this.effects[e].role = undefined;
          this.effects.splice(e, 1);
        }
      };
      t.prototype.unApplyAll = function () {
        var t = this.effects.length;
        for (var e = t - 1; e >= 0; e--) {
          this.unApply(this.effects[e].index);
        }
      };
      t.prototype.indexOf = function (t) {
        var e = this.effects.length;
        for (var n = 0; n < e; n++) {
          if (this.effects[n].index == t) {
            return n;
          }
        }
        return -1;
      };
      t.prototype.onAttackSuccess = function (t) {
        var e;
        if ((e = this.role) === null || e === void 0 ? void 0 : e.isDeath)
          return;
        if (t === null || t === void 0 ? void 0 : t.isDeath) return;
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var n = this.effects.length;
        for (var o = 0; o < n; o++) {
          this.effects[o].attackSuccess(t);
        }
      };
      t.prototype.onAttackMiss = function (t) {
        var e;
        if ((e = this.role) === null || e === void 0 ? void 0 : e.isDeath)
          return;
        if (t === null || t === void 0 ? void 0 : t.isDeath) return;
        if (!(t === null || t === void 0 ? void 0 : t.state)) return;
        var n = this.effects.length;
        for (var o = 0; o < n; o++) {
          this.effects[o].attackMiss(t);
        }
      };
      t.prototype.onBeforeAttack = function (t) {
        var e;
        if ((e = this.role) === null || e === void 0 ? void 0 : e.isDeath)
          return;
        var n = this.effects.length;
        for (var o = 0; o < n; o++) {
          this.effects[o].beforeAttack();
        }
      };
      t.prototype.onSkillEnd = function (t) {
        var e;
        if ((e = this.role) === null || e === void 0 ? void 0 : e.isDeath)
          return;
        var n = this.effects.length;
        for (var o = 0; o < n; o++) {
          this.effects[o].skilled(t);
        }
      };
      t.prototype.onSetActioned = function (t) {
        var e;
        if ((e = this.role) === null || e === void 0 ? void 0 : e.isDeath)
          return;
        var n = this.effects.length;
        for (var o = 0; o < n; o++) {
          this.effects[o].setActioned(t);
        }
      };
      t.prototype.update = function (t) {
        var e;
        if ((e = this.role) === null || e === void 0 ? void 0 : e.isDeath)
          return;
        var n = this.effects.length;
        for (var o = 0; o < n; o++) {
          this.effects[o].update(t);
        }
      };
      return t;
    })();
    e.default = L;
  });
  t(ae);
  var se = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.getContent = function () {
        if (!this.$content) {
          this.canvas = document.createElement("canvas");
          this.canvas.height = this.canvas.width = 500;
          this.canvas.style.backgroundColor = "rgba(255,255,255,0)";
          this.$content = this.canvas.getContext("2d");
        }
        return this.$content;
      };
      Object.defineProperty(t, "graphic", {
        get: function () {
          if (!this.$graphic) {
            this.$graphic = new XOF.Graphic(this.$content);
          }
          return this.$graphic;
        },
        enumerable: false,
        configurable: true,
      });
      t.convertCanvasToImage = function () {
        var t = this.canvas;
        var e = new Image();
        var n = t.toDataURL("image/png");
        e.setAttribute("src", n);
        e.setAttribute("crossOrigin", "anonymous");
        return e;
      };
      t.draw = false;
      return t;
    })();
    e.default = n;
  });
  t(se);
  var ue = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var r =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var p = r(E);
    var i = r(j);
    var a = r(L);
    var s = r(q);
    var u = r(S);
    var l = r(U);
    var f = r(X);
    var c = r(G);
    var d = r(ut);
    var h = r(Q);
    var v = r(gt);
    var y = r(lt);
    var _ = r(Ct);
    var m = r(ae);
    var g = r(se);
    var b = r(C);
    var O = r(A);
    var w = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.floatHeight = 0;
        t.special = new m.default(t);
        t.force = new c.default(t);
        t.script = new d.default(t);
        t.key = new y.default(t);
        t.state = new _.default(t);
        t.attribute = new u.default();
        t.attribute.on(9001, t.updateRate, t);
        t.buffAttribute = new l.default(t.attribute);
        t.rs = new v.default(t);
        t.rs.on(v.default.CD_OFF, t.onSkillCDState, t);
        t.rs.on(v.default.CD_ON, t.onSkillCDState, t);
        t.rs.on(v.default.CD_CHANGED, t.onSkillCDState, t);
        t.equipments = [];
        t.flags = {};
        t.body.on(XOF.Event.COMPLETE, t.onAnimationComplete, t);
        t.body.on(a.default.SET_FLAG, t.onAnimationSetFlag, t);
        t.body.on(a.default.CHANGE, t.onAnimationFrame, t);
        t.body.on(a.default.LOOP, t.onAnimationLoop, t);
        t.body.on(a.default.UPDATE_DELAY, t.onUpdateDelay, t);
        t.body.on(a.default.PLAY_SOUND, t.onPlaySound, t);
        t.actor.on(a.default.ATTACK_BOX, t.onAttackBox, t);
        t.defaultAction = ht.RoleAction.STAY;
        return t;
      }
      t.prototype.getWarlike = function () {
        var t, e;
        return (e =
          (t = this === null || this === void 0 ? void 0 : this.roleData) ===
            null || t === void 0
            ? void 0
            : t.warlike) !== null && e !== void 0
          ? e
          : 50;
      };
      t.prototype.getAttackDelay = function () {
        var t, e;
        return (e =
          (t = this === null || this === void 0 ? void 0 : this.roleData) ===
            null || t === void 0
            ? void 0
            : t.attackDelay) !== null && e !== void 0
          ? e
          : 100;
      };
      t.prototype.setRoleData = function (t) {
        this.$roleData = t;
      };
      Object.defineProperty(t.prototype, "roleData", {
        get: function () {
          return this.$roleData;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "roleName", {
        get: function () {
          return this.labName.text;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "roleIcon", {
        get: function () {
          return this.labName.name;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.$float;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setSize = function (t) {
        this.$size = t;
        this.actor.scale(this.$size * this.$direction, this.$size);
      };
      t.prototype.$setDrection = function (t) {
        this.$direction = t;
        this.actor.scale(this.$size * this.$direction, this.$size);
      };
      t.prototype.onSkillCDState = function (t) {
        this.event(v.default.CD_CHANGED, [t]);
      };
      t.prototype.onUpdateDelay = function (t) {
        if (this.map) {
          this.map.event(a.default.UPDATE_DELAY, [t]);
        }
      };
      t.prototype.onPlaySound = function (t) {
        if (t) {
          this.script.playSound(t);
        }
      };
      t.prototype.onAttackBox = function () {
        if (this.map) {
          this.map.event(a.default.ATTACK_BOX);
        }
      };
      t.prototype.onAnimationLoop = function () {
        if (this.buffAttribute) {
          if (this.action == ht.RoleAction.MOVE) {
            this.buffAttribute.action(f.default.IN_MOVE);
          } else {
            this.buffAttribute.action(f.default.IN_MOVE, false);
          }
          if (this.action == ht.RoleAction.DASH) {
            this.buffAttribute.action(f.default.IN_DASH);
          } else {
            this.buffAttribute.action(f.default.IN_DASH, false);
          }
        }
      };
      t.prototype.addEffectObject = function (t) {};
      t.prototype.onAnimationComplete = function () {
        var t = true;
        if (
          this.actionInfo &&
          this.isAction(
            this.actionInfo.rest,
            this.actionInfo.stay,
            this.actionInfo.move,
            this.actionInfo.dash
          )
        ) {
          t = false;
        }
        if (t) this.setAction(this.defaultAction);
      };
      t.prototype.isStayState = function () {
        return this.isAction(
          ht.RoleAction.REST,
          ht.RoleAction.STAY,
          this.defaultAction
        );
      };
      t.prototype.isMyControler = function () {
        var t;
        return (
          ((t = this === null || this === void 0 ? void 0 : this.map) ===
            null || t === void 0
            ? void 0
            : t.hero) == this
        );
      };
      t.prototype.isBaseAction = function () {
        var t, e;
        if (this === null || this === void 0 ? void 0 : this.actionInfo) {
          var n = this.actionInfo;
          return this.isAction.apply(
            this,
            o(
              o(
                [n.down, n.stay, n.rest, n.sit, n.move, n.dash, n.dashattack],
                (t = n === null || n === void 0 ? void 0 : n.attack) !== null &&
                  t !== void 0
                  ? t
                  : []
              ),
              (e = n === null || n === void 0 ? void 0 : n.damage) !== null &&
                e !== void 0
                ? e
                : []
            )
          );
        }
        return false;
      };
      t.prototype.onAnimationFrame = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.map) === null ||
          t === void 0
            ? void 0
            : t.sk
        ) {
          var e = this.body.index;
          this.map.sk.onFrame(this, e);
        }
      };
      t.prototype.onAnimationSetFlag = function (t) {
        var e;
        this.flags[t] = true;
        if (
          (e = this === null || this === void 0 ? void 0 : this.map) === null ||
          e === void 0
            ? void 0
            : e.sk
        ) {
          this.map.sk.onKeyFrameFlag(this, t);
        }
      };
      t.prototype.hasSkillState = function (t) {
        var e;
        if (
          (e = this === null || this === void 0 ? void 0 : this.map) === null ||
          e === void 0
            ? void 0
            : e.sk
        ) {
          return this.map.sk.has(t, this);
        }
        return false;
      };
      t.prototype.isSkillState = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.map) === null ||
          t === void 0
            ? void 0
            : t.sk
        ) {
          return this.map.sk.hasSkills(this);
        }
        return false;
      };
      t.prototype.stay = function (t, e) {
        var n;
        if (t) {
          n = true;
        } else if (this.isMoveAction()) {
          n = true;
        }
        if (n) {
          this.setAction(this.defaultAction, true);
        }
      };
      t.prototype.attack = function () {};
      t.prototype.isNormalAction = function () {
        return (
          this.isAction(
            this.defaultAction,
            ht.RoleAction.STAY,
            ht.RoleAction.REST
          ) || this.isMoveAction()
        );
      };
      t.prototype.isMoveAction = function () {
        return this.isAction(
          ht.RoleAction.MOVE,
          ht.RoleAction.DASH,
          ht.RoleAction.MOVE_BACK
        );
      };
      t.prototype.isNormalAttackAction = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.actionInfo) ===
            null || t === void 0
            ? void 0
            : t.attack
        ) {
          return this.isAction.apply(this, this.actionInfo.attack);
        }
        return this.isAction(ht.RoleAction.ATTACK);
      };
      t.prototype.isDownAction = function () {
        return this.isAction(ht.RoleAction.DOWN);
      };
      t.prototype.isDamageAction = function () {
        return this.isAction(ht.RoleAction.DAMAGE1, ht.RoleAction.DAMAGE2);
      };
      t.prototype.isJumpAction = function () {
        return this.isAction(ht.RoleAction.JUMP);
      };
      t.prototype.isFloat = function () {
        if (this.isDownAction()) {
          return this.$float > 0;
        } else if (this.force.hasFloatPower()) {
          return true;
        } else {
          return this.$float > this.floatHeight;
        }
      };
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.force.onUpdate(t);
        this.updateBold(t);
      };
      t.prototype.onDataUpdate = function (t) {
        this.buffAttribute.update(t);
        this.state.update(t);
        this.special.update(t);
        if (this.hp < this.maxHp) {
          this.hp += t * this.attribute.hpRegen * this.attribute.hpRegenRate;
        }
        if (this.mp < this.maxMp) {
          this.mp += t * this.attribute.mpRegen * this.attribute.mpRegenRate;
        }
        if (this.hp > this.maxHp) this.hp = this.maxHp;
        if (this.mp > this.maxMp) this.mp = this.maxMp;
      };
      t.prototype.updateBold = function (t) {
        if (this.isUnbreakable()) {
          if (!this.boldTween) {
            this.actor.stroke = true;
            this.actor.strokeColor = "rgb(250,250,255)";
            this.actor.strokeAlpha = 0.2;
            this.boldTween = h.default
              .get(this.actor, { loop: true })
              .set({ strokeAlpha: 0.6 })
              .wait(200)
              .set({ strokeAlpha: 0.8 })
              .wait(200);
          }
        } else if (this.isSuperArmor()) {
          if (!this.boldTween) {
            this.actor.stroke = true;
            this.actor.strokeColor = "rgb(250,250,0)";
            this.actor.strokeAlpha = 0.2;
            this.boldTween = h.default
              .get(this.actor, { loop: true })
              .set({ strokeAlpha: 0.6, strokeColor: "rgb(250,250,0)" })
              .wait(200)
              .set({ strokeAlpha: 0.6, strokeColor: "rgb(250,0,0)" })
              .wait(200);
          }
        } else {
          if (this.boldTween) {
            h.default.removeTween(this.boldTween);
            delete this.boldTween;
          }
          this.actor.stroke = false;
        }
      };
      t.prototype.isSuperArmor = function () {
        var t, e;
        if (this.superArmor) {
          return true;
        }
        if (this.state.isSuperArmor()) {
          return true;
        }
        if (this.skillSuperArmor) {
          return true;
        }
        var n =
          (e = (t = this.body) === null || t === void 0 ? void 0 : t.frame) ===
            null || e === void 0
            ? void 0
            : e["[DAMAGE TYPE]"];
        return n == "SUPERARMOR";
      };
      t.prototype.isUnbreakable = function () {
        var t, e;
        var n =
          (e = (t = this.body) === null || t === void 0 ? void 0 : t.frame) ===
            null || e === void 0
            ? void 0
            : e["[DAMAGE TYPE]"];
        return n == "UNBREAKABLE";
      };
      t.prototype.isAction = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        for (var n = 0, o = t; n < o.length; n++) {
          var r = o[n];
          if (r == this.action) return true;
        }
        return false;
      };
      t.prototype.setMotionAction = function (t, e, n) {
        var o = t;
        var r,
          i = n + "_motion_" + o;
        if (this.action == i) if (!e) return false;
        this.flags = {};
        if (this.actionInfo) {
          var a = this.actionInfo.action[i];
          r = a.ani;
        }
        this.action = i;
        this.body.setAction(r);
        this.updateRate();
        for (var s = 0, u = this.equipments; s < u.length; s++) {
          var l = u[s];
          l.setMotionAction(o, n);
          l.sync(this.body);
        }
        this.setActioned();
        return true;
      };
      t.prototype.setAction = function (t, e) {
        switch (t) {
          case ht.RoleActionMotion.ATTACK_MOTION_0:
            return this.setMotionAction(0, e, "attack");
          case ht.RoleActionMotion.ATTACK_MOTION_1:
            return this.setMotionAction(1, e, "attack");
          case ht.RoleActionMotion.ATTACK_MOTION_2:
            return this.setMotionAction(2, e, "attack");
          case ht.RoleActionMotion.ATTACK_MOTION_3:
            return this.setMotionAction(3, e, "attack");
          case ht.RoleActionMotion.ATTACK_MOTION_4:
            return this.setMotionAction(4, e, "attack");
          case ht.RoleActionMotion.ATTACK_MOTION_5:
            return this.setMotionAction(5, e, "attack");
          case ht.RoleActionMotion.ETC_MOTION_0:
            return this.setMotionAction(0, e, "etc");
          case ht.RoleActionMotion.ETC_MOTION_1:
            return this.setMotionAction(1, e, "etc");
          case ht.RoleActionMotion.ETC_MOTION_2:
            return this.setMotionAction(2, e, "etc");
          case ht.RoleActionMotion.ETC_MOTION_3:
            return this.setMotionAction(4, e, "etc");
          case ht.RoleActionMotion.ETC_MOTION_4:
            return this.setMotionAction(5, e, "etc");
        }
        if (this.action == t) if (!e) return false;
        this.flags = {};
        var n = t;
        if (this === null || this === void 0 ? void 0 : this.actionInfo) {
          var o = this.actionInfo.action[t];
          if (o) {
            n = o.ani;
          } else {
            XOF.log("不存在的动作:" + t);
          }
        }
        this.setActionBefore();
        this.action = t;
        this.body.reset();
        this.body.setAction(n);
        this.updateRate();
        for (var r = 0, i = this.equipments; r < i.length; r++) {
          var a = i[r];
          a.animationReset();
          a.setAction(n, t);
          a.sync(this.body);
        }
        this.setActioned();
        return true;
      };
      t.prototype.setActionBefore = function () {};
      t.prototype.setActioned = function () {
        if (this.action == ht.RoleAction.MOVE) {
          this.buffAttribute.action(f.default.MOVE);
          this.buffAttribute.action(f.default.IN_MOVE);
        } else {
          this.buffAttribute.action(f.default.IN_MOVE, false);
        }
        if (this.action == ht.RoleAction.DASH) {
          this.buffAttribute.action(f.default.DASH);
          this.buffAttribute.action(f.default.IN_DASH);
        } else {
          this.buffAttribute.action(f.default.IN_DASH, false);
        }
        if (this.action == ht.RoleAction.DEATH) {
          this.buffAttribute.action(f.default.DEATH);
        }
        if (this.action == ht.RoleAction.SIT) {
          this.buffAttribute.action(f.default.SIT);
        }
        if (this.isAction(ht.RoleAction.DAMAGE1, ht.RoleAction.DAMAGE2)) {
          this.buffAttribute.action(f.default.BE_DAMAGE);
        }
        if (this.isStayState() || this.isMoveAction()) {
          this.$float = this.floatHeight;
          this.actor.y = -this.$float;
        }
        this.special.onSetActioned(this.action);
        this.onSkillCDState(undefined);
      };
      t.prototype.updateRate = function () {
        var t, e;
        this.body.rate = 1;
        if (this.attribute) {
          if (this.isMoveAction()) {
            this.body.rate =
              1 +
              ((
                (e =
                  (t = this === null || this === void 0 ? void 0 : this.map) ===
                    null || t === void 0
                    ? void 0
                    : t.isDungeon) !== null && e !== void 0
                  ? e
                  : false
              )
                ? Math.min(2, this.attribute.speedRate)
                : 0);
          } else if (this.isNormalAttackAction()) {
            this.body.rate = 1 + this.attribute.attackRate;
          } else if (this.isSkillState()) {
            this.body.rate = Math.min(1.5, 1 + this.attribute.castRate * 0.5);
          }
        }
      };
      t.prototype.relife = function () {};
      t.prototype.death = function (t) {
        {
          var e = this.map;
          var n = e.mapId;
          var o = e.getObjectId(this);
          if (n && o) {
            s.default.eventMgr.event(1012, [n, o]);
          } else {
            s.default.log2(2, "错误怪物死亡信息异常");
          }
        }
        if (!this.isFloat()) this.force.clean();
        this.event(ht.RoleEvent.DEATH, [this]);
      };
      t.prototype.setActionInfo = function (t) {
        this.actionInfo = t;
        return this;
      };
      t.prototype.hasAction = function (t) {
        var e, n, o;
        if ((e = this.actionInfo) === null || e === void 0 ? void 0 : e[t])
          return true;
        if (
          (o =
            (n = this.actionInfo) === null || n === void 0
              ? void 0
              : n.action) === null || o === void 0
            ? void 0
            : o[t]
        )
          return true;
        return false;
      };
      t.prototype.hasEquipmentType = function (t) {
        if (this.body.hasType(t)) return true;
        for (var e in this.equipments) {
          var n = this.equipments[e];
          if (n.hasType(t)) {
            return true;
          }
        }
        return false;
      };
      t.prototype.getEquipmentByType = function (t) {
        if (t == "body") return this.body;
        for (var e in this.equipments) {
          var n = this.equipments[e];
          if (n.equipmentType == t) {
            return n;
          }
        }
      };
      t.prototype.addEquipment = function (t) {
        var e, n, o, r;
        var i = this.getEquipmentIndex(t);
        if (i >= 0) return;
        var a = new p.default(t);
        a.attach(this.actor);
        this.equipments.push(a);
        var s = this.action;
        if (s) {
          var u =
            (r =
              (o =
                (n =
                  (e = this.actionInfo) === null || e === void 0
                    ? void 0
                    : e.action) === null || n === void 0
                  ? void 0
                  : n[s]) === null || o === void 0
                ? void 0
                : o.ani) !== null && r !== void 0
              ? r
              : s;
          for (var l = 0, f = this.equipments; l < f.length; l++) {
            var c = f[l];
            c.setAction(u, s);
            c.sync(this.body);
          }
        }
        return a;
      };
      t.prototype.rmEquipments = function () {
        var e = this;
        var t = this.equipments.map(function (t) {
          return t.equId;
        });
        t.forEach(function (t) {
          e.rmEquipment(t);
        });
      };
      t.prototype.rmEquipment = function (t) {
        var e = this.getEquipmentIndex(t);
        var n = this.equipments[e];
        if (n) {
          n.unAttach();
          this.equipments.splice(e, 1);
        }
      };
      t.prototype.getEquipmentIndex = function (t) {
        for (var e = 0; e < this.equipments.length; e++) {
          var n = this.equipments[e];
          if (n.equId == t) {
            return e;
          }
        }
        return -1;
      };
      t.prototype.mapSwitch = function () {
        if (this.buffAttribute) {
          if (!this.map.isDungeon) {
            this.buffAttribute.action(f.default.CITY, true);
            this.buffAttribute.action(f.default.DUNGEON, false);
          } else {
            this.buffAttribute.action(f.default.CITY, false);
            this.buffAttribute.action(f.default.DUNGEON, true);
          }
        }
      };
      t.prototype.moveBy = function (t, e) {
        if (this.map) {
          this.map.moveObject(this, t, e);
        }
        return this;
      };
      t.prototype.moveBy2 = function (t, e) {
        if (this.map) {
          this.map.moveObject(this, t, e, false);
        }
        return this;
      };
      t.prototype.testMove = function (t, e) {
        var n;
        var o;
        var r = 0,
          i = 0;
        if (
          (o = this === null || this === void 0 ? void 0 : this.roleData) ===
            null || o === void 0
            ? void 0
            : o.width
        ) {
          (n = this.roleData.width), (r = n[0]), (i = n[1]);
        }
        return this === null || this === void 0
          ? void 0
          : this.map.testMove(t, e, r, i);
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.destory();
      };
      t.prototype.destory = function () {
        this.rs.off(v.default.CD_OFF, this.onSkillCDState, this);
        this.rs.off(v.default.CD_ON, this.onSkillCDState, this);
        this.rs.off(v.default.CD_CHANGED, this.onSkillCDState, this);
        this.body.off(XOF.Event.COMPLETE, this.onAnimationComplete, this);
        this.body.off(a.default.SET_FLAG, this.onAnimationSetFlag, this);
        this.body.off(a.default.LOOP, this.onAnimationLoop, this);
        this.body.off(a.default.UPDATE_DELAY, this.onUpdateDelay, this);
        this.actor.off(a.default.ATTACK_BOX, this.onAttackBox, this);
        this.key.clean();
        this.key = undefined;
      };
      t.prototype.onKeyDown = function (t) {};
      t.prototype.onKeyUp = function (t) {};
      t.prototype.IsKeyDown = function (t) {
        return this.key.isDown(t);
      };
      t.prototype.onSkillSlot = function (t) {};
      t.prototype.cacheAsBitmap = function () {
        var t = this.actor.children_;
        if (!((t === null || t === void 0 ? void 0 : t.length) > 0)) return;
        var e = g.default.getContent();
        var n = g.default.graphic;
        for (var o in this.actionInfo.action) {
          this.setAction(o);
          for (var r = 0; r < this.body.max; r++) {
            this.body.to(r);
            for (var i = 0, a = this.equipments; i < a.length; i++) {
              var s = a[i];
              s.sync(this.body);
            }
            var u = this.body.frame.image,
              l = u[0],
              f = u[1];
            var c = b.default(l, 65535) + "/" + f + ".png";
            if (XOF.loader.get(c)) continue;
            e.clearRect(0, 0, 500, 500);
            n.push({
              x: 250,
              y: 250,
              scaleX: 1,
              scaleY: 1,
              rotate: 0,
              alpha: 1,
            });
            for (var p = 0, d = t; p < d.length; p++) {
              var h = d[p];
              if (h.visible) {
                if (this.actor.isSyncEquipment(h)) {
                  O.default.prototype.draw.call(h, g.default.graphic);
                }
              }
            }
            n.pop();
            XOF.loader.cache(g.default.convertCanvasToImage(), c);
          }
        }
      };
      return t;
    })(i.default);
    e.default = w;
  });
  t(ue);
  var le = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t(t) {
        this.root = t;
        this.enabled = true;
        this.damages = [];
        this.attacks = [];
        this.x = this.y = this.floatY = 0;
      }
      Object.defineProperty(t.prototype, "enabled", {
        get: function () {
          return this.attackEnabled && this.damgaeEnabled;
        },
        set: function (t) {
          this.attackEnabled = this.damgaeEnabled = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "body", {
        get: function () {
          return this.root.body;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function () {
        var t, e;
        this.damages.length = this.attacks.length = 0;
        if (this.body) {
          this.x = this.root.position.x;
          this.y = this.root.position.y;
          this.floatY = this.root.float;
          var n = this.root.actor,
            o = n.scaleX,
            r = n.scaleY;
          this.addBox(this.body.frame, o, r);
          if (
            (e =
              (t = this.root) === null || t === void 0
                ? void 0
                : t.equipments) === null || e === void 0
              ? void 0
              : e.length
          ) {
            for (var i = 0, a = this.root.equipments; i < a.length; i++) {
              var s = a[i];
              if (s.hitBox) {
                if (s.equipmentType == "weapon" || s.equipmentType == "body") {
                  this.addBox(s.frame, o, r);
                }
              }
            }
          }
        }
      };
      t.prototype.addBox = function (t, e, n) {
        if (t) {
          var o = this.floatY || 0;
          var r = t["damage box"];
          if (r) {
            for (var i = 0; i < r.length; i += 6) {
              var a = r[i + 3] * e,
                s = r[i + 5] * n;
              var u = r[i] * e,
                l = r[i + 2] * -1 * n - s;
              if (a < 0) {
                u += a;
                a = -a;
              }
              this.addRect(this.damages, u, l - o, a, s, r[1], r[4]);
            }
          }
          r = t["attack box"];
          if (r) {
            for (var i = 0; i < r.length; i += 6) {
              var a = r[i + 3] * e,
                s = r[i + 5] * n;
              var u = r[i] * e,
                l = r[i + 2] * -1 * n - s;
              if (a < 0) {
                u += a;
                a = -a;
              }
              this.addRect(this.attacks, u, l - o, a, s, r[1], r[4]);
            }
          }
        }
      };
      t.prototype.addRect = function (t, e, n, o, r, i, a) {
        t.push(e, n, o, r, i, a);
        return this;
      };
      t.prototype.hasBox = function () {
        return this.attacks[0] != undefined || this.damages[0] != undefined;
      };
      return t;
    })();
    e.default = n;
  });
  t(le);
  var fe = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.BattleUnitEvent = void 0;
    var r = n(le);
    var i;
    (function (t) {
      t[(t["DEATH"] = -100)] = "DEATH";
      t[(t["BEHIT"] = -99)] = "BEHIT";
      t[(t["HIT"] = -98)] = "HIT";
    })((i = e.BattleUnitEvent || (e.BattleUnitEvent = {})));
    var a = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.init(t);
        e.resetHits();
        e.level = 1;
        e.hiter = new r.default(e);
        e.weaponWav = [];
        return e;
      }
      t.prototype.init = function (t) {
        this.role = t;
      };
      Object.defineProperty(t.prototype, "map", {
        get: function () {
          return this.role.map;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "actor", {
        get: function () {
          return this.role.actor;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "body", {
        get: function () {
          return this.role.body;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.role.float;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "position", {
        get: function () {
          return this.role.position;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "roleData", {
        get: function () {
          return this.role.roleData;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "equipments", {
        get: function () {
          var t;
          return (t = this.role) === null || t === void 0
            ? void 0
            : t.equipments;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "x", {
        get: function () {
          return this.role.x;
        },
        set: function (t) {
          this.role.x = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "y", {
        get: function () {
          return this.role.y;
        },
        set: function (t) {
          this.role.y = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "direction", {
        get: function () {
          return this.role.direction;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "hitType", {
        get: function () {
          return this.role.hitType;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "attribute", {
        get: function () {
          return this.role.attribute;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {};
      t.prototype.behit = function (t, e) {
        this.event(i.BEHIT, []);
      };
      t.prototype.hitit = function (t, e) {
        var n, o;
        this.event(i.HIT, []);
        if (
          (o =
            (n = this === null || this === void 0 ? void 0 : this.map) ===
              null || n === void 0
              ? void 0
              : n.sk) === null || o === void 0
            ? void 0
            : o.onHit
        ) {
          this.map.sk.onHit(this.role, e);
        }
      };
      t.prototype.addDelay = function (t) {
        var e, n;
        if (
          (n = (e = this.role) === null || e === void 0 ? void 0 : e.actor) ===
            null || n === void 0
            ? void 0
            : n.addDelay
        ) {
          this.role.actor.addDelay(t);
        }
      };
      t.prototype.setCurActionInfo = function (t) {
        this.curActionInfo = t;
      };
      t.prototype.getCurActionInfo = function () {
        return this.curActionInfo || {};
      };
      t.prototype.isGuard = function () {
        return false;
      };
      t.prototype.isFloat = function () {
        return this.role.isFloat();
      };
      t.prototype.isDownAction = function () {
        return this.role.isDownAction();
      };
      t.prototype.isSuperArmor = function () {
        return this.role.isSuperArmor();
      };
      t.prototype.resetHits = function (t) {
        if (t === void 0) {
          t = [];
        }
        this.hits = t;
      };
      t.prototype.hit = function (t) {
        if (this.hits.indexOf(t) >= 0) return false;
        this.hits.push(t);
        return true;
      };
      t.prototype.isCtrlState = function () {
        return true;
      };
      t.prototype.isCanHitfly = function () {
        return true;
      };
      t.prototype.isCanHitBack = function () {
        return true;
      };
      t.prototype.isCanStay = function () {
        return true;
      };
      t.prototype.isCanDamage = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.role) ===
            null || t === void 0
            ? void 0
            : t.isUnbreakable
        ) {
          if (this.role.isUnbreakable()) {
            return false;
          }
        }
        return true;
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = a;
  });
  t(fe);
  fe.BattleUnitEvent;
  var ce = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var y = i(fe);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.behit = function (t, e) {
        var n = e.float;
        this.role.setStayTime();
        var o = this.isFloat();
        var r = this.isSuperArmor();
        var i = this.role.isUnbreakable();
        var a = this.role.fu.isCtrlState();
        var s = this.isCanDamage();
        var u = this.map.sk.onDamage(this.role, e.hiter);
        if (a || r || i) {
          if (s) {
            if (u) this.role.script.damage(t.damage);
          }
          if (a) {
            this.map.sk.stop(this.role);
          }
        } else {
          var l = false;
          if (u) {
            this.map.sk.stop(this.role);
            l = true;
            var f = ht.RoleAction.DAMAGE1;
            if (this.role.isNormalAction()) {
              f =
                Math.random() > 0.5
                  ? ht.RoleAction.DAMAGE1
                  : ht.RoleAction.DAMAGE2;
            } else if (this.role.isAction(ht.RoleAction.DAMAGE1)) {
              f = ht.RoleAction.DAMAGE2;
            }
            var c = this.role.force.floatPower >= 350;
            if (!this.role.rebound) {
              var p =
                this.isFloat() || this.isDownAction()
                  ? this.role.force.floatPower > 400
                  : true;
              this.role.rebound = n ? p : false;
            }
            if (n) {
              if (o && this.role.float > 0) {
                this.role.setAction(f, true);
              } else {
                if (c || !this.isDownAction()) {
                  this.role.setAction(f, true);
                } else {
                  if (this.role.body.max == 1) {
                    f = ht.RoleAction.DOWN;
                    this.role.setAction(f, true);
                    this.body.delay = 1e4;
                  } else {
                    f = ht.RoleAction.DOWN;
                    this.role.setAction(f, true);
                    this.actor.setFrameIndex(2, 0);
                  }
                }
              }
            } else {
              var d = this.isDownAction()
                ? !this.role.force.hasFloatPower()
                : false;
              if (d) {
                if (this.role.body.max == 1) {
                  f = ht.RoleAction.DOWN;
                  this.role.setAction(f, true);
                  this.body.delay = 1e4;
                } else {
                  f = ht.RoleAction.DOWN;
                  this.role.setAction(f, true);
                  this.actor.setFrameIndex(3, 0);
                  this.actor.setFrameDelay(120, 0);
                }
              } else {
                this.role.setAction(f, true);
              }
            }
            if (l) {
              if (this.role.isDamageAction()) {
                var h = 1e4;
                if (this.isCanStay()) {
                  this.body.delay = h;
                  var v = 400 * t.stiff;
                  this.body.time = 0;
                  this.actor.addTime(h - v);
                }
              }
            }
          }
        }
        this.role.script.damage(t.damage);
        this.role.event(y.BattleUnitEvent.BEHIT);
      };
      e.prototype.isGuard = function () {
        return this.map.sk.has(102, this.role);
      };
      e.prototype.getCurActionInfo = function () {
        var t, e;
        return (e =
          (t =
            this === null || this === void 0
              ? void 0
              : this.role.actionInfo) === null || t === void 0
            ? void 0
            : t.action) === null || e === void 0
          ? void 0
          : e[this.role.action];
      };
      e.prototype.isCtrlState = function () {
        if (this.role.isUnbreakable()) return false;
        return this.role.state.isCtrlState();
      };
      e.prototype.isCanHitfly = function () {
        var t;
        if (this.isSuperArmor()) return false;
        if (this.role.isUnbreakable()) return false;
        if (this.isCtrlState()) return false;
        if ((t = this.roleData) === null || t === void 0 ? void 0 : t.notHitFly)
          return false;
        return this.role.state.isCanHitfly();
      };
      e.prototype.isCanHitBack = function () {
        if (this.role.isUnbreakable()) return false;
        if (this.isCtrlState()) return false;
        if (this.role.isSuperArmor()) {
          return false;
        }
        return this.role.state.isCanHitBack();
      };
      e.prototype.isCanStay = function () {
        return this.role.state.isCanStay();
      };
      return e;
    })(y.default);
    e.default = a;
  });
  t(ce);
  var pe = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = n(dt);
    var a = n(_);
    var r = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.animations = [];
        e.roleHeight = e.float = 0;
        e.floatOffset = 5;
        t && e.setEquipment(t);
        return e;
      }
      t.prototype.update = function (t) {
        var e;
        this.pos(0, -this.roleHeight - this.float - this.floatOffset);
        if (!this.posDatachanged) {
          var n = this.animations[0];
          if (
            (e = n === null || n === void 0 ? void 0 : n.width) !== null &&
            e !== void 0
              ? e
              : 0 > 0
          ) {
            this.pivotX = n.width / 2;
            this.pivotY = n.height;
            this.posDatachanged = true;
          }
        }
        for (var o in this.animations) {
          this.animations[o].update(t);
        }
      };
      t.prototype.reset = function () {
        var t;
        this.posDatachanged = false;
        this.equId = undefined;
        while (
          (t = this.animations) === null || t === void 0 ? void 0 : t.length
        ) {
          var e = this.animations.pop();
          this.removeChild(e);
        }
      };
      t.prototype.setEquipment = function (t) {
        var e;
        if (this.equId == t) return;
        this.reset();
        this.equId = t;
        var n = (this.data = i.default.conf.equipment[t]);
        this.equipmentTypes = n.position;
        this.class = n.class;
        if (n) {
          this.equipmentType = n.type;
          if (n.class == "character") {
            if (n.type == "title") {
              for (var o = 0; o < n["custom animation"].length; o++) {
                var r = new a.default();
                r.order = n["layer"];
                r.skinType = this.equipmentType;
                r.type = m.IActorComponentType.SKIN;
                r.setAnimation(
                  i.default.getAnimationData(n["custom animation"][o])
                );
                this.animations.push(r);
                this.addChild(r);
              }
              if (
                ((e = n === null || n === void 0 ? void 0 : n.size) === null ||
                e === void 0
                  ? void 0
                  : e.length) == 2
              ) {
                this.pivotX = n.size[0] / 2;
                this.pivotY = n.size[1];
                this.posDatachanged = true;
              }
            } else {
              return;
            }
          } else {
            return;
          }
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = r;
  });
  t(pe);
  var de = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = n(dt);
    var u = n(_);
    var r = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.animations = [];
        e.roleHeight = e.float = 0;
        e.floatOffset = 5;
        t && e.setEquipment(t);
        return e;
      }
      t.prototype.update = function (t) {
        var e;
        this.pos(0, -this.roleHeight - this.float - this.floatOffset);
        if (!this.posDatachanged) {
          var n = this.animations[0];
          if (
            (e = n === null || n === void 0 ? void 0 : n.width) !== null &&
            e !== void 0
              ? e
              : 0 > 0
          ) {
            this.pivotX = n.width / 2;
            this.pivotY = n.height;
            this.posDatachanged = true;
          }
        }
        for (var o in this.animations) {
          this.animations[o].update(t);
        }
      };
      t.prototype.reset = function () {
        var t;
        this.posDatachanged = false;
        this.equId = undefined;
        while (
          (t = this.animations) === null || t === void 0 ? void 0 : t.length
        ) {
          var e = this.animations.pop();
          e.removeSelf();
        }
      };
      t.prototype.setEquipment = function (t) {
        if (this.equId == t) return;
        this.reset();
        this.equId = t;
        var e = (this.data = s.default.conf.equipment[t]);
        this.equipmentTypes = e.position;
        this.class = e.class;
        if (e) {
          this.equipmentType = e.type;
          if (e.class == "character") {
            if (e.type == "aura") {
              for (
                var n = e["aurora graphic effects"].length - 1;
                n >= 0;
                n--
              ) {
                var o = e["aurora graphic effects"][n],
                  r = o[0],
                  i = o[1];
                var a = new u.default();
                a.order = r;
                a.skinType = this.equipmentType;
                a.type = m.IActorComponentType.SKIN;
                a.setAnimation(s.default.getAnimationData(i));
                this.animations.push(a);
              }
              this.posDatachanged = true;
            } else {
              return;
            }
          } else {
            return;
          }
        }
      };
      t.prototype.setAnimationVisible = function (t) {
        var e;
        if (
          (e = this.animations) === null || e === void 0 ? void 0 : e.length
        ) {
          if (t == this.animations[0].visible) {
            return;
          }
          for (var n = 0, o = this.animations; n < o.length; n++) {
            var r = o[n];
            r.visible = t;
          }
        }
      };
      t.prototype.setDirection = function (t) {
        var e;
        if (
          (e = this.animations) === null || e === void 0 ? void 0 : e.length
        ) {
          if (t == this.animations[0].scaleX2) {
            return;
          }
          for (var n = 0, o = this.animations; n < o.length; n++) {
            var r = o[n];
            r.scaleX2 = t;
          }
        }
      };
      t.prototype.attend = function (t) {
        for (var e = 0, n = this.animations; e < n.length; e++) {
          var o = n[e];
          if (o.order == 0) {
            t.addChildAt(o, 0);
          } else {
            t.addChild(o);
          }
        }
      };
      t.prototype.unattend = function (t) {
        for (var e = 0, n = this.animations; e < n.length; e++) {
          var o = n[e];
          o.removeSelf();
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = r;
  });
  t(de);
  var he = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(ue);
    var s = o(dt);
    var u = o(q);
    var i = o(ce);
    var l = o(pe);
    var f = o(de);
    var a = (function (a) {
      n(t, a);
      function t() {
        var t, e;
        var n = a.call(this) || this;
        n.tmp =
          ((t = {}),
          (t["move"] = ((e = {}), (e[-1] = 0), (e[1] = 0), e)),
          (t["attacktime"] = 0),
          t);
        n.camp = ht.RoleCamp.HERO;
        n.useDashAttack = true;
        n.order = ht.RoleOrder.HERO;
        n.defaultAction = ht.RoleAction.REST;
        n.defaultMoveAction = ht.RoleAction.MOVE;
        n.mp = n.maxMp = n.hp = n.maxHp = n.xSpeed = n.ySpeed = 0;
        n.fu = new i.default(n);
        n.fu.camp = n.camp;
        n.slotItems = [];
        n.slotSkills = [];
        return n;
      }
      Object.defineProperty(t.prototype, "hiter", {
        get: function () {
          return this.fu.hiter;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.addHeroAura = function () {
        this.light = new XOF.Image();
        this.light.skin = "other/0.png";
        this.light.pivot(63, 21);
        this.light.blendMode = "add";
        this.addChildAt(this.light, 0);
      };
      t.prototype.setAura = function (t) {
        var e = this.equAura;
        if (!t) {
          if (e) {
            e.unattend(this);
            e.reset();
          }
        }
        if (!e) {
          e = new f.default(t);
          e.attend(this);
          this.equAura = e;
        } else if (t) {
          e.unattend(this);
          e.setEquipment(t);
          e.attend(this);
        }
        if (t) {
          e.addTo(this);
        }
      };
      t.prototype.setTitle = function (t) {
        var e, n;
        var o = this.equTitle;
        if (!t) {
          if (o) {
            this.off(XOF.Event.MOVE, this.updateTitleFloat, this);
            o.removeSelf();
            o.reset();
          }
        }
        if (!o) {
          o = new l.default(t);
          this.equTitle = o;
        } else if (t) {
          o.setEquipment(t);
        }
        if (t) {
          this.on(XOF.Event.MOVE, this.updateTitleFloat, this);
          o.roleHeight =
            (n =
              (e =
                this === null || this === void 0 ? void 0 : this.roleData) ===
                null || e === void 0
                ? void 0
                : e.height) !== null && n !== void 0
              ? n
              : 120;
          o.addTo(this);
        }
      };
      t.prototype.setBodyEquipmentId = function (t) {
        this.bodyEquipmentId = t;
        var e = s.default.conf.equipment[t];
        var n = s.default.getPvfConf(
          s.default.conf.equanistaticdata.animation_detail_data[e["sani"]].ani
        );
        var o = e.variation[0] * 100 + e.variation[1];
        this.body.equipmentTypes =
          s.default.conf.equipment[this.bodyEquipmentId].position;
        this.setBodyAnimationGroup(n, [o]);
      };
      t.prototype.adjustEquipment = function () {
        this.weapon = undefined;
        for (var t = 0, e = this.equipments; t < e.length; t++) {
          var n = e[t];
          if (!n.visible) continue;
          if (n.equipmentType == "weapon") {
            this.weapon = n;
          }
        }
        this.actor.update(0);
      };
      t.prototype.addKeyLogic = function () {
        this.key.addKeyLogic();
      };
      t.prototype.removeKeyLogic = function () {
        this.key.removeKeyLogic();
        if (this.isAction(ht.RoleAction.MOVE, ht.RoleAction.DASH)) {
          this.setAction(this.defaultAction);
        }
      };
      t.prototype.skill = function (t, e) {
        var n = [];
        for (var o = 2; o < arguments.length; o++) {
          n[o - 2] = arguments[o];
        }
        this.map.sk.skill(t, this, e);
      };
      t.prototype.onAnimationComplete = function () {
        if (this.map.sk.hasSkills(this)) {
          var t = this.map.sk.getCurrentSkillId(this);
          this.map.sk.onEndCurrentAni(this);
          this.special.onSkillEnd(t);
        } else if (!this.isDeath) {
          if (this.lastAction) {
            this.setAction(this.lastAction, true);
            this.lastAction = undefined;
          } else {
            a.prototype.onAnimationComplete.call(this);
          }
        }
      };
      t.prototype.setAction = function (t, e) {
        var n;
        if (a.prototype.setAction.call(this, t, e)) {
          this.fu.resetHits();
          this.actor.addDelay(0, 1);
          if (this.isNormalAction()) {
            var o = this.isAction(ht.RoleAction.REST, ht.RoleAction.STAY);
            if (o) {
              if (this.movekeyIn && this.key.isDownMoveKey()) {
                var r = this.IsKeyDown(s.default.key.left);
                var i = this.IsKeyDown(s.default.key.right);
                if (r && i) {
                  this.moveLogic(
                    this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.left] >
                      this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.right]
                      ? s.default.key.left
                      : s.default.key.right,
                    1
                  );
                } else if (r) {
                  this.moveLogic(s.default.key.left, 1);
                } else if (i) {
                  this.moveLogic(s.default.key.right, 1);
                }
                if (this.IsKeyDown(s.default.key.up)) {
                  this.moveLogic(s.default.key.up, 1);
                } else if (this.IsKeyDown(s.default.key.down)) {
                  this.moveLogic(s.default.key.down, 1);
                }
              }
            }
            if (this.isMyControler()) {
              if (this.isMoveAction()) {
                if (
                  !u.default.sound.hasPlay(this, "move") &&
                  !((n =
                    this === null || this === void 0 ? void 0 : this.map) ===
                    null || n === void 0
                    ? void 0
                    : n.paused)
                )
                  u.default.sound.play("move", { loop: -1 }, this);
              } else {
                u.default.sound.stop("move", this);
              }
            }
          } else {
            this.setStayTime(
              (
                this.isAction(ht.RoleAction.JUMP)
                  ? this.tmp["attacktime"] > 0
                  : true
              )
                ? 5e3
                : 0
            );
            u.default.sound.stop("move", this);
            this.xSpeed = this.ySpeed = 0;
          }
          return true;
        }
        return false;
      };
      t.prototype.setStayTime = function (t) {
        if (t === void 0) {
          t = 5e3;
        }
        this.tmp["attacktime"] = t;
        if (this.tmp["attacktime"] > 0) this.defaultAction = ht.RoleAction.STAY;
      };
      t.prototype.skillZ = function () {};
      t.prototype.skillC = function () {};
      t.prototype.reset = function () {
        this.map.sk.stop(this);
        this.state.cleanAll();
        this.script.cleanBuff();
        this.rs.cleanAllCd();
        this.special.unApplyAll();
        this.force.clean();
        this.rest(true);
        this.isDeath = false;
        this.hiter.enabled = true;
        this.lastAction = undefined;
      };
      t.prototype.rest = function (t) {
        this.tmp["attacktime"] = 0;
        this.defaultAction = ht.RoleAction.REST;
        this.stay(t, t ? false : undefined);
      };
      t.prototype.stay = function (t, e) {
        if (e === void 0) {
          e = false;
        }
        var n;
        if (t) {
          n = true;
        } else if (this.isMoveAction()) {
          n = true;
        } else if (
          this.isAction(ht.RoleAction.STAY, ht.RoleAction.REST) &&
          !this.isAction(this.defaultAction)
        ) {
          n = true;
        }
        if (n) {
          this.movekeyIn = e;
          this.map.sk.stop(this);
          this.setAction(this.defaultAction, true);
          this.tmp[ht.RoleAction.MOVE][1] = this.tmp[ht.RoleAction.MOVE][
            -1
          ] = 0;
        }
      };
      t.prototype.onDataUpdate = function (t) {
        if (this.isDeath) return;
        a.prototype.onDataUpdate.call(this, t);
        this.rs.onUpdate(t);
      };
      t.prototype.update = function (t) {
        var e, n;
        a.prototype.update.call(this, t);
        if (this.equTitle) this.equTitle.update(t);
        if (this.equAura) {
          var o = !((n =
            (e = this === null || this === void 0 ? void 0 : this.map) ===
              null || e === void 0
              ? void 0
              : e.isDungeon) !== null && n !== void 0
            ? n
            : true);
          this.equAura.setAnimationVisible(o);
          if (o) {
            this.equAura.setDirection(this.actor.scaleX);
            this.equAura.update(t);
          }
        }
        if (this.isDeath) return;
        var r = this.map.isDungeon
          ? this.attribute.speed
          : this.attribute.cityMoveSpeed;
        if (this.xSpeed != 0 || this.ySpeed != 0) {
          var i = this.isAction(ht.RoleAction.DASH);
          if (this.isNormalAction()) {
            if (!this.movekeyIn) return;
          }
          this.moveBy(
            this.xSpeed * r * (i ? 1.4 : 1),
            this.ySpeed * r * 0.7 * (i ? 1.2 : 1)
          );
        }
        if (this.tmp["attacktime"] > 0) {
          if ((this.tmp["attacktime"] -= t) <= 0) {
            this.tmp["attacktime"] = 0;
            this.defaultAction = ht.RoleAction.REST;
            if (this.isAction(ht.RoleAction.REST, ht.RoleAction.STAY)) {
              this.stay(true);
            }
          }
        }
      };
      t.prototype.onFloatDown = function () {
        if (this.isDamageAction()) {
          this.setAction(ht.RoleAction.DOWN);
        } else if (this.isDownAction()) {
          this.actor.setFrameIndex(2, 0);
        }
      };
      t.prototype.onFloatLie = function () {
        if (this.isDeath) {
          this.floatLieDeath();
        }
        if (this.state.isCtrlState()) return;
        if (this.isSkillState()) return;
        if (this.isAction(ht.RoleAction.DOWN)) {
          if (this.rebound) {
            this.rebound = false;
            this.script.float(180);
            this.actor.setFrameIndex(3, 0);
          } else if (!this.body.isLast) {
            this.actor.setFrameIndex(this.body.max - 1, 0);
            this.actor.body.delay = 400;
            this.lastAction = ht.RoleAction.SIT;
          }
        }
      };
      t.prototype.floatLieDeath = function () {
        if (this.isMyControler()) {
          u.default.eventMgr.event(1049);
        }
      };
      t.prototype.death = function (t) {
        var e, n;
        this.isDeath = true;
        this.hp = 0;
        this.hiter.enabled = false;
        this.map.sk.stop(this);
        if (!this.isMyControler()) {
          this.labName.visible = false;
        }
        var o = this.force.hasFloatPower();
        if (o || this.isFloat()) {
          if (o) {
            this.setAction(ht.RoleAction.DAMAGE1);
          }
        } else {
          this.script.float(350, -this.direction * 80);
          this.setAction(ht.RoleAction.DAMAGE1);
          this.rebound = true;
        }
        if (
          (n =
            (e = this.roleData) === null || e === void 0
              ? void 0
              : e.dieSound) === null || n === void 0
            ? void 0
            : n.length
        ) {
          this.script.playSound(this.roleData.dieSound[0], true);
        }
        a.prototype.death.call(this, t);
      };
      t.prototype.moveLogic = function (t, e) {
        var n;
        var o = this.isNormalAction();
        var r = (n = this.map) === null || n === void 0 ? void 0 : n.isDungeon;
        var i = r ? this.defaultMoveAction : ht.RoleAction.MOVE;
        if (e) {
          if (!r) {
            this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.right] = 0;
            this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.left] = 0;
          }
          if (o) {
            this.movekeyIn = true;
            var a = this.$direction;
            if (t == s.default.key.left) {
              if (a != ht.RoleDirction.left) {
                this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.left] = 0;
                this.setAction(i);
              }
              this.xSpeed = ht.RoleDirction.left;
              if (
                XOF.now() -
                  this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.left] <=
                200
              ) {
                this.setAction(ht.RoleAction.DASH);
              } else {
                if (this.action == this.defaultAction) {
                  this.setAction(i);
                }
              }
              this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.left] = XOF.now();
            } else if (t == s.default.key.right) {
              if (a != ht.RoleDirction.right) {
                this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.right] = 0;
                this.setAction(i);
              }
              this.xSpeed = ht.RoleDirction.right;
              if (
                XOF.now() -
                  this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.right] <=
                200
              ) {
                this.setAction(ht.RoleAction.DASH);
              } else {
                if (this.action == this.defaultAction) {
                  this.setAction(i);
                }
              }
              this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.right] = XOF.now();
            } else if (t == s.default.key.up) {
              this.ySpeed = -1;
              if (this.action == this.defaultAction) {
                this.setAction(i);
              }
            } else if (t == s.default.key.down) {
              this.ySpeed = 1;
              if (this.action == this.defaultAction) {
                this.setAction(i);
              }
            }
          }
        } else {
          if (o) {
            if (t == s.default.key.left) {
              if (this.IsKeyDown(s.default.key.right)) {
                this.xSpeed = ht.RoleDirction.right;
                this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.left] = 0;
              } else {
                this.xSpeed = 0;
              }
            } else if (t == s.default.key.right) {
              if (this.IsKeyDown(s.default.key.left)) {
                this.tmp[ht.RoleAction.MOVE][ht.RoleDirction.right] = 0;
                this.xSpeed = ht.RoleDirction.left;
              } else {
                this.xSpeed = 0;
              }
            } else if (t == s.default.key.up) {
              if (this.IsKeyDown(s.default.key.down)) {
                this.ySpeed = 1;
              } else {
                this.ySpeed = 0;
              }
            } else if (t == s.default.key.down) {
              if (this.IsKeyDown(s.default.key.up)) {
                this.ySpeed = -1;
              } else {
                this.ySpeed = 0;
              }
            }
          }
          if (this.key.isDownMoveKey());
          else {
            if (this.isAction(ht.RoleAction.MOVE, ht.RoleAction.DASH)) {
              this.setAction(this.defaultAction);
            }
          }
        }
        if (this.xSpeed != 0) {
          this.$setDrection(this.xSpeed);
        }
      };
      t.prototype.onKeyDown = function (t) {
        switch (t) {
          case s.default.key.left:
          case s.default.key.right:
          case s.default.key.up:
          case s.default.key.down:
            this.moveLogic(t, 1);
            break;
          case s.default.key[1]:
          case s.default.key[2]:
          case s.default.key[3]:
          case s.default.key[4]:
          case s.default.key[5]:
          case s.default.key[6]:
            this.onItem(t);
            break;
          case s.default.key.q:
          case s.default.key.w:
          case s.default.key.e:
          case s.default.key.r:
          case s.default.key.t:
          case s.default.key.y:
          case s.default.key.a:
          case s.default.key.s:
          case s.default.key.d:
          case s.default.key.f:
          case s.default.key.g:
          case s.default.key.h:
            this.onSkill(t);
            break;
          case s.default.key.x:
            this.attack();
            break;
        }
      };
      t.prototype.onKeyUp = function (t) {
        switch (t) {
          case s.default.key.left:
          case s.default.key.right:
          case s.default.key.up:
          case s.default.key.down:
            this.moveLogic(t, 0);
            break;
        }
        if (this.map) this.map.sk.onKeyRelease(t, this);
      };
      t.prototype.onItem = function (t) {
        var e = [
          s.default.key[1],
          s.default.key[2],
          s.default.key[3],
          s.default.key[4],
          s.default.key[5],
          s.default.key[6],
        ];
        var n = e.indexOf(t);
        if (n >= 0) {
          var o = this.slotItems[n];
          if (o > 0) {
            u.default.eventMgr.event(1045, [this, o]);
          }
        }
      };
      t.prototype.onSkill = function (t) {
        var e;
        if (
          (e = this === null || this === void 0 ? void 0 : this.map) === null ||
          e === void 0
            ? void 0
            : e.isDungeon
        ) {
          var n = [
            s.default.key.a,
            s.default.key.s,
            s.default.key.d,
            s.default.key.f,
            s.default.key.g,
            s.default.key.h,
            s.default.key.q,
            s.default.key.w,
            s.default.key.e,
            s.default.key.r,
            s.default.key.t,
            s.default.key.y,
          ];
          var o = n.indexOf(t);
          if (o >= 0) {
            var r = this.slotSkills[o];
            if (r > 0) {
              this === null || this === void 0 ? void 0 : this.skill(r, t);
            }
          }
        }
      };
      t.prototype.isSuperArmor = function () {
        if (this.isDeath) return false;
        if (this.buffAttribute.has(10030)) return true;
        return a.prototype.isSuperArmor.call(this);
      };
      t.prototype.setItems = function (t) {
        this.slotItems = t;
        return this;
      };
      t.prototype.setSkills = function (t) {
        this.slotSkills = t;
        return this;
      };
      t.prototype.setMap = function (t) {
        a.prototype.setMap.call(this, t);
        this.on("down", this.onFloatDown, this);
        this.on("lie", this.onFloatLie, this);
      };
      t.prototype.onRemove = function () {
        a.prototype.onRemove.call(this);
        this.off("down", this.onFloatDown, this);
        this.off("lie", this.onFloatLie, this);
      };
      t.prototype.updateTitleFloat = function () {
        if (this.equTitle) {
          this.equTitle.float = this.float;
        }
      };
      t.prototype.destory = function () {};
      return t;
    })(r.default);
    e.default = a;
  });
  t(he);
  var ve = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(g);
    var i = o(P);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.order = ht.RoleOrder.NONE;
        t.position = new i.default(t);
        return t;
      }
      t.prototype.setMap = function (t) {
        this.map = t;
      };
      t.prototype.onPlayComplete = function () {};
      t.prototype.draw = function (t) {
        if (this.debug) {
          this.debug_(t);
        }
        e.prototype.draw.call(this, t);
      };
      t.prototype.debug_ = function (t) {
        var e = this.frame;
        t.pushStyle();
        if (e && e["damage box"]) {
          var n = e["damage box"];
          for (var o = 0; o < n.length; o += 6) {
            var r = n[o],
              i = -n[o + 1] - n[o + 5],
              a = n[o + 3],
              s = n[o + 5];
            t.$.strokeRect(t.x + r, t.y + i, a, s);
          }
        }
        t.$.strokeStyle = "#ff0000";
        if (e && e["attack box"]) {
          var n = e["attack box"];
          for (var o = 0; o < n.length; o += 6) {
            var r = n[o],
              i = n[o + 1] - n[o + 5],
              a = n[o + 3],
              s = n[o + 5];
            t.$.strokeRect(t.x + r, t.y + i, a, s);
          }
        }
        t.popStyle();
      };
      t.prototype.onStart = function () {};
      t.prototype.onRemove = function () {};
      return t;
    })(r.default);
    e.default = a;
  });
  t(ve);
  var ye = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var u = n(dt);
    var r = n(y);
    var i = n(P);
    var l = [0, 0];
    var a = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.order = ht.RoleOrder.NONE;
        t.position = new i.default(t);
        return t;
      }
      t.prototype.setAnimation = function (t) {
        var e, n, o;
        var r = t;
        if (r) {
          if (r.head == "tile") {
            var i = r["[IMAGE]"][0];
            if (i) {
              var a = r["[IMAGE]"][1];
              this.skin = i + "/" + a + ".png";
              var s =
                (o =
                  (n =
                    (e = u.default.offsets) === null || e === void 0
                      ? void 0
                      : e[i]) === null || n === void 0
                    ? void 0
                    : n[a]) !== null && o !== void 0
                  ? o
                  : l;
              this.offset(s[0], -(r["[img pos]"] || 0) + s[1]);
            }
          } else {
            this.skin = r.img;
            this.offset(r.offset[0], r.offset[1]);
          }
          if (this.skin) {
            if (XOF.loader.get(this.skin)) {
              this.onLoaded_();
            } else {
              XOF.loader.loadImage(
                this.skin,
                undefined,
                undefined,
                this.onLoaded_,
                this
              );
            }
          }
        } else {
          console.log("错误，没有TILE数据");
        }
      };
      t.prototype.onLoaded_ = function () {
        var t = XOF.loader.get(this.skin);
        if (t) {
          this.size(224, t.height);
        }
      };
      t.prototype.draw = function (t) {
        n.prototype.draw.call(this, t);
        if (this.skin) {
          var e = XOF.loader.get(this.skin);
          if (e) {
            t.draw(e, this.offsetX, this.offsetY);
          }
        }
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        set: function (t) {
          this.position.setZ(this.float);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {};
      t.prototype.setMap = function (t) {
        this.map = t;
      };
      t.prototype.onStart = function () {};
      t.prototype.onRemove = function () {};
      t.prototype.removeSelfFormMap = function () {
        if (this.map) {
          this.map.removeObject(this);
        }
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(ye);
  var _e = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["NORMAL"] = 0)] = "NORMAL";
      t[(t["PRESS"] = 1)] = "PRESS";
      t[(t["TALK"] = 2)] = "TALK";
      t[(t["BUY"] = 3)] = "BUY";
      t[(t["SELL"] = 4)] = "SELL";
      t[(t["FIXED"] = 5)] = "FIXED";
      t[(t["CONFIRM"] = 6)] = "CONFIRM";
      t[(t["CONFIRM_PRESS"] = 7)] = "CONFIRM_PRESS";
    })(n || (n = {}));
    e.default = n;
  });
  t(_e);
  var me = e(function (t, e) {
    var o =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = n(q);
    var f = n(I);
    var c = n($);
    var r = n(_e);
    var p = n(k);
    var i = n(V);
    var a = n(Y);
    var s = (function () {
      function u() {}
      u.onEnter = function (t, e) {
        u.tipsPanel = t;
        l.default.viewMgr.close(f.default.TextPopup);
        l.default.viewMgr.open(f.default.TextPopup);
        this.setTextPopupText(e);
      };
      u.setTextPopupText = function (t) {
        var e = l.default.viewMgr.getOpenView(f.default.TextPopup);
        if (e) {
          var n = u.tipsPanel;
          e.resetText(t);
          var o = l.default.viewMgr.localToLayer(n, 0, 0);
          var r = n.width || 0;
          var i = n.height || 0;
          var a = Math.floor(o.x - e.width / 2 + r / 2);
          var s = Math.floor(o.y - e.height);
          if (s < 0) s = 0;
          if (s + e.height > c.default.height)
            s = Math.floor(c.default.height - e.height);
          if (a < 0) a = 0;
          if (a + e.width > c.default.width)
            a = Math.floor(c.default.width - e.width);
          if (p.default.testRect(a, s, e.width, e.height, o.x, o.y, r, i)) {
            if (e.width < o.x) {
              a = o.x - e.width;
            } else {
              a = o.x + r;
            }
          }
          e.pos(a, s);
        }
      };
      u.onOut = function () {
        l.default.viewMgr.close(f.default.TextPopup);
        this.tipsPanel = undefined;
      };
      u.setTextPopup = function (t, e, n) {
        if (e) {
          t.on(XOF.TouchEvent.TOUCH_ENTER, this.onEnter, this, [t, n]);
          t.on(XOF.TouchEvent.TOUCH_OUT, this.onOut, this);
        } else {
          t.off(XOF.TouchEvent.TOUCH_ENTER, this.onEnter);
          t.off(XOF.TouchEvent.TOUCH_OUT, this.onOut, this);
          if (u.tipsPanel == t) {
            this.onOut();
          }
        }
      };
      u.setFingerState = function (t) {
        var e = l.default.viewMgr.getOpenView(f.default.Finger);
        if (e) {
          e.setState(t);
        }
      };
      u.getFingerState = function () {
        var t = l.default.viewMgr.getOpenView(f.default.Finger);
        if (t) {
          return t.state;
        }
        return r.default.NORMAL;
      };
      u.fingerIsState = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        var n = u.getFingerState();
        for (var o = 0, r = t; o < r.length; o++) {
          var i = r[o];
          if (i == n) return true;
        }
        return false;
      };
      Object.defineProperty(u, "finger", {
        get: function () {
          return l.default.viewMgr.getOpenView(f.default.Finger);
        },
        enumerable: false,
        configurable: true,
      });
      u.itemCanMove = function () {
        return true;
      };
      u.itemCanUse = function () {
        return u.itemCanMove();
      };
      u.stageStopPropagation = function (t) {
        var e = l.default.viewMgr.getOpenView(f.default.Finger);
        if (e) {
          if (t.type == XOF.TouchEvent.TOUCH_END) {
            e.onTouchEnd();
          } else if (t.type == XOF.TouchEvent.TOUCH_BEGIN) {
            e.onTouchBegin();
          }
        }
        t.stopPropagation();
      };
      u.simpleTimeFormat = function (t) {
        return p.default.unitFormat(
          t,
          [60 * 60, 60, 1],
          [i.default.tr(140), i.default.tr(141), i.default.tr(142)],
          function (t, e) {
            return t > 0 ? "" + t + e : "";
          }
        );
      };
      u.openView = function (t, e) {
        var n;
        if (t < 0) {
          if (t == -1e4) {
            l.default.ctrlMgr.getCtrl(a.default.Map).enterCity();
          }
        } else if (t > 0) {
          (n = l.default.viewMgr).open.apply(n, o([t], e));
        } else {
          l.default.comm.mtr(188);
          XOF.log("不存在界面" + t + ".");
        }
      };
      return u;
    })();
    e.default = s;
  });
  t(me);
  var ge = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["TALK"] = 1)] = "TALK";
      t[(t["TASK"] = 2)] = "TASK";
      t[(t["SHOP"] = 3)] = "SHOP";
      t[(t["SKILL"] = 4)] = "SKILL";
      t[(t["PRODUCE"] = 5)] = "PRODUCE";
      t[(t["DECOMPOSE"] = 6)] = "DECOMPOSE";
      t[(t["FAREWELL"] = 99)] = "FAREWELL";
    })(n || (n = {}));
    e.default = n;
  });
  t(ge);
  var be = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = o(k);
    var r = (function (a) {
      n(t, a);
      function t(t, e) {
        var n = a.call(this) || this;
        n.max = n.$index = 0;
        for (var o = 0; o < 9; o++) {
          var r = new XOF.Image();
          var i = s.default.format(t, e + o);
          r.skin = i;
          n.addChild(r);
          if (!XOF.loader.get(i)) {
            n.max += 1;
            XOF.loader.loadImage(i, undefined, undefined, n.onComplete, n);
          }
        }
        if (!n.max) n.onComplete();
        return n;
      }
      t.prototype.size = function (t, e) {
        a.prototype.size.call(this, t, e);
        this.$reset();
        return this;
      };
      t.prototype.onComplete = function () {
        this.$index += 1;
        if (this.$index >= this.max) {
          this.isLoad = true;
          this.$reset();
        }
      };
      t.prototype.$reset = function () {
        if (this.isLoad) {
          var t = this.width;
          var e = this.height;
          var n = this.getChildAt(0);
          var o = this.getChildAt(8);
          var r = e - n.height - o.height;
          var i = t - n.width - o.width;
          for (var a = 3; a <= 5; a++) {
            var s = this.getChildAt(a);
            s.height = r;
          }
          var u = 0;
          var l = 2;
          var f = 1;
          for (var a = 0; a <= 6; a += 3, l += 3, f += 3) {
            var c = this.getChildAt(a);
            c.pos(0, u);
            var p = this.getChildAt(l);
            p.pos(t - p.width, u);
            var d = this.getChildAt(f);
            d.pos(n.width, u);
            d.width = i;
            u += p.height;
          }
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = r;
  });
  t(be);
  var Oe = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(be);
    var i = n(Q);
    var a = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.$maxWidth_ = 120;
        t.padding = 4;
        t.$x_ = 0;
        t.$y_ = 0;
        t.bg = new r.default("interface/popup.img/{0}.png", 63);
        t.addChild(t.bg);
        t.imgDot = new XOF.Image();
        t.imgDot.skin = "interface/popup.img/72.png";
        t.addChild(t.imgDot);
        t.lab = new XOF.Label();
        t.lab.lineSpacing = 2;
        t.lab.width = t.$maxWidth_;
        t.lab.pos(t.padding, t.padding);
        t.addChild(t.lab);
        t.size(80, 40);
        return t;
      }
      t.prototype.size = function (t, e) {
        this.bg.size(t, e);
        this.imgDot.x = t / 2 - 6;
        this.imgDot.y = e - 5;
        return n.prototype.size.call(this, t, e);
      };
      t.prototype.setText = function (t, e) {
        if (e === void 0) {
          e = 2e3;
        }
        this.visible = true;
        i.default.removeTweens(this);
        if (e > 0) i.default.get(this).wait(e).call(this.hide, this);
        var n = XOF.Label.measureText(this.lab, t).width;
        this.lab.text = t;
        this.size(
          this.padding * 2 + (n > this.$maxWidth_ ? this.$maxWidth_ : n),
          this.padding * 2 +
            Math.ceil(n / this.$maxWidth_) *
              (this.lab.fontSize + this.lab.lineSpacing)
        );
        this.pos(this.$x_ - this.width / 2, this.$y_ - this.height);
      };
      t.prototype.setPos = function (t, e) {
        this.$x_ = t;
        this.$y_ = e;
      };
      t.prototype.hide = function () {
        this.visible = false;
      };
      return t;
    })(XOF.Sprite);
    e.default = a;
  });
  t(Oe);
  var we = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var h = n(k);
    var v = /(?:\r\n|\r|\n)/;
    var y = /(<\/?\d+?>)/;
    var r = (function (n) {
      o(_, n);
      function _() {
        var t = n.call(this) || this;
        t.textColor = "#ffffff";
        t.lineSpacing = 0;
        t.fontSize = 12;
        t.textAlign = "left";
        t.vAlign = "top";
        var e = (t.canvas_ = document.createElement("canvas"));
        t.canvas_.width = t.canvas_.height = 1;
        t.graphic = new XOF.Graphic(e.getContext("2d"));
        t.$renderer.texture = PIXI.Texture.from(t.canvas_);
        return t;
      }
      _.prototype.$initRenderer = function () {
        this.$renderer = new PIXI.Sprite();
      };
      _.prototype.$renderUpdate = function () {
        n.prototype.$renderUpdate.call(this);
        if (this.width > this.canvas_.width) this.canvas_.width = this.width;
        if (this.height > this.canvas_.height)
          this.canvas_.height = this.height;
      };
      Object.defineProperty(_.prototype, "text", {
        get: function () {
          return this.text_;
        },
        set: function (t) {
          if (t == this.text_) if (this.texts != undefined) return;
          this.texts = undefined;
          this.text_ = t;
          this.$setText(t);
          this.$renderUpdate();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(_.prototype, "lineNum", {
        get: function () {
          return this.$getLineNum();
        },
        enumerable: false,
        configurable: true,
      });
      _.addText_ = function (t, e, n, o, r) {
        if (n === void 0) {
          n = 0;
        }
        var i = [];
        var a = _.measureText(r, t).width;
        if (t && n + a > e) {
          var s = t.split("");
          var u = "";
          a = 0;
          for (var l = 0, f = s; l < f.length; l++) {
            var c = f[l];
            var p = _.measureText(r, c).width;
            if (n + a + p > e) {
              if (n + a == 0) {
                i.push({ width: a + p, text: c });
                u = "";
                a = p = 0;
              } else if (a > 0) {
                i.push({ width: a, text: u });
                u = c;
                a = 0;
              } else {
                u += c;
              }
              n = 0;
            } else {
              u += c;
            }
            a += p;
          }
          if (u) {
            i.push({ width: a, text: u });
          }
        } else {
          i.push({ width: a, text: t });
        }
        if (o) {
          for (var d in i) {
            o.push(i[d].text);
          }
        }
        return i;
      };
      _.textSplite = function (t, a, s) {
        if (t) {
          var u;
          if (s instanceof _) {
            u = _;
          } else {
            u = XOF.Label;
          }
          if (h.default.hasLinefeed(t) || u.measureText(s, t).width > a) {
            var e = t.split(v);
            var l = [];
            e.forEach(function (t, e) {
              if (e) {
                l.push("\n");
              }
              if (t.length > 2 && t.indexOf("<") >= 0) {
                var n = t.split(y).filter(function (t) {
                  return !!t;
                });
                for (var o = 0, r = n; o < r.length; o++) {
                  var i = r[o];
                  if (i.match(y));
                  else {
                    t = i;
                    u.addText_(t, a, 0, l, s);
                  }
                }
              } else {
                u.addText_(t, a, 0, l, s);
              }
            });
            return l.filter(function (t) {
              return !h.default.hasLinefeed(t);
            });
          }
        }
        return [t];
      };
      _.prototype.$setText = function (t) {
        var a = this;
        t = t || "";
        var e;
        var s = this.textColor;
        var u = [this.textColor];
        var l = [];
        var f = 0;
        if (h.default.hasLinefeed(t)) {
          e = t.split(v);
        } else {
          e = [t];
        }
        var c = this.width_ || 1023;
        if (c) {
          e.forEach(function (t, e) {
            f = 0;
            if (e) {
              l.push({ width: 0, height: 0, text: "\n", color: s });
            }
            if (t.length > 2 && t.indexOf("<") >= 0) {
              var n = t.split(y).filter(function (t) {
                return !!t;
              });
              for (var o = 0, r = n; o < r.length; o++) {
                var i = r[o];
                if (i.match(y)) {
                  if (i.indexOf("</") == 0) {
                    u.pop();
                    s = u[u.length - 1] || a.textColor;
                  } else if (i.indexOf("<") == 0) {
                    s =
                      _.registerColors[i.substring(1, i.indexOf(">"))] ||
                      _.registerColors[0];
                    u.push(s);
                  }
                } else {
                  t = i;
                  _.addText_(t, c, f, undefined, a).forEach(function (t, e, n) {
                    l.push({
                      width: t.width,
                      height: a.fontSize,
                      text: t.text,
                      color: s,
                    });
                    if (e == n.length - 1) {
                      if (n.length > 1) {
                        f = t.width;
                      } else {
                        f += t.width;
                        if (f > c) {
                          f = t.width;
                        }
                      }
                    }
                  });
                }
              }
            } else {
              _.addText_(t, c, f, undefined, a).forEach(function (t, e, n) {
                l.push({
                  width: t.width,
                  height: a.fontSize,
                  text: t.text,
                  color: s,
                });
                if (e == n.length - 1) {
                  if (n.length > 1) {
                    f = t.width;
                  } else {
                    f += t.width;
                    if (f > c) {
                      f = t.width;
                    }
                  }
                }
              });
            }
          });
        }
        var n = 0;
        this.ls = [];
        var o = this.ls;
        for (var r = 0; r < l.length; r++) {
          var i = l[r];
          if (i.text == "\n") {
            o.push({ width: n, index: r });
            n = 0;
          } else if (n + i.width > c) {
            if (n == 0) {
              o.push({ width: i.width, index: r });
            } else {
              o.push({ width: n, index: r - 1 });
              n = i.width;
            }
          } else {
            n += i.width;
          }
        }
        if (n > 0) {
          o.push({ width: n, index: l.length - 1 });
        }
        this.texts = l;
        var p = this.ls.length;
        var d = this.fontSize * p + this.lineSpacing * (p - 1);
        if (d > this.canvas_.height) this.canvas_.height = d;
        this.draw(this.graphic);
      };
      _.prototype.$getLineNum = function () {
        var t, e;
        return (e =
          (t = this === null || this === void 0 ? void 0 : this.ls) === null ||
          t === void 0
            ? void 0
            : t.length) !== null && e !== void 0
          ? e
          : 0;
      };
      _.removeColorTags = function (t) {
        if (t) {
          var e = /\<\/*\d+\>/;
          while (t.search(e) >= 0) t = t.replace(e, "");
        }
        return t;
      };
      _.prototype.draw = function (t) {
        t.$.clearRect(0, 0, this.canvas_.width, this.canvas_.height);
        this.$renderer.renderable = false;
        if (this.text) {
          this.$renderer.renderable = true;
          t.reset();
          var e = 0;
          var n = this.ls ? this.ls.length : 0;
          var o = this.text_;
          var r = t.$.fillStyle;
          t.pushStyle("lineWidth", "textAlign");
          t.$.font = this.toFontString();
          var i = this.width || 1023;
          var a =
            n > 1
              ? this.fontSize * n + (this.lineSpacing - 1) * n
              : this.fontSize;
          var s = this.height > a ? this.height : a;
          for (var u = 0, l = 0, f = void 0; u < this.ls.length; u++) {
            var c = 0,
              p = 0;
            var d = e * (this.lineSpacing + this.fontSize);
            if (this.vAlign == "middle") {
              d += Math.floor((s - a) / 2);
            } else if (this.vAlign == "bottom") {
              d += Math.floor(s - a);
            }
            var h = this.ls[u];
            f = h.width;
            if (this.textAlign == "center") {
              c = (i - f) / 2;
            } else if (this.textAlign == "right") {
              c = i - f;
            }
            p = 0;
            var v = void 0;
            for (var y = l; y <= h.index; y++) {
              v = this.texts[y];
              o = v.text;
              if (this.stroke) {
                t.setColor(this.strokeColor);
                {
                  t.print(o, c - 1 - this.pivotX + p, -1 + d - this.pivotY);
                  t.print(o, c + 1 - this.pivotX + p, -1 + d - this.pivotY);
                  t.print(o, c - 1 - this.pivotX + p, 1 + d - this.pivotY);
                  t.print(o, c + 1 - this.pivotX + p, 1 + d - this.pivotY);
                }
              }
              t.$.fillStyle = v.color;
              t.print(o, c - this.pivotX + p, d - this.pivotY);
              t.$.fillStyle = r;
              p += _.measureText(this, o).width;
            }
            l = h.index + 1;
            e += 1;
          }
          t.popStyle();
          this.$renderer.texture.update();
        }
      };
      _.prototype.toFontString = function () {
        return this.fontSize + "px Arial";
      };
      _.measureText = function (t, e) {
        t.graphic.$.font = t.toFontString();
        return t.graphic.$.measureText(e);
      };
      _.registerColors = {
        0: "rgb(201,205,202)",
        1: "rgb(255,255,255)",
        2: "rgb(104,213,237)",
        3: "rgb(179,107,255)",
        4: "rgb(255,0,240)",
        5: "rgb(179,107,255)",
        6: "rgb(255,177,0)",
        7: "rgb(255,180,0)",
        8: "rgb(255,240,0)",
        9: "rgb(255,50,50)",
        888: "rgb(167,167,167)",
        999: "rgb(94,182,250)",
        10: "rgb(120,255,30)",
        20: "rgb(250,250,0)",
        21: "rgb(104,237,161)",
        25: "rgb(74,162,86)",
        26: "rgb(147,118,57)",
        30: "rgb(105,105,105)",
        31: "rgb(252,175,1)",
        40: "rgb(255,0,0)",
        51: "rgb(193,162,55)",
        52: "rgb(134,120,79)",
        53: "rgb(65,255,78)",
        54: "rgb(247,214,90)",
        55: "rgb(140,255,113)",
        56: "rgb(174,174,174)",
        60: "rgb(150,255,30)",
        61: "rgb(255,0,240)",
        71: "rgb(230,200,155)",
        81: "rgb(255,242,0)",
        82: "rgb(104,213,237)",
        83: "rgb(230,200,155)",
        85: "rgb(179,179,179)",
        100: "rgb(218,63,14)",
        110: "rgb(193,162,55)",
        111: "rgb(121,197,157)",
        112: "rgb(255,102,102)",
        113: "rgb(84,154,236)",
        114: "rgb(173,217,223)",
      };
      return _;
    })(XOF.Sprite);
    e.default = r;
  });
  t(we);
  var Ae = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var u = o(dt);
    var r = o(j);
    var i = o(Q);
    var a = o(q);
    var s = o(I);
    var l = o(me);
    var h = o($);
    var f = o(ge);
    var v = o(w);
    var c = o(x);
    var p = o(Oe);
    var y = o(we);
    var _ = o(A);
    var d = (function (d) {
      n(t, d);
      function t(t) {
        var e = d.call(this) || this;
        e.order = ht.RoleOrder.NPC;
        e.lastTalkTime = 0;
        e.id = t;
        e.isStorage = t == 22;
        var n = (e.npcData = u.default.conf.npc[t]);
        if (!n) {
          console.log("不存在的NPC", t);
          return e;
        }
        e.defaultDirection = n.direction;
        e.labName.text = n.name;
        e.labName.y = -n.height;
        e.labName.textColor = y.default.registerColors[71];
        e.body.setAnimation(
          u.default.getAnimationData(n.animation[0], n.animation[1])
        );
        e.body.strokeColor = "rgb(0,255,48)";
        for (var o in n.extraAnimation) {
          var r = n.extraAnimation[o],
            i = r[0],
            a = r[1];
          r[2];
          var s = new _.default();
          s.setAnimation(u.default.getAnimationData(a));
          e.actor.addChildAt(s, i < 0 ? 0 : i);
        }
        e.size(60, n.height);
        e.on(XOF.TouchEvent.TOUCH_ENTER, e.onEnter, e);
        e.on(XOF.TouchEvent.TOUCH_OUT, e.onOut, e);
        e.on(XOF.TouchEvent.TAP, e.onClick, e);
        return e;
      }
      t.prototype.onEnter = function () {
        this.body.stroke = true;
        this.body.strokeAlpha = 0.2;
        i.default
          .get(this.body, { loop: true })
          .set({ strokeAlpha: 0.2 })
          .to({ strokeAlpha: 0.8 }, 1e3)
          .to({ strokeAlpha: 0.2 }, 1e3);
      };
      t.prototype.onOut = function () {
        this.body.stroke = false;
        i.default.removeTweens(this.body);
      };
      t.prototype.onClick = function (t) {
        var e, n;
        if (
          (n =
            (e = this.npcData) === null || e === void 0
              ? void 0
              : e.dialogs) === null || n === void 0
            ? void 0
            : n.length
        ) {
          this.onCallback_(f.default.TALK, this.npcData.id);
          return;
        }
        if (this.isStorage) {
          a.default.viewMgr.open(s.default.Storage);
        }
        l.default.stageStopPropagation(t);
      };
      t.prototype.onCallback_ = function (t, e) {
        if (t == f.default.FAREWELL) {
          if (e != this.id) this.playSound(2);
        } else {
          this.playSound(undefined, "COMMAND_SELECT");
          if (t == f.default.TALK) {
            a.default.viewMgr.open(s.default.NpcDialog, undefined, true);
            var n = a.default.viewMgr.getOpenView(s.default.NpcDialog);
            var o = v.default.randomInt(0, this.npcData.dialogs.length - 1);
            n.dialog(this.npcData.dialogs[o], this.npcData.id);
          } else if (t == f.default.SHOP) {
            a.default.viewMgr.open(s.default.Bag);
            var r = a.default.viewMgr.getOpenView(s.default.Shop);
            if (
              (r === null || r === void 0 ? void 0 : r.shopId) ==
              this.npcData.shopid
            );
            else {
              a.default.viewMgr.open(
                s.default.Shop,
                [this.npcData.shopid],
                true
              );
              r = a.default.viewMgr.getOpenView(s.default.Shop);
              if (r)
                r.on(c.default.CLOSE, this.onCallback_, this, [
                  f.default.FAREWELL,
                ]);
            }
          }
        }
      };
      t.prototype.update = function (t) {
        var e, n, o, r, i, a;
        d.prototype.update.call(this, t);
        if (this.isStorage) {
          this.body.to(0, 0);
        }
        if (!this.lastTalkTime)
          this.lastTalkTime = v.default.randomInt(5, 12) * 1e3;
        this.lastTalkTime -= t;
        if (this.lastTalkTime <= 0) {
          var s = 10 * 1e3;
          var u =
            (o =
              (n =
                (e = this.npcData) === null || e === void 0
                  ? void 0
                  : e.talk) === null || n === void 0
                ? void 0
                : n.length) !== null && o !== void 0
              ? o
              : 0;
          var l =
            (a =
              (i =
                (r = this.npcData) === null || r === void 0
                  ? void 0
                  : r.fieldWav) === null || i === void 0
                ? void 0
                : i.length) !== null && a !== void 0
              ? a
              : 0;
          if (u + l > 0) {
            if (v.default.randomInt(1, 3) == 2) {
              var f = void 0;
              var c = void 0;
              if (l > 0 && u > 0) {
                c = v.default.randomInt(1, 2);
              } else {
                c = u > 0 ? 1 : 2;
              }
              if (c == 1) {
                f = u;
                var p = v.default.randomInt(0, f - 1);
                this.talk(this.npcData.talk[p]);
              } else if (c == 2) {
                f = l;
                if (this.map.getDistance(this) < h.default.width * 1.5) {
                  this.playSound(3);
                }
              }
              s = Math.max(4 - f, 1) * (v.default.randomInt(6, 10) + 4);
            }
          }
          this.lastTalkTime = s;
        }
      };
      t.prototype.talk = function (t) {
        var e = this.talkPop;
        if (!e) {
          e = this.talkPop = new p.default();
          e.setPos(0, -this.npcData.height - 10);
          this.addChild(e);
        }
        e.setText(u.default.conf.npctalk[t].text, 4e3);
      };
      t.prototype.hitTest_ = function (t, e) {
        return this.body.hitTest(t, e, this.actor.scaleX, this.actor.scaleY);
      };
      t.prototype.playSound = function (t, e) {
        if (this.map)
          if (e) {
            a.default.sound.play(e, { completeDestroy: true });
          } else {
            var n = void 0;
            if (t == 1) {
              n = this.npcData.talkWav;
            } else if (t == 2) {
              n = this.npcData.farewellWar;
            } else if (t == 3) {
              n = this.npcData.fieldWav;
            }
            if (n === null || n === void 0 ? void 0 : n.length) {
              if (!a.default.sound.hasPlay(this)) {
                var o = v.default.randomInt(0, n.length - 1);
                a.default.sound.stopAll(this);
                a.default.sound.play(n[o], { completeDestroy: true }, this);
              }
            }
          }
      };
      t.prototype.onRemove = function () {
        d.prototype.onRemove.call(this);
        a.default.sound.stopAll(this);
        a.default.sound.cleanAll(this);
        this.off(XOF.TouchEvent.TOUCH_ENTER, this.onEnter, this);
        this.off(XOF.TouchEvent.TOUCH_OUT, this.onOut, this);
        this.off(XOF.TouchEvent.TAP, this.onClick, this);
        this.onOut();
      };
      return t;
    })(r.default);
    e.default = d;
  });
  t(Ae);
  var i = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(j);
    var i = (function (o) {
      n(t, o);
      function t(t, e) {
        var n = o.call(this) || this;
        n.centerX = n.centerY = 0;
        n.order = ht.RoleOrder.NONE;
        n.setBodyAnimationGroup(t);
        n.body.shadow = false;
        n.body.on(XOF.Event.COMPLETE, n.onComplelte, n);
        n.body.setAction(e);
        return n;
      }
      t.prototype.center = function (t, e) {
        this.centerX = t;
        this.centerY = e;
        this.pos(this.position.x, this.position.y);
      };
      t.prototype.bind = function (t) {};
      t.prototype.onComplelte = function () {
        this.map.removeObject(this);
        this.body.off(XOF.Event.COMPLETE, this.onComplelte, this);
        this.body.reset();
      };
      t.prototype.pos = function (t, e) {
        return o.prototype.pos.call(this, t - this.centerX, e - this.centerY);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(i);
  var Ee = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var tt = n(dt);
    var et = n(S);
    var nt = n(i);
    var ot = n(q);
    var rt = n(w);
    var it = n(mt);
    var o = (function () {
      function Z() {}
      Z.getAttackElments = function (t) {
        var e, n;
        var o = t.fu.getCurActionInfo();
        var r = [];
        var i = (e = t.fu) === null || e === void 0 ? void 0 : e.attribute;
        if (i) {
          if (i.$attributes[ht.AttributeKeys.FIRE] > 0) r.push("fire");
          if (i.$attributes[ht.AttributeKeys.WATER] > 0) r.push("water");
          if (i.$attributes[ht.AttributeKeys.DARK] > 0) r.push("dark");
          if (i.$attributes[ht.AttributeKeys.LIGHT] > 0) r.push("light");
        }
        if (
          (n = o === null || o === void 0 ? void 0 : o.element) === null ||
          n === void 0
            ? void 0
            : n.length
        ) {
          r.push.apply(r, o.element);
        }
        r = r.filter(function (t, e, n) {
          return e == n.indexOf(t);
        });
        return r;
      };
      Z.hit = function (t, l, f) {
        var s = this;
        var e, n, o, r, i, a, u, c, p, d, h, v, y, _, m, g;
        if ((e = t) === null || e === void 0 ? void 0 : e.special) {
          t.special.onBeforeAttack(l);
        }
        var b = et.default.isHit(t.fu.attribute, l.fu.attribute);
        if (b) {
          if ((n = t) === null || n === void 0 ? void 0 : n.special) {
            t.special.onAttackSuccess(l);
          }
          var O = t.fu.getCurActionInfo();
          var w =
            (o = O === null || O === void 0 ? void 0 : O.attackType) !== null &&
            o !== void 0
              ? o
              : "physic";
          var A = et.default.damage(t.fu.attribute, l.fu.attribute, {
            type: w == "magic" ? 1 : 0,
            attackLv:
              (i =
                (r = t === null || t === void 0 ? void 0 : t.fu) === null ||
                r === void 0
                  ? void 0
                  : r.level) !== null && i !== void 0
                ? i
                : 1,
            damageLv:
              (u =
                (a = l === null || l === void 0 ? void 0 : l.fu) === null ||
                a === void 0
                  ? void 0
                  : a.level) !== null && u !== void 0
                ? u
                : 1,
            special: 1,
          });
          var E = ht.RoleDirction.right;
          if (t.position.x > l.position.x) {
            E = ht.RoleDirction.left;
          }
          t.fu.addDelay(20);
          var T = Z.getAttackElments(t);
          if (T.length) {
            var C = rt.default.randomInt(-5, 5);
            var P = 50 + rt.default.randomInt(-5, 5) + l.float;
            for (var j = 0, S = T; j < S.length; j++) {
              var M = S[j];
              if (tt.default.conf.effect.commoneffect[M]) {
                var k = tt.default.conf.effect.commoneffect[M];
                for (var x = 0, D = k.animation; x < D.length; x++) {
                  var I = D[x];
                  var R = new nt.default(tt.default.getPvfConf(k.root), I);
                  R.center(C, P);
                  f.addObject(R, undefined, l.x, l.y + 1);
                }
              }
            }
          }
          var L = t.fu.direction;
          var F = O.hitType || t.fu.hitType || ht.HitType.KNOCK;
          if (F == ht.HitType.SLASH) {
            ot.default.timerMgr.callLater(function () {
              var t = O.attackDirection || "horizon";
              var e = Math.random() > 0.5;
              var n = e ? s.slashsEffect : s.slashsSmallEffect;
              var o = n[t];
              var r = rt.default.randomInt(-5, 5);
              var i = 50 + rt.default.randomInt(-5, 5) + l.float;
              var a = new nt.default(
                tt.default.getPvfConf("common/hiteffect/animation.ani.json"),
                o
              );
              a.center(r, i);
              f.addObject(a, undefined, l.x, l.y + 1);
              a.direction = L;
              if (e) a.setSize(0.8);
            });
          } else {
            ot.default.timerMgr.callLater(function () {
              var t = ["knocksmall", "knocklarge"];
              var e = t[rt.default.randomInt(0, 1)];
              var n = tt.default.conf.effect.commoneffect[e];
              var o = rt.default.randomInt(-5, 5);
              var r = 50 + rt.default.randomInt(-5, 5) + l.float;
              for (var i = 0, a = n.animation; i < a.length; i++) {
                var s = a[i];
                var u = new nt.default(tt.default.getPvfConf(n.root), s);
                u.center(o, r);
                f.addObject(u, undefined, l.x, l.y + 1);
                u.direction = L;
              }
            });
          }
          if (l.fu.isCanDamage()) {
            var B = 143,
              N = 54,
              X = 88,
              U = 44,
              H = 74;
            var G = B;
            if (l == f.hero) {
              G = X;
            } else {
              if (w == "magic") {
                G = H;
              } else if (A.crit) {
                G = N;
              } else if (A.stiff == -1) {
                G = U;
              }
            }
            ot.default.timerMgr.callLater(
              it.default.number,
              it.default,
              A.damage,
              G,
              l.position.x,
              l.position.y +
                -(
                  ((p =
                    (c = l === null || l === void 0 ? void 0 : l.roleData) ===
                      null || c === void 0
                      ? void 0
                      : c.height) !== null && p !== void 0
                    ? p
                    : 80) -
                  15 +
                  l.float
                ) +
                1
            );
          }
          t.fu.hitit(A, l);
          var V = l.fu.isGuard() ? false : l.fu.isCanHitfly();
          var $ = l.fu.isCanHitBack();
          var q = false;
          if (l.script) {
            var K = l.isFloat();
            if ((K && l.float > 0) || O.hitLiftUp) {
              var Y = 0.2;
              if (V) {
                if (!$) Y = 0;
                var W = l.roleData.weight;
                var z = Math.max(
                  ((d = O === null || O === void 0 ? void 0 : O.liftUp) !==
                    null && d !== void 0
                    ? d
                    : 0) - W,
                  40
                );
                var Q =
                  (h = O === null || O === void 0 ? void 0 : O.pushAside) !==
                    null && h !== void 0
                    ? h
                    : 200;
                l.fu.role.force.removeForce("HIT_FLOAT");
                var J = l.isDownAction() ? K : true;
                if (O.hitLiftUp && J) {
                  l.script.float(z, Q * E * 0.2, undefined, "HIT_FLOAT");
                } else if (J) {
                  l.script.float(z * 0.6, Q * E * Y, undefined, "HIT_FLOAT");
                } else {
                  l.script.float(z * 0.4, Q * E * Y, undefined, "HIT_FLOAT");
                }
                q = true;
              } else if ($) {
                var Q =
                  (v = O === null || O === void 0 ? void 0 : O.pushAside) !==
                    null && v !== void 0
                    ? v
                    : 200;
                l.script.addForce(Q * Y, 1e3, E);
              }
            } else if ($) {
              var Q =
                (y = O === null || O === void 0 ? void 0 : O.pushAside) !==
                  null && y !== void 0
                  ? y
                  : 200;
              if (K) {
                l.script.addForce(Q, 1e3, E);
              } else if (l.isDownAction());
              else {
                l.script.addForce(Q, 1e3, E);
              }
            }
          }
          if (
            (m =
              (_ = l === null || l === void 0 ? void 0 : l.roleData) === null ||
              _ === void 0
                ? void 0
                : _.damageSound) === null || m === void 0
              ? void 0
              : m.length
          )
            ot.default.sound.play(
              l.roleData.damageSound[0],
              { overload: true, completeDestroy: true },
              l
            );
          if (t.fu.weaponWav.length > 3) {
            ot.default.sound.play(
              t.fu.weaponWav[3],
              { completeDestroy: true },
              t
            );
          }
          if (O.hitWav) {
            ot.default.sound.play(O.hitWav, { completeDestroy: true }, l);
          }
          ot.default.log3(
            "怪物" + "" + "受到" + A.damage + "伤害,怪物ID" + l.hashCode
          );
          l.fu.behit(A, { float: q, hiter: t });
        } else {
          var R = new nt.default(
            tt.default.getPvfConf("common/hiteffect/animation.ani.json"),
            "animation/stuck.ani"
          );
          f.addObject(R, undefined, l.x, l.y + 1);
          R.center(
            rt.default.randomInt(-5, 5),
            50 + rt.default.randomInt(-5, 5)
          );
          ot.default.sound.play("STUCK_BLADE", undefined, t);
          if ((g = t) === null || g === void 0 ? void 0 : g.special) {
            t.special.onAttackMiss(l);
          }
          t.fu.addDelay(40);
        }
      };
      Z.slashsSmallEffect = {
        down: "animation/slashsmall1.ani",
        horizon: "animation/slashsmall2.ani",
        up: "animation/slashsmall3.ani",
      };
      Z.slashsEffect = {
        down: "animation/slashlarge1.ani",
        horizon: "animation/slashlarge2.ani",
        up: "animation/slashlarge3.ani",
      };
      return Z;
    })();
    e.default = o;
  });
  t(Ee);
  var Te = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = n(q);
    var o = n(Ee);
    var r = (function () {
      function t(t) {
        this.map = t;
        this.fighters = [];
        this.disabled = false;
      }
      t.prototype.addObject = function (t) {
        if (t.fu) {
          var e = this.getObjectIndex(t);
          if (e >= 0) return;
          this.fighters.push(t);
        }
      };
      t.prototype.removeObject = function (t) {
        var e = this.getObjectIndex(t);
        if (e >= 0) this.fighters.splice(e, 1);
      };
      t.prototype.getObjectIndex = function (t) {
        return this.fighters.indexOf(t);
      };
      t.prototype.update = function (t) {
        if (this.disabled) return;
        var e = this.fighters.filter(function (t) {
          t.fu.hiter.update();
          return t.fu.hiter.hasBox();
        });
        var n = false;
        for (var o = 0, r = e; o < r.length; o++) {
          var i = r[o];
          if (i.fu.hiter.attacks.length) {
            n = true;
            for (var a = 0, s = e; a < s.length; a++) {
              var u = s[a];
              if (u.fu.hiter.damages.length) {
                if (i == u) continue;
                if (i.fu.camp == u.fu.camp) continue;
                if (this.hitTest(i.fu.hiter, u.fu.hiter) && i.fu.hit(u)) {
                  if (i == this.map.hero) {
                    if (u.fu.camp != ht.RoleCamp.NONE) {
                      l.default.eventMgr.event(1011, [u]);
                    }
                  }
                  this.hit(i, u);
                }
              }
            }
          }
        }
        return n;
      };
      t.prototype.hit = function (t, e) {
        o.default.hit(t, e, this.map);
      };
      t.prototype.hitTest = function (t, e) {
        var n = t.attacks;
        var o = e.damages;
        if (
          t.attackEnabled == true &&
          e.damgaeEnabled == true &&
          n.length > 0 &&
          o.length > 0
        ) {
          for (var r = 0; r < n.length; r += 6) {
            var i = t.x + n[r],
              a = n[r + 1],
              s = n[r + 2],
              u = n[r + 3],
              l = t.y + n[r + 4],
              f = t.y + n[r + 5];
            for (var c = 0; c < o.length; c += 6) {
              var p = e.x + o[c],
                d = o[c + 1],
                h = o[c + 2],
                v = o[c + 3],
                y = e.y + o[c + 4],
                _ = e.y + o[c + 5];
              if (this.testZ(l, f, y, _)) {
                if (this.testRect(i, a, s, u, p, d, h, v)) {
                  return true;
                }
              }
            }
          }
        }
        return false;
      };
      t.prototype.draw = function (t) {
        var e = this.fighters.filter(function (t) {
          return t.fu.hiter.hasBox();
        });
        var n = this.map.scaleX;
        var o = this.map.scaleY;
        var r = t.x + this.map.x;
        var i = t.y + this.map.y + 120 * o;
        t.$.save();
        t.$.translate(r, i);
        t.$.strokeStyle = "#ffffff";
        for (var a = 0, s = e; a < s.length; a++) {
          var u = s[a];
          var l = u.fu.hiter.damages;
          if (l && l.length) {
            for (var f = 0; f < l.length; f += 6) {
              var c = l[f] + u.x,
                p = l[f + 1] + u.y,
                d = l[f + 2],
                h = l[f + 3];
              l[f + 4];
              l[f + 5];
              t.$.strokeRect(c * n, p * o, d * n, h * o);
            }
          }
        }
        t.$.strokeStyle = "#ff0000";
        for (var v = 0, y = e; v < y.length; v++) {
          var u = y[v];
          var l = u.fu.hiter.attacks;
          if (l && l.length) {
            for (var f = 0; f < l.length; f += 6) {
              var c = l[f] + u.x,
                p = l[f + 1] + u.y,
                d = l[f + 2],
                h = l[f + 3];
              l[f + 4];
              l[f + 5];
              t.$.strokeRect(c * n, p * o, d * n, h * o);
            }
          }
        }
        t.$.restore();
      };
      t.prototype.testZ = function (t, e, n, o) {
        return (
          (t > n && t < o) ||
          (e > n && e < o) ||
          (n > t && n < e) ||
          (o > t && o < e)
        );
      };
      t.prototype.testRect = function (t, e, n, o, r, i, a, s) {
        return t < r + a && e < i + s && t + n > r && e + o > i;
      };
      t.prototype.clean = function () {
        this.map = undefined;
      };
      return t;
    })();
    e.default = r;
  });
  t(Te);
  var Ce = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.IMAGE = "IMAGE";
      return t;
    })();
    e.default = n;
  });
  t(Ce);
  var Pe = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(x);
    var i = o(Ce);
    function a(t) {
      var e = {};
      for (var n in t) {
        var o = t[n];
        if (!o || !o.url);
        else {
          e[o.url] = o;
        }
      }
      return Object.values(e);
    }
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.reset();
        return t;
      }
      t.prototype.push = function (t) {
        var e;
        t = a(t);
        var n = t.length;
        if (n) {
          (e = this.resList).push.apply(e, t);
          this.max += t.length;
          for (var o = 0, r = t; o < r.length; o++) {
            var i = r[o];
            if (XOF.loader.get(i.url)) {
              this.onLoaded();
            } else if (i.url.indexOf("%") >= 0) {
              this.onLoaded();
              XOF.log(
                "跳过需要参数的图片地址:" +
                  (i === null || i === void 0 ? void 0 : i.url)
              );
            } else {
              this.load(i.url, i.type);
            }
          }
        }
      };
      t.prototype.load = function (t, e) {
        if (e == i.default.IMAGE) {
          XOF.loader.loadImage(
            t,
            undefined,
            undefined,
            this.onLoaded,
            this,
            this.onLoadErr,
            this
          );
        } else {
          return false;
        }
        return true;
      };
      t.prototype.onLoaded = function () {
        this.count += 1;
        this.onProgress();
        if (this.count >= this.max) {
          this.onComplete();
        }
      };
      t.prototype.onLoadErr = function (t) {
        XOF.log("资源文件不存在:" + t);
        if (!XOF.loader.get(t)) {
          XOF.loader.cache(t, XOF.loader.get("0.png"));
        }
        this.onLoaded();
      };
      t.prototype.onProgress = function () {
        this.progress = this.count / this.max;
        this.event(r.default.PROGRESS, [this.progress, this.count, this.max]);
      };
      t.prototype.onComplete = function () {
        this.event(XOF.Event.COMPLETE);
      };
      t.prototype.destroy = function () {
        this.progress = this.count = this.max = this.resList = undefined;
      };
      t.prototype.reset = function () {
        this.progress = this.count = this.max = 0;
        this.resList = [];
      };
      t.prototype.hasLoad = function () {
        return this.count != undefined && this.count < this.max;
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = s;
  });
  t(Pe);
  var je = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(V);
    var b = n(dt);
    var s = n(at);
    var a = n(st);
    var r = (function () {
      function t() {}
      t.sortEqusByType = function (t) {
        var e = this.skinPriority;
        var n = t.reverse();
        var o = [];
        for (var r = 0, i = e; r < i.length; r++) {
          var a = i[r];
          for (var s = 0, u = n; s < u.length; s++) {
            var l = u[s];
            if (b.default.conf.equipment[l].type == a) {
              o.push(l);
              break;
            }
          }
        }
        var f = [];
        for (var c = 0; c < o.length; c++) {
          var p = o[c];
          if (f.indexOf(p) >= 0) continue;
          var l = b.default.conf.equipment[p];
          for (var d = 0, h = l.position; d < h.length; d++) {
            var v = h[d];
            for (var y = c + 1; y < o.length; y++) {
              var _ = b.default.conf.equipment[o[y]];
              if (_.type == v) {
                f.push(o[y]);
                continue;
              }
            }
          }
        }
        for (var m = 0, g = f; m < g.length; m++) {
          var p = g[m];
          var c = o.indexOf(p);
          if (c >= 0) {
            o.splice(c, 1);
          }
        }
        return o;
      };
      t.getIntensifyLevelMax = function () {
        var t = 0;
        for (var e in b.default.conf.equipGrade) {
          if (b.default.conf.equipGrade[e].level > t) {
            t = b.default.conf.equipGrade[e].level;
          }
        }
        return t;
      };
      t.getIntensifyLevelAttribute = function (t, e, n) {
        var o, r, i;
        var a;
        switch (e) {
          case s.default.WEAPON:
            a = "weapon";
            break;
          case s.default.SHOULDER:
            a = "shoulder";
            break;
          case s.default.COAT:
            a = "coat";
            break;
          case s.default.PANTS:
            a = "pants";
            break;
          case s.default.BELT:
            a = "belt";
            break;
          case s.default.SHOES:
            a = "shoes";
            break;
          case s.default.RING:
            a = "ring";
            break;
          case s.default.AMULET:
            a = "amulet";
            break;
          case s.default.WRIST:
            a = "wrist";
            break;
        }
        return (i =
          (r =
            (o = b.default.conf.equipGradeAttribute) === null || o === void 0
              ? void 0
              : o[a]) === null || r === void 0
            ? void 0
            : r[t]) === null || i === void 0
          ? void 0
          : i[n];
      };
      t.getIntensifyLevelData = function (t) {
        return b.default.conf.equipGrade[t];
      };
      t.getGrowthLevelMax = function () {
        var t = 0;
        for (var e in b.default.conf.equipPower) {
          if (b.default.conf.equipPower[e].level > t) {
            t = b.default.conf.equipPower[e].level;
          }
        }
        return t;
      };
      t.getGrowthLevelAttribute = function (t, e, n) {
        var o, r, i;
        var a;
        switch (e) {
          case s.default.WEAPON:
            a = "weapon";
            break;
          case s.default.SHOULDER:
            a = "shoulder";
            break;
          case s.default.COAT:
            a = "coat";
            break;
          case s.default.PANTS:
            a = "pants";
            break;
          case s.default.BELT:
            a = "belt";
            break;
          case s.default.SHOES:
            a = "shoes";
            break;
          case s.default.RING:
            a = "ring";
            break;
          case s.default.AMULET:
            a = "amulet";
            break;
          case s.default.WRIST:
            a = "wrist";
            break;
        }
        return (i =
          (r =
            (o = b.default.conf.equipPowerAttribute) === null || o === void 0
              ? void 0
              : o[a]) === null || r === void 0
            ? void 0
            : r[t]) === null || i === void 0
          ? void 0
          : i[n];
      };
      t.getGrowthLevelData = function (t) {
        return b.default.conf.equipPower[t];
      };
      t.getGrowWeaponAttribute = function (t, e) {
        var n, o;
        var r = a.default.getItemData(t);
        if (r && r.grow && r.class == s.default.WEAPON) {
          var i = Math.min(Math.max(Math.floor(e / 5) * 5, 1), r.grow);
          return (o =
            (n = b.default.conf.weaponGlow) === null || n === void 0
              ? void 0
              : n[i]) === null || o === void 0
            ? void 0
            : o[r.group];
        }
      };
      t.getEquipRepair = function (t, e) {
        var n;
        var o =
          (n = b.default.conf.equipmentrepair) === null || n === void 0
            ? void 0
            : n[e.level];
        var r = 0;
        switch (e.quality) {
          case 6:
            r = o["f"];
            break;
          case 5:
            r = o["c"];
            break;
          case 4:
            r = o["d"];
            break;
          case 3:
            r = o["c"];
            break;
          case 2:
            r = o["b"];
            break;
          default:
            r = o["a"];
        }
        return r * t;
      };
      t.getRankAttribute = function (t, e) {
        if (e < 1)
          for (var n in t) {
            var o = b.default.conf.role.attribute[n];
            var r = t[n];
            var i = Math.floor(r * 0.85);
            if (r > 1 && r - i > 1) {
              if (o.type == 1) {
                t[n] = Math.floor(i + (r - i) * e);
              }
            }
          }
        return t;
      };
      t.getRankStr = function (t) {
        var e = 229;
        var n = "6";
        if (t < 0.2) {
          e = 225;
          n = "0";
        } else if (t < 0.4) {
          e = 226;
          n = "0";
        } else if (t < 0.6) {
          e = 227;
          n = "2";
        } else if (t < 0.8) {
          e = 228;
        }
        return [o.default.tr(e), n];
      };
      t.skinPriority = [
        "body",
        "coat",
        "pants",
        "cap",
        "hair",
        "face",
        "neck",
        "belt",
        "shoes",
        "weapon",
        "aura",
        "title",
      ];
      return t;
    })();
    e.default = r;
  });
  t(je);
  var Se = e(function (t, e) {
    var j =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var E = n(_t);
    var S = n(dt);
    var w = n(q);
    var M = n(Ce);
    var k = n(C);
    var c = n(st);
    var i = n(I);
    var a = n(Pe);
    var s = n(x);
    var A = n(je);
    var o = (function () {
      function f() {}
      f.setConf = function (t) {
        this.conf = t;
      };
      f.getResRaw = function (t, e) {
        var n;
        var o = t || e;
        if (
          ((n = this === null || this === void 0 ? void 0 : this.conf) ===
            null || n === void 0
            ? void 0
            : n.resources) &&
          o
        ) {
          for (var r = 0; r < this.conf.resources.length; r++) {
            if (this.conf.resources[r].name == o) {
              return this.conf.resources[r];
            }
          }
        }
      };
      f.getGroupRes = function (t) {
        var n = this;
        var e, o;
        var r = this.conf;
        if (
          (r === null || r === void 0 ? void 0 : r.groups) &&
          ((e = r === null || r === void 0 ? void 0 : r.resources) === null ||
          e === void 0
            ? void 0
            : e.length)
        ) {
          for (var i in r.groups) {
            var a = r.groups[i];
            if (
              a.name == t &&
              ((o = a === null || a === void 0 ? void 0 : a.keys) === null ||
              o === void 0
                ? void 0
                : o.length)
            ) {
              return a.keys.split(",").map(function (t) {
                var e = n.getResRaw(t);
                return { url: e.url, type: M.default.IMAGE };
              });
            }
          }
        }
      };
      f.getCharacterCreateRes = function () {
        return this.getGroupRes("CharacterCreateView");
      };
      f.getLoginRes = function () {
        var t = this.getGroupRes("LoginUI");
        t.push.apply(t, this.getGroupRes("Font"));
        return t;
      };
      f.getHellTowerRes = function () {
        return this.getGroupRes("Kcontents3");
      };
      f.getCityUIRes = function () {
        var t, e, n;
        var o = this.getGroupRes("CityUI");
        o.push.apply(o, this.getGroupRes("HellTower"));
        for (var r in S.default.conf.uiicons.top) {
          var i = S.default.conf.uiicons.top[r];
          if (i.show) {
            o.push({ url: i.icon, type: M.default.IMAGE });
          }
        }
        for (var r in S.default.conf.uiicons.bottom) {
          var i = S.default.conf.uiicons.bottom[r];
          if (i.show) {
            o.push({ url: i.icon, type: M.default.IMAGE });
          }
        }
        var a =
          (t =
            w.default === null || w.default === void 0
              ? void 0
              : w.default.userData) === null || t === void 0
            ? void 0
            : t.hero;
        if (a) {
          o.push.apply(o, this.getJobDefaultRestActionRes(a.job));
          var s = [];
          for (var r in a.wears) {
            var u =
              (e = a.wears[r]) === null || e === void 0 ? void 0 : e.itemID;
            var l = S.default.conf.items[u];
            if (l.equ) {
              s.push(l.equ);
            }
          }
          for (var r in a.skins) {
            var u = a.skins[r].itemID;
            var l = S.default.conf.items[u];
            if (l.equ) {
              s.push(l.equ);
            }
            if (
              (n = l === null || l === void 0 ? void 0 : l.equs) === null ||
              n === void 0
                ? void 0
                : n.length
            ) {
              s.push.apply(s, l.equs);
            }
          }
          s = A.default.sortEqusByType(s);
          for (var f = 0, c = s; f < c.length; f++) {
            var p = c[f];
            o.push.apply(o, this.getEquipmentImages(p, [ht.RoleAction.REST]));
          }
        }
        return o;
      };
      f.getCharacterSelectRes = function () {
        var t = this.getGroupRes("CharacterSelect");
        return t;
      };
      f.getFightUIRes = function () {
        var t, e;
        var n = [];
        {
          for (var o in S.default.conf.effect.commoneffect) {
            var r = S.default.conf.effect.commoneffect[o];
            for (var i in r.animation) {
              var a = S.default.getPvfAnimation(r.root, r.animation[i]);
              for (var s = 0, u = a.frames; s < u.length; s++) {
                var l = u[s];
                if (l.img) {
                  n.push({ url: l.img, type: M.default.IMAGE });
                } else if (l.image) {
                  n.push({
                    url: l.image[0] + "/" + l.image[1] + ".png",
                    type: M.default.IMAGE,
                  });
                }
              }
            }
          }
        }
        {
          for (var f in S.default.conf.preload.commoneffect) {
            var c = S.default.conf.preload.commoneffect[f];
            if (c.animationPath) {
              var a = S.default.getAnimationData(c.animationPath);
              if (!a) continue;
              for (var p = 0, d = a.frames; p < d.length; p++) {
                var l = d[p];
                n.push({ url: this.formatImagePath(l), type: M.default.IMAGE });
              }
            }
          }
        }
        var h = [];
        {
          var v = w.default.userData.hero;
          var y = S.default.conf.character[v.job];
          y.bodyEquipmentId && h.push(y.bodyEquipmentId);
          y.weaponEquipmentId && h.push(y.weaponEquipmentId);
          y.skinEquipmentId && h.push.apply(h, y.skinEquipmentId);
          for (var o in v.wears) {
            var f =
              (t = v.wears[o]) === null || t === void 0 ? void 0 : t.itemID;
            var _ = S.default.conf.items[f];
            if (_.equ) {
              h.push(_.equ);
            }
          }
          for (var o in v.skins) {
            var f = v.skins[o].itemID;
            var _ = S.default.conf.items[f];
            if (_.equ) {
              h.push(_.equ);
            }
            if (
              (e = _ === null || _ === void 0 ? void 0 : _.equs) === null ||
              e === void 0
                ? void 0
                : e.length
            ) {
              h.push.apply(h, _.equs);
            }
          }
        }
        var m = w.default.userData.bag;
        for (var o in m.items) {
        }
        h = A.default.sortEqusByType(h);
        for (var g = 0, b = h; g < b.length; g++) {
          var O = b[g];
          n.push.apply(n, this.getEquipmentImages(O));
        }
        n.push.apply(n, this.getGroupRes("FightUI"));
        n.push.apply(n, this.getGroupRes("DropMask"));
        n.push.apply(n, this.getGroupRes("Kcontents3"));
        return n;
      };
      f.getJobDefaultRestActionRes = function (t) {
        if (t === void 0) {
          t = "swordman";
        }
        var e = [];
        var n = [];
        {
          var o = S.default.conf.character[t];
          e.push(o.bodyEquipmentId);
          e.push(o.weaponEquipmentId);
          o.skinEquipmentId && e.push.apply(e, o.skinEquipmentId);
        }
        for (var r = 0, i = e; r < i.length; r++) {
          var a = i[r];
          n.push.apply(n, this.getEquipmentImages(a, [ht.RoleAction.REST]));
        }
        return this.filterLoadedImages(n);
      };
      f.getJobDefaultRes = function (t) {
        if (t === void 0) {
          t = "swordman";
        }
        var e = [];
        var n = [];
        {
          var o = S.default.conf.character[t];
          e.push(o.bodyEquipmentId);
          e.push(o.weaponEquipmentId);
          o.skinEquipmentId && e.push.apply(e, o.skinEquipmentId);
        }
        for (var r = 0, i = e; r < i.length; r++) {
          var a = i[r];
          n.push.apply(n, this.getEquipmentImages(a));
        }
        return this.filterLoadedImages(n);
      };
      f.loginLoad = function (t) {
        var e, n;
        var o = [];
        {
          var r = [].concat(
            w.default.userData.bag.items,
            w.default.userData.equip.skins,
            w.default.userData.equip.equips
          );
          for (var i in r) {
            var a = r[i];
            if (a && a.count > 0) {
              var s = void 0;
              s = a.itemID;
              var u = c.default.getItemData(s);
              if (u) {
                o.push({ url: u.icon, type: M.default.IMAGE });
                if (u.voidicon)
                  o.push({ url: u.voidicon, type: M.default.IMAGE });
              }
            }
          }
        }
        {
          for (var i in w.default.userData.skill.slots) {
            var l =
              S.default.conf.skills.all[w.default.userData.skill.slots[i].id];
            o.push({ url: l.icon, type: M.default.IMAGE });
          }
        }
        if (t) {
          for (var i in S.default.conf.equipment) {
            if (
              ((n =
                (e =
                  S.default === null || S.default === void 0
                    ? void 0
                    : S.default.conf) === null || e === void 0
                  ? void 0
                  : e.equipment[i]) === null || n === void 0
                ? void 0
                : n.class) == "character"
            ) {
              o.push.apply(o, this.getEquipmentImages(i));
            }
          }
        }
        o.push.apply(o, this.getCityUIRes());
        o.push.apply(o, f.getMapImages(S.default.conf.role.base.city.value));
        return this.filterLoadedImages(o);
      };
      f.getEquipmentImages = function (t, e) {
        var n = [];
        var o = S.default.conf.equipment[t];
        var r, i;
        if ((o === null || o === void 0 ? void 0 : o.class) == "character") {
          var a = o.job;
          var s = S.default.conf.action[a].action;
          if ((o === null || o === void 0 ? void 0 : o.sani) == "sm_skin") {
            r = S.default.getSkinParkAnimation();
          } else if (o.type == "title") {
            for (var u = 0; u < o["custom animation"].length; u++) {
              var l = S.default.getAnimationData(o["custom animation"][u]);
              if (l) {
                for (var f = 0, c = l.frames; f < c.length; f++) {
                  var p = c[f];
                  n.push({
                    url: this.formatImagePath(p, i),
                    type: M.default.IMAGE,
                  });
                }
              }
            }
          } else if (o.type == "aura") {
            for (var u = 0; u < o["aurora graphic effects"].length; u++) {
              var l = S.default.getAnimationData(
                o["aurora graphic effects"][u][1]
              );
              if (l) {
                for (var d = 0, h = l.frames; d < h.length; d++) {
                  var p = h[d];
                  n.push({
                    url: this.formatImagePath(p, i),
                    type: M.default.IMAGE,
                  });
                }
              }
            }
          } else {
            r = S.default.getPvfConf(
              S.default.conf.equanistaticdata.animation_detail_data[o["sani"]]
                .ani
            );
          }
          if (r) {
            var v = o.variation[0] * 100 + o.variation[1];
            i = [v];
            for (var y in s) {
              if (e ? e.indexOf(y) == -1 : false) continue;
              var _ = s[y];
              var l = r[_.ani];
              if (l) {
                if (o.layer_variation) {
                  for (var m in o.layer_variation) {
                    var g =
                      S.default.conf.equanistaticdata.draw_detail_specification[
                        m
                      ];
                    var b =
                      S.default.getEquipmentPath(a, m, o.type) +
                      k.default.apply(void 0, j([g.img], o.variation));
                    i = [b];
                    for (var O = 0, w = l.frames; O < w.length; O++) {
                      var p = w[O];
                      n.push({
                        url: this.formatImagePath(p, i),
                        type: M.default.IMAGE,
                      });
                    }
                  }
                } else if (o.type == "body") {
                  for (var A = 0, E = l.frames; A < E.length; A++) {
                    var p = E[A];
                    n.push({
                      url: this.formatImagePath(p, i),
                      type: M.default.IMAGE,
                    });
                  }
                }
              } else {
                XOF.log("异常的ANI", _.ani, _);
              }
            }
          }
        } else if (
          (o === null || o === void 0 ? void 0 : o.class) == "monster"
        ) {
          var T = S.default.getPvfConf(o.ani);
          for (var y in T) {
            var l = T[y];
            for (var C = 0, P = l.frames; C < P.length; C++) {
              var p = P[C];
              n.push({ url: this.formatImagePath(p), type: M.default.IMAGE });
            }
          }
        }
        return n;
      };
      f.getSkillsImages = function () {
        var t = [];
        var e = S.default.swordman_effect_animations;
        for (var n in e) {
          var o = e[n];
          for (var r = 0, i = o.frames; r < i.length; r++) {
            var a = i[r];
            t.push({ url: this.formatImagePath(a), type: M.default.IMAGE });
          }
        }
        return t;
      };
      f.getMonsterImages = function (t) {
        var e = [];
        var n = S.default.conf.monster[S.default.conf.monsterDefine[t].mob];
        var o = S.default.getPvfConf(n.ani);
        if (n.icon) {
          e.push({ url: n.icon, type: M.default.IMAGE });
        }
        for (var r in o) {
          var i = o[r];
          for (var a in i.frames) {
            var s = i.frames[a];
            e.push({ url: this.formatImagePath(s), type: M.default.IMAGE });
          }
        }
        for (var r in n.skinEquipmentId) {
          var u = n.skinEquipmentId[r];
          e.push.apply(e, this.getEquipmentImages(u));
        }
        return e;
      };
      f.getMapImages = function (t) {
        var e;
        var n = [];
        var o = S.default.conf.map.map[t];
        var r = E.default.getMapAnimations(o.id);
        if (r) {
          for (var i in r) {
            if (r[i].frames || r.head == "ani") {
              for (var a = 0, s = r[i].frames; a < s.length; a++) {
                var u = s[a];
                if (u.img) {
                  n.push({ url: u.img, type: M.default.IMAGE });
                } else if (u.image) {
                  n.push({
                    url: u.image[0] + "/" + u.image[1] + ".png",
                    type: M.default.IMAGE,
                  });
                }
              }
            }
          }
        }
        var l = r;
        for (var i in l) {
          var f = l[i];
          if (f.img) {
            n.push({ url: f.img, type: M.default.IMAGE });
          } else if (f.head == "tile") {
            if (
              (e = f === null || f === void 0 ? void 0 : f["[IMAGE]"]) ===
                null || e === void 0
                ? void 0
                : e[0]
            ) {
              n.push({
                url: f["[IMAGE]"][0] + "/" + f["[IMAGE]"][1] + ".png",
                type: M.default.IMAGE,
              });
            }
          }
        }
        var c = E.default.getPvfMap(o.id);
        if (c.npc) {
          var p = c.npc.length;
          for (var d = 0; d < p; d += 5) {
            var h = c.npc[d];
            var v = S.default.conf.npc[h];
            if (v) {
              var y = S.default.getAnimationData(
                v.animation[0],
                v.animation[1]
              );
              for (var _ = 0, m = y.frames; _ < m.length; _++) {
                var u = m[_];
                if (u.img) {
                  n.push({ url: u.img, type: M.default.IMAGE });
                } else {
                  n.push({
                    url: u.image[0] + "/" + u.image[1] + ".png",
                    type: M.default.IMAGE,
                  });
                }
              }
              for (var i in v.extraAnimation) {
                var g = v.extraAnimation[i];
                g[0];
                var b = g[1];
                g[2];
                var O = S.default.getAnimationData(b);
                if (O) {
                  for (var w = 0, A = O.frames; w < A.length; w++) {
                    var u = A[w];
                    if (u.img) {
                      n.push({ url: u.img, type: M.default.IMAGE });
                    } else {
                      n.push({
                        url: u.image[0] + "/" + u.image[1] + ".png",
                        type: M.default.IMAGE,
                      });
                    }
                  }
                } else {
                  console.log("不存在的Animation动画", b);
                }
              }
            } else {
              console.log("不存在的NPC动画", h);
            }
          }
        }
        return n;
      };
      f.getSkillIconImages = function (t) {
        for (var e in S.default.conf.skills.all) S.default.conf.skills.all[e];
        return [];
      };
      f.filterLoadedImages = function (t) {
        var e = {};
        if (t === null || t === void 0 ? void 0 : t.length) {
          for (var n = 0; n < t.length; n++) {
            var o = t[n];
            if (o.url) {
              e[o.url] = o;
            }
          }
        }
        var r = [];
        for (var i in e) {
          if (!XOF.loader.get(i)) {
            r.push(e[i]);
          }
        }
        return r;
      };
      f.checkLoaded = function (t, e, n, o) {
        var r = f.filterLoadedImages(t);
        if (r.length > 0) {
          if (e) {
            w.default.viewMgr.open(i.default.Loading2, [t, n, o]);
          }
        } else {
          n === null || n === void 0 ? void 0 : n.apply(o);
        }
        return r.length == 0;
      };
      f.formatImagePath = function (t, e) {
        if (t.image) {
          var n = t.image,
            o = n[0],
            r = n[1];
          if (o) {
            var i = e ? k.default.apply(void 0, j([o], e)) : o;
            return i + "/" + r + ".png";
          } else {
            return undefined;
          }
        }
        return t.img;
      };
      f.loadImages = function (t, e, n, o, r) {
        var i = new a.default();
        o && i.on(s.default.PROGRESS, o, r);
        e && i.on(XOF.Event.COMPLETE, e, n);
        i.once(XOF.Event.COMPLETE, function () {
          e && i.off(XOF.Event.COMPLETE, e, n);
          o && i.off(s.default.PROGRESS, o, r);
          i.destroy();
        });
        i.push(t);
        return i;
      };
      f.loadImages2 = function (t, e, n) {
        var o = w.default.viewMgr.getOpenView(i.default.Loading3);
        if (o) {
          o.push(t);
        } else if (f.filterLoadedImages(t).length) {
          w.default.viewMgr.open(i.default.Loading3, [t, e, n]);
        }
      };
      f.loadSimple = function (t) {
        var e = w.default.viewMgr.getOpenView(i.default.LoadingSimple);
        if (e) {
          e.push(t);
        } else if (f.filterLoadedImages(t).length) {
          w.default.viewMgr.open(i.default.LoadingSimple, [t]);
        }
      };
      return f;
    })();
    e.default = o;
  });
  t(Se);
  var Me = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t(t, e, n) {
        this.mgr = t;
        this.fs = e;
        this.skillid = n;
      }
      t.prototype.onAfterSetState = function (t, e) {};
      t.prototype.onForceSetAction = function (t, e) {
        if (t.script.IsKeyDown(this.fs.Keys.left)) {
          t.direction = -1;
        } else if (t.script.IsKeyDown(this.fs.Keys.right)) {
          t.direction = 1;
        }
        this.onSetAction(t, e);
      };
      t.prototype.onSetAction = function (t, e) {
        this.updateSubAnimation(t, 0);
      };
      t.prototype.onUpdate = function (t, e) {};
      t.prototype.onEndCurrentAni = function (t) {
        this.updateSubAnimation(t, -1);
        this.mgr.remove(t, this);
        t.stay(true, true);
        return true;
      };
      t.prototype.onKeyFrameFlag = function (t, e) {};
      t.prototype.onEndAction = function (t) {
        t.script.RemoveBuff(18e3);
      };
      t.prototype.onFrame = function (t, e) {
        this.updateSubAnimation(t, e);
      };
      t.prototype.onKeyPress = function (t, e) {};
      t.prototype.onKeyRelease = function (t, e) {};
      t.prototype.onForceChanged = function (t) {
        t.script.CreateShadowEffect();
        return true;
      };
      t.prototype.onDamage = function (t, e) {
        return true;
      };
      t.prototype.onHit = function (t, e) {};
      t.prototype.cd = function (t) {
        t.rs.skill(this.skillid);
      };
      t.prototype.cost = function (t) {
        var e;
        var n = this.fs.getSkillInfo(this.skillid);
        var o =
          (e = n === null || n === void 0 ? void 0 : n.mp) !== null &&
          e !== void 0
            ? e
            : 0;
        if (o > 0) {
          t.script.hpMpAdd(0, -o);
        }
      };
      t.prototype.onCheckUse = function (t) {
        var e, n, o;
        if (t.isDeath) return 0;
        var r = this.fs.getSkillInfo(this.skillid);
        r === null || r === void 0 ? void 0 : r.force;
        var i = ((e = this.actions) !== null && e !== void 0 ? e : []).indexOf(
          t.action
        );
        var a = 0;
        if (i >= 0) {
          a = 1;
        } else {
          if (t.isNormalAction()) {
            a = 1;
          } else if ([139, 119, 122, 51].indexOf(this.skillid) == -1) {
            if (
              t.isJumpAction() ||
              t.isDamageAction() ||
              t.isDownAction() ||
              t.isAction(ht.RoleAction.SIT)
            ) {
              a = 0;
            } else if (t.isSkillState()) {
              if (t.hasSkillState(this.skillid)) {
                a = 1;
              } else {
                a = 2;
              }
            } else {
              a = 2;
            }
          }
          if (a > 0) {
            if (t.isMyControler() && t.rs.getCDRate(this.skillid) > 0) {
              a = -3;
            } else if (
              t.script.getMp() <
              ((n = r === null || r === void 0 ? void 0 : r.mp) !== null &&
              n !== void 0
                ? n
                : 0)
            ) {
              a = -2;
            } else if (
              this.fs.getColourlessCount() <
              ((o = r === null || r === void 0 ? void 0 : r.colourless) !==
                null && o !== void 0
                ? o
                : 0)
            ) {
              a = -1;
            }
          }
        }
        return a;
      };
      t.prototype.updateSubAnimation = function (t, e) {
        this.SUB_ANI &&
          t.script.subAnimationUpdate(this.SUB_ANI, e, this.animationRoot);
      };
      return t;
    })();
    e.default = n;
  });
  t(Me);
  var ke = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Me);
    var p = 1;
    var i = 65534;
    var a = (function (n) {
      o(t, n);
      function t() {
        var t = (n !== null && n.apply(this, arguments)) || this;
        t.actions = ["attack1", "attack2", "attack3"];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        var n;
        var o, r;
        var i = t.script.getValue("attack.flagIndex");
        var a = this.actions;
        var s = a.indexOf(t.action);
        var u =
          (r = (o = t.body) === null || o === void 0 ? void 0 : o.frame) ===
            null || r === void 0
            ? void 0
            : r["[SET FLAG]"];
        var l;
        if (s >= 0) {
          if (a.length > 1) {
            if (s == a.length - 1) {
              return;
            } else if (t.body.isLast || (!u && i == p)) {
              l = a[s + 1];
            }
          }
        } else if (t.isNormalAction()) {
          l = a[0];
        }
        if (l) {
          if (t.script.IsKeyDown(this.fs.Keys.left)) {
            t.direction = -1;
          } else if (t.script.IsKeyDown(this.fs.Keys.right)) {
            t.direction = 1;
          }
          t.setAction(l);
          t.script.setValue("attack.flagIndex");
          t.script.playSound("R_SM_ATK");
          if (t.fu.weaponWav.length) {
            t.script.playSound(t.fu.weaponWav[0]);
          }
          t.setAction(l);
          if (this.actions.indexOf(l) > 0) {
            var f = this.fs.getPressDirectionRate(t);
            (n = t.force).removeForce.apply(n, this.actions);
            var c = t.body.getFrameToFrameTime(0, 5);
            t.force.AddPower(30 * t.direction * f, 0, c, "linear", l);
          }
        }
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == p) {
          t.script.setValue("attack.flagIndex", e);
        } else if (e == i) {
          t.script.setValue("attack.flagIndex", i);
        }
      };
      t.prototype.onEndAction = function (t) {
        var e;
        t.script.setValue("attack.flagIndex");
        (e = t.force).removeForce.apply(e, this.actions);
        n.prototype.onEndAction.call(this, t);
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(ke);
  var xe = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.actions = [
          "moonlightslash1",
          "moonlightslash2",
          "moonlightslashfull",
        ];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        var n = this.actions;
        var o = n.indexOf(t.action);
        var r;
        if (o >= 0) {
          if (n.length > 1) {
            if (o == n.length - 1) {
              return;
            } else if (t.body.isLast) {
              r = n[o + 1];
            }
          }
        } else if (t.isNormalAction()) {
          r = n[0];
        }
        if (r) {
          t.setAction(r);
          var i = t.script.CreateAnimation("animation/" + r + ".ani");
          t.script.AddStateLayerAnimation(1, i, 0, 0);
          if (r == this.actions[0]) {
            t.script.playSound("SM_MOON_ATK");
          }
        }
      };
      t.prototype.cd = function (t) {};
      t.prototype.onEndCurrentAni = function (t) {
        e.prototype.cd.call(this, t);
        return e.prototype.onEndCurrentAni.call(this, t);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(xe);
  var De = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (o) {
      n(t, o);
      function t() {
        return (o !== null && o.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        if (t.isNormalAction()) {
          t.setAction("upslash");
          t.script.playSound("SM_UPPER_SLASH");
          t.superArmor = true;
        }
      };
      t.prototype.onFrame = function (t, e) {
        o.prototype.onFrame.call(this, t, e);
        if (e == 3) {
          var n = t.script.CreateAnimation("animation/upperslash1.ani");
          t.script.AddStateLayerAnimation(1, n, 0, 0);
        }
      };
      t.prototype.cd = function () {};
      t.prototype.onEndAction = function (t) {
        o.prototype.onEndAction.call(this, t);
        t.superArmor = false;
        t.script.RemoveAnimation("animation/upperslash1.ani");
        o.prototype.cd.call(this, t);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(De);
  var Ie = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        var n = ["dashattack"];
        var o = n.indexOf(t.action);
        var r;
        if (o >= 0) {
          if (n.length > 1) {
            if (o == n.length - 1) {
              return;
            } else if (t.body.isLast);
          }
        } else if (t.isNormalAction()) {
          r = n[0];
        }
        if (r) {
          t.setAction(r);
          t.script.playSound("SM_THRUST");
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Ie);
  var Re = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Me);
    var p = 65534;
    var i = (function (n) {
      o(t, n);
      function t() {
        var t = (n !== null && n.apply(this, arguments)) || this;
        t.actions = [
          "tripleslash1",
          "tripleslash2",
          "tripleslash3",
          "tripleslash4",
          "tripleslash5",
        ];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        var n;
        var o = ["tripleslash1", "tripleslash2", "tripleslash3"];
        if (t.script.getJob() == "swordman" && t.script.isBeamswd()) {
          var r = t.script.GetSkillLevel(this.skillid);
          if (r >= 5) {
            o = [
              "tripleslash1",
              "tripleslash2",
              "tripleslash3",
              "tripleslash4",
              "tripleslash5",
            ];
          }
        }
        var i = o.indexOf(t.action);
        var a;
        var s = t.script.getValue("tripleshlash.flagIndex");
        if (i >= 0) {
          if (o.length > 1) {
            if (i == o.length - 1) {
              return;
            } else if (t.body.isLast || s == p) {
              a = o[i + 1];
            }
          }
        } else if (t.isNormalAction()) {
          a = o[0];
        }
        if (a) {
          this.fs.setSkillDamage(
            t,
            this.skillid,
            t.script.GetSkillLevel(this.skillid)
          );
          if (t.script.IsKeyDown(this.fs.Keys.left)) {
            t.direction = -1;
          } else if (t.script.IsKeyDown(this.fs.Keys.right)) {
            t.direction = 1;
          }
          t.setAction(a);
          var u = o.indexOf(a) + 1;
          var l = t.script.CreateAnimation(
            "animation/tripleslash/slash" + u + ".ani"
          );
          t.script.AddStateLayerAnimation(1, l, 0, 0);
          var f = t.script.CreateAnimation(
            "animation/tripleslash/move" + (u % 2 ? 1 : 2) + ".ani"
          );
          t.script.AddStateLayerAnimation(0, f, 0, 0);
          (n = t.force).removeForce.apply(n, this.actions);
          t.script.addForce(700, 1500, t.direction, undefined, a);
          var c = o.length;
          if (u <= c) {
            if (u == c) {
              t.script.playSound("SM_TRIPLE3");
            } else {
              t.script.playSound("SM_TRIPLE" + (u % 2 ? 1 : 2));
            }
          }
          t.script.setValue("tripleshlash.flagIndex");
        }
      };
      t.prototype.cd = function (t) {};
      t.prototype.onEndCurrentAni = function (t) {
        t.force.clean();
        t.script.setValue("tripleshlash.flagIndex");
        return n.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.onEndAction = function (t) {
        var e;
        n.prototype.onEndAction.call(this, t);
        n.prototype.cd.call(this, t);
        t.script.RemoveAnimation("animation/tripleslash/slash1.ani");
        t.script.RemoveAnimation("animation/tripleslash/slash2.ani");
        t.script.RemoveAnimation("animation/tripleslash/slash3.ani");
        t.script.RemoveAnimation("animation/tripleslash/slash4.ani");
        t.script.RemoveAnimation("animation/tripleslash/slash5.ani");
        t.script.RemoveAnimation("animation/tripleslash/move1.ani");
        t.script.RemoveAnimation("animation/tripleslash/move2.ani");
        (e = t.force).removeForce.apply(e, this.actions);
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == p) {
          t.script.setValue("tripleshlash.flagIndex", e);
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Re);
  var Le = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction("guard");
        t.script.setValue("guard.time", Date.now());
        t.script.setValue("guard.hitCount", 0);
        var n = t.script.GetSkillLevel(this.skillid);
        t.script.AddBuff(10006, true, n);
        t.script.playSound("SM_GUARD");
        t.actor.setFrameIndex(1, 0);
      };
      t.prototype.onUpdate = function (t, e) {
        if (t.script.getValue("guard.keyPress") != undefined) {
          t.actor.addTime(-e);
        }
      };
      t.prototype.onKeyPress = function (t, e) {
        if (e) {
          t.script.setValue("guard.keyPress", e);
        }
      };
      t.prototype.onKeyRelease = function (t, e) {
        var n = t.script.getValue("guard.keyPress");
        if (n == e) {
          t.script.setValue("guard.keyPress", undefined);
          var o = t.script.getValue("guard.time", 0);
          var r = 320;
          var i = Date.now() - o;
          if (i < r) {
            t.actor.setFrameIndex(1);
            t.actor.setFrameDelay((r - i) / 1e3);
          } else {
            this.onEndCurrentAni(t);
          }
        }
      };
      t.prototype.onDamage = function (t, e) {
        if (e) {
          var n = e.x > t.x ? 1 : -1;
          t.direction = n;
        }
        var o = 3;
        var r = t.script.getValue("guard.hitCount", 0);
        r += 1;
        t.script.setValue("guard.hitCount", r);
        if (r >= o) {
          if (r > o) {
            return true;
          } else {
            t.script.setValue("guard.keyPress", undefined);
            t.force.AddPower(
              20 * -t.direction,
              0,
              160,
              undefined,
              "guardPower"
            );
            t.actor.setFrameIndex(1);
            t.actor.setFrameDelay(200);
          }
        } else {
          t.force.AddPower(10 * -t.direction, 0, 80, undefined, "guardPower");
        }
        t.script.playSound("STUCK_BLADE");
        return false;
      };
      t.prototype.cd = function (t) {};
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        e.prototype.cd.call(this, t);
        t.script.RemoveBuff(10006);
        t.script.setValue("guard.keyPress");
        t.script.setValue("guard.hitCount");
        t.script.setValue("guard.time");
        t.script.removePower("guardPower");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Le);
  var Fe = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = 15;
    var a = 280;
    var s = 280;
    var u = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction("jump");
        t.script.float(a);
        t.actor.setFrameIndex(10, 0);
        t.script.playSound("SM_BACKSTEP");
      };
      e.prototype.onUpdate = function (t, e) {
        if (t.action == "jump") {
          if (t.isFloat()) {
            t.moveBy(t.direction * -1 * s, 0);
            if (t.body.isLast) t.actor.setFrameIndex(10, 0);
          } else if (!t.body.isLast) {
            t.actor.setFrameIndex(i, 0);
          }
        }
      };
      return e;
    })(r.default);
    e.default = u;
  });
  t(Fe);
  var Be = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = 8;
    var a = 15;
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction("jump");
        t.script.float(500);
        t.script.playSound("SM_JUMP");
      };
      e.prototype.onUpdate = function (t, e) {
        if (t.action == "jump") {
          if (t.isFloat()) {
            if (!t.force.hasFloatPower()) {
              if (t.body.index < i) {
                t.actor.setFrameIndex(i, 0);
              }
            }
          } else if (!t.body.isLast) {
            t.actor.setFrameIndex(a, 0);
          }
        }
      };
      return e;
    })(r.default);
    e.default = s;
  });
  t(Be);
  var Ne = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction("hardattack");
        var n = t.script.CreateAnimation("animation/hardattack1.ani");
        t.script.AddStateLayerAnimation(1, n, 0, 0);
        var o = t.script.CreateAnimation("animation/hardattack2.ani");
        t.script.AddStateLayerAnimation(1, o, 0, 0);
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Ne);
  var Xe = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var c = 65534;
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.actions = [
          "weaponcombolight1",
          "weaponcombolight2",
          "weaponcombolight3",
        ];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        var n = this.actions;
        var o = n.indexOf(t.action);
        var r;
        var i = t.script.getValue("weaponcombo.flagIndex");
        if (o >= 0) {
          if (n.length > 1) {
            if (o == n.length - 1) {
              return;
            } else if (t.body.isLast || i == c) {
              r = n[o + 1];
            }
          }
        } else {
          r = n[0];
        }
        if (r) {
          if (t.script.IsKeyDown(this.fs.Keys.left)) {
            t.direction = -1;
          } else if (t.script.IsKeyDown(this.fs.Keys.right)) {
            t.direction = 1;
          }
          this.stopSkill(t);
          t.setAction(r);
          var a = n.indexOf(r) + 1;
          if (a > 1) this.removeEffects(t, a - 1);
          for (var s = 1; s <= 6; s++) {
            var u = t.script.CreateAnimation(
              "animation/weaponcombo/light" + a + "-" + s + ".ani"
            );
            t.script.AddStateLayerAnimation(1, u, 0, 0);
          }
          if (this.actions.indexOf(r) > 0) {
            var l = this.fs.getPressDirectionRate(t);
            var f = t.body.getFrameToFrameTime(0, 5);
            t.force.AddPower(30 * t.direction * l, 0, f, "linear", r);
          }
          t.script.playSound("R_SM_ATK");
          if (t.fu.weaponWav.length) {
            t.script.playSound(t.fu.weaponWav[0]);
          }
        }
      };
      t.prototype.removeEffects = function (t, e) {
        for (var n = 1; n <= 6; n++) {
          t.script.RemoveAnimation(
            "animation/weaponcombo/light" + e + "-" + n + ".ani"
          );
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        this.stopSkill(t);
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == c) {
          t.script.setValue("weaponcombo.flagIndex", e);
        }
      };
      t.prototype.stopSkill = function (t) {
        var e;
        for (var n = 1; n <= 3; n++) this.removeEffects(t, n);
        t.script.setValue("weaponcombo.flagIndex");
        (e = t.force).removeForce.apply(e, this.actions);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Xe);
  var Ue = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Me);
    var i = (function (n) {
      o(t, n);
      function t() {
        return (n !== null && n.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        if (t.isNormalAction()) {
          t.script.playSound("SM_BOONGSAN");
          t.setAction("reckless");
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        var e = t.script.GetSkillLevel(this.skillid);
        t.script.AddBuff(10007, true, e);
        return n.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.cd = function () {};
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        n.prototype.cd.call(this, t);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ue);
  var He = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t(t) {
        this.map = t;
        this.tween = t.tween(null);
      }
      t.prototype.setData = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        return this;
      };
      t.prototype.start = function () {
        this.tween.setPaused(false);
      };
      t.prototype.paused = function () {
        this.tween.setPaused(true);
      };
      t.prototype.removeSelf = function () {
        if (this.map) {
          this.map.removeTween(this.tween);
        } else {
          XOF.log("无法正确的移除Tween");
        }
      };
      t.prototype.setBind = function (t) {
        this.obj = t;
        this.tween.target_ = this.obj.position;
        this.start();
        return this;
      };
      t.prototype.notify = function (t) {
        this.obj.event(t);
      };
      return t;
    })();
    e.default = n;
  });
  t(He);
  var Ge = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.COMPLETE = XOF.Event.COMPLETE;
      t.STEP_1 = "STEP1";
      t.STEP_2 = "STEP2";
      t.STEP_3 = "STEP3";
      t.STEP_4 = "STEP4";
      t.STEP_5 = "STEP5";
      t.STEP_6 = "STEP6";
      t.MARK = "MARK";
      return t;
    })();
    e.default = n;
  });
  t(Ge);
  var Ve = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(He);
    var s = o(Ge);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.setData = function (t, e, n, o, r, i, a) {
        this.tween
          .set({ x: t, y: e, z: n })
          .to({ x: o, y: r, z: i }, a)
          .call(this.notify, this, [s.default.COMPLETE])
          .call(this.removeSelf, this);
        this.tween.setPaused(true);
        return this;
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Ve);
  var $e = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(dt);
    var r = (function () {
      function p() {}
      p.getData = function (t) {
        return o.default.conf.skills.all[t];
      };
      p.getSkillLevelProperty = function (t, e) {
        var n;
        var o = p.getData(t).levelProperty;
        var r =
          (n = o === null || o === void 0 ? void 0 : o.length) !== null &&
          n !== void 0
            ? n
            : 0;
        if (r) {
          var i = o[0];
          var a = 1 + (e - 1) * i;
          return o.slice(a, a + i);
        }
        return [];
      };
      p.getSkillLevelAttribute = function (t, e) {
        var n = p.getData(t);
        var o = {};
        if (!n) return o;
        if (!n.levelAttribute) return o;
        for (var r = 0, i = n.levelAttribute; r < i.length; r++) {
          var a = i[r];
          var s = a[1];
          var u = 0;
          if (a[0] == 1) {
            u = a[2];
          } else if (a[0] == 2) {
            var l = this.getSkillLevelProperty(t, e);
            var f = a[2];
            if (l.length < f) {
              XOF.log("技能属性数值配置异常");
              continue;
            }
            u = l[f];
          }
          if (u) {
            if (o[s] == undefined) o[s] = 0;
            o[s] += u;
          }
        }
        return o;
      };
      p.getSkillDamage = function (t, e, n) {
        var o, r;
        if (n === void 0) {
          n = 0;
        }
        var i = p.getData(t);
        var a = {};
        if (!i) return a;
        if (!i.damageAttribute) return a;
        if (
          !((o = i.damageAttribute) === null || o === void 0 ? void 0 : o[n])
        ) {
          return a;
        }
        var s =
          (r = i.damageAttribute) === null || r === void 0 ? void 0 : r[n];
        var u = s[0];
        var l = 0;
        var f = this.getSkillLevelProperty(t, e);
        var c = s[1];
        if (f.length < c) {
          XOF.log("技能属性数值配置异常");
          return a;
        }
        l = f[c];
        if (l) {
          if (a[u] == undefined) a[u] = 0;
          a[u] += l;
        }
        return a;
      };
      return p;
    })();
    e.default = r;
  });
  t($e);
  var qe = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(F);
    var i = o(Ve);
    var a = o($e);
    var s = o(Me);
    var u = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        this.fs.setSkillDamage(
          t,
          this.skillid,
          t.script.GetSkillLevel(this.skillid)
        );
        t.setAction("gorecross");
        for (var n = 1; n <= 2; n++) {
          var o = t.script.CreateAnimation(
            "animation/gorecross/slash" + n + ".ani"
          );
          t.script.AddStateLayerAnimation(1, o, 0, 0);
        }
        t.script.playSound("SM_GORECROSS");
      };
      t.prototype.onUpdate = function (t, e) {
        if (t.body.index >= 10) {
          var n = new i.default(t.map).setData(
            t.position.x + 55 * t.direction,
            t.position.y,
            t.position.z + 85,
            t.position.x + (120 + 55) * t.direction,
            t.position.y,
            t.position.z + 85,
            500
          );
          var o = t.script.createPassiveObject(20028, 55, 0, 85, undefined, [
            n,
          ]);
          o.attribute.attach(
            new r.default(
              a.default.getSkillDamage(
                this.skillid,
                t.script.GetSkillLevel(this.skillid)
              )
            )
          );
          return false;
        }
      };
      t.prototype.removeEffect = function (t) {
        for (var e = 1; e <= 4; e++) {
          t.script.RemoveAnimation("animation/gorecross/slash" + e + ".ani");
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        this.removeEffect(t);
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == 1) {
          t.script.resetHits();
        } else if (e == 65534) {
          t.script.resetHits();
        }
      };
      return t;
    })(s.default);
    e.default = u;
  });
  t(qe);
  var Ke = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Me);
    var i = (function (n) {
      o(t, n);
      function t() {
        return (n !== null && n.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction("overdrive");
        t.script.playSound("SM_OVERDRIVE");
      };
      t.prototype.onEndCurrentAni = function (t) {
        var e = t.script.GetSkillLevel(this.skillid);
        t.script.AddBuff(10010, true, e);
        return n.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.cd = function () {};
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        n.prototype.cd.call(this, t);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ke);
  var Ye = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = 65534;
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.actions = ["momentaryslash1", "momentaryslash2"];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        var n = t.script.getValue("momentaryslash.flagFrameIndex");
        var o = this.actions;
        var r = o.indexOf(t.action);
        var i;
        if (r >= 0) {
          if (o.length > 1) {
            if (r == o.length - 1) {
              return;
            } else if (t.body.isLast || t.body.index > n) {
              i = o[r + 1];
            }
          }
        } else if (t.isNormalAction()) {
          i = o[0];
        }
        if (i) {
          t.skillSuperArmor = true;
          t.script.playSound("SM_BAL_READY");
          t.setAction(i, true);
          if (i == this.actions[1]) {
            t.actor.setFrameIndex(1, 9);
            this.fs.setSkillDamage(
              t,
              this.skillid,
              t.script.GetSkillLevel(this.skillid),
              1
            );
          } else {
            this.fs.setSkillDamage(
              t,
              this.skillid,
              t.script.GetSkillLevel(this.skillid)
            );
          }
        }
      };
      t.prototype.onFrame = function (t, e) {
        if (e == 4) {
          t.script.playSound("SM_BAL_SHOT");
          if (t.action == this.actions[0]) {
            var n = t.script.CreateAnimation(
              "animation/momentaryslash/momentaryslash_blue_ldodge_under.ani"
            );
            t.script.AddStateLayerAnimation(1, n, 0, 0);
            var o = t.script.CreateAnimation(
              "animation/momentaryslash/momentaryslash_blue_ldodge_upper.ani"
            );
            t.script.AddStateLayerAnimation(1, o, 0, 0);
          } else if (t.action == this.actions[1]) {
            var n = t.script.CreateAnimation(
              "animation/momentaryslash/momentaryslash_white_ldodge_under.ani"
            );
            t.script.AddStateLayerAnimation(1, n, 0, 0);
            var o = t.script.CreateAnimation(
              "animation/momentaryslash/momentaryslash_white_ldodge_upper.ani"
            );
            t.script.AddStateLayerAnimation(1, o, 0, 0);
          }
        }
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == i) {
          t.script.setValue("momentaryslash.flagFrameIndex", t.body.index);
        }
      };
      t.prototype.cd = function (t) {};
      t.prototype.onEndCurrentAni = function (t) {
        t.script.setValue("momentaryslash.flagFrameIndex");
        return e.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.onEndAction = function (t) {
        t.skillSuperArmor = false;
        e.prototype.onEndAction.call(this, t);
        e.prototype.cd.call(this, t);
        t.script.RemoveAnimation(
          "animation/momentaryslash/momentaryslash_blue_ldodge_under.ani"
        );
        t.script.RemoveAnimation(
          "animation/momentaryslash/momentaryslash_blue_ldodge_upper.ani"
        );
        t.script.RemoveAnimation(
          "animation/momentaryslash/momentaryslash_white_ldodge_under.ani"
        );
        t.script.RemoveAnimation(
          "animation/momentaryslash/momentaryslash_white_ldodge_upper.ani"
        );
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(Ye);
  var We = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Me);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t = (n !== null && n.apply(this, arguments)) || this;
        t.actions = ["chargecrashdash", "chargecrashupper"];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        var n = this.actions;
        var o = n.indexOf(t.action);
        var r;
        if (o >= 0);
        else if (t.isNormalAction()) {
          r = n[0];
        }
        if (r) {
          this.fs.setSkillDamage(
            t,
            this.skillid,
            t.script.GetSkillLevel(this.skillid)
          );
          if (r == this.actions[0]) {
            t.script.playSound("SM_CHARGE_CRASH");
            t.script.cleanAllForce();
            t.script.addForce(
              700,
              1500,
              t.direction,
              undefined,
              "SkChargecrashdash"
            );
          }
          t.setAction(r, true);
          var i = t.script.CreateAnimation("animation/chargecrash/dash.ani");
          t.script.AddStateLayerAnimation(1, i, 0, 0);
          var a = t.script.CreateAnimation(
            "animation/chargecrash/dustdash.ani"
          );
          t.script.AddStateLayerAnimation(1, a, 0, 0);
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        if (t.action == this.actions[0]) {
          this.fs.setSkillDamage(
            t,
            this.skillid,
            t.script.GetSkillLevel(this.skillid),
            1
          );
          t.script.playSound("SM_CHARGE_CRASH_UP");
          t.setAction("chargecrashupper", true);
          var e = t.script.CreateAnimation(
            "animation/chargecrash/up-slash.ani"
          );
          t.script.AddStateLayerAnimation(1, e, 0, 0);
          return false;
        } else {
          return n.prototype.onEndCurrentAni.call(this, t);
        }
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == 3) {
          t.script.resetHits();
        }
      };
      t.prototype.cd = function () {};
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        n.prototype.cd.call(this, t);
        t.script.removePower("SkChargecrashdash");
        t.script.RemoveAnimation("animation/chargecrash/dash.ani");
        t.script.RemoveAnimation("animation/chargecrash/dustdash.ani");
        t.script.RemoveAnimation("animation/chargecrash/up-slash.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(We);
  var ze = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(nt);
    var i = (function (o) {
      n(t, o);
      function t() {
        return o.call(this) || this;
      }
      t.prototype.update = function (t) {
        o.prototype.update.call(this, t);
        for (var e in this.children_) {
          var n = this.children_[e];
          if (n.update) {
            n.update(t);
          }
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(ze);
  var Qe = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(ze);
    var i = o(tt);
    var a = o(Me);
    var s = (function (a) {
      n(t, a);
      function t() {
        var t = (a !== null && a.apply(this, arguments)) || this;
        t.actions = [
          "rapidmoveslashready1",
          "rapidmoveslashmove1",
          "rapidmoveslashready2",
          "rapidmoveslashmove2",
        ];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        var n = this.actions;
        var o = n.indexOf(t.action);
        var r;
        if (o >= 0) {
          var i = t.script.getValue("rapidmoveslash.count", 0);
          if (t.action == "rapidmoveslashmove1") {
            if (t.body.isLast || t.body.index >= 3) {
              if (i > 1) {
                t.script.setValue("rapidmoveslash.count", i - 1);
                if (i > 2) {
                  r = "rapidmoveslashready1";
                } else {
                  r = "rapidmoveslashready2";
                }
              }
            }
          }
        } else if (t.isNormalAction()) {
          r = n[0];
          var i = 0;
          var a = t.script.getBuffLevel(10014) > 0;
          if (a) {
            i += 4;
          }
          if (t.script.getBuffLevel(10023) > 0) {
            i += 2;
          }
          t.script.setValue("rapidmoveslash.count", 2 + i);
        }
        if (r) {
          this.removeEffect(t, false);
          this.fs.setSkillDamage(
            t,
            this.skillid,
            t.script.GetSkillLevel(this.skillid)
          );
          if (r == this.actions[0]) {
            t.script.playSound("SM_MENGRYONG_START");
          }
          if (t.script.IsKeyDown(this.fs.Keys.left)) {
            t.direction = -1;
          } else if (t.script.IsKeyDown(this.fs.Keys.right)) {
            t.direction = 1;
          }
          t.setAction(r, true);
          t.script.removePower("SkYuRapidmoveslash");
        }
      };
      t.prototype.cd = function (t) {};
      t.prototype.onEndCurrentAni = function (t) {
        if (
          t.action == "rapidmoveslashready1" ||
          t.action == "rapidmoveslashready2"
        ) {
          t.script.removePower("SkYuRapidmoveslash");
          var e = this.fs.getPressYDirection(t);
          t.script.setValue("rapidmoveslash.y", e);
          t.script.addForce(1300, 2600, t.direction, 0, "SkYuRapidmoveslash");
          if (t.action == "rapidmoveslashready1") {
            this.fs.setSkillDamage(
              t,
              this.skillid,
              t.script.GetSkillLevel(this.skillid)
            );
            t.setAction("rapidmoveslashmove1", true);
            var n = t.script.CreateAnimation(
              "animation/rapidmoveslash/slash1.ani"
            );
            t.script.AddStateLayerAnimation(1, n, 0, 0);
          } else {
            this.fs.setSkillDamage(
              t,
              this.skillid,
              t.script.GetSkillLevel(this.skillid)
            );
            t.setAction("rapidmoveslashmove2", true);
            t.script.playSound("SM_MENGRYONG_FIN");
            var o = t.script.CreateAnimation(
              "animation/rapidmoveslash/slash2.ani"
            );
            t.script.AddStateLayerAnimation(1, o, 0, 0);
          }
          this.addDust(t);
          var r = t.script.CreateAnimation(
            "animation/rapidmoveslash/move1.ani"
          );
          t.script.AddStateLayerAnimation(1, r, 0, 0);
          var i = t.script.CreateAnimation(
            "animation/rapidmoveslash/move2.ani"
          );
          t.script.AddStateLayerAnimation(1, i, 0, 0);
          return false;
        } else {
          return a.prototype.onEndCurrentAni.call(this, t);
        }
      };
      t.prototype.onEndAction = function (t) {
        a.prototype.onEndAction.call(this, t);
        t.script.removePower("SkYuRapidmoveslash");
        this.removeEffect(t, true);
        a.prototype.cd.call(this, t);
        t.script.setValue("rapidmoveslash.count");
        t.script.setValue("rapidmoveslash.y");
      };
      t.prototype.onDamage = function (t, e) {
        this.removeEffect(t);
        return a.prototype.onDamage.call(this, t, e);
      };
      t.prototype.removeEffect = function (t, e) {
        if (e === void 0) {
          e = false;
        }
        if (e) {
          t.script.RemoveAnimation("animation/rapidmoveslash/dust.ani");
          t.script.RemoveAnimation("animation/rapidmoveslash/slash1.ani");
          t.script.RemoveAnimation("animation/rapidmoveslash/slash2.ani");
        }
        t.script.RemoveAnimation("animation/rapidmoveslash/move1.ani");
        t.script.RemoveAnimation("animation/rapidmoveslash/move2.ani");
      };
      t.prototype.addDust = function (t) {
        var e = new r.default();
        e.scaleX = t.direction;
        var n = t.script.CreateAnimation("animation/rapidmoveslash/dust.ani");
        n.on(XOF.Event.COMPLETE, t.map.removeObject, t.map, [e]);
        e.addChild(n);
        t.map.addObject(e, undefined, t.x, t.y);
      };
      t.prototype.addShadow = function (t) {
        if (t.isAction("rapidmoveslashmove1", "rapidmoveslashmove2")) {
          var e = new r.default();
          e.scaleX = t.direction;
          var n = new i.default().clone(t.body, 1);
          n.color = "#0080FF";
          e.on(XOF.Event.COMPLETE, t.map.removeObject, t.map, [e]);
          e.addChild(n);
          t.map.addObject(e, undefined, t.x, t.y - 1);
        }
      };
      t.prototype.onFrame = function (t, e) {
        a.prototype.onFrame.call(this, t, e);
        this.addShadow(t);
      };
      t.prototype.onUpdate = function (t, e) {
        if (t.isAction("rapidmoveslashmove1", "rapidmoveslashmove2")) {
          if (t.body.index < 3) {
            var n = t.script.getValue("rapidmoveslash.y", 0);
            t.moveBy(0, n * 150);
          }
        }
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == 0 || e == 2) {
          t.script.resetHits();
        }
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(Qe);
  var Je = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        this.fs.setSkillDamage(
          t,
          this.skillid,
          t.script.GetSkillLevel(this.skillid)
        );
        if (t.isNormalAction()) {
          t.setAction("triplestab");
          var n = t.script.CreateAnimation("animation/triplestab/0_normal.ani");
          t.script.AddStateLayerAnimation(1, n, -30, 0);
          var o = t.script.CreateAnimation("animation/triplestab/1_dodge.ani");
          t.script.AddStateLayerAnimation(1, o, -30, 0);
        }
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == 2 || e == 9 || e == 1) {
          t.script.resetHits();
          t.script.playSound("R_SM_ATK");
        }
      };
      t.prototype.cd = function () {};
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        e.prototype.cd.call(this, t);
        t.script.RemoveAnimation("animation/triplestab/0_normal.ani");
        t.script.RemoveAnimation("animation/triplestab/1_dodge.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Je);
  var Ze = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction("ghostsidewind");
      };
      e.prototype.onKeyFrameFlag = function (t, e) {};
      return e;
    })(r.default);
    e.default = i;
  });
  t(Ze);
  var tn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.cd = function (t) {};
      e.prototype.onCheckUse = function (t) {
        var e;
        if (t.isDeath) return 0;
        var n = this.fs.getSkillInfo(this.skillid);
        var o = n === null || n === void 0 ? void 0 : n.force;
        var r = ((e = this.actions) !== null && e !== void 0 ? e : []).indexOf(
          t.action
        );
        var i = 0;
        if (r >= 0) {
          i = 1;
        } else {
          if (t.isNormalAction()) {
            i = 1;
          } else if (t.isNormalAttackAction()) {
            i = o ? 2 : 0;
          }
        }
        return i;
      };
      e.prototype.onForceSetAction = function (t, e) {
        this.onSetAction(t, e);
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(tn);
  var en = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction("attack1");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 2) {
          t.script.createPassiveObject(30001, 20, 0, 60);
          t.script.playSound("THROW_STONE");
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(en);
  var nn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        t.hiter.attackEnabled = false;
        var n = t.script.CreateAnimationByPath(
          "monster/tau/beastanimation.json",
          "beastanimation/charge1.ani"
        );
        t.script.AddStateLayerAnimation(1, n, 50, 100);
        var o = t.script.CreateAnimationByPath(
          "monster/tau/beastanimation.json",
          "beastanimation/charge2.ani"
        );
        t.script.AddStateLayerAnimation(1, o, 50, 100);
        n.totalTime;
        var r = t.script.CreateAnimationByPath(
          "monster/tau/beastanimation.json",
          "beastanimation/fullcharge1.ani"
        );
        t.script.AddStateLayerAnimation(1, r, 50, 100);
        var i = t.script.CreateAnimationByPath(
          "monster/tau/beastanimation.json",
          "beastanimation/fullcharge2.ani"
        );
        t.script.AddStateLayerAnimation(1, i, 50, 100);
      };
      t.prototype.onFrame = function (t, e) {
        t.actor.addDelay(70);
        if (e == 4) {
          this.fs.shake(-3, 3, -3, 3);
          t.script.createPassiveObject(30022, 110, 0, 0);
          t.actor.addTime(-400);
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("beastanimation/charge1.ani");
        t.script.RemoveAnimation("beastanimation/charge2.ani");
        t.script.RemoveAnimation("beastanimation/fullcharge1.ani");
        t.script.RemoveAnimation("beastanimation/fullcharge2.ani");
        t.hiter.attackEnabled = true;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(nn);
  var on = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        this.fs.shake(-3, 3, -3, 3);
        t.script.playSound("TAU_ROAR");
      };
      e.prototype.onFrame = function (t, e) {
        t.actor.addTime(-60);
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(on);
  var rn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
      };
      e.prototype.cd = function (t) {};
      return e;
    })(r.default);
    e.default = i;
  });
  t(rn);
  var an = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction("attack1");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 2) {
          t.script.createPassiveObject(30057, 20, 0, 60);
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(an);
  var sn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction("attack1");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 2) {
          t.script.createPassiveObject(30047, 20, 0, 60);
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(sn);
  var un = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = "LightningKinol";
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        t.script.createPassiveObject(48012, 20, 0, 0, undefined, [
          1,
          "LightningKinol",
        ]);
        t.map.once(i, this.Light, this, [t]);
      };
      e.prototype.Light = function (t) {
        if (t.isDeath) return;
        t.script.createPassiveObject(30070, 20, 0, 0);
      };
      return e;
    })(r.default);
    e.default = a;
  });
  t(un);
  var ln = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var s = "SerialLightning";
    var i = (function (a) {
      n(t, a);
      function t() {
        return (a !== null && a.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        t.script.setValue("SerialLightning.count", 4);
        t.map.on(s, this.Light, this, [t]);
      };
      t.prototype.onFrame = function (t, e) {
        a.prototype.onFrame.call(this, t, e);
        var n = [2, 4, 6, 8];
        var o = n.indexOf(e);
        if (o >= 0) {
          var r = t.position.x + t.direction * (90 + o * 75),
            i = t.position.y;
          t.map.createPassiveObject(48012, r, i, 0, undefined, [1, s]);
          t.script.setValue("SerialLightning.position" + o, [r, i]);
        }
      };
      t.prototype.Light = function (t) {
        if (t.isDeath) return;
        var e = t.script.getValue("SerialLightning.count", 0);
        if (e > 0) {
          var n = t.script.getValue(
              "SerialLightning.position" + (4 - e),
              [0, 0]
            ),
            o = n[0],
            r = n[1];
          var i = t.map.createPassiveObject(30070, o, r, 0);
          if (i === null || i === void 0 ? void 0 : i.fu) i.fu.camp = t.fu.camp;
          e--;
          t.script.setValue("SerialLightning.count", e);
        }
      };
      t.prototype.onEndAction = function (t) {
        a.prototype.onEndAction.call(this, t);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(ln);
  var fn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var u = "AroundLightning";
    var i = (function (s) {
      n(t, s);
      function t() {
        return (s !== null && s.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        t.script.setValue("AroundLightning.count", 8);
        t.map.on(u, this.Light, this, [t]);
      };
      t.prototype.onFrame = function (t, e) {
        s.prototype.onFrame.call(this, t, e);
        var n = [1, 2, 4, 6, 8, 10, 12, 14];
        var o = [
          [0, -70],
          [120, -50],
          [170, 0],
          [120, 60],
          [0, 85],
          [-120, 60],
          [-170, 0],
          [-120, -50],
        ];
        var r = n.indexOf(e);
        if (r >= 0) {
          var i = t.position.x + o[r][0],
            a = t.position.y + o[r][1];
          t.map.createPassiveObject(48012, i, a, 0, undefined, [1, u]);
          t.script.setValue("AroundLightning.position" + r, [i, a]);
        }
      };
      t.prototype.Light = function (t) {
        if (t.isDeath) return;
        var e = t.script.getValue("AroundLightning.count", 0);
        if (e > 0) {
          var n = t.script.getValue(
              "AroundLightning.position" + (8 - e),
              [0, 0]
            ),
            o = n[0],
            r = n[1];
          var i = t.map.createPassiveObject(30070, o, r, 0);
          if (i === null || i === void 0 ? void 0 : i.fu) i.fu.camp = t.fu.camp;
          e--;
          t.script.setValue("AroundLightning.count", e);
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(fn);
  var cn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = "KerahaCast";
    var a = 1;
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        t.map.on(i, this.createObj, this, [t]);
        t.script.setValue("KerahaCast.count", a);
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 8) {
          if (t.fightTarget) {
            var n = t.fightTarget.position.x,
              o = t.fightTarget.position.y;
            this.fs.createPassiveObject(48012, n, o, 0, undefined, [1, i], t);
            t.script.setValue("KerahaCast.position" + 0, [n, o]);
          }
        }
      };
      e.prototype.createObj = function (t) {
        if (t.isDeath) return;
        var e = t.script.getValue("KerahaCast.count", 0);
        if (e > 0) {
          var n = t.script.getValue("KerahaCast.position" + (a - e), [0, 0]),
            o = n[0],
            r = n[1];
          this.fs.createPassiveObject(30059, o, r, 0, undefined, undefined, t);
          e--;
          t.script.setValue("KerahaCast.count", e);
        }
      };
      return e;
    })(r.default);
    e.default = s;
  });
  t(cn);
  var pn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var u = "KerahaCast2";
    var i = 4;
    var a = (function (s) {
      n(t, s);
      function t() {
        return (s !== null && s.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        t.script.setValue("KerahaCast2.count", i);
        t.map.on(u, this.createObj, this, [t]);
      };
      t.prototype.onFrame = function (t, e) {
        s.prototype.onFrame.call(this, t, e);
        var n = [5, 6, 7, 8];
        var o = [
          [100, 0],
          [200, 0],
          [300, 0],
          [400, 0],
        ];
        var r = n.indexOf(e);
        if (r >= 0) {
          var i = t.position.x + o[r][0] * t.direction,
            a = t.position.y + o[r][1];
          t.script.setValue("KerahaCast2.position" + r, [i, a]);
          this.fs.createPassiveObject(48012, i, a, 0, undefined, [1, u], t);
        }
      };
      t.prototype.createObj = function (t) {
        if (t.isDeath) return;
        var e = t.script.getValue("KerahaCast2.count", 0);
        if (e > 0) {
          var n = t.script.getValue("KerahaCast2.position" + (i - e), [0, 0]),
            o = n[0],
            r = n[1];
          this.fs.createPassiveObject(30059, o, r, 0, undefined, undefined, t);
          e--;
          t.script.setValue("KerahaCast2.count", e);
        }
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(pn);
  var dn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        t.hiter.attackEnabled = false;
        t.superArmor = true;
      };
      t.prototype.onFrame = function (t, e) {
        if (e == 2) {
          var n = t.script.CreateAnimationByPath(
            "monster/tau/tangasanimation.json",
            "tangasanimation/ef_earthquake.ani"
          );
          t.script.AddStateLayerAnimation(1, n, -50, -200);
        } else if (e == 4) {
          this.fs.shake(-3, 3, -3, 3);
          t.script.createPassiveObject(30053, 150, 0, 0);
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("tangasanimation/ef_earthquake.ani");
        t.hiter.attackEnabled = true;
        t.superArmor = false;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(dn);
  var hn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(3, true, "attack");
        t.hiter.attackEnabled = false;
        t.superArmor = true;
      };
      t.prototype.onFrame = function (t, e) {
        if (e == 2) {
          var n = t.script.CreateAnimationByPath(
            "monster/tau/tangasanimation.json",
            "tangasanimation/ef_earthquakestrong.ani"
          );
          t.script.AddStateLayerAnimation(1, n, -50, -200);
        } else if (e == 4) {
          this.fs.shake(-3, 3, -3, 3);
          t.script.createPassiveObject(30054, 150, 0, 0);
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("tangasanimation/ef_earthquakestrong.ani");
        t.hiter.attackEnabled = true;
        t.superArmor = false;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(hn);
  var vn = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        return (n !== null && n.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        t.script.setValue("ShautaTackleReady.action", "1");
        t.superArmor = true;
      };
      t.prototype.onUpdate = function (t, e) {
        n.prototype.onUpdate.call(this, t, e);
        if (t.script.getValue("ShautaTackleReady.action") == "2") {
          if (t.script.hasForce("ShautaTackleReady") == false) {
            return false;
          }
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        if (t.script.getValue("ShautaTackleReady.action") == "1") {
          t.script.setValue("ShautaTackleReady.action", "2");
          t.setMotionAction(1, true, "etc");
          t.script.cleanAllForce();
          t.script.addForce(
            1e3,
            1200,
            t.direction,
            undefined,
            "ShautaTackleReady"
          );
          return false;
        }
        return n.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        t.script.setValue("ShautaTackleReady.action");
        t.superArmor = false;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(vn);
  var yn = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        return (n !== null && n.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "etc");
        t.script.setValue("Tackle.action", "1");
      };
      t.prototype.onUpdate = function (t, e) {
        n.prototype.onUpdate.call(this, t, e);
        if (t.script.getValue("Tackle.action") == "2") {
          if (t.script.hasForce("Tackle") == false) {
            return false;
          }
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        if (t.script.getValue("Tackle.action") == "1") {
          t.script.setValue("Tackle.action", "2");
          t.setMotionAction(1, true, "etc");
          t.script.cleanAllForce();
          t.script.addForce(800, 1e3, t.direction, undefined, "Tackle");
          return false;
        }
        return n.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        t.script.setValue("Tackle.action");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(yn);
  var _n = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
      };
      e.prototype.cd = function (t) {};
      return e;
    })(r.default);
    e.default = i;
  });
  t(_n);
  var mn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 2) {
          t.script.resetHits();
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(mn);
  var gn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var s = 4;
    var i = 8;
    var u = 340;
    var a = (function (a) {
      n(t, a);
      function t() {
        return (a !== null && a.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
      };
      t.prototype.onUpdate = function (t, e) {
        a.prototype.onUpdate.call(this, t, e);
        if (t.body.index > s && t.body.index < i + 1) {
          if (!t.script.hasForce("LugaruJumpAttack2")) {
            t.actor.setFrameIndex(i + 1, 0);
          }
        }
      };
      t.prototype.onFrame = function (t, e) {
        a.prototype.onFrame.call(this, t, e);
        if (e == s) {
          var n = 0,
            o = 0;
          if (t.fightTarget) {
            var r = t.fightTarget.position.x < t.position.x ? -1 : 1;
            var i = t.fightTarget.position.y < t.position.y ? -1 : 1;
            if (t.fightTarget.position.x - t.position.x < 80) {
              n = r * 100;
            } else {
              n = r * 250;
            }
            if (t.fightTarget.position.y - t.position.y < 20) {
              o = i * 30;
            } else {
              o = i * 60;
            }
          }
          t.script.float(u, n, o, "LugaruJumpAttack2");
        }
      };
      t.prototype.onEndAction = function (t) {
        a.prototype.onEndAction.call(this, t);
        t.script.removePower("LugaruJumpAttack2");
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(gn);
  var bn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var s = 4;
    var i = 8;
    var u = 380;
    var a = (function (a) {
      n(t, a);
      function t() {
        return (a !== null && a.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
      };
      t.prototype.onUpdate = function (t, e) {
        a.prototype.onUpdate.call(this, t, e);
        if (t.body.index > s && t.body.index < i + 1) {
          if (!t.script.hasForce("LugaruJumpAttack1")) {
            t.actor.setFrameIndex(i + 1, 0);
          }
        }
      };
      t.prototype.onFrame = function (t, e) {
        a.prototype.onFrame.call(this, t, e);
        if (e == s) {
          var n = 0,
            o = 0;
          if (t.fightTarget) {
            var r = t.fightTarget.position.x < t.position.x ? -1 : 1;
            var i = t.fightTarget.position.y < t.position.y ? -1 : 1;
            if (t.fightTarget.position.x - t.position.x < 100) {
              n = r * 120;
            } else {
              n = r * 300;
            }
            if (t.fightTarget.position.y - t.position.y < 50) {
              o = i * 70;
            } else {
              o = i * 120;
            }
          }
          t.script.float(u, n, o, "LugaruJumpAttack1");
        }
      };
      t.prototype.onEndAction = function (t) {
        a.prototype.onEndAction.call(this, t);
        t.script.removePower("LugaruJumpAttack1");
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(bn);
  var On = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 2) {
          t.script.resetHits();
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(On);
  var wn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var s = 4;
    var i = 8;
    var u = 380;
    var a = (function (a) {
      n(t, a);
      function t() {
        return (a !== null && a.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
      };
      t.prototype.onUpdate = function (t, e) {
        a.prototype.onUpdate.call(this, t, e);
        if (t.body.index > s) {
          if (!t.script.hasForce("LugaruJumpAttack1")) {
            t.body.index = i + 1;
          }
        }
      };
      t.prototype.onFrame = function (t, e) {
        a.prototype.onFrame.call(this, t, e);
        if (e == s) {
          var n = 0,
            o = 0;
          if (t.fightTarget) {
            var r = t.fightTarget.position.x < t.position.x ? -1 : 1;
            var i = t.fightTarget.position.y < t.position.y ? -1 : 1;
            if (t.fightTarget.position.x - t.position.x < 100) {
              n = r * 120;
            } else {
              n = r * 300;
            }
            if (t.fightTarget.position.y - t.position.y < 50) {
              o = i * 70;
            } else {
              o = i * 120;
            }
          }
          t.script.float(u, n, o, "LugaruJumpAttack1");
        }
      };
      t.prototype.onEndAction = function (t) {
        a.prototype.onEndAction.call(this, t);
        t.script.removePower("LugaruJumpAttack1");
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(wn);
  var An = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var s = 4;
    var i = 8;
    var u = 340;
    var a = (function (a) {
      n(t, a);
      function t() {
        return (a !== null && a.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
      };
      t.prototype.onUpdate = function (t, e) {
        a.prototype.onUpdate.call(this, t, e);
        if (t.body.index > s) {
          if (!t.script.hasForce("LugaruJumpAttack2")) {
            t.body.index = i + 1;
          }
        }
      };
      t.prototype.onFrame = function (t, e) {
        a.prototype.onFrame.call(this, t, e);
        if (e == s) {
          var n = 0,
            o = 0;
          if (t.fightTarget) {
            var r = t.fightTarget.position.x < t.position.x ? -1 : 1;
            var i = t.fightTarget.position.y < t.position.y ? -1 : 1;
            if (t.fightTarget.position.x - t.position.x < 80) {
              n = r * 100;
            } else {
              n = r * 250;
            }
            if (t.fightTarget.position.y - t.position.y < 20) {
              o = i * 30;
            } else {
              o = i * 60;
            }
          }
          t.script.float(u, n, o, "LugaruJumpAttack2");
        }
      };
      t.prototype.onEndAction = function (t) {
        a.prototype.onEndAction.call(this, t);
        t.script.removePower("LugaruJumpAttack2");
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(An);
  var En = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_man/animation.json",
          "animation/attack1_1.ani"
        );
        t.script.AddStateLayerAnimation(1, n, 0, 0);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_man/animation.json",
          "animation/attack1_2.ani"
        );
        t.script.AddStateLayerAnimation(1, o, 0, 0);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_man/animation.json",
          "animation/attack1_5.ani"
        );
        t.script.AddStateLayerAnimation(1, r, 0, 0);
        var i = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_man/animation.json",
          "animation/attack1_6.ani"
        );
        t.script.AddStateLayerAnimation(1, i, 0, 0);
        this.fs.createPassiveObject(
          109055285,
          t.position.x + t.direction * 80,
          t.position.y,
          0,
          vt.layerConstValue.normal,
          undefined,
          t,
          undefined,
          undefined,
          true
        );
        t.script.playSound("R_MON_MALE_V2_ATK");
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack1_1.ani");
        t.script.RemoveAnimation("animation/attack1_2.ani");
        t.script.RemoveAnimation("animation/attack1_5.ani");
        t.script.RemoveAnimation("animation/attack1_6.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(En);
  var Tn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_man/animation.json",
          "animation/attack0_1.ani"
        );
        t.script.AddStateLayerAnimation(-1, n, 0, 0);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_man/animation.json",
          "animation/attack0_2.ani"
        );
        t.script.AddStateLayerAnimation(-1, o, 0, 0);
        t.script.playSound("R_MON_MALE_V2_ATK");
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack0_1.ani");
        t.script.RemoveAnimation("animation/attack0_2.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Tn);
  var Cn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_man/animation.json",
          "animation/attack2_1.ani"
        );
        t.script.AddStateLayerAnimation(1, n, 0, 0);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_man/animation.json",
          "animation/attack2_2.ani"
        );
        t.script.AddStateLayerAnimation(1, o, 0, 0);
        t.script.playSound("R_MON_MALE_V2_ATK");
        this.fs.createPassiveObject(
          109055823,
          t.position.x,
          t.position.y + 3,
          0,
          vt.layerConstValue.bottom,
          undefined,
          t,
          undefined,
          undefined,
          true
        );
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack2_1.ani");
        t.script.RemoveAnimation("animation/attack2_2.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Cn);
  var Pn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack2_7.ani"
        );
        t.script.AddStateLayerAnimation(1, n, 0, 0);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack2_3.ani"
        );
        t.script.AddStateLayerAnimation(1, o, 0, 0);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack2_4.ani"
        );
        t.script.AddStateLayerAnimation(1, r, 0, 0);
        var i = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack2_5.ani"
        );
        t.script.AddStateLayerAnimation(1, i, 0, 0);
        var a = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack2_6.ani"
        );
        t.script.AddStateLayerAnimation(1, a, 0, 0);
        var s = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack2_1.ani"
        );
        t.script.AddStateLayerAnimation(1, s, 0, 0);
        var u = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack2_2.ani"
        );
        t.script.AddStateLayerAnimation(1, u, 0, 0);
        t.script.playSound("R_MON_FEMALE_V1_ATK");
        t.script.playSound("R_MON_FEMALE_V1_ATK");
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack2_1.ani");
        t.script.RemoveAnimation("animation/attack2_2.ani");
        t.script.RemoveAnimation("animation/attack2_3.ani");
        t.script.RemoveAnimation("animation/attack2_4.ani");
        t.script.RemoveAnimation("animation/attack2_5.ani");
        t.script.RemoveAnimation("animation/attack2_6.ani");
        t.script.RemoveAnimation("animation/attack2_7.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Pn);
  var jn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack1_3.ani"
        );
        t.script.AddStateLayerAnimation(1, n, 0, 0);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack1_1.ani"
        );
        t.script.AddStateLayerAnimation(1, o, 0, 0);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack1_2.ani"
        );
        t.script.AddStateLayerAnimation(1, r, 0, 0);
        t.script.playSound("R_MON_FEMALE_V1_ATK");
        t.script.playSound("R_MON_FEMALE_V1_ATK");
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack1_3.ani");
        t.script.RemoveAnimation("animation/attack1_1.ani");
        t.script.RemoveAnimation("animation/attack1_2.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(jn);
  var Sn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack0_3.ani"
        );
        t.script.AddStateLayerAnimation(-1, n, 0, 0);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack0_1.ani"
        );
        t.script.AddStateLayerAnimation(1, o, 0, 0);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/normal_woman/animation.json",
          "animation/attack0_2.ani"
        );
        t.script.AddStateLayerAnimation(0, r, 0, 0);
        t.script.playSound("R_MON_FEMALE_V1_ATK");
        t.script.playSound("R_MON_FEMALE_V1_ATK");
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack0_1.ani");
        t.script.RemoveAnimation("animation/attack0_3.ani");
        t.script.RemoveAnimation("animation/attack0_2.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Sn);
  var Mn = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        return (n !== null && n.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack0_l.ani"
        );
        t.script.AddStateLayerAnimation(1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack0_g1.ani"
        );
        t.script.AddStateLayerAnimation(1, o);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack0_1.ani"
        );
        t.script.AddStateLayerAnimation(1, r);
        var i = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack0_2.ani"
        );
        t.script.AddStateLayerAnimation(1, i);
        var a = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack0_3.ani"
        );
        t.script.AddStateLayerAnimation(1, a);
        var s = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack0_e.ani"
        );
        t.script.AddStateLayerAnimation(-1, s);
        var u = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack0_g2.ani"
        );
        t.script.AddStateLayerAnimation(-1, u);
        var l = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack0_c.ani"
        );
        t.script.AddStateLayerAnimation(-1, l);
      };
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack0_l.ani");
        t.script.RemoveAnimation("animation/attack0_g1.ani");
        t.script.RemoveAnimation("animation/attack0_1.ani");
        t.script.RemoveAnimation("animation/attack0_2.ani");
        t.script.RemoveAnimation("animation/attack0_3.ani");
        t.script.RemoveAnimation("animation/attack0_e.ani");
        t.script.RemoveAnimation("animation/attack0_g2.ani");
        t.script.RemoveAnimation("animation/attack0_c.ani");
      };
      t.prototype.onFrame = function (t, e) {
        n.prototype.onFrame.call(this, t, e);
        if (e == 10) {
          this.fs.createPassiveObject(
            109054544,
            t.direction * 20,
            1,
            250,
            undefined,
            undefined,
            t,
            undefined,
            undefined,
            true
          );
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Mn);
  var kn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack1_l.ani"
        );
        t.script.AddStateLayerAnimation(1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack1_g1.ani"
        );
        t.script.AddStateLayerAnimation(1, o);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack1_1.ani"
        );
        t.script.AddStateLayerAnimation(1, r);
        var i = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack1_2.ani"
        );
        t.script.AddStateLayerAnimation(1, i);
        var a = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack1_3.ani"
        );
        t.script.AddStateLayerAnimation(1, a);
        var s = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack1_e.ani"
        );
        t.script.AddStateLayerAnimation(-1, s);
        var u = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack1_g2.ani"
        );
        t.script.AddStateLayerAnimation(-1, u);
        var l = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack1_c.ani"
        );
        t.script.AddStateLayerAnimation(-1, l);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack1_l.ani");
        t.script.RemoveAnimation("animation/attack1_g1.ani");
        t.script.RemoveAnimation("animation/attack1_1.ani");
        t.script.RemoveAnimation("animation/attack1_2.ani");
        t.script.RemoveAnimation("animation/attack1_3.ani");
        t.script.RemoveAnimation("animation/attack1_e.ani");
        t.script.RemoveAnimation("animation/attack1_g2.ani");
        t.script.RemoveAnimation("animation/attack1_c.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(kn);
  var xn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack2_l.ani"
        );
        t.script.AddStateLayerAnimation(1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack2_g1.ani"
        );
        t.script.AddStateLayerAnimation(1, o);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack2_elec.ani"
        );
        t.script.AddStateLayerAnimation(1, r);
        var i = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack2_elec2.ani"
        );
        t.script.AddStateLayerAnimation(1, i);
        var a = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack2_e.ani"
        );
        t.script.AddStateLayerAnimation(-1, a);
        var s = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack2_g2.ani"
        );
        t.script.AddStateLayerAnimation(-1, s);
        var u = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack2_c.ani"
        );
        t.script.AddStateLayerAnimation(-1, u);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack2_l.ani");
        t.script.RemoveAnimation("animation/attack2_g1.ani");
        t.script.RemoveAnimation("animation/attack2_elec.ani");
        t.script.RemoveAnimation("animation/attack2_elec2.ani");
        t.script.RemoveAnimation("animation/attack2_e.ani");
        t.script.RemoveAnimation("animation/attack2_g2.ani");
        t.script.RemoveAnimation("animation/attack2_c.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(xn);
  var Dn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(3, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack3_l.ani"
        );
        t.script.AddStateLayerAnimation(1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack3_g1.ani"
        );
        t.script.AddStateLayerAnimation(1, o);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack3_e.ani"
        );
        t.script.AddStateLayerAnimation(-1, r);
        var i = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack3_g2.ani"
        );
        t.script.AddStateLayerAnimation(-1, i);
        var a = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/crescent1/animation.json",
          "animation/attack3_c.ani"
        );
        t.script.AddStateLayerAnimation(-1, a);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack3_l.ani");
        t.script.RemoveAnimation("animation/attack3_g1.ani");
        t.script.RemoveAnimation("animation/attack3_e.ani");
        t.script.RemoveAnimation("animation/attack3_g2.ani");
        t.script.RemoveAnimation("animation/attack3_c.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Dn);
  var In = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_1_e.ani"
        );
        t.script.AddStateLayerAnimation(1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_1_1.ani"
        );
        t.script.AddStateLayerAnimation(1, o);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_1_2.ani"
        );
        t.script.AddStateLayerAnimation(1, r);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack_1_e.ani");
        t.script.RemoveAnimation("animation/attack_1_1.ani");
        t.script.RemoveAnimation("animation/attack_1_2.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(In);
  var Rn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_0_e.ani"
        );
        t.script.AddStateLayerAnimation(1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_0_1.ani"
        );
        t.script.AddStateLayerAnimation(1, o);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_0_2.ani"
        );
        t.script.AddStateLayerAnimation(1, r);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack_0_e.ani");
        t.script.RemoveAnimation("animation/attack_0_1.ani");
        t.script.RemoveAnimation("animation/attack_0_2.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Rn);
  var Ln = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_2_e.ani"
        );
        t.script.AddStateLayerAnimation(1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/roar_07.ani.json"
        );
        t.script.AddStateLayerAnimation(1, o);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/roar_06.ani.json"
        );
        t.script.AddStateLayerAnimation(1, r);
        var i = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/roar_05.ani.json"
        );
        t.script.AddStateLayerAnimation(1, i);
        var a = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/roar_04.ani.json"
        );
        t.script.AddStateLayerAnimation(1, a);
        var s = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/roar_03.ani.json"
        );
        t.script.AddStateLayerAnimation(1, s);
        var u = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/roar_02.ani.json"
        );
        t.script.AddStateLayerAnimation(1, u);
        var l = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/roar_01.ani.json"
        );
        t.script.AddStateLayerAnimation(1, l);
        var f = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/roar_00.ani.json"
        );
        t.script.AddStateLayerAnimation(1, f);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack_2_e.ani");
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/roar_07.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/roar_06.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/roar_05.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/roar_04.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/roar_03.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/roar_02.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/roar_01.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/roar_00.ani.json"
        );
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ln);
  var Fn = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        return (n !== null && n.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(3, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_3_e.ani"
        );
        t.script.AddStateLayerAnimation(1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_3_1.ani"
        );
        t.script.AddStateLayerAnimation(1, o, 80, -240);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_3_2.ani"
        );
        t.script.AddStateLayerAnimation(1, r);
      };
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("animation/attack_3_e.ani");
        t.script.RemoveAnimation("animation/attack_3_1.ani");
        t.script.RemoveAnimation("animation/attack_3_2.ani");
      };
      t.prototype.onFrame = function (t, e) {
        n.prototype.onFrame.call(this, t, e);
        t.actor.addDelay(70);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Fn);
  var Bn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(4, true, "attack");
        var n = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_normal05.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, n);
        var o = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_normal03.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, o);
        var r = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_normal02.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, r);
        var i = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_normal01.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, i);
        var a = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame08.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, a);
        var s = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame07.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, s);
        var u = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame06.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, u);
        var l = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame05.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, l);
        var f = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame04.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, f);
        var c = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame03.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, c);
        var p = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame02.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, p);
        var d = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame01.ani.json"
        );
        t.script.AddStateLayerAnimation(-1, d);
        var h = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/animation.json",
          "animation/attack_4_e.ani"
        );
        t.script.AddStateLayerAnimation(1, h);
        var v = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire_back.ani.json"
        );
        t.script.AddStateLayerAnimation(1, v);
        var y = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire_front.ani.json"
        );
        t.script.AddStateLayerAnimation(1, y);
        var _ = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire1.ani.json"
        );
        t.script.AddStateLayerAnimation(1, _);
        var m = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire2.ani.json"
        );
        t.script.AddStateLayerAnimation(1, m);
        var g = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire3.ani.json"
        );
        t.script.AddStateLayerAnimation(1, g);
        var b = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire4.ani.json"
        );
        t.script.AddStateLayerAnimation(1, b);
        var O = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire5.ani.json"
        );
        t.script.AddStateLayerAnimation(1, O);
        var w = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire6.ani.json"
        );
        t.script.AddStateLayerAnimation(1, w);
        var A = t.script.CreateAnimationByPath(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_light.ani.json"
        );
        t.script.AddStateLayerAnimation(1, A);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_normal05.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_normal03.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_normal02.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_normal01.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame08.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame07.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame06.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame05.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame04.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame03.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame02.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/doomfiledcreate_flame01.ani.json"
        );
        t.script.RemoveAnimation("animation/attack_4_e.ani");
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire1.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire_front.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire1.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire2.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire3.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire4.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire5.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_fire6.ani.json"
        );
        t.script.RemoveAnimation(
          "monster/kcontents3/hell/mars/effect/firehurricane_end_light.ani.json"
        );
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Bn);
  var Nn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "etc");
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Nn);
  var Xn = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        return (n !== null && n.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_1, true);
      };
      t.prototype.onUpdate = function (t, e) {
        n.prototype.onUpdate.call(this, t, e);
        if (t.isAction(ht.RoleActionMotion.ETC_MOTION_0)) {
          if (t.script.hasForce("DashAttack") == false) {
            return false;
          }
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        if (t.action == ht.RoleActionMotion.ATTACK_MOTION_1) {
          t.setAction(ht.RoleActionMotion.ETC_MOTION_0, true);
          t.script.addForce(600, 900, t.direction, undefined, "DashAttack");
          return false;
        } else {
          return n.prototype.onEndCurrentAni.call(this, t);
        }
      };
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        t.force.removeForce("DashAttack");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Xn);
  var Un = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(He);
    var a = o(Ge);
    var i = (function (u) {
      n(t, u);
      function t(t, e, n, o, r, i, a) {
        var s = u.call(this, t) || this;
        s.setData(e, n, o, r, i, a);
        return s;
      }
      t.prototype.setData = function (t, e, n, o, r, i) {
        this.tween
          .set({ x: t, y: e, z: n })
          .to({ z: n + 1e3 }, 1e3)
          .set({ x: o, y: r, z: i + 1e3 })
          .call(this.notify, this, [a.default.STEP_1])
          .to({ z: i }, 1e3)
          .call(this.notify, this, [a.default.STEP_2])
          .wait(1e3)
          .call(this.notify, this, [a.default.COMPLETE])
          .call(this.removeSelf, this);
        this.tween.setPaused(true);
        return this;
      };
      t.prototype.clean = function () {
        this.tween.clean();
        this.map = undefined;
        this.obj = undefined;
        this.tween = undefined;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Un);
  var Hn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(Un);
    var r = o(tn);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 2) {
          var n = t.position.x;
          var o = t.position.y;
          if (t.fightTarget) {
            n = t.fightTarget.position.x;
            o = t.fightTarget.position.y;
          }
          var r = new i.default(
            t.map,
            t.position.x,
            t.position.y,
            t.position.z,
            n,
            o,
            0
          );
          t.script.createPassiveObject(30007, 0, 0, 0, undefined, [r]);
        }
      };
      return e;
    })(r.default);
    e.default = a;
  });
  t(Hn);
  var Gn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Ve);
    var i = o(tn);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_0, true);
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 4) {
          var n = new r.default(t.map).setData(
            t.position.x + 80 * t.direction,
            t.position.y,
            t.position.z + 56,
            t.position.x + (200 + 80) * t.direction,
            t.position.y,
            t.position.z + 56,
            680
          );
          t.script.createPassiveObject(30568, 80, 0, 56, undefined, [n]);
        }
      };
      return e;
    })(i.default);
    e.default = a;
  });
  t(Gn);
  var Vn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Ve);
    var i = o(tn);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_0, true);
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 4) {
          var n = new r.default(t.map).setData(
            t.position.x + 80 * t.direction,
            t.position.y,
            t.position.z + 120,
            t.position.x + (140 + 80) * t.direction,
            t.position.y,
            t.position.z + 120,
            300
          );
          t.script.createPassiveObject(30549, 80, 0, 120, undefined, [n]);
        }
      };
      return e;
    })(i.default);
    e.default = a;
  });
  t(Vn);
  var $n = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
      };
      t.prototype.onFrame = function (t, e) {
        if (e == 1) {
          t.script.addForce(
            600,
            1200,
            t.direction,
            undefined,
            "LegionExpellerPierce"
          );
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.removePower("LegionExpellerPierce");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t($n);
  var qn = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["Log"] = 1)] = "Log";
      t[(t["MapTo"] = 2)] = "MapTo";
      t[(t["DungeonTo"] = 3)] = "DungeonTo";
      t[(t["EventCallback"] = 4)] = "EventCallback";
      t[(t["NextStage"] = 5)] = "NextStage";
      t[(t["TALK"] = 6)] = "TALK";
      t[(t["MONSTER_COMMAND"] = 7)] = "MONSTER_COMMAND";
      t[(t["COMMAND_ALL_ATTACK"] = 8)] = "COMMAND_ALL_ATTACK";
    })(n || (n = {}));
    e.default = n;
  });
  t(qn);
  var Kn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = o(qn);
    var a = o(Ct);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        t.state.apply(a.default.superarmor, 1e3);
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 1) {
          t.event(i.default.TALK, ["全军!"]);
        } else if (e == 4) {
          this.fs.curMapScene.event(i.default.MONSTER_COMMAND, [
            i.default.COMMAND_ALL_ATTACK,
          ]);
          t.event(i.default.TALK, ["突击!"]);
        }
      };
      return e;
    })(r.default);
    e.default = s;
  });
  t(Kn);
  var Yn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_0, true);
        var n = t.script.CreateAnimationByPath(
          "monster/characterstatue/swordmananimation.json",
          "swordmananimation/hardattack1.ani"
        );
        var o = t.script.CreateAnimationByPath(
          "monster/characterstatue/swordmananimation.json",
          "swordmananimation/hardattack2.ani"
        );
        t.script.AddStateLayerAnimation(1e3, n);
        t.script.AddStateLayerAnimation(1e3, o);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("swordmananimation/hardattack1.ani");
        t.script.RemoveAnimation("swordmananimation/hardattack2.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Yn);
  var Wn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (r) {
      n(t, r);
      function t() {
        return (r !== null && r.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
      };
      t.prototype.onFrame = function (t, e) {
        r.prototype.onFrame.call(this, t, e);
        if (e == 5) {
          var n = t.position.x - t.direction * 120;
          var o = t.position.y;
          if (t.fightTarget) {
            n = t.fightTarget.position.x;
            o = t.fightTarget.position.y;
          }
          this.fs.createPassiveObject(
            30069,
            n,
            o,
            0,
            undefined,
            undefined,
            t,
            undefined,
            undefined,
            true
          );
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Wn);
  var zn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_1, true);
      };
      t.prototype.onFrame = function (t, e) {
        if (e == 5) {
          var n = t.script.CreateAnimationByPath(
            "monster/lordoflight/lol.json",
            "lol/ef_laserring.ani"
          );
          t.script.AddStateLayerAnimation(1e3, n);
          t.script.createPassiveObject(46003, 80, 0, 145, undefined, undefined);
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("lol/ef_laserring.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(zn);
  var Qn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = o(w);
    var r = o(tn);
    var u = "LordofLightLight";
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ETC_MOTION_0, true);
        t.script.setValue("AroundLightning.count", 0);
        t.script.setValue("AroundLightning.cur", 0);
        t.map.on(u, this.Light, this, [t]);
      };
      t.prototype.onFrame = function (t, e) {
        if (e > 0 && e < 10) {
          var n = t.script.getValue("AroundLightning.count", 0);
          var o = s.default.randomInt(1, 3);
          for (var r = 0; r < o; r++) {
            var i = t.position.x + s.default.randomInt(-300, 300),
              a = t.position.y + s.default.randomInt(-110, 110);
            t.map.createPassiveObject(48012, i, a, 0, undefined, [1, u]);
            t.script.setValue("AroundLightning.position" + (n + r), [i, a]);
          }
          t.script.setValue("AroundLightning.count", n + o);
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
      };
      t.prototype.Light = function (t) {
        if (t.isDeath) return;
        var e = t.script.getValue("AroundLightning.count", 0);
        var n = t.script.getValue("AroundLightning.cur", 0);
        if (e - n > 0) {
          var o = t.script.getValue("AroundLightning.position" + n, [0, 0]),
            r = o[0],
            i = o[1];
          var a = t.map.createPassiveObject(30072, r, i, 0);
          if (a === null || a === void 0 ? void 0 : a.fu) a.fu.camp = t.fu.camp;
          t.script.setValue("AroundLightning.cur", n + 1);
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Qn);
  var Jn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_2, true);
        var n = t.script.CreateAnimationByPath(
          "monster/lordoflight/lol.json",
          "lol/ef_nova.ani"
        );
        var o = t.script.CreateAnimationByPath(
          "monster/lordoflight/lol.json",
          "lol/ef_donova.ani"
        );
        var r = t.script.CreateAnimationByPath(
          "monster/lordoflight/lol.json",
          "lol/ef_donovaarmor.ani"
        );
        t.script.AddStateLayerAnimation(1e3, n);
        t.script.AddStateLayerAnimation(1e3, o);
        t.script.AddStateLayerAnimation(1e3, r);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("lol/ef_nova.ani");
        t.script.RemoveAnimation("lol/ef_donova.ani");
        t.script.RemoveAnimation("lol/ef_donovaarmor.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Jn);
  var Zn = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_1, true);
        t.skillSuperArmor = true;
      };
      t.prototype.onEndCurrentAni = function (t) {
        if (t.isAction(ht.RoleActionMotion.ATTACK_MOTION_1)) {
          t.setAction(ht.RoleActionMotion.ATTACK_MOTION_4, true);
          t.script.addForce(
            500,
            100,
            t.direction,
            undefined,
            "PlatanyGDAttack"
          );
          t.script.resetHits();
          return false;
        }
        return e.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.onEndAction = function (t) {
        t.skillSuperArmor = false;
        e.prototype.onEndAction.call(this, t);
        t.script.removePower("PlatanyGDAttack");
      };
      t.prototype.onFrame = function (t, e) {
        if (t.isAction(ht.RoleActionMotion.ATTACK_MOTION_1));
        else {
          if (e == 6 || e == 14) {
            t.script.resetHits();
          }
          if (e == 20) {
            t.script.removePower("PlatanyGDAttack");
          }
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Zn);
  var to = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_1, true);
        t.skillSuperArmor = true;
      };
      t.prototype.onEndCurrentAni = function (t) {
        if (t.isAction(ht.RoleActionMotion.ATTACK_MOTION_1)) {
          t.script.resetHits();
          t.setAction(ht.RoleActionMotion.ATTACK_MOTION_4, true);
          return false;
        }
        return e.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.skillSuperArmor = false;
      };
      t.prototype.onFrame = function (t, e) {
        if (e == 6 || e == 14) {
          t.script.resetHits();
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(to);
  var eo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_1, true);
        t.skillSuperArmor = true;
        var n = t.script.CreateAnimationByPath(
          "monster/draconian/dlani.json",
          "dlani/ef_attackheart1.ani"
        );
        t.script.AddStateLayerAnimation(1e3, n);
        var o = t.script.CreateAnimationByPath(
          "monster/draconian/dlani.json",
          "dlani/ef_attackheart2.ani"
        );
        t.script.AddStateLayerAnimation(1e3, o);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("dlani/ef_attackheart1.ani");
        t.script.RemoveAnimation("dlani/ef_attackheart2.ani");
        t.skillSuperArmor = false;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(eo);
  var no = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_2, true);
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(no);
  var oo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_3, true);
        var n = t.script.CreateAnimationByPath(
          "monster/draconian/passiveobject/spark.ani"
        );
        t.script.AddStateLayerAnimation(1e3, n);
        t.skillSuperArmor = true;
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("monster/draconian/passiveobject/spark.ani");
        t.skillSuperArmor = false;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(oo);
  var ro = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_0, true);
        var n = t.script.CreateAnimationByPath(
          "monster/evileye/evileyeani.json",
          "evileyeani/eyeflash.ani"
        );
        t.script.AddStateLayerAnimation(1e3, n);
        if (t.fightTarget) {
          var o = t.fightTarget.position,
            r = o.x,
            i = o.y;
          this.fs.createPassiveObject(
            30303,
            r,
            i,
            0,
            undefined,
            undefined,
            t,
            undefined,
            undefined,
            true
          );
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        t.script.RemoveAnimation("evileyeani/eyeflash.ani");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(ro);
  var ao = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var c = 65534;
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.actions = ["frenzy1", "frenzy2", "frenzy3", "frenzy4"];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        var n = this.actions;
        var o = n.indexOf(t.action);
        var r;
        var i = t.script.getValue("SkYuFrenzyAttack.flagIndex");
        if (o >= 0) {
          if (n.length > 1) {
            if (o == n.length - 1) {
              return;
            } else if (t.body.isLast || i == c) {
              r = n[o + 1];
            }
          }
        } else {
          r = n[0];
        }
        if (r) {
          if (t.script.IsKeyDown(this.fs.Keys.left)) {
            t.direction = -1;
          } else if (t.script.IsKeyDown(this.fs.Keys.right)) {
            t.direction = 1;
          }
          this.stopSkill(t);
          t.setAction(r);
          var a = n.indexOf(r) + 1;
          if (a > 1) this.removeEffects(t, a - 1);
          for (var s = 1; s <= 4; s++) {
            var u = t.script.CreateAnimation(
              "animation/frenzy/sword" + a + "-" + s + ".ani"
            );
            t.script.AddStateLayerAnimation(1, u, 0, 0);
          }
          if (this.actions.indexOf(r) > 0) {
            var l = this.fs.getPressDirectionRate(t);
            var f = t.body.getFrameToFrameTime(0, 5);
            t.force.AddPower(30 * t.direction * l, 0, f, "linear", r);
          }
          t.script.playSound("R_SM_ATK");
          if (t.fu.weaponWav.length) {
            t.script.playSound(t.fu.weaponWav[0]);
          }
        }
      };
      t.prototype.removeEffects = function (t, e) {
        for (var n = 1; n <= 4; n++) {
          t.script.RemoveAnimation(
            "animation/frenzy/sword" + e + "-" + n + ".ani"
          );
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        this.stopSkill(t);
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (e == c) {
          t.script.setValue("SkYuFrenzyAttack.flagIndex", e);
        }
      };
      t.prototype.stopSkill = function (t) {
        var e;
        for (var n = 1; n <= 4; n++) this.removeEffects(t, n);
        t.script.setValue("SkYuFrenzyAttack.flagIndex");
        (e = t.force).removeForce.apply(e, this.actions);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(ao);
  var so = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(F);
    var i = o($e);
    var a = o(Me);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.actions = ["bloodblast", "bloodblast2"];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        if (t.isNormalAction()) {
          t.skillSuperArmor = true;
          t.setAction("bloodblast", true);
          t.script.playSound("SM_BLOOD_CAST");
          t.script.createPassiveObject(20120, 0, 0, -35);
          var n = t.script.createPassiveObject(20121, 0, 0, 10);
          n.attribute.attach(
            new r.default(
              i.default.getSkillDamage(
                this.skillid,
                t.script.GetSkillLevel(this.skillid),
                0
              )
            )
          );
          var o = t.script.createPassiveObject(20122, 0, 0, 0);
          o.attribute.attach(
            new r.default(
              i.default.getSkillDamage(
                this.skillid,
                t.script.GetSkillLevel(this.skillid),
                0
              )
            )
          );
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        t.skillSuperArmor = false;
        if (this.actions.indexOf(t.action) == 0) {
          t.setAction(this.actions[1], true);
          return false;
        }
        return e.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.onEndAction = function (t) {
        t.skillSuperArmor = false;
        e.prototype.onEndAction.call(this, t);
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(so);
  var uo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var c = o(w);
    var r = o(Ct);
    var i = o(Me);
    var a = (function (o) {
      n(t, o);
      function t() {
        var t = (o !== null && o.apply(this, arguments)) || this;
        t.actions = ["bloodyraveinhale", "bloodyraveslash"];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        if (t.isNormalAction()) {
          t.setAction(this.actions[0], true);
          t.script.setValue("SKBloodyRave.time", XOF.now());
          t.script.setValue("SKBloodyRave.ResetHits", XOF.now());
          this.fs.setSkillDamage(
            t,
            this.skillid,
            t.script.GetSkillLevel(this.skillid),
            0
          );
          t.script.playSound("SM_BLOOD_RAVE_STORM");
        }
      };
      t.prototype.onUpdate = function (t, e) {
        var n;
        if (t.action == this.actions[0]) {
          if (t.body.isLast) {
            if (t.script.getValue("SKBloodyRave.keyPress") != undefined) {
              t.actor.addTime(-e);
            }
            if (
              XOF.now() -
                t.script.getValue(
                  "SKBloodyRave.time",
                  Number.MAX_SAFE_INTEGER
                ) >=
              5e3
            ) {
              this.onEndCurrentAni(t);
            }
          }
          if (
            XOF.now() -
              t.script.getValue(
                "SKBloodyRave.ResetHits",
                Number.MAX_SAFE_INTEGER
              ) >=
            500
          ) {
            t.script.resetHits();
            t.script.setValue("SKBloodyRave.ResetHits", XOF.now());
          }
          var o = t.script.getValue("SKBloodyRave.Monsters", []);
          for (var r in o) {
            var i = o[r];
            if (i.isDeath) continue;
            if (!i.map) continue;
            if (
              (n = i === null || i === void 0 ? void 0 : i.roleData) === null ||
              n === void 0
                ? void 0
                : n.fixed
            )
              continue;
            var a = t.position.x + t.direction * 50;
            var s = t.position.y;
            var u = a - i.position.x;
            var l = s - i.position.y;
            if (Math.abs(u) > 5 || Math.abs(l) > 5) {
              i.moveBy(
                100 * (u > 1 ? 1 : -1),
                Math.abs(l) > 5 ? 60 * (l > 1 ? 1 : -1) : 0
              );
            }
          }
        }
      };
      t.prototype.onHit = function (t, e) {
        var n = t.script.getValue("SKBloodyRave.Monsters", []);
        if (this.fs.isMonster(e) || this.fs.isCharacter(e)) {
          if (n.indexOf(e) >= 0) {
            return;
          }
          e.state.apply(r.default.ctrlDamage, -1, t, 0);
          n.push(e);
          t.script.setValue("SKBloodyRave.Monsters", n);
        }
      };
      t.prototype.onKeyPress = function (t, e) {
        if (e) {
          t.script.setValue("SKBloodyRave.keyPress", e);
        }
      };
      t.prototype.onKeyRelease = function (t, e) {
        var n = t.script.getValue("SKBloodyRave.keyPress");
        if (n == e) {
          t.script.setValue("SKBloodyRave.keyPress");
          if (this.actions[0] == t.action) {
            if (t.body.isLast) {
              this.onEndCurrentAni(t);
            }
          }
        }
      };
      t.prototype.onFrame = function (t, e) {
        if (t.action == this.actions[0]) {
          if (e == 3) {
            var n = t.script.CreateAnimation("animation/bloodyrave/start1.ani");
            var o = t.script.CreateAnimation("animation/bloodyrave/start1.ani");
            t.script.AddStateLayerAnimation(1, n, 45, -90);
            t.script.AddStateLayerAnimation(1, o, 45, -90);
          }
          if (e == 8) {
            this.createEffect(t);
          }
        }
      };
      t.prototype.createEffect = function (t) {
        var e = t.script.CreateAnimation("animation/bloodyrave/loop1.ani");
        var n = t.script.CreateAnimation("animation/bloodyrave/loop2.ani");
        t.script.AddStateLayerAnimation(1, e, 45, -90);
        t.script.AddStateLayerAnimation(1, n, 45, -90);
        {
          var o = t.script.CreateAnimation("animation/bloodyrave/line1.ani");
          var r = t.script.CreateAnimation("animation/bloodyrave/line2.ani");
          t.script.AddStateLayerAnimation(1, o, 45, -90);
          t.script.AddStateLayerAnimation(1, r, 45, -90);
          o.count = r.count = -1;
        }
        var i = 1,
          a = 10,
          s = 0.3,
          u = 1.1;
        for (var l = i; l < a; l++) {
          var f = t.script.CreateAnimation("animation/bloodyrave/typhoon.ani");
          f.name = "typhoon" + l;
          f.size_ = s + ((u - s) / (a - i)) * l;
          f.to(c.default.randomInt(0, f.max));
          t.script.AddStateLayerAnimation(1, f, 45 + l * 25, -90);
        }
      };
      t.prototype.removeEffect = function (t, e) {
        if (e === void 0) {
          e = 0;
        }
        if (e > 0) {
          {
            var n = t.actor.getChildByName("animation/bloodyrave/loop1.ani");
            var o = t.map.tween(n).to({ alpha2: 0 }, e);
            o.call(t.map.removeTween, t.map, [o]);
          }
          {
            var n = t.actor.getChildByName("animation/bloodyrave/loop2.ani");
            var o = t.map.tween(n).to({ alpha2: 0 }, e);
            o.call(t.map.removeTween, t.map, [o]);
          }
          {
            var n = t.actor.getChildByName("animation/bloodyrave/line1.ani");
            var o = t.map.tween(n).to({ alpha2: 0 }, e);
            o.call(t.map.removeTween, t.map, [o]);
          }
          {
            var n = t.actor.getChildByName("animation/bloodyrave/line2.ani");
            var o = t.map.tween(n).to({ alpha2: 0 }, e);
            o.call(t.map.removeTween, t.map, [o]);
          }
        } else {
          t.script.RemoveAnimation("animation/bloodyrave/loop1.ani");
          t.script.RemoveAnimation("animation/bloodyrave/loop2.ani");
          t.script.RemoveAnimation("animation/bloodyrave/line1.ani");
          t.script.RemoveAnimation("animation/bloodyrave/line2.ani");
        }
        for (var r = 1; r < 10; r++) {
          var i = "typhoon" + r;
          if (e > 0) {
            var n = t.actor.getChildByName(i);
            var o = t.map.tween(n).to({ alpha2: 0 }, e);
            o.call(t.map.removeTween, t.map, [o]);
          } else {
            t.script.RemoveAnimation(i);
          }
        }
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (t.action == this.actions[1]) {
          if (e == 65534) {
            t.script.playSound("SM_BLOOD_RAVE_ATK");
            this.fs.setSkillDamage(
              t,
              this.skillid,
              t.script.GetSkillLevel(this.skillid),
              1
            );
            this.releaseMonster(t);
            t.script.createPassiveObject(20041, 0, 0, 0);
          }
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        this.removeEffect(t, 500);
        t.script.setValue("SKBloodyRave.keyPress");
        if (this.actions.indexOf(t.action) == 0) {
          t.setAction(this.actions[1], true);
          for (var e = 1; e <= 4; e++) {
            var n = t.script.CreateAnimation(
              "animation/bloodyrave/sword" + e + ".ani"
            );
            t.script.AddStateLayerAnimation(1, n, 0, 0);
          }
          return false;
        }
        return o.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.cd = function (t) {};
      t.prototype.onEndAction = function (t) {
        o.prototype.cd.call(this, t);
        this.releaseMonster(t);
        t.script.setValue("SKBloodyRave.ResetHits");
        t.script.setValue("SKBloodyRave.keyPress");
        o.prototype.onEndAction.call(this, t);
        for (var e = 1; e <= 4; e++) {
          t.script.RemoveAnimation("animation/bloodyrave/sword" + e + ".ani");
        }
        t.script.RemoveAnimation("animation/bloodyrave/start1.ani");
        t.script.RemoveAnimation("animation/bloodyrave/start1.ani");
        t.script.RemoveAnimation("animation/bloodyrave/loop1.ani");
        t.script.RemoveAnimation("animation/bloodyrave/loop2.ani");
        this.removeEffect(t);
      };
      t.prototype.releaseMonster = function (t) {
        var e = t.script.getValue("SKBloodyRave.Monsters", []);
        for (var n in e) {
          var o = e[n];
          o.state.unApply(r.default.ctrlDamage);
        }
        t.script.setValue("SKBloodyRave.Monsters");
      };
      return t;
    })(i.default);
    e.default = a;
  });
  t(uo);
  var lo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Me);
    var i = (function (i) {
      n(t, i);
      function t() {
        var t = (i !== null && i.apply(this, arguments)) || this;
        t.actions = ["bloodswordmake", "bloodswordcharge"];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        if (t.isNormalAction()) {
          t.setAction("bloodswordmake", true);
          var n = t.script.CreateAnimation("animation/bloodsword/make.ani");
          var o = t.script.CreateAnimation(
            "animation/bloodsword/make_dodge.ani"
          );
          t.script.AddStateLayerAnimation(1, n, 0, 0);
          t.script.AddStateLayerAnimation(2, o, 0, 0);
          t.hiter.attackEnabled = false;
          this.fs.setSkillDamage(
            t,
            this.skillid,
            t.script.GetSkillLevel(this.skillid)
          );
        }
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        if (t.action == this.actions[1]) {
          if (e == 1) {
            t.script.addForce(300, 800, t.direction, undefined, t.action);
            t.script.createPassiveObject(20066, 200, 0, 60);
          }
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        t.script.RemoveAnimation("animation/bloodsword/make.ani");
        t.script.RemoveAnimation("animation/bloodsword/make_dodge.ani");
        if (this.actions.indexOf(t.action) == 0) {
          var e = t.script.CreateAnimation(
            "animation/bloodsword/charge_body.ani"
          );
          var n = t.script.CreateAnimation("animation/bloodsword/charge.ani");
          var o = t.script.CreateAnimation(
            "animation/bloodsword/charge_dodge.ani"
          );
          var r = t.script.CreateAnimation("animation/bloodsword/dust.ani");
          t.script.AddStateLayerAnimation(1, e, 0, 0);
          t.script.AddStateLayerAnimation(2, n, 0, 0);
          t.script.AddStateLayerAnimation(3, o, 0, 0);
          t.script.AddStateLayerAnimation(-1, r, 0, 0);
          t.setAction(this.actions[1], true);
          return false;
        }
        return i.prototype.onEndCurrentAni.call(this, t);
      };
      t.prototype.onEndAction = function (t) {
        var e;
        i.prototype.onEndAction.call(this, t);
        t.hiter.attackEnabled = true;
        t.script.RemoveAnimation("animation/bloodsword/make.ani");
        t.script.RemoveAnimation("animation/bloodsword/make_dodge.ani");
        t.script.RemoveAnimation("animation/bloodsword/charge_body.ani");
        t.script.RemoveAnimation("animation/bloodsword/charge.ani");
        t.script.RemoveAnimation("animation/bloodsword/charge_dodge.ani");
        t.script.RemoveAnimation("animation/bloodsword/dust.ani");
        (e = t.force).removeForce.apply(e, this.actions);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(lo);
  var fo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.Attack_Throw = void 0;
    var r = o(Ve);
    var i = o(tn);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setAction("attack1");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 7) {
          var n = new r.default(t.map);
          n.setData(
            t.position.x + 0 * t.direction,
            t.position.y,
            t.position.z + 75,
            t.position.x + (300 + 70) * t.direction,
            t.position.y,
            t.position.z + 75,
            480
          );
          t.script.createPassiveObject(30539, 0, 0, 75, undefined, [n]);
        }
      };
      return e;
    })(i.default);
    e.Attack_Throw = a;
  });
  t(fo);
  fo.Attack_Throw;
  var co = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.ZealotDagger = void 0;
    var r = o(Ve);
    var i = o(tn);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 2) {
          var n = new r.default(t.map);
          n.setData(
            t.position.x + 30 * t.direction,
            t.position.y,
            t.position.z + 50,
            t.position.x + (300 + 70) * t.direction,
            t.position.y,
            t.position.z + 50,
            850
          );
          t.script.createPassiveObject(30014, 30, 0, 50, undefined, [n]);
        }
      };
      return e;
    })(i.default);
    e.ZealotDagger = a;
  });
  t(co);
  co.ZealotDagger;
  var po = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.ZealotnewDagger = void 0;
    var r = o(Ve);
    var i = o(tn);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
      };
      e.prototype.onFrame = function (t, e) {
        if (e == 2) {
          var n = new r.default(t.map);
          n.setData(
            t.position.x + 30 * t.direction,
            t.position.y,
            t.position.z + 50,
            t.position.x + (300 + 70) * t.direction,
            t.position.y,
            t.position.z + 50,
            850
          );
          t.script.createPassiveObject(30014, 30, 0, 50, undefined, [n]);
        }
      };
      return e;
    })(i.default);
    e.ZealotnewDagger = a;
  });
  t(po);
  po.ZealotnewDagger;
  var ho = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.ZhangfeiSkill1 = void 0;
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
      };
      return e;
    })(r.default);
    e.ZhangfeiSkill1 = i;
  });
  t(ho);
  ho.ZhangfeiSkill1;
  var vo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.ZhangfeiAttack1 = void 0;
    var r = o(tn);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        t.script.playSound("R_ZHANGFEI_ATK");
      };
      return e;
    })(r.default);
    e.ZhangfeiAttack1 = i;
  });
  t(vo);
  vo.ZhangfeiAttack1;
  var yo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.JojoAttack = void 0;
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        this.subAnimation(t, true);
      };
      t.prototype.subAnimation = function (t, e) {
        var n = [
          "animation/Effect/ora_back3.ani",
          0,
          -1,
          "animation/new/sword_effect/jojo_sword_normal_attack1.ani",
          0,
          1,
          "animation/new/sword_effect/jojo_sword_effect_attack1.ani",
          0,
          3,
          "animation/new/sword_effect/jojo_sword_normal_attack1_1.ani",
          0,
          4,
          "animation/new/sword_effect/jojo_sword_effect_attack1_1.ani",
          0,
          4,
          "animation/Effect/ora_back3.ani",
          0,
          -1,
          "animation/new/jojo_eye_effect/attack_eye.ani",
          0,
          2,
          "animation/Effect/ora_front3.ani",
          0,
          1,
        ];
        t.script.subAnimation(
          n,
          e ? 1 : 0,
          "monster/newmonsters/3kingdoms/jojo/animation/new.json"
        );
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        this.subAnimation(t, false);
      };
      t.prototype.onFrame = function (t, e) {
        if (e == 9) {
          t.script.resetHits();
        }
      };
      return t;
    })(r.default);
    e.JojoAttack = i;
  });
  t(yo);
  yo.JojoAttack;
  var _o = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.JojoTeleport = void 0;
    var r = o(tn);
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        this.subAnimation(t, true);
      };
      t.prototype.subAnimation = function (t, e) {
        var n = [
          "Animation/new/jojo_eye_effect/teleport_eye.ani",
          0,
          2,
          "Animation/Effect/Dust.ani",
          0,
          2,
          "Animation/new/sword_effect/jojo_sword_effect_attack3.ani",
          0,
          5,
          "Animation/new/sword_effect/jojo_sword_normal_attack3.ani",
          0,
          1,
          "Animation/Effect/DustDodge.ani",
          0,
          3,
          "Animation/Effect/Dust_R.ani",
          0,
          4,
          "Animation/Effect/DustDodge_R.ani",
          0,
          5,
          "Animation/Effect/ora_back2.ani",
          0,
          -1,
          "Animation/Effect/ora_front2.ani",
          0,
          1,
        ];
        t.script.subAnimation(
          n,
          e ? 1 : 0,
          "monster/newmonsters/3kingdoms/jojo/animation/new.json"
        );
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        this.subAnimation(t, false);
      };
      t.prototype.onFrame = function (t, e) {
        var n = t.fightTarget;
        if (n) {
          if (e == 6) {
            t.position.set(n.x, n.y);
          } else if (e == 9) {
            t.script.playSound("R_CAOCAO_ATK");
          }
        }
      };
      return t;
    })(r.default);
    e.JojoTeleport = i;
  });
  t(_o);
  _o.JojoTeleport;
  var go = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.JojoBladeDown = void 0;
    var r = o(Ve);
    var i = o(tn);
    var a = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(4, true, "attack");
        this.subAnimation(t, true);
      };
      t.prototype.subAnimation = function (t, e) {
        var n = [
          "Animation/Effect/ora_back5.ani",
          0,
          -1,
          "Animation/Effect/ora_front5.ani",
          0,
          1,
        ];
        t.script.subAnimation(
          n,
          e ? 1 : 0,
          "monster/newmonsters/3kingdoms/jojo/animation/new.json"
        );
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        this.subAnimation(t, false);
      };
      t.prototype.onFrame = function (t, e) {
        if (e == 1) {
          t.script.createPassiveObject(54858, 240, 0, 0);
        } else if (e == 4) {
          t.script.playSound("R_CAOCAO_ATK");
          var n = new r.default(t.map);
          n.setData(
            t.position.x + 160 * t.direction,
            t.position.y,
            t.position.z,
            t.position.x + (160 + 300) * t.direction,
            t.position.y,
            t.position.z,
            600
          );
          t.script.createPassiveObject(54859, 160, 0, 0, undefined, [n]);
        }
      };
      return t;
    })(i.default);
    e.JojoBladeDown = a;
  });
  t(go);
  go.JojoBladeDown;
  var bo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = o(w);
    var r = o(tn);
    var u = "LordofLightLight";
    var i = (function (e) {
      n(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setAction(ht.RoleActionMotion.ATTACK_MOTION_3, true);
        t.script.setValue("AroundLightning.count", 0);
        t.script.setValue("AroundLightning.cur", 0);
        t.map.on(u, this.Light, this, [t]);
        this.subAnimation(t, 1);
      };
      t.prototype.subAnimation = function (t, e) {
        var n = [
          "Animation/Effect/blackfire_area_e_back.ani",
          0,
          -3,
          "Animation/new/jojo_eye_effect/drop_sword_eye.ani",
          0,
          7,
          "Animation/Effect/ora_back.ani",
          0,
          -1,
          "Animation/Effect/ora_front.ani",
          0,
          1,
          "Animation/Effect/blackfire_area_e_front.ani",
          0,
          2,
          "Animation/Effect/blackfire_area_e_charge1.ani",
          0,
          3,
          "Animation/Effect/blackfire_area_e_charge2.ani",
          0,
          4,
          "Animation/Effect/lv2_start_Current_Shot_Normal.ani",
          0,
          5,
          "Animation/Effect/lv2_start_Current_Shot_Dodge.ani",
          0,
          6,
          "Animation/Effect/lv2_start_Charge_Dodge.ani",
          0,
          7,
        ];
        t.script.subAnimation(
          n,
          e,
          "monster/newmonsters/3kingdoms/jojo/animation/new.json"
        );
      };
      t.prototype.onFrame = function (t, e) {
        if (e > 5 && e < 36) {
          var n = t.script.getValue("AroundLightning.count", 0);
          var o = s.default.randomInt(1, 2);
          for (var r = 0; r < o; r++) {
            var i = t.position.x + s.default.randomInt(-300, 300),
              a = t.position.y + s.default.randomInt(-110, 110);
            t.map.createPassiveObject(48012, i, a, 0, undefined, [1, u]);
            t.script.setValue("AroundLightning.position" + (n + r), [i, a]);
          }
          t.script.setValue("AroundLightning.count", n + o);
        }
      };
      t.prototype.onEndAction = function (t) {
        e.prototype.onEndAction.call(this, t);
        this.subAnimation(t, 0);
      };
      t.prototype.Light = function (t) {
        if (t.isDeath) return;
        var e = t.script.getValue("AroundLightning.count", 0);
        var n = t.script.getValue("AroundLightning.cur", 0);
        if (e - n > 0) {
          var o = t.script.getValue("AroundLightning.position" + n, [0, 0]),
            r = o[0],
            i = o[1];
          var a = t.map.createPassiveObject(30072, r, i, 0);
          if (a === null || a === void 0 ? void 0 : a.fu) a.fu.camp = t.fu.camp;
          t.script.setValue("AroundLightning.cur", n + 1);
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(bo);
  var Oo = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.YopoAttack = void 0;
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t = (n !== null && n.apply(this, arguments)) || this;
        t.animationRoot = "monster/newmonsters/3kingdoms/yopo/animation.json";
        t.SUB_ANI = [
          "Animation/effect/normal/ora_back.ani",
          0,
          -1,
          "Animation/effect/normal/ora_front.ani",
          0,
          1,
          "Animation/effect/normal/loop_dust.ani",
          0,
          2,
          "Animation/effect/swing/swing_doge.ani",
          3,
          3,
        ];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(0, true, "attack");
        n.prototype.onSetAction.call(this, t, e);
      };
      return t;
    })(r.default);
    e.YopoAttack = i;
  });
  t(Oo);
  Oo.YopoAttack;
  var wo = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.YopoAttack1 = void 0;
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t = (n !== null && n.apply(this, arguments)) || this;
        t.animationRoot = "monster/newmonsters/3kingdoms/yopo/animation.json";
        t.SUB_ANI = [
          "Animation/effect/normal/ora_back.ani",
          0,
          -1,
          "Animation/effect/normal/ora_front.ani",
          0,
          1,
          "Animation/rush_smog.ani",
          0,
          2,
        ];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(1, true, "attack");
        t.script.removePower("Tackle");
        t.script.addForce(1e3, 600, t.direction, undefined, "Tackle");
        n.prototype.onSetAction.call(this, t, e);
      };
      t.prototype.onEndAction = function (t) {
        n.prototype.onEndAction.call(this, t);
        t.script.removePower("Tackle");
      };
      return t;
    })(r.default);
    e.YopoAttack1 = i;
  });
  t(wo);
  wo.YopoAttack1;
  var Ao = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.YopoAttack2 = void 0;
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t = (n !== null && n.apply(this, arguments)) || this;
        t.animationRoot = "monster/newmonsters/3kingdoms/yopo/animation.json";
        t.SUB_ANI = [
          "Animation/effect/normal/ora_back.ani",
          0,
          -1,
          "Animation/effect/normal/ora_front.ani",
          0,
          1,
          "Animation/effect/normal/loop_dust.ani",
          0,
          2,
          "Animation/effect/swing/swing2_doge.ani",
          0,
          3,
          "Animation/effect/swing/swing_doge3.ani",
          0,
          4,
          "Animation/effect/eye_effect/mouse3.ani",
          0,
          5,
        ];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(2, true, "attack");
        n.prototype.onSetAction.call(this, t, e);
      };
      return t;
    })(r.default);
    e.YopoAttack2 = i;
  });
  t(Ao);
  Ao.YopoAttack2;
  var Eo = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.YopoAttack4 = void 0;
    var r = n(tn);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t = (n !== null && n.apply(this, arguments)) || this;
        t.animationRoot = "monster/newmonsters/3kingdoms/yopo/animation.json";
        t.SUB_ANI = [
          "Animation/effect/skill2/04_normal_back_opt.ani",
          0,
          -2,
          "Animation/effect/skill2/01_dust_front_opt.ani",
          0,
          -1,
          "Animation/effect/normal/ora_back.ani",
          0,
          1,
          "Animation/effect/normal/ora_front.ani",
          0,
          2,
          "Animation/effect/normal/loop_dust.ani",
          0,
          3,
          "Animation/effect/skill2/03_dodge_back_opt.ani",
          0,
          5,
          "Animation/effect/skill2/02_dodge_front.ani",
          0,
          6,
          "Animation/effect/eye_effect/eye2.ani",
          0,
          7,
        ];
        return t;
      }
      t.prototype.onSetAction = function (t, e) {
        t.setMotionAction(4, true, "attack");
        n.prototype.onSetAction.call(this, t, e);
      };
      return t;
    })(r.default);
    e.YopoAttack4 = i;
  });
  t(Eo);
  Eo.YopoAttack4;
  var To = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    var o;
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(ke);
    var i = n(xe);
    var a = n(De);
    var s = n(Ie);
    var u = n(Re);
    var l = n(Le);
    var f = n(Fe);
    var c = n(Be);
    var p = n(Ne);
    var d = n(Xe);
    var h = n(Ue);
    var v = n(qe);
    var y = n(Ke);
    var _ = n(Ye);
    var m = n(We);
    var g = n(Qe);
    var b = n(Je);
    var O = n(Ze);
    var w = n(en);
    var A = n(nn);
    var E = n(on);
    var T = n(rn);
    var C = n(an);
    var P = n(sn);
    var j = n(un);
    var S = n(ln);
    var M = n(fn);
    var k = n(cn);
    var x = n(pn);
    var D = n(dn);
    var I = n(hn);
    var R = n(vn);
    var L = n(yn);
    var F = n(_n);
    var B = n(mn);
    var N = n(gn);
    var X = n(bn);
    var U = n(On);
    var H = n(wn);
    var G = n(An);
    var V = n(En);
    var $ = n(Tn);
    var q = n(Cn);
    var K = n(Pn);
    var Y = n(jn);
    var W = n(Sn);
    var z = n(Mn);
    var Q = n(kn);
    var J = n(xn);
    var Z = n(Dn);
    var tt = n(In);
    var et = n(Rn);
    var nt = n(Ln);
    var ot = n(Fn);
    var rt = n(Bn);
    var it = n(Nn);
    var at = n(Xn);
    var st = n(Hn);
    var ut = n(Gn);
    var lt = n(Vn);
    var ft = n($n);
    var ct = n(Kn);
    var pt = n(Yn);
    var dt = n(Wn);
    var ht = n(zn);
    var vt = n(Qn);
    var yt = n(Jn);
    var _t = n(Zn);
    var mt = n(to);
    var gt = n(eo);
    var bt = n(no);
    var Ot = n(oo);
    var wt = n(ro);
    var At = n(ao);
    var Et = n(so);
    var Tt = n(uo);
    var Ct = n(lo);
    var Pt = n(bo);
    var jt =
      ((o = {}),
      (o[51] = r.default),
      (o[100] = a.default),
      (o[101] = p.default),
      (o[102] = l.default),
      (o[106] = u.default),
      (o[107] = v.default),
      (o[111] = i.default),
      (o[120] = h.default),
      (o[122] = d.default),
      (o[125] = _.default),
      (o[129] = y.default),
      (o[131] = s.default),
      (o[132] = f.default),
      (o[133] = c.default),
      (o[136] = m.default),
      (o[137] = g.default),
      (o[134] = b.default),
      (o[138] = O.default),
      (o[139] = At.default),
      (o[130] = Et.default),
      (o[140] = Tt.default),
      (o[141] = Ct.default),
      (o["monster/goblinthrower/throwstone"] = w.default),
      (o["monster/seagab/seagabthrow"] = C.default),
      (o["monster/hillgab/hillgabthrow"] = P.default),
      (o["monster/lightkinol/attack1"] = j.default),
      (o["monster/lightkinol/seriallightning"] = S.default),
      (o["monster/lightkinol/aroundlightning"] = M.default),
      (o["monster/goblin/suriken"] = st.default),
      (o["monster/taubeast/attack"] = A.default),
      (o["monster/taubeast/roar"] = E.default),
      (o["monster/tau/attack1"] = T.default),
      (o["monster/tau/heading"] = T.default),
      (o["monster/tau/AssaulterPunch"] = F.default),
      (o["monster/tau/Tackle"] = L.default),
      (o["monster/tau/shauta/EarthQuake"] = D.default),
      (o["monster/tau/shauta/EarthQuakeStrong"] = I.default),
      (o["monster/tau/shauta/ShautaTackleReady"] = R.default),
      (o["monster/lugaru/LugaruAttack"] = B.default),
      (o["monster/lugaru/LugaruJumpAttack1"] = X.default),
      (o["monster/lugaru/LugaruJumpAttack2"] = N.default),
      (o["monster/lugaru/KurogaruAttack_Curse"] = U.default),
      (o["monster/lugaru/KurogaruJumpAttack1_Curse"] = H.default),
      (o["monster/lugaru/KurogarJumpAttack2_Curse"] = G.default),
      (o["monster/soceress/KerahaCast"] = k.default),
      (o["monster/soceress/KerahaCast2"] = x.default),
      (o["monster/kcontents3/hell/normal_man/attack1"] = $.default),
      (o["monster/kcontents3/hell/normal_man/attack2"] = V.default),
      (o["monster/kcontents3/hell/normal_man/attack3"] = q.default),
      (o["monster/kcontents3/hell/normal_woman/attack1"] = W.default),
      (o["monster/kcontents3/hell/normal_woman/attack2"] = Y.default),
      (o["monster/kcontents3/hell/normal_woman/attack3"] = K.default),
      (o["monster/kcontents3/hell/crescent/attack1"] = z.default),
      (o["monster/kcontents3/hell/crescent/attack2"] = Q.default),
      (o["monster/kcontents3/hell/crescent/attack3"] = J.default),
      (o["monster/kcontents3/hell/crescent/attack4"] = Z.default),
      (o["monster/kcontents3/hell/mars/attack1"] = et.default),
      (o["monster/kcontents3/hell/mars/attack2"] = tt.default),
      (o["monster/kcontents3/hell/mars/attack3"] = nt.default),
      (o["monster/kcontents3/hell/mars/attack4"] = ot.default),
      (o["monster/kcontents3/hell/mars/attack5"] = rt.default),
      (o["monster/characterstatue/fighterstatue/wakeup"] = it.default),
      (o["monster/characterstatue/magicianstatue/attack"] = ut.default),
      (o["monster/characterstatue/gunnerstatue/attack"] = lt.default),
      (o["monster/characterstatue/attackInfo/SwordmanStatueAttack"] =
        pt.default),
      (o["monster/new_flydragon/serimalion/dashAttack"] = at.default),
      (o["monster/soldier/attackInfo/LegionExpellerPierce"] = ft.default),
      (o["monster/soldier/attackInfo/AxionExpellerCall"] = ct.default),
      (o["monster/dollmaster/attackInfo/StoneMasterCast"] = dt.default),
      (o["monster/lordoflight/attackInfo/LordofLightCast"] = ht.default),
      (o["monster/lordoflight/attackInfo/LordofLightNova"] = yt.default),
      (o["monster/lordoflight/attackInfo/LordofLightLight"] = vt.default),
      (o["monster/new_golem/attackInfo/PlatanyGDAttack"] = _t.default),
      (o["monster/new_golem/attackInfo/PlatanyDoubleAttack"] = mt.default),
      (o["monster/draconian/attackInfo/LakiusAttackHeart"] = gt.default),
      (o["monster/draconian/attackInfo/LakiusAttackLong"] = bt.default),
      (o["monster/draconian/attackInfo/LakiusAttackSpark"] = Ot.default),
      (o["monster/evileye/attackInfo/EvilEyeAniLaserReady"] = wt.default),
      (o["monster/newmonsters/3kingdoms/sniper/sniper/attack_throw"] =
        fo.Attack_Throw),
      (o["monster/zealot/attackInfo/ZealotDagger"] = co.ZealotDagger),
      (o["monster/zealot/attackInfo/ZealotnewDagger"] = po.ZealotnewDagger),
      (o["monster/newmonsters/3kingdoms/zhangfei/attackInfo/ZhangfeiAttack"] =
        ho.ZhangfeiSkill1),
      (o["monster/newmonsters/3kingdoms/zhangfei/attackInfo/ZhangfeiAttack1"] =
        vo.ZhangfeiAttack1),
      (o["monster/newmonsters/3kingdoms/jojo/attackInfo/JojoAttack"] =
        yo.JojoAttack),
      (o["monster/newmonsters/3kingdoms/jojo/attackInfo/JojoTeleport"] =
        _o.JojoTeleport),
      (o["monster/newmonsters/3kingdoms/jojo/attackInfo/JojoBladeDown"] =
        go.JojoBladeDown),
      (o["monster/newmonsters/3kingdoms/jojo/attackInfo/JojoDropsword"] =
        Pt.default),
      (o["monster/newmonsters/3kingdoms/yopo/attackInfo/YopoAttack"] =
        Oo.YopoAttack),
      (o["monster/newmonsters/3kingdoms/yopo/attackInfo/YopoAttack1"] =
        wo.YopoAttack1),
      (o["monster/newmonsters/3kingdoms/yopo/attackInfo/YopoAttack2"] =
        Ao.YopoAttack2),
      (o["monster/newmonsters/3kingdoms/yopo/attackInfo/YopoAttack4"] =
        Eo.YopoAttack4),
      o);
    e.default = jt;
  });
  t(To);
  var Co = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    e.BehaviorParser =
      e.BehaviorRoot =
      e.BehaviorAlwaysSuccess =
      e.BehaviorAlwaysFail =
      e.BehaviorNot =
      e.BehaviorCondition =
      e.BehaviorAction =
      e.BehaviorSelector =
      e.BehaviorSequence =
      e.BehaviorParallel =
      e.BehaviorRandomSelector =
      e.BehaviorNodeBase =
      e.BehaviorState =
        void 0;
    var r;
    (function (t) {
      t["SUSCESS"] = "SUSCESS";
      t["FAILD"] = "FAILD";
      t["RUNNING"] = "RUNNING";
    })((r = e.BehaviorState || (e.BehaviorState = {})));
    var n = 0;
    var i = (function () {
      function t() {
        n++;
        this.hashCode = n;
        this.pushList = true;
      }
      t.prototype.setRoot = function (t) {
        this.root = t;
      };
      t.prototype.$excute = function () {
        var t = r.RUNNING;
        if (this.root) {
          this.root.push(this);
          if (!this.root.hasLast() && this.enter) this.enter();
          t = this.excute();
          if (t == "RUNNING");
          else {
            this.root.continue(this);
            this.root.pop();
          }
        }
        return t;
      };
      t.prototype.excute = function () {
        return r.SUSCESS;
      };
      t.prototype.set = function (t, e) {
        if (this.root) {
          this.root.set(t, e);
        } else {
          XOF.log("未加入根节点无法设置数据.");
        }
        return this;
      };
      t.prototype.get = function (t, e) {
        if (this.root) {
          return this.root.get(t, e);
        } else {
          XOF.log("未加入根节点无法读取数据.");
        }
      };
      Object.defineProperty(t.prototype, "self", {
        get: function () {
          return this.get("self");
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.getInput = function (t, e) {
        var n;
        if (
          (n = this === null || this === void 0 ? void 0 : this.$input) ===
            null || n === void 0
            ? void 0
            : n[t]
        ) {
          return this.root.get(this.$input[t], e);
        } else {
          XOF.log("behaviorTree getInput: 错误的索引");
        }
      };
      t.prototype.setOutput = function (t, e) {
        var n;
        if (
          (n = this === null || this === void 0 ? void 0 : this.$output) ===
            null || n === void 0
            ? void 0
            : n[t]
        ) {
          this.root.set(this.$output[t], e);
        } else {
          XOF.log("behaviorTree setOutput: 错误的索引");
        }
      };
      return t;
    })();
    e.BehaviorNodeBase = i;
    var a = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.childmax = t || 255;
        if (e.childmax > 0) e.childs = [];
        return e;
      }
      t.prototype.addChilds = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        for (var n in t) {
          this.addChild(t[n]);
        }
        return this;
      };
      t.prototype.addChild = function (t) {
        if (this.length > this.childmax) {
          XOF.log(
            "判定该类型节点子节点数数不能超过" + this.childmax + "个",
            this.hashCode
          );
          return this;
        }
        if (this.indexOf(t) >= 0) {
          return this;
        }
        this.childs.push(t);
        return this;
      };
      t.prototype.indexOf = function (t) {
        return this.childs.indexOf(t);
      };
      Object.defineProperty(t.prototype, "length", {
        get: function () {
          var t, e;
          return (e =
            (t = this.childs) === null || t === void 0 ? void 0 : t.length) !==
            null && e !== void 0
            ? e
            : 0;
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(i);
    var s = (function (e) {
      o(t, e);
      function t() {
        var t = e.call(this) || this;
        t.params = [];
        return t;
      }
      t.prototype.excute = function () {
        var t = this.randomIndex();
        if (this.childs[t]) return this.childs[t].$excute();
        return r.SUSCESS;
      };
      t.prototype.randomIndex = function () {
        var n = this;
        if (this.root.hasLast()) {
          var t = this.root.next();
          var e = this.indexOf(t);
          if (e >= 0) {
            return e;
          } else {
            XOF.log("BehaviorRandomSelector异常,找不到子节点", t.hashCode);
          }
        } else {
          var o = true;
          if (this.params.length == this.length) {
            o = false;
          } else if (this.params.length > 0) {
            XOF.log(
              "BehaviorRandomSelector参数长度与子节点树不符." +
                this.params.length +
                " " +
                this.length
            );
          }
          if (o)
            this.childs.forEach(function (t, e) {
              return (n.params[e] = 100);
            });
          var r = this.root.random();
          var i = r * this.sum;
          for (var e = 0, a = 0; e < this.params.length; e++) {
            i -= a;
            a = this.params[e];
            if (i <= a) {
              return e;
            }
          }
        }
        return -1;
      };
      t.prototype.setRandom = function (t, e) {
        this.params[t] = e;
        return this;
      };
      Object.defineProperty(t.prototype, "sum", {
        get: function () {
          var e = 0;
          this.params.map(function (t) {
            return (e += t);
          });
          return e;
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(a);
    e.BehaviorRandomSelector = s;
    var u = (function (e) {
      o(t, e);
      function t() {
        return (e !== null && e.apply(this, arguments)) || this;
      }
      t.prototype.excute = function () {
        var t = r.RUNNING;
        var e = 0;
        for (var n = 0; n < this.childs.length; n++) {
          var o = this.childs[n];
          if (o.$excute() != r.RUNNING) e += 1;
        }
        if (e >= this.childs.length) {
          t = r.SUSCESS;
        }
        return t;
      };
      t.prototype.addChild = function (t) {
        if (t instanceof c || t instanceof p) {
          e.prototype.addChild.call(this, t);
        } else {
          XOF.log("简单并行节点只能添加动作节点或条件节点.");
        }
        return this;
      };
      return t;
    })(a);
    e.BehaviorParallel = u;
    var l = (function (t) {
      o(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = r.FAILD;
        var e = this.startIndex();
        if (e >= 0) {
          for (; e < this.childs.length; e++) {
            var n = this.childs[e];
            t = n.$excute();
            if (t == r.SUSCESS);
            else {
              break;
            }
          }
        }
        return t;
      };
      e.prototype.startIndex = function () {
        if (this.root.hasLast()) {
          var t = this.root.next();
          var e = this.indexOf(t);
          if (e >= 0) return e;
          else XOF.log("BehaviorSequence异常,找不到子节点", t.hashCode);
        }
        return 0;
      };
      return e;
    })(a);
    e.BehaviorSequence = l;
    var f = (function (t) {
      o(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.startIndex();
        for (; t < this.length; t++) {
          var e = this.childs[t];
          var n = e.$excute();
          if (n == r.SUSCESS || n == r.RUNNING) {
            return n;
          }
        }
        return r.FAILD;
      };
      e.prototype.startIndex = function () {
        if (this.root.hasLast()) {
          var t = this.root.next();
          var e = this.indexOf(t);
          if (e >= 0) return e;
          else XOF.log("BehaviorSelector异常,找不到子节点", t.hashCode);
        }
        return 0;
      };
      return e;
    })(a);
    e.BehaviorSelector = f;
    var c = (function (t) {
      o(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        return r.SUSCESS;
      };
      e.prototype.enter = function () {};
      return e;
    })(i);
    e.BehaviorAction = c;
    var p = (function (t) {
      o(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        if (this.isTrue()) {
          return r.SUSCESS;
        }
        return r.FAILD;
      };
      e.prototype.isTrue = function (t) {
        return false;
      };
      return e;
    })(i);
    e.BehaviorCondition = p;
    var d = (function (t) {
      o(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.startIndex();
        for (; t < this.length; t++) {
          var e = this.childs[t];
          var n = e.$excute();
          if (n == r.SUSCESS) {
            return r.FAILD;
          } else if (n == r.FAILD) {
            return r.SUSCESS;
          }
          return n;
        }
      };
      e.prototype.startIndex = function () {
        if (this.root.hasLast()) {
          var t = this.root.next();
          var e = this.indexOf(t);
          if (e >= 0) return e;
          else XOF.log("BehaviorNot异常,找不到子节点", t.hashCode);
        }
        return 0;
      };
      return e;
    })(a);
    e.BehaviorNot = d;
    var h = (function (t) {
      o(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.startIndex();
        for (; t < this.length; t++) {
          var e = this.childs[t];
          var n = e.$excute();
          if (n == r.RUNNING) {
            return n;
          }
          return r.FAILD;
        }
      };
      e.prototype.startIndex = function () {
        if (this.root.hasLast()) {
          var t = this.root.next();
          var e = this.indexOf(t);
          if (e >= 0) return e;
          else XOF.log("BehaviorAlwaysFail异常,找不到子节点", t.hashCode);
        }
        return 0;
      };
      return e;
    })(a);
    e.BehaviorAlwaysFail = h;
    var v = (function (t) {
      o(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.startIndex();
        for (; t < this.length; t++) {
          var e = this.childs[t];
          var n = e.$excute();
          if (n == r.RUNNING) {
            return n;
          }
          return r.SUSCESS;
        }
      };
      e.prototype.startIndex = function () {
        if (this.root.hasLast()) {
          var t = this.root.next();
          var e = this.indexOf(t);
          if (e >= 0) return e;
          else XOF.log("BehaviorAlwaysSuccess异常,找不到子节点", t.hashCode);
        }
        return 0;
      };
      return e;
    })(a);
    e.BehaviorAlwaysSuccess = v;
    function y(t, e) {
      for (var n in t) {
        var o = t[n];
        o.setRoot(e);
        if (o.childs) y(o.childs, e);
      }
    }
    var _ = (function () {
      function t() {
        this.setRoot(this);
        this.clean();
      }
      t.prototype.setRoot = function (t) {
        this.root = t;
      };
      t.prototype.cleanLast = function () {
        this.lastNode = undefined;
        this.list = [];
      };
      t.prototype.run = function () {
        this.dt = XOF.Timer.dt;
        this.$excute();
      };
      t.prototype.$excute = function () {
        this.isRunning = true;
        if (this.length) {
          this.listIndex = 0;
          var t = void 0;
          t = this.excute();
          if (t == r.RUNNING) {
            this.lastNode = this.list[this.list.length - 1];
          } else if (t == r.SUSCESS || t == r.FAILD) {
            this.cleanLast();
          }
        }
        this.isRunning = false;
        return undefined;
      };
      t.prototype.excute = function () {
        return this.childs[0].$excute();
      };
      t.prototype.random = function () {
        return Math.random();
      };
      t.prototype.addChild = function (t) {
        if (t == this) return this;
        if (this.length) {
          y(this.childs, undefined);
          this.childs = [];
        }
        this.childs.push(t);
        if (this.length) {
          y(this.childs, this);
        }
        return this;
      };
      Object.defineProperty(t.prototype, "length", {
        get: function () {
          var t;
          return (
            (t = this.childs) === null || t === void 0 ? void 0 : t.length
          )
            ? 1
            : 0;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.push = function (t) {
        if (this.hasLast()) {
          this.listIndex += 1;
        } else {
          this.list.push(t);
        }
      };
      t.prototype.pop = function () {
        if (!this.hasLast()) {
          this.list.pop();
        }
      };
      t.prototype.next = function () {
        return this.list[this.listIndex];
      };
      t.prototype.hasLast = function () {
        return this.lastNode != undefined;
      };
      t.prototype.isLast = function (t) {
        return this.lastNode == undefined ? false : this.lastNode == t;
      };
      t.prototype.stop = function () {
        if (this.isRunning) {
          XOF.log("不能在执行时打断行为树.");
        } else {
          this.cleanLast();
        }
      };
      t.prototype.continue = function (t) {
        if (t == this.lastNode) {
          this.lastNode = undefined;
        }
      };
      t.prototype.set = function (t, e) {
        if (t == "~") {
          this.values = {};
        } else {
          this.values[t] = e;
        }
      };
      t.prototype.get = function (t, e) {
        return this.values[t] || e;
      };
      t.prototype.clean = function () {
        this.stop();
        this.cleanLast();
        this.values = [];
        this.childs = [];
      };
      return t;
    })();
    e.BehaviorRoot = _;
    var m = (function () {
      function r() {}
      r.registerFunc = function (t, e, n) {
        if (this.registers[t]) {
          XOF.log("注册了重复的行为树对象:", t);
        }
        var o = {};
        o.type = n;
        o.inst = e;
        this.registers[t] = o;
      };
      r.getRegister = function (t) {
        return this.registers[t];
      };
      r.parser = function (t, e) {
        if (!e) {
          switch (t.type) {
            case "Root":
              e = new _();
              break;
            case "Sequence":
              e = new l();
              break;
            case "Selector":
              e = new f();
              break;
            case "Parallel":
              e = new u();
              break;
            case "AlwaysSuccess":
              e = new v();
              break;
            case "AlwaysFail":
              e = new h();
              break;
            case "Not":
              e = new d();
              break;
            case "RandomSelector":
              e = new s();
              e.params = t.params;
              break;
            case "Condition":
            case "Action":
              var n = this.getRegister(t.func);
              if (n) {
                if (n.type == "class") {
                  e = new n.inst();
                  e.params = t.params;
                } else {
                  if (t.type == "Action") {
                    e = new c();
                  } else if (t.type == "Condition") {
                    e = new p();
                  }
                }
              } else {
                console.log("不存在的特殊节点", t.type, t.func);
              }
              break;
          }
          e.$input = t.input;
          e.$output = t.output;
          if (t.id) e.hashCode = t.id;
        }
        if (e) {
          for (var o in t.children) {
            e.addChild(r.parser(t.children[o], undefined));
          }
        } else {
          XOF.log("错误的节点类型");
        }
        return e;
      };
      r.registers = {};
      return r;
    })();
    e.BehaviorParser = m;
  });
  t(Co);
  Co.BehaviorParser;
  Co.BehaviorRoot;
  Co.BehaviorAlwaysSuccess;
  Co.BehaviorAlwaysFail;
  Co.BehaviorNot;
  Co.BehaviorCondition;
  Co.BehaviorAction;
  Co.BehaviorSelector;
  Co.BehaviorSequence;
  Co.BehaviorParallel;
  Co.BehaviorRandomSelector;
  Co.BehaviorNodeBase;
  Co.BehaviorState;
  var Po = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(H);
    var s = o(w);
    var u = o(C);
    var r = o(nt);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.images = [];
        t.values = [];
        return t;
      }
      t.prototype.update = function (t) {
        var e = t / 1e3;
        for (var n = 0; n < this.values.length; n++) {
          var o = this.values[n];
          var r = this.images[n];
          if (o.state) {
            o.jumpPower -= a.default.G * e;
            r.x += o.backPower * e;
            r.y += -o.jumpPower * e;
          }
          if (r.y > 0) {
            o.state = 0;
            var i = this.map
              .tween(r)
              .wait(200)
              .to({ alpha: 0 }, 500)
              .call(this.onEnd, this);
            i.call(this.map.removeTween, this.map, [i]);
          }
        }
      };
      t.prototype.setData = function (t, e, n, o) {
        if (e === void 0) {
          e = 8;
        }
        this.clean();
        if (t > 0) {
          var r = "monster/common/m" + u.default("%04d", t) + ".img";
          for (var i = 1; i <= e; i++) {
            var a = new XOF.Image();
            a.y = -o;
            this.images.push(a);
            this.addChild(a);
            a.scale(n, n);
            a.pivot(s.default.randomInt(0, 30), s.default.randomInt(0, 30));
            a.skin = r + "/" + s.default.randomInt(0, 3) + ".png";
            this.values.push({
              backPower: s.default.radom1d1() * s.default.randomInt(5, 60),
              jumpPower: s.default.randomInt(400, 600),
              state: 1,
            });
          }
        }
      };
      t.prototype.clean = function () {
        var t;
        while ((t = this.images) === null || t === void 0 ? void 0 : t.length) {
          var e = this.images.pop();
          this.values.pop();
          e.removeSelf();
        }
        this.count = 0;
      };
      t.prototype.onEnd = function () {
        var t;
        this.count += 1;
        var e = (t = this.values) === null || t === void 0 ? void 0 : t.length;
        if (e > 0 && this.count >= e) {
          this.map.removeObject(this);
          this.count = 0;
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.clean();
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Po);
  var jo = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var o = (function () {
      function t() {}
      t.getData = function (t) {
        var e, n;
        var o =
          r.default.conf.monster[
            (n =
              (e = r.default.conf.monsterDefine) === null || e === void 0
                ? void 0
                : e[t]) === null || n === void 0
              ? void 0
              : n.mob
          ];
        return o;
      };
      t.isNoboodType = function (t) {
        for (var e in t) {
          if (t[e] == "[machine]") {
            return true;
          }
          if (t[e] == "[hybrid]") {
            return true;
          }
        }
        return false;
      };
      t.getTypeImage = function (t) {
        var e;
        var n = {
          "[human]": "other/enemytype/1.png",
          "[beast]": "other/enemytype/2.png",
          "[plant]": "other/enemytype/3.png",
          "[insect]": "other/enemytype/4.png",
          "[machine]": "other/enemytype/5.png",
          "[hybrid]": "other/enemytype/6.png",
          "[undead]": "other/enemytype/7.png",
          "[devil]": "other/enemytype/8.png",
          "[spirit]": "other/enemytype/9.png",
          "[dragon]": "other/enemytype/10.png",
          "[fixture]": "other/enemytype/12.png",
        };
        return (e = n === null || n === void 0 ? void 0 : n[t]) !== null &&
          e !== void 0
          ? e
          : "";
      };
      return t;
    })();
    e.default = o;
  });
  t(jo);
  var So = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(fe);
    var b = o(w);
    var O = o(jo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.behit = function (t, e) {
        var n;
        var o = e.float;
        var r = this.isFloat();
        var i = this.isSuperArmor();
        var a = this.role.fu.isCtrlState();
        var s = this.map.sk.onDamage(this.role, e.hiter);
        var u = this.role.isUnbreakable();
        var l = this.isCanDamage();
        if (a || i || u) {
          if (l) {
            if (s) this.role.script.damage(t.damage);
          }
          if (a) {
            this.role.ai.stop();
            this.map.sk.stop(this.role);
          }
        } else {
          var f = [ht.RoleAction.DAMAGE1, ht.RoleAction.DAMAGE2];
          for (var c = f.length - 1; c >= 0; c--) {
            if (this.role.hasAction(f[c]) == false) {
              f.splice(c, 1);
            }
          }
          var p = true;
          if (s) {
            this.role.script.damage(t.damage);
            if (this.role.isDeath) {
              return;
            }
            this.role.ai.stop();
            this.map.sk.stop(this.role);
            var d = ht.RoleAction.STAY;
            if (f.length > 0) {
              d = f[b.default.randomInt(0, f.length - 1)];
              if (d.length > 1 && this.role.isAction(d)) {
                d = f[b.default.randomInt(0, f.length - 1)];
              }
            }
            var h = this.role.force.floatPower >= 350;
            if (!this.role.rebound) {
              var v =
                r || this.isDownAction()
                  ? this.role.force.floatPower > 400
                  : true;
              this.role.rebound = o ? v : false;
            }
            if (o) {
              if (r && this.role.float > 0) {
                this.role.setAction(d, true);
              } else {
                if (h || !this.isDownAction()) {
                  this.role.setAction(d, true);
                } else {
                  if (this.role.body.max == 1) {
                    d = ht.RoleAction.DOWN;
                    this.role.setAction(d, true);
                    this.body.delay = 1e4;
                  } else {
                    d = ht.RoleAction.DOWN;
                    this.role.setAction(d, true);
                    this.actor.setFrameIndex(2, 0);
                  }
                }
              }
            } else {
              var y = this.isDownAction()
                ? !this.role.force.hasFloatPower()
                : false;
              if (y) {
                if (this.role.body.max == 1) {
                  d = ht.RoleAction.DOWN;
                  this.role.setAction(d, true);
                  this.body.delay = 1e4;
                } else {
                  d = ht.RoleAction.DOWN;
                  this.role.setAction(d, true);
                  this.actor.setFrameIndex(3, 0);
                  this.actor.setFrameDelay(120, 0);
                }
              } else {
                this.role.setAction(d, true);
              }
            }
          }
          if (p) {
            if (this.role.isDamageAction()) {
              if (this.role.body.max > 1) {
                this.actor.setFrameIndex(this.role.body.max - 1);
              }
              var _ = 1e4;
              if (this.isCanStay()) {
                this.body.delay = _;
                var m = 600 * t.stiff;
                this.body.time = 0;
                this.actor.addTime(_ - m);
              }
            }
          }
        }
        if (
          !O.default.isNoboodType(
            (n = this === null || this === void 0 ? void 0 : this.roleData) ===
              null || n === void 0
              ? void 0
              : n.category
          )
        ) {
          var g = b.default.randomInt(1, 2);
          for (var c = 0; c < g; c++) this.role.script.AddBooldstain();
        }
      };
      e.prototype.getCurActionInfo = function () {
        var t, e;
        return (e =
          (t =
            this === null || this === void 0
              ? void 0
              : this.role.actionInfo) === null || t === void 0
            ? void 0
            : t.action) === null || e === void 0
          ? void 0
          : e[this.role.action];
      };
      e.prototype.isCtrlState = function () {
        if (this.role.isUnbreakable()) return false;
        return this.role.state.isCtrlState();
      };
      e.prototype.isCanHitfly = function () {
        if (this.roleData.fixed) return false;
        if (this.role.isUnbreakable()) return false;
        if (this.isSuperArmor()) return false;
        if (this.isCtrlState()) return false;
        if (this.roleData.notHitFly) return false;
        return this.role.state.isCanHitfly();
      };
      e.prototype.isCanHitBack = function () {
        if (this.roleData.fixed) return false;
        if (this.role.isUnbreakable()) return false;
        if (this.isCtrlState()) return false;
        if (this.role.isSuperArmor()) {
          return false;
        }
        return this.role.state.isCanHitBack();
      };
      e.prototype.isCanStay = function () {
        return this.role.state.isCanStay();
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(So);
  var Mo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(ue);
    var i = o(q);
    var a = o(Po);
    var l = o(rt);
    var f = o(w);
    var s = o(dt);
    var c = o(we);
    var p = o(F);
    var d = o(So);
    var h = o(St);
    var v = o(yt);
    var y = o(jo);
    var u = (function (u) {
      n(t, u);
      function t() {
        var t = u.call(this) || this;
        t.camp = ht.RoleCamp.MONSTER;
        t.defaultAction = ht.RoleAction.STAY;
        t.order = ht.RoleOrder.MONSTER;
        t.mp = t.maxMp = t.hp = t.maxHp = 0;
        t.labName.visible = false;
        t.initFightUnit();
        t.ai = new Co.BehaviorRoot();
        t.ai.set("self", t);
        return t;
      }
      t.prototype.initFightUnit = function () {
        this.fu = new d.default(this);
        this.fu.camp = this.camp;
      };
      Object.defineProperty(t.prototype, "hiter", {
        get: function () {
          return this.fu.hiter;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setSkills = function (t) {
        this.skillSheets = t;
      };
      t.prototype.setMob = function (t) {
        var e = s.default.conf.monster[t];
        this.setRoleData(e);
        this.initRole();
      };
      t.prototype.initEquipments = function () {
        var t = this.roleData;
        if (t) {
          for (var e in t.skinEquipmentId) {
            var n = t.skinEquipmentId[e];
            this.addEquipment(n);
          }
        }
      };
      Object.defineProperty(t.prototype, "monsterClass", {
        get: function () {
          return this.$monsterClass || h.default.NORMAL;
        },
        set: function (t) {
          this.$monsterClass = t;
          if (this.$monsterClass == h.default.BOSS) {
            this.labName.visible = true;
            this.labName.textColor = c.default.registerColors[61];
          } else if (this.$monsterClass == h.default.SPECIAL) {
            this.labName.visible = true;
            this.labName.textColor = c.default.registerColors[60];
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setLevel = function (t) {
        this.roleLevel = t;
        this.fu.level = t || 1;
      };
      t.prototype.initRole = function () {
        var t, e, n;
        var o = this.roleData;
        if (o) {
          if (!o.ani) {
            console.log("没有设置动画", o);
            return;
          }
          if (!o.action) {
            console.log("没有设置动作", o);
            return;
          }
          for (var r in o.buff) {
            this.buffAttribute.add(o.buff[r]);
          }
          for (var r in o.state) {
            this.state.apply(o.state[r], Number.MAX_SAFE_INTEGER);
          }
          this.setBodyAnimationGroup(s.default.getPvfConf(o.ani));
          this.setActionInfo(s.default.conf.action[o.action]);
          this.initEquipments();
          var i = new p.default(o.attr);
          this.attribute.attach(i);
          this.setAction(ht.RoleAction.STAY);
          var a =
            (t = o === null || o === void 0 ? void 0 : o.size) !== null &&
            t !== void 0
              ? t
              : 1;
          this.setSize(a);
          this.floatHeight =
            (n =
              (e = this.roleData) === null || e === void 0
                ? void 0
                : e.floatHeight) !== null && n !== void 0
              ? n
              : 0;
          this.floatBy(this.floatHeight);
          this.labName.text = o.name;
          this.labName.name = o.icon;
          this.labName.y = -o.height * a - this.floatHeight - 12;
          this.maxHp = this.attribute.hp;
          this.maxMp = this.attribute.mp;
          this.hp = this.maxHp;
          this.mp = this.maxMp;
        } else {
          XOF.log("怪物初始化异常，数据不存在.");
        }
      };
      t.prototype.setRoleData = function (t) {
        var e;
        u.prototype.setRoleData.call(this, t);
        if (
          (e = this === null || this === void 0 ? void 0 : this.roleData) ===
            null || e === void 0
            ? void 0
            : e.ai
        ) {
          Co.BehaviorParser.parser(s.default.ai[this.roleData.ai], this.ai);
        } else {
          XOF.log("该怪物没有设置行为AI.");
        }
      };
      t.prototype.update = function (t) {
        u.prototype.update.call(this, t);
        if (this.isDeath) return;
        this.ai.run();
      };
      t.prototype.onFloatDown = function () {
        if (this.isAction(ht.RoleAction.DAMAGE1, ht.RoleAction.DAMAGE2)) {
          this.setAction(ht.RoleAction.DOWN, true);
          if (this.body.max == 1) {
            this.body.delay = 1e4;
          }
        }
      };
      t.prototype.onFloatLie = function () {
        if (this.isAction(ht.RoleAction.DOWN)) {
          if (this.state.isCtrlState()) return;
          if (this.rebound) {
            this.rebound = false;
            this.script.float(180, -this.direction * 20);
            this.actor.setFrameIndex(3, 0);
          } else {
            if (this.body.isLast) {
              this.body.time = 0;
              if (this.body.count == 0) this.body.count = 1;
            } else {
              this.actor.setFrameIndex(this.body.max - 1, 0);
            }
            if (this.floatHeight > 0 && this.hasAction(ht.RoleAction.SIT)) {
              this.actor.body.delay = 350;
              this.lastAction = ht.RoleAction.SIT;
            } else {
              this.actor.body.delay = 450;
            }
          }
        }
      };
      t.prototype.onAnimationComplete = function () {
        if (this.map.sk.hasSkills(this)) {
          this.map.sk.onEndCurrentAni(this);
        } else if (!this.isDeath) {
          if (this.fu.isCanStay()) {
            if (this.lastAction) {
              this.setAction(this.lastAction, true);
              this.lastAction = undefined;
            } else if (this.isFloat());
            else {
              u.prototype.onAnimationComplete.call(this);
            }
          } else if (!this.isDamageAction()) {
            this.setAction(ht.RoleAction.DAMAGE1);
          }
        }
      };
      t.prototype.hasSkillState = function (t) {
        var e, n;
        var o =
          (n =
            (e =
              this === null || this === void 0 ? void 0 : this.skillSheets) ===
              null || e === void 0
              ? void 0
              : e[t]) !== null && n !== void 0
            ? n
            : t;
        return u.prototype.hasSkillState.call(this, o);
      };
      t.prototype.skill = function (t, e) {
        var n, o;
        var r = [];
        for (var i = 2; i < arguments.length; i++) {
          r[i - 2] = arguments[i];
        }
        var a =
          (o =
            (n =
              this === null || this === void 0 ? void 0 : this.skillSheets) ===
              null || n === void 0
              ? void 0
              : n[t]) !== null && o !== void 0
            ? o
            : t;
        this.map.sk.skill(a, this, e);
      };
      t.prototype.setAction = function (t, e) {
        var n = u.prototype.setAction.call(this, t, e);
        if (n) this.fu.resetHits();
        return n;
      };
      t.prototype.setStayTime = function (t) {};
      t.prototype.behit = function (t, e) {
        this.fu.behit(t, e);
      };
      t.prototype.death = function (t) {
        var e, n, o;
        this.isDeath = true;
        this.hp = 0;
        this.hiter.enabled = false;
        this.map.sk.stop(this);
        this.ai.stop();
        this.state.cleanAll();
        this.labName.visible = false;
        if (this.hasAction(ht.RoleAction.LAST)) {
          this.setAction(ht.RoleAction.LAST);
        } else if (this.monsterClass == h.default.BOSS) {
          var r = this.force.hasFloatPower();
          if (this.hasAction(ht.RoleAction.LAST)) {
            this.setAction(ht.RoleAction.LAST);
          } else if (r || this.isFloat()) {
            if (r) {
              this.setAction(ht.RoleAction.DAMAGE1);
            }
          } else if (this.fu.isCanHitfly()) {
            this.script.float(350, -this.direction * 50);
            this.setAction(ht.RoleAction.DAMAGE1);
            this.rebound = true;
          } else if (this.hasAction(ht.RoleAction.DOWN)) {
            this.setAction(ht.RoleAction.DOWN);
            if (this.body.max > 1) {
              this.actor.setFrameIndex(this.body.max - 1);
            }
          } else if (this.hasAction(ht.RoleAction.DAMAGE1)) {
            this.setAction(ht.RoleAction.DAMAGE1);
            if (this.body.max > 1) {
              this.actor.setFrameIndex(this.body.max - 1);
            }
          }
        } else {
          this.force.clean();
          this.actor.visible = false;
          var i = v.default.pop("FigureEffect", l.default);
          i.clone(this.body);
          i.scale(this.actor.scaleX, this.actor.scaleY);
          i.float = this.$float;
          i.alpha = 1;
          this.addChild(i);
          this.dieEffect();
        }
        if (
          (n =
            (e = this.roleData) === null || e === void 0
              ? void 0
              : e.dieSound) === null || n === void 0
            ? void 0
            : n.length
        ) {
          this.script.playSound(this.roleData.dieSound[0], true);
        }
        if (
          !y.default.isNoboodType(
            (o = this === null || this === void 0 ? void 0 : this.roleData) ===
              null || o === void 0
              ? void 0
              : o.category
          )
        ) {
          var a = f.default.randomInt(3, 5);
          for (var s = 0; s < a; s++) this.script.AddBooldstain();
        }
        u.prototype.death.call(this, t);
      };
      t.prototype.isSuperArmor = function () {
        if (this.isDeath) return false;
        return u.prototype.isSuperArmor.call(this);
      };
      t.prototype.dieEffect = function () {
        var t = this.roleData.dieEffect;
        if (t === null || t === void 0 ? void 0 : t.length) {
          t[0];
          var e = t[1];
          t[2];
          var n = new a.default();
          this.map.addObject(n, undefined, this.position.x, this.position.y);
          n.setData(e, 5, 0.5, this.float);
        }
      };
      t.prototype.setMap = function (t) {
        u.prototype.setMap.call(this, t);
        this.on("down", this.onFloatDown, this);
        this.on("lie", this.onFloatLie, this);
      };
      t.prototype.onRemove = function () {
        u.prototype.onRemove.call(this);
        this.ai.stop();
        this.off("down", this.onFloatDown, this);
        this.off("lie", this.onFloatLie, this);
        i.default.sound.stopAll(this);
        i.default.sound.cleanAll(this);
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(Mo);
  var ko = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = n(dt);
    var o = n(q);
    var f = n(k);
    var r = n(Mo);
    var i = n(mt);
    var c = n($e);
    var a = n(st);
    var s = n(he);
    var u = (function () {
      function t() {}
      Object.defineProperty(t.prototype, "curMapScene", {
        get: function () {
          return i.default.map.curScene;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "Keys", {
        get: function () {
          return l.default.key;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.flashScreen = function (t, e, n, o, r, i, a, s) {};
      t.prototype.IsKeyDown = function (t) {
        return o.default.gameControler.isDown(t);
      };
      t.prototype.getSkillInfo = function (t) {
        return l.default.conf.skills.all[t];
      };
      t.prototype.GetSkillLevel = function (t) {
        return 1;
      };
      t.prototype.GetCastTime = function (t, e, n) {
        return 1;
      };
      t.prototype.AddStateLayerAnimation = function (t, e, n, o) {};
      t.prototype.getPressDirectionRate = function (t) {
        var e = 1;
        if (t.direction == 1) {
          if (t.script.IsKeyDown(this.Keys.right)) {
            e = 2;
          } else if (t.script.IsKeyDown(this.Keys.left)) {
            e = 0;
          }
        } else if (t.direction == -1) {
          if (t.script.IsKeyDown(this.Keys.left)) {
            e = 2;
          } else if (t.script.IsKeyDown(this.Keys.right)) {
            e = 0;
          }
        }
        return e;
      };
      t.prototype.getPressYDirection = function (t) {
        var e = 0;
        if (t.script.IsKeyDown(this.Keys.up)) {
          e = -1;
        } else if (t.script.IsKeyDown(this.Keys.down)) {
          e = 1;
        }
        return e;
      };
      t.prototype.CreateCNRDAnimation = function (t) {};
      t.prototype.GetCurrentAnimation = function (t) {
        return t.body.animation;
      };
      t.prototype.GetAnimationData = function (t, e) {
        return l.default.getAnimationData(t, e);
      };
      t.prototype.GetFrameStartTime = function (t, e) {
        return 0;
      };
      t.prototype.GetCNRDObjectToActiveObject = function (t) {};
      t.prototype.IsInScreenCollisionObject = function (t, e) {};
      t.prototype.GetDirection = function (t) {
        return t.direction;
      };
      t.prototype.GetLevelData = function (t, e, n, o) {};
      t.prototype.GetDistancePos = function (t, e, n) {};
      t.prototype.IsMyControlObject = function (t) {
        var e;
        return (
          ((e =
            i.default === null || i.default === void 0
              ? void 0
              : i.default.map) === null || e === void 0
            ? void 0
            : e.hero) == t
        );
      };
      t.prototype.isMonster = function (t) {
        if (t instanceof r.default) {
          return true;
        }
        return false;
      };
      t.prototype.isCharacter = function (t) {
        if (t instanceof s.default) {
          return true;
        }
        return false;
      };
      t.prototype.FindShootingTarget = function (t, e, n, o) {};
      t.prototype.PlaySound = function (t) {};
      t.prototype.createPassiveObject = function (
        t,
        e,
        n,
        o,
        r,
        i,
        a,
        s,
        u,
        l
      ) {
        var f = this.curMapScene.createPassiveObject(t, e, n, o, r, i);
        s =
          s ||
          (a === null || a === void 0 ? void 0 : a.camp) ||
          ht.RoleCamp.NONE;
        u = u || (a === null || a === void 0 ? void 0 : a.direction) || 1;
        if (a) {
          u = a.direction;
          l = l === undefined ? true : l;
          if (l && (f === null || f === void 0 ? void 0 : f.attribute)) {
            f.attribute.attach(a.attribute);
          }
          if (f.fu) {
            f.fu.level = a.fu.level;
          }
        }
        f.direction = u;
        f.camp = s;
        if (f === null || f === void 0 ? void 0 : f.fu) f.fu.camp = s;
        return f;
      };
      t.prototype.shake = function (t, e, n, o, r) {};
      t.prototype.getItemCount = function (t) {
        return o.default.userData.bag.getItemCount(t);
      };
      t.prototype.getColourlessCount = function () {
        return o.default.userData.bag.getItemCount(a.default.commonIds.color);
      };
      t.prototype.setSkillDamage = function (t, e, n, o) {
        if (n === void 0) {
          n = 1;
        }
        if (o === void 0) {
          o = 0;
        }
        if (n <= 0) return;
        var r = c.default.getSkillDamage(e, n, o);
        if (f.default.isVoidObject(r)) return;
        var i = [];
        for (var a in r) {
          var s = parseInt(a);
          var u = parseFloat(r[a]);
          i.push([1, s, u]);
        }
        l.default.conf.buff[18e3].levelAttribute = i;
        t.script.AddBuff(18e3, true, 1);
      };
      return t;
    })();
    e.default = u;
  });
  t(ko);
  var xo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(To);
    var r = o(ko);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.insts = {};
        t.objects = [];
        t.global = new r.default();
        return t;
      }
      t.prototype.onKeyRelease = function (t, e) {
        var n = this.objects;
        for (var o = 0; o < n.length; o++) {
          var r = n[o],
            i = r.skill,
            a = r.obj;
          if (e ? true : e == a) i.onKeyRelease(a, t);
        }
      };
      t.prototype.skill = function (t, e, n) {
        var o = this.initSkill(t);
        var r = this.onCheckUse(t, e);
        if (r > 0) {
          if (!this.has(t, e)) {
            if (e.rs.get(t) > 0) {
              e.script.shake(-3, 3, -3, 3, 100);
              return;
            }
            this.stopSkill(t, e, true);
            this.objects.push({ obj: e, skill: o });
            o.cost(e);
            o.cd(e);
            this.event(1043, [e, t]);
          }
          if (r == 2) {
            o.onForceSetAction(e, e.action);
          } else {
            o.onSetAction(e, e.action);
          }
          n && o.onKeyPress(e, n);
        } else {
          this.event(1047, [e, t, r]);
        }
        return;
      };
      t.prototype.onDamage = function (t, e) {
        var n = this.ls(t);
        for (var o = 0, r = n; o < r.length; o++) {
          var i = r[o];
          if (!i.onDamage(t, e)) {
            return false;
          }
        }
        return true;
      };
      t.prototype.onHit = function (t, e) {
        var n = this.ls(t);
        for (var o = 0, r = n; o < r.length; o++) {
          var i = r[o];
          i.onHit(t, e);
        }
      };
      t.prototype.onCheckUse = function (t, e) {
        var n = this.initSkill(t);
        var o = 0;
        if (n) {
          o = n.onCheckUse(e);
        }
        return o;
      };
      t.prototype.stop = function (t) {
        var e = this.ls(t);
        if (e.length) {
          for (var n = e.length - 1; n >= 0; n--) {
            e[n].onEndAction(t);
            this.remove(t, e[n]);
          }
        }
      };
      t.prototype.stopSkill = function (t, e, n) {
        var o = a.default[t];
        var r = this.ls(e);
        if (r.length) {
          for (var i = r.length - 1; i >= 0; i--) {
            if (r[i] instanceof o) continue;
            if (n) r[i].onForceChanged(e);
            r[i].onEndAction(e);
            e.stay(true);
            this.remove(e, r[i]);
          }
        }
      };
      t.prototype.initSkill = function (t) {
        var e = this.insts[t];
        if (!e) {
          var n = a.default[t];
          if (!n) {
            return;
          }
          e = this.insts[t] = new n(this, this.global, t);
        }
        return e;
      };
      t.prototype.has = function (t, e) {
        var n = a.default[t];
        var o = this.ls(e);
        for (var r in o) {
          if (o[r] instanceof n) {
            return true;
          }
        }
        return false;
      };
      t.prototype.getCurrentSkillId = function (t) {
        var e = this.ls(t);
        for (var n in e) {
          return e[n].skillid;
        }
        return 0;
      };
      t.prototype.hasSkills = function (t) {
        var e = this.ls(t);
        for (var n in e) {
          return true;
        }
        return false;
      };
      t.prototype.ls = function (t) {
        var e = [];
        var n = this.objects.length;
        for (var o = n - 1; o >= 0; o--) {
          var r = this.objects[o],
            i = r.obj,
            a = r.skill;
          if (i == t) {
            e.push(a);
          }
        }
        return e;
      };
      t.prototype.onKeyFrameFlag = function (t, e) {
        var n = this.ls(t);
        for (var o = 0, r = n; o < r.length; o++) {
          var i = r[o];
          i.onKeyFrameFlag(t, e);
        }
      };
      t.prototype.onFrame = function (t, e) {
        var n = this.ls(t);
        for (var o = 0, r = n; o < r.length; o++) {
          var i = r[o];
          i.onFrame(t, e);
        }
      };
      t.prototype.onEndCurrentAni = function (t) {
        var e = this.objects.length;
        for (var n = e - 1; n >= 0; n--) {
          var o = this.objects[n],
            r = o.obj,
            i = o.skill;
          if (r == t) {
            if (i.onEndCurrentAni(r)) {
              i.onEndAction(r);
            }
          }
        }
      };
      t.prototype.remove = function (t, e) {
        var n = this.objects.length;
        for (var o = n - 1; o >= 0; o--) {
          var r = this.objects[o],
            i = r.obj,
            a = r.skill;
          if (i == t && a == e) {
            this.objects.splice(o, 1);
          }
        }
      };
      t.prototype.onUpdate = function (t) {
        for (var e = 0; e < this.objects.length; e++) {
          var n = this.objects[e],
            o = n.obj,
            r = n.skill;
          if (r.onUpdate(o, t) == false) {
            this.onEndCurrentAni(o);
            this.remove(o, r);
            e--;
          }
        }
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = i;
  });
  t(xo);
  var Do = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(Do);
  var Io = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(Io);
  var Ro = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Mo);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.skillSheets =
          ((t = {}), (t["throw"] = "monster/goblinthrower/throwstone"), t);
        return e;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ro);
  var Lo = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Mo);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.skillSheets =
          ((t = {}), (t["throw"] = "monster/seagab/seagabthrow"), t);
        return e;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Lo);
  var Fo = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Mo);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.skillSheets =
          ((t = {}), (t["throw"] = "monster/hillgab/hillgabthrow"), t);
        return e;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Fo);
  var Bo = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var i = [];
    var o = (function () {
      function t() {}
      t.define = function (t, e, n) {
        var o = r.default.conf.monsterDefine[t].mob;
        i[t] = { id: t, cls: e, mob: o, skills: n };
      };
      t.has = function (t) {
        return !!i[t];
      };
      t.get = function (t) {
        return i[t];
      };
      t.goblin = function () {
        return i[1];
      };
      return t;
    })();
    e.default = o;
  });
  t(Bo);
  var No = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(No);
  var Xo = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = n(dt);
    var a = n(A);
    var r = n(nt);
    var s = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.camp = ht.RoleCamp.NONE;
        t.$aniList = [];
        return t;
      }
      t.prototype.initData = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
      };
      t.prototype.addAni = function (t, e, n) {
        var o = i.default.getPvfAnimation(t, e);
        var r = new a.default();
        r.setAnimation(o);
        r.name = n || e || t;
        this.$aniList.push(r);
        this.addChild(r);
        return r;
      };
      t.prototype.addAnimation = function (t, e, n) {
        var o = i.default.getAnimationData(t, e);
        var r = new a.default();
        r.setAnimation(o);
        r.name = n || e || t;
        this.$aniList.push(r);
        this.addChild(r);
        return r;
      };
      t.prototype.update = function (e) {
        n.prototype.update.call(this, e);
        this.$aniList.forEach(function (t) {
          return t.visible && t.update(e);
        });
      };
      t.prototype.removeAni = function (t) {
        var e;
        for (var n = 0; n < this.$aniList.length; n++) {
          if (this.$aniList[n].name == t) {
            e = this.$aniList[n];
            this.$aniList.splice(n, 1);
            break;
          }
        }
        e.removeSelf();
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
        while (this.$aniList.length) {
          this.removeAni(this.$aniList[0].name);
        }
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Xo);
  var Uo = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = n(dt);
    var r = n(A);
    var a = n(nt);
    var s = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.pass_type = "[do not pass]";
        t.layer = vt.layerConstValue.normal;
        t.camp = ht.RoleCamp.NONE;
        return t;
      }
      t.prototype.initData = function () {};
      t.prototype.set = function (t, e, n) {
        if (e === void 0) {
          e = undefined;
        }
        var o = i.default.getPvfConf(t);
        var r = e ? o[e] : o;
        this.addAnimation(r);
        this.setObjectWidth(n[0], n[1]);
      };
      t.prototype.isFloat = function () {
        return this.float > 0;
      };
      t.prototype.update = function (e) {
        n.prototype.update.call(this, e);
        this.children_.forEach(function (t) {
          return t.visible && t.update(e);
        });
      };
      t.prototype.onStart = function () {
        this.updatePasstype();
      };
      t.prototype.setObjectWidth = function (t, e) {
        this.objWidth = t;
        this.objHeight = e;
        return this;
      };
      t.prototype.updatePasstype = function () {
        var t = this.objWidth || 0;
        var e = this.objHeight || 0;
        if (t <= 0 || e <= 0) return;
        if (this.pass_type == "[do not pass]") {
          this.map.addMoveRect(
            this.hashCode,
            this.x - t / 2,
            this.position.y - e / 2,
            t,
            e,
            false
          );
        } else {
          this.map.removeMoveRect(this.hashCode);
        }
      };
      t.prototype.addAnimationEx = function (t, e) {
        if (e === void 0) {
          e = 0;
        }
        var n = i.default.getPvfConf(t.toLowerCase());
        return this.addAnimation(n, e);
      };
      t.prototype.addAnimation = function (t, e) {
        if (e === void 0) {
          e = 0;
        }
        var n = new r.default();
        n.name = e + "";
        n.setAnimation(t);
        this.addChild(n);
        return n;
      };
      t.prototype.sort = function () {
        var t = this.children_
          .map(function (t) {
            return t;
          })
          .sort(function (t, e) {
            return parseInt(t.name) - parseInt(e.name);
          });
        for (var e = 0; e < t.length; e++) {
          this.setChildIndex(t[e], e);
        }
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(Uo);
  var Ho = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (a) {
      n(t, a);
      function t() {
        var t = a.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/alterofinfinity/";
        var n = "animation/brazier1.ani.json";
        var o = [
          "Animation/BrazierChain1.ani",
          0,
          5,
          "Animation/BrazierChain0.ani",
          0,
          5,
          "Animation/BrazierFire.ani",
          0,
          10,
        ];
        t.set(e + n + ".json", undefined, [150, 30]);
        for (var r = 0, i = 3; r < o.length; r += i) {
          t.addAnimationEx(e + o[r] + ".json", o[r + 2]);
        }
        t.sort();
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ho);
  var Go = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (a) {
      n(t, a);
      function t() {
        var t = a.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/alterofinfinity/";
        var n = "Animation/BrazierChain2.ani";
        var o = [
          "Animation/BrazierFire2.ani",
          0,
          10,
          "Animation/BrazierFire1.ani",
          0,
          10,
          "Animation/BrazierChain01.ani",
          0,
          5,
          "Animation/BrazierChain11.ani",
          0,
          5,
          "Animation/Brazier2.ani",
          0,
          -5,
          "Animation/Brazier1.ani",
          0,
          -5,
        ];
        t.set((e + n + ".json").toLowerCase(), undefined, [280, 30]);
        for (var r = 0, i = 3; r <= o.length - i; r += i) {
          t.addAnimationEx(e + o[r] + ".json", o[r + 2]);
        }
        t.sort();
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Go);
  var Vo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (a) {
      n(t, a);
      function t() {
        var t = a.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/alterofinfinity/";
        var n = "Animation/StoneImage0.ani";
        var o = [];
        t.set((e + n + ".json").toLowerCase(), undefined, [250, 40]);
        for (var r = 0, i = 3; r <= o.length - i; r += i) {
          t.addAnimationEx(e + o[r] + ".json", o[r + 2]);
        }
        t.sort();
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Vo);
  var $o = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (a) {
      n(t, a);
      function t() {
        var t = a.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/alterofinfinity/";
        var n = "Animation/StoneImage1.ani";
        var o = [];
        t.set((e + n + ".json").toLowerCase(), undefined, [250, 40]);
        for (var r = 0, i = 3; r <= o.length - i; r += i) {
          t.addAnimationEx(e + o[r] + ".json", o[r + 2]);
        }
        t.sort();
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t($o);
  var qo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (a) {
      n(t, a);
      function t() {
        var t = a.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/alterofinfinity/";
        var n = "Animation/StoneImage2.ani";
        var o = [];
        t.set((e + n + ".json").toLowerCase(), undefined, [250, 40]);
        for (var r = 0, i = 3; r <= o.length - i; r += i) {
          t.addAnimationEx(e + o[r] + ".json", o[r + 2]);
        }
        t.sort();
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(qo);
  var Ko = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (a) {
      n(t, a);
      function t() {
        var t = a.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/alterofinfinity/";
        var n = "Animation/StoneImage3.ani";
        var o = [];
        t.set((e + n + ".json").toLowerCase(), undefined, [250, 40]);
        for (var r = 0, i = 3; r <= o.length - i; r += i) {
          t.addAnimationEx(e + o[r] + ".json", o[r + 2]);
        }
        t.sort();
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ko);
  var Yo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (a) {
      n(t, a);
      function t() {
        var t = a.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/alterofinfinity/";
        var n = "Animation/StoneImage4.ani";
        var o = [];
        t.set((e + n + ".json").toLowerCase(), undefined, [100, 40]);
        for (var r = 0, i = 3; r <= o.length - i; r += i) {
          t.addAnimationEx(e + o[r] + ".json", o[r + 2]);
        }
        t.sort();
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Yo);
  var Wo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(S);
    var i = o(fe);
    var a = o(b);
    var s = o(Xo);
    var u = o(L);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.direction = 1;
        t.camp = ht.RoleCamp.NONE;
        t.equipments = [];
        t.actor = t;
        t.roleData = {};
        t.attribute = new r.default();
        t.body = new a.default();
        t.body.on(u.default.ATTACK_BOX, t.onAttackBox, t);
        t.body.on(u.default.DAMAGE_BOX, t.onAttackBox, t);
        t.fu = new i.default(t);
        t.addChild(t.body);
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onAttackBox = function () {
        if (this.map) {
          this.map.event(u.default.ATTACK_BOX);
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        if (this.fu) this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        this.body.off(u.default.ATTACK_BOX, this.onAttackBox, this);
        this.body.off(u.default.DAMAGE_BOX, this.onAttackBox, this);
        e.prototype.onRemove.call(this);
        this.attribute.reset();
        delete this.attribute;
        delete this.actor;
        delete this.roleData;
        delete this.equipments;
        delete this.camp;
      };
      t.prototype.removeAllEquipment = function () {
        while (this.equipments.length) {
          var t = this.equipments.pop();
          this.removeAni(t.name);
        }
      };
      t.prototype.removeEquipment = function (t) {
        for (var e = 0; e < this.equipments.length; e++) {
          if (this.equipments[e] == t) {
            this.removeAni(this.equipments[e].name);
            this.equipments.splice(e, 1);
            break;
          }
        }
      };
      t.prototype.removeEquipmentByName = function (t) {
        var e = this.getChildByName(t);
        for (var n = 0; n < this.equipments.length; n++) {
          if (this.equipments[n] == e) {
            this.removeAni(this.equipments[n].name);
            break;
          }
        }
      };
      t.prototype.addAnimationEquipment = function (t, e, n, o, r) {
        if (o === void 0) {
          o = false;
        }
        if (r === void 0) {
          r = 100;
        }
        var i = this.addAnimation(t, e, n);
        if (o) {
          i.once(u.default.COMPLETE, this.removeEquipment, this, [i]);
        }
        if (r >= 0) {
          this.setChildIndex(i, r);
        }
        this.equipments.push(i);
        return new f(i);
      };
      t.prototype.isSuperArmor = function () {
        return false;
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(s.default);
    e.default = l;
    var f = (function () {
      function t(t) {
        this.animation = t;
        this.equipmentType = "body";
      }
      Object.defineProperty(t.prototype, "frame", {
        get: function () {
          var t, e;
          return (e =
            (t = this.animation) === null || t === void 0
              ? void 0
              : t.frame) !== null && e !== void 0
            ? e
            : {};
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })();
  });
  t(Wo);
  var zo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Wo);
    var i = o(dt);
    var a = o(Q);
    var s = o(F);
    var u = o(L);
    var l = o(w);
    var f = (function (o) {
      n(t, o);
      function t() {
        var t;
        var e = o.call(this) || this;
        e.layer = vt.layerConstValue.normal;
        e.name = "火球";
        e.direction = 1;
        e.body.setAnimation(
          i.default.getAnimationData(
            "passiveobject/actionobject/spc/animation/body.ani.json"
          )
        );
        e.fu.once(fe.BattleUnitEvent.HIT, e.onHit, e);
        e.attribute.attach(
          new s.default(((t = {}), (t[ht.AttributeKeys.FIRE] = 1), t))
        );
        e.fu.hiter.enabled = false;
        return e;
      }
      t.prototype.onStart = function () {
        o.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(u.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
        var t = this.findFightObject();
        this.xSpeed = this.ySpeed = 1;
        if (t) {
          var e = t.position.y > this.position.y ? 1 : -1;
          this.target = {
            x: t.position.x,
            y:
              Math.abs(t.position.y - this.position.y) > 50
                ? this.position.y + e * 50
                : t.position.y + l.default.randomInt(-5, 5),
          };
        } else {
          this.target = {
            x: this.position.x + this.direction * 1e3,
            y: this.position.y + l.default.randomInt(-25, 25),
          };
        }
        var n = Math.sqrt(
          Math.pow(this.position.x - this.target.x, 2) +
            Math.pow(this.position.y - this.target.y, 2)
        );
        this.xSpeed = (this.target.x - this.position.x) / n;
        this.ySpeed = (this.target.y - this.position.y) / n;
        this.tw = a.default
          .get(this, { loop: true })
          .set({ alpha: 0.4, scaleX: this.direction * 0.9, scaleY: 0.9 })
          .to({ alpha: 0.8, scaleX: this.direction * 1, scaleY: 1 }, 1e3)
          .to({ alpha: 0.4, scaleX: this.direction * 0.9, scaleY: 0.9 }, 1e3);
        a.default.removeTweenFromList(this.tw);
        this.lifeTime = 1200;
      };
      t.prototype.update = function (t) {
        o.prototype.update.call(this, t);
        if (this.map) {
          this.lifeTime -= t;
          this.tw.$update(t);
          var e = 400;
          this.map.moveObject(
            this,
            e * this.xSpeed,
            this.ySpeed * e,
            undefined,
            false
          );
          if (this.lifeTime < 0) {
            this.onHit();
          }
        }
      };
      t.prototype.findFightObject = function (t) {
        var n = this;
        var e = this.fu.camp;
        var o = this.map;
        var r;
        if (e == ht.RoleCamp.HERO) {
          r = o.getFightObjects(ht.RoleCamp.MONSTER, true);
        } else if (e == ht.RoleCamp.MONSTER) {
          r = o.getFightObjects(ht.RoleCamp.HERO, true);
        }
        var i = r.length;
        r = r.sort(function (t, e) {
          return (
            Math.abs(t.position.x - n.position.x) -
            Math.abs(e.position.x - n.position.x)
          );
        });
        for (var a = 0; a < i; a++) {
          var s = r[a].position.x < this.position.x ? -1 : 1;
          if (s == this.direction) {
            return r[a];
          }
        }
      };
      t.prototype.onRemove = function () {
        o.prototype.onRemove.call(this);
        if (this.tw) {
          this.tw.clean();
        }
        this.tw = undefined;
        this.target = undefined;
      };
      t.prototype.onHit = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(r.default);
    e.default = f;
  });
  t(zo);
  var Qo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var u = o(z);
    var l = o(w);
    var r = o(He);
    var f = o(Ge);
    var i = (function (s) {
      n(t, s);
      function t(t, e, n, o, r, i) {
        if (r === void 0) {
          r = 400;
        }
        if (i === void 0) {
          i = 1200;
        }
        var a = s.call(this, t) || this;
        a.setData(e, n, o, r, i);
        return a;
      }
      t.prototype.setData = function (t, e, n, o, r) {
        if (o === void 0) {
          o = 400;
        }
        if (r === void 0) {
          r = 1200;
        }
        this.speed = o;
        this.direction = n;
        this.xSpeed = this.ySpeed = 1;
        if (e) {
          var i = e.position.y > t.position.y ? 1 : -1;
          this.target = {
            x: e.position.x,
            y:
              Math.abs(e.position.y - t.position.y) > 50
                ? t.position.y + i * 50
                : e.position.y + l.default.randomInt(-5, 5),
          };
        } else {
          this.target = {
            x: t.position.x + this.direction * 1e3,
            y: t.position.y + l.default.randomInt(-25, 25),
          };
        }
        var a = Math.sqrt(
          Math.pow(t.position.x - this.target.x, 2) +
            Math.pow(t.position.y - this.target.y, 2)
        );
        this.xSpeed = (this.target.x - t.position.x) / a;
        this.ySpeed = (this.target.y - t.position.y) / a;
        this.tween.on(u.default.CHANGE, this.update_, this);
        this.tween
          .wait(r)
          .call(this.notify, this, [f.default.COMPLETE])
          .call(this.removeSelf, this);
        this.tween.setPaused(true);
        return this;
      };
      t.prototype.update_ = function () {
        if (this.map && this.obj) {
          var t = this.speed;
          this.map.moveObject(
            this.obj,
            t * this.xSpeed,
            this.ySpeed * t,
            undefined,
            false
          );
        }
      };
      t.prototype.clean = function () {
        this.tween.off(u.default.CHANGE, this.update_, this);
        this.tween.clean();
        this.map = undefined;
        this.obj = undefined;
        this.target = undefined;
        this.tween = undefined;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Qo);
  var Jo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Qo);
    var s = o(Ge);
    var u = o(Wo);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "魔法星彈";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/mage/animation/magicmissile.ani.json"
          )
        );
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.hiter.enabled = false;
        t.on(s.default.COMPLETE, t.onHit, t);
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
        var t = new a.default(
          this.map,
          this,
          this.findFightObject(),
          this.direction,
          200,
          1e3
        );
        t.setBind(this);
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.findFightObject = function (t) {
        var n = this;
        var e = this.fu.camp;
        var o = this.map;
        var r;
        if (e == ht.RoleCamp.HERO) {
          r = o.getFightObjects(ht.RoleCamp.MONSTER, true);
        } else if (e == ht.RoleCamp.MONSTER) {
          r = o.getFightObjects(ht.RoleCamp.HERO, true);
        }
        var i = r.length;
        r = r.sort(function (t, e) {
          return (
            Math.abs(t.position.x - n.position.x) -
            Math.abs(e.position.x - n.position.x)
          );
        });
        for (var a = 0; a < i; a++) {
          var s = r[a].position.x < this.position.x ? -1 : 1;
          if (s == this.direction) {
            return r[a];
          }
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
        this.off(s.default.COMPLETE, this.onHit, this);
      };
      t.prototype.onHit = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(u.default);
    e.default = l;
  });
  t(Jo);
  var Zo = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "怒氣爆發 主要";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/blastblood/blood1.ani.json"
          )
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastbloodfloor1.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastbloodfloor2.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastbloodfloor3.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood2.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood3.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood2.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood3.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood4.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood5.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood6.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood7.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood8.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/floor_over.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blast_blood_light.ani.json",
          undefined,
          undefined,
          true
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {};
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(Zo);
  var tr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "怒氣爆發 主要";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/blastblood/blood1.ani.json"
          )
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastbloodfloor1.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastbloodfloor2.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood2.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood2.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood3.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood4.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood5.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood6.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood7.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blood8.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/floor_over.ani.json",
          undefined,
          undefined,
          true
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastblood/blast_blood_light.ani.json",
          undefined,
          undefined,
          true
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {};
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(tr);
  var er = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "怒氣爆發 隱藏";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/blastbloodpresub_back.ani.json"
          )
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {};
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(er);
  var nr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "怒氣爆發 隱藏";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/blastbloodpresub_back.ani.json"
          )
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/blastbloodpresub_front.ani.json",
          undefined,
          undefined,
          true
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.setCurActionInfo({
          name: "",
          action: "",
          ani: "",
          hitLiftUp: 1,
          liftUp: 600,
          pushAside: 0,
        });
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {};
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(nr);
  var or = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "怒氣爆發 隱藏";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/blastbloodsub.ani.json"
          )
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.on(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {
        this.fu.resetHits();
      };
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(or);
  var rr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.delaytime = 60;
        t.layer = vt.layerConstValue.normal;
        t.name = "怒氣爆發 隱藏";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/blastbloodsub.ani.json"
          )
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.setCurActionInfo({
          name: "",
          action: "",
          ani: "",
          hitLiftUp: 1,
          liftUp: 450,
          pushAside: 0,
        });
        t.fu.hiter.enabled = false;
        t.count = 8;
        t.time = t.delaytime;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
        if (this.body.index > 0) {
          this.time -= t;
          if (this.time <= 0) {
            this.fu.resetHits();
            this.time = this.delaytime;
          }
        }
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {};
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(rr);
  var ir = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "血气之刃爆炸";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/bloodswordexplosion/exp.ani.json"
          )
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/bloodswordexplosion/exp_dodge.ani.json",
          undefined,
          undefined,
          true,
          undefined
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.setCurActionInfo({
          name: "",
          ani: "",
          action: "",
          hitLiftUp: 1,
          liftUp: 300,
          pushAside: 50,
          attackDirection: "horizon",
        });
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {};
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(ir);
  var ar = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "嗜魂封魔斬";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/bloodyrave.ani.json"
          )
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/bloodyravelayer.ani.json",
          undefined,
          undefined,
          true,
          0
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.setCurActionInfo({
          name: "",
          ani: "",
          action: "",
          hitLiftUp: 1,
          liftUp: 600,
          pushAside: 900,
          attackDirection: "down",
          hitType: "slash",
        });
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {};
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(ar);
  var sr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "十字斬";
        t.direction = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/character/swordman/animation/gorecross1.ani.json"
          )
        );
        t.addAnimationEquipment(
          "passiveobject/character/swordman/animation/gorecross2.ani.json",
          undefined,
          undefined,
          true,
          0
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.once(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.map.event(i.default.ATTACK_BOX);
        this.fu.hiter.enabled = true;
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
      };
      t.prototype.onHit = function () {};
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.enabled = false;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(sr);
  var ur = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(L);
    var i = o(Xo);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "魔法目標點警告標識";
        t.layer = vt.layerConstValue.bottom;
        return t;
      }
      t.prototype.initData = function (t, e) {
        if (t === void 0) {
          t = 0;
        }
        var n = [
          "animation/magictargetwarningnodraw.ani",
          "animation/magictargetwarning.ani",
          "animation/magictargetwarningterrible.ani",
          "animation/gunnertargetwarningterribledodge.ani",
          "animation/gunnertargetwarningterriblenormal.ani",
          "animation/magictargetwarning_green.ani",
          "animation/magictargetwarningterrible_green.ani",
          "animation/targetmark/creator_targeting_mark.ani",
        ];
        if (n[t]) {
          this.post = e;
          var o = this.addAnimation("passiveobject/common/" + n[t]);
          o.once(r.default.COMPLETE, this.onComplete, this);
        }
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onComplete = function () {
        if (this.post) {
          this.map.event(this.post);
        }
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(i.default);
    e.default = a;
  });
  t(ur);
  var lr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Wo);
    var i = o(L);
    var a = o(dt);
    var s = o(q);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "時間的證明";
        t.step = 0;
        t.direction = 1;
        t.time = 0;
        t.count = 1;
        t.fu.on(fe.BattleUnitEvent.BEHIT, t.onDamage, t);
        t.on("drop", t.onDrop, t);
        return t;
      }
      t.prototype.initData = function (t) {
        e.prototype.initData.call(this);
        this.time = t || 0;
      };
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
        this.time -= t;
        if (this.time <= 0 && this.count > 0) {
          s.default.sound.play("R_SHOCKWAVE_HIT", { completeDestroy: true });
          this.fu.setCurActionInfo({
            hitLiftUp: true,
            liftUp: 400,
            ani: "",
            name: "",
            action: "",
          });
          this.body.setAnimation(
            a.default.getAnimationData(
              "passiveobject/kcontents3/hell/obj/animation/wait.ani.json"
            )
          );
          this.addAnimationEquipment(
            "passiveobject/kcontents3/hell/obj/animation/shadow.ani.json"
          );
          this.count = 0;
        }
      };
      t.prototype.onDamage = function () {
        var t;
        if (
          ((t = this.map) === null || t === void 0 ? void 0 : t.mapStage) > 0
        ) {
          if (this.step == 0) {
            this.step = 1;
            this.removeAllEquipment();
            this.body.setAnimation(
              a.default.getAnimationData(
                "passiveobject/kcontents3/hell/obj/animation/r_start.ani.json"
              )
            );
            this.body.once(i.default.COMPLETE, this.onDamage, this);
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/r_start_1.ani.json",
              undefined,
              undefined,
              true
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/shadow.ani.json"
            );
          } else if (this.step == 1) {
            this.step = 2;
            this.removeAllEquipment();
            this.body.setAnimation(
              a.default.getAnimationData(
                "passiveobject/kcontents3/hell/obj/animation/r_wait_1step.ani.json"
              )
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/r_loop_1.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/shadow.ani.json"
            );
          } else if (this.step == 2) {
            this.step = 3;
            this.removeAllEquipment();
            this.body.setAnimation(
              a.default.getAnimationData(
                "passiveobject/kcontents3/hell/obj/animation/r_wait_drop.ani.json"
              )
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/r_loop_1.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/shadow.ani.json"
            );
          } else if (this.step == 3) {
            this.step = 4;
            this.removeAllEquipment();
            this.body.setAnimation(
              a.default.getAnimationData(
                "passiveobject/kcontents3/hell/obj/animation/r_drop.ani.json"
              )
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_flame.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/shadow.ani.json"
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_particle2.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_particle.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_shatter.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_stone2.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_light031.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_shock3.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_shock2.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_shock.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_beam2.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_beam.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_flame2.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_smokeback2.ani.json",
              undefined,
              undefined,
              undefined
            );
            this.addAnimationEquipment(
              "passiveobject/kcontents3/hell/obj/animation/broken_effect/rdrop/rdrop_circle.ani.json",
              undefined,
              undefined,
              undefined
            );
          }
          this.map.event("hell", [this.step]);
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
        this.off("drop", this.onDrop, this);
        this.fu.off(fe.BattleUnitEvent.BEHIT, this.onDamage, this);
      };
      t.prototype.onDrop = function () {
        while (this.step < 3) {
          this.onDamage();
        }
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(lr);
  var fr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "可以破壞的石柱";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/stonepillar/stonepillar0.ani",
          [58, 20]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(fr);
  var cr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "有被攻擊動作的樹";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/actiontree/lorien/actiontree1-0.ani",
          [80, 15]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(cr);
  var pr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "有被攻擊動作的樹";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/actiontree/mirkwood/actiontree1-0.ani",
          [58, 20]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(pr);
  var dr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "有被攻擊動作的樹";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/actiontree/sunderland/actiontree1-0.ani",
          [58, 20]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(dr);
  var hr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "有被攻擊動作的樹";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/actiontree/grakkarak/actiontree2-0.ani",
          [58, 20]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(hr);
  var vr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "有被攻擊動作的樹";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/actiontree/mirkwood/actiontree2-0.ani",
          [58, 20]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(vr);
  var yr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "有被攻擊動作的樹";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/actiontree/sunderland/actiontree2-0.ani",
          [58, 20]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(yr);
  var _r = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "大型草";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/largegrassgrakkarak.ani",
          [26, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(_r);
  var mr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "大型草";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/largegrasslorien.ani",
          [26, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(mr);
  var gr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "大型草";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/largegrassmirkwood.ani",
          [26, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(gr);
  var br = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "大型草";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/largegrasssunderland.ani",
          [26, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(br);
  var Or = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "小草";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/smallgrassgrakkarak.ani",
          [26, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Or);
  var wr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "小草";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/smallgrasslorien.ani",
          [26, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(wr);
  var Ar = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "小草";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/smallgrassmirkwood.ani",
          [26, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ar);
  var Er = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "小草";
        t.set(
          "passiveobject/mapobject/breakableobject/animation.ani.json",
          "animation/smallgrasssunderland.ani".toLocaleLowerCase(),
          [26, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Er);
  var Tr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(S);
    var i = o(le);
    var a = o(b);
    var s = o(Uo);
    var u = o(dt);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.resetHits();
        t.name = "財寶箱";
        t.pass_type = "[do not pass]";
        t.actor = t;
        t.roleData = {};
        t.camp = ht.RoleCamp.NONE;
        t.body = new a.default();
        t.body.setAnimationGroup(
          u.default.getPvfConf(
            "passiveobject/mapobject/breakableobject/animation.ani.json"
          )
        );
        t.body.setAction("animation/treasurebox.ani");
        t.body.on(XOF.Event.COMPLETE, t.onPlayComplete, t);
        t.attribute = new r.default();
        t.hiter = new i.default(t);
        t.addChild(t.body);
        t.setObjectWidth(58, 20);
        return t;
      }
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(XOF.Event.COMPLETE, this.onPlayComplete, this);
        this.body.destroy();
      };
      t.prototype.isGuard = function () {
        return false;
      };
      t.prototype.behit = function (t, e) {
        e.float;
        this.hiter.enabled = false;
        this.pass_type = "[pass all]";
        this.body.setAction("animation/treasureboxdestroy.ani");
        this.updatePasstype();
      };
      t.prototype.onPlayComplete = function () {
        if (this.hiter.enabled) {
          this.body.setAction("animation/treasurebox.ani");
        } else {
          this.map.removeObject(this);
        }
      };
      t.prototype.resetHits = function () {
        this.hits = [];
      };
      t.prototype.hit = function (t) {
        return false;
      };
      t.prototype.isFloat = function () {
        return this.float > 0;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(s.default);
    e.default = l;
  });
  t(Tr);
  var Cr = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Xo);
    var i = n(L);
    var a = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "";
        var e = t.addAnimation(
          "passiveobject/kcontents3/hell/crescent/animation/blackhole.ani"
        );
        e.once(i.default.COMPLETE, t.onComplete, t);
        t.addAnimation(
          "passiveobject/kcontents3/hell/crescent/animation/blackhole_1.ani"
        );
        return t;
      }
      t.prototype.initData = function (t) {
        n.prototype.initData.call(this);
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
      };
      t.prototype.onComplete = function () {
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(Cr);
  var Pr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Wo);
    var i = o(dt);
    var a = o(L);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "";
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.body.setAnimation(
          i.default.getAnimationData(
            "passiveobject/kcontents3/hell/mars/animation/hit.ani.json"
          )
        );
        t.addAnimationEquipment(
          "passiveobject/kcontents3/hell/mars/animation/hit_1.ani.ani"
        );
        t.body.once(a.default.COMPLETE, t.onComplete, t);
        t.body.on(a.default.ATTACK_BOX, t.onAttackBox, t);
        return t;
      }
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(a.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Pr);
  var jr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Wo);
    var i = o(dt);
    var a = o(L);
    var s = o(q);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "普通單元";
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.body.setAnimation(
          i.default.getAnimationData(
            "passiveobject/kcontents3/hell/normal/animation/small.ani"
          )
        );
        t.addAnimationEquipment(
          "passiveobject/kcontents3/hell/normal/animation/small_1.ani"
        );
        t.addAnimationEquipment(
          "passiveobject/kcontents3/hell/normal/animation/small_2.ani"
        );
        t.body.once(a.default.COMPLETE, t.onAttack, t);
        return t;
      }
      t.prototype.update = function (t) {
        this.body.update(t);
        e.prototype.update.call(this, t);
      };
      t.prototype.onAttack = function () {
        this.fu.setCurActionInfo({
          hitLiftUp: true,
          liftUp: 400,
          ani: "",
          name: "",
          action: "",
        });
        this.removeAllEquipment();
        this.body.setAnimation(
          i.default.getAnimationData(
            "passiveobject/kcontents3/hell/normal/animation/boom.ani.json"
          )
        );
        this.addAnimationEquipment(
          "passiveobject/kcontents3/hell/normal/animation/boom_1.ani.json",
          undefined,
          undefined,
          undefined,
          0
        );
        s.default.sound.play("R_MON_DARK_LARGE_HIT", { completeDestroy: true });
        this.body.once(a.default.COMPLETE, this.onComplete, this);
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(a.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(jr);
  var Sr = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Xo);
    var i = n(L);
    var a = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "";
        var e = t.addAnimation(
          "passiveobject/kcontents3/themineofabyss/warning/animation/normal/normal1.ani"
        );
        e.once(i.default.COMPLETE, t.onComplete, t);
        t.addAnimation(
          "passiveobject/kcontents3/themineofabyss/warning/animation/normal/normal1_2.ani"
        );
        t.addAnimation(
          "passiveobject/kcontents3/themineofabyss/warning/animation/normal/normal1_3.ani"
        );
        return t;
      }
      t.prototype.initData = function (t) {
        n.prototype.initData.call(this);
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
      };
      t.prototype.onComplete = function () {
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(Sr);
  var Mr = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var i = n(q);
    var a = n(L);
    var s = n(Wo);
    var u = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.name = "光之城主 - 激光發射部分";
        t.layer = vt.layerConstValue.normal;
        t.fu.on(fe.BattleUnitEvent.HIT, t.onHit, t);
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/monster/lordoflight/ani/laserfire.ani"
          )
        );
        t.body.once(a.default.COMPLETE, t.onComplete, t);
        var e = t.addAnimation(
          "passiveobject/monster/lordoflight/ani/lasertile.ani"
        );
        t.fu.setCurActionInfo({
          element: ["light"],
          hitLiftUp: 1,
          liftUp: 450,
          pushAside: 1400,
          ani: "",
          action: "",
          name: "",
        });
        e.width = 4e3;
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.onStart = function () {
        n.prototype.onStart.call(this);
        this.fu.hiter.enabled = true;
        this.scaleX = this.direction;
      };
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onHit, this);
        this.body.off(a.default.COMPLETE, this.onComplete, this);
      };
      t.prototype.onHit = function () {
        i.default.sound.play("LASER_HIT");
      };
      t.prototype.update = function (t) {
        this.body.update(t);
        n.prototype.update.call(this, t);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(s.default);
    e.default = u;
  });
  t(Mr);
  var kr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "光之圣主的閃電";
        t.body.setAnimation(
          r.default.getPvfConf(
            "passiveobject/common/animation/thunderbolt.ani.json"
          )
        );
        t.body.once(i.default.COMPLETE, t.onComplete, t);
        t.fu.setCurActionInfo({
          element: ["light"],
          ani: "",
          action: "",
          name: "",
        });
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(kr);
  var xr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "柱子 1";
        t.set("map/amon/animation/obstacle2.ani.json", undefined, [20, 20]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(xr);
  var Dr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "柱子 2";
        t.set("map/amon/animation/obstacle3.ani.json", undefined, [20, 20]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Dr);
  var Ir = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "燒焦的木柱";
        t.set(
          "map/lorien/animation.ani.json",
          "animation/burnttree0.ani",
          [80, 15]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ir);
  var Rr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "燒焦的木柱";
        t.set(
          "map/mirkwood/animation.ani.json",
          "animation/burnttree0.ani",
          [80, 15]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Rr);
  var Lr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "燒焦的木柱";
        t.set(
          "map/mirkwood/animation.ani.json",
          "animation/burnttree0.ani",
          [80, 15]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Lr);
  var Fr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "燒焦的木柱";
        t.set(
          "map/grakkarak/animation.ani.json",
          "animation/burnttree0.ani",
          [80, 15]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Fr);
  var Br = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小石柱";
        t.set(
          "map/lorien/animation.ani.json",
          "animation/stonepillar0.ani",
          [22, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Br);
  var Nr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小石柱";
        t.set(
          "map/mirkwood/animation.ani.json",
          "animation/stonepillar0.ani",
          [22, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Nr);
  var Xr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小石柱";
        t.set(
          "map/sunderland/animation.ani.json",
          "animation/stonepillar0.ani",
          [22, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Xr);
  var Ur = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小石柱";
        t.set(
          "map/grakkarak/animation.ani.json",
          "animation/stonepillar0.ani",
          [22, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ur);
  var Hr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小樹 A";
        t.set(
          "map/lorien/animation.ani.json",
          "animation/smalltree1.ani",
          [40, 24]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Hr);
  var Gr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小樹 A";
        t.set(
          "map/mirkwood/animation.ani.json",
          "animation/smalltree1.ani",
          [40, 24]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Gr);
  var Vr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小樹 A";
        t.set(
          "map/sunderland/animation.ani.json",
          "animation/smalltree1.ani",
          [40, 24]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Vr);
  var $r = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小樹 B";
        t.set(
          "map/lorien/animation.ani.json",
          "animation/smalltree0.ani",
          [40, 24]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t($r);
  var qr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小樹 B";
        t.set(
          "map/mirkwood/animation.ani.json",
          "animation/smalltree0.ani",
          [40, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(qr);
  var Kr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "小樹 B";
        t.set(
          "map/sunderland/animation.ani.json",
          "animation/smalltree0.ani",
          [40, 24]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Kr);
  var Yr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "安眠石";
        t.set(
          "map/lorien/animation.ani.json",
          "animation/stonehead.ani",
          [140, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Yr);
  var Wr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "安眠石";
        t.set(
          "map/mirkwood/animation.ani.json",
          "animation/stonehead.ani",
          [140, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Wr);
  var zr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "安眠石";
        t.set(
          "map/sunderland/animation.ani.json",
          "animation/stonehead.ani",
          [140, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(zr);
  var Qr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "安眠石";
        t.set(
          "map/grakkarak/animation.ani.json",
          "animation/stonehead.ani",
          [140, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Qr);
  var Jr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "石柱";
        t.set(
          "map/mirkwood/animation.ani.json",
          "animation/stonepillar1.ani",
          [140, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Jr);
  var Zr = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "石柱";
        t.set(
          "map/sunderland/animation.ani.json",
          "animation/stonepillar1.ani",
          [140, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Zr);
  var ti = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[do not pass]";
        t.name = "石柱";
        t.set(
          "map/grakkarak/animation.ani.json",
          "animation/stonepillar1.ani",
          [140, 28]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ti);
  var ei = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = o(Xo);
    var a = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.ani = t.addAni(
          "passiveobject/mapobject/particlefactory/animation.ani.json",
          "animation/rayground.ani"
        );
        t.direction = Math.random() > 0.5 ? 1 : -1;
        t.x = Math.random() * 10 * t.direction;
        return t;
      }
      t.prototype.update = function (t) {
        o.prototype.update.call(this, t);
        var e = 20;
        var n = 3e3;
        this.ani.x += t * this.direction * (20 / n);
        if (this.ani.x > e / 2 || this.ani.x < -e / 2) {
          this.direction = this.direction * -1;
        }
        this.ani.x = r.default.rangeFixed(this.ani.x, -e / 2, e / 2);
      };
      return t;
    })(i.default);
    e.default = a;
  });
  t(ei);
  var ni = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = o(Q);
    var r = o(Xo);
    var i = (function (u) {
      n(t, u);
      function t() {
        var t = u.call(this) || this;
        var e = t.addAni(
          "passiveobject/mapobject/particlefactory/animation.ani.json",
          "animation/ray0.ani"
        );
        var n = t.addAni(
          "passiveobject/mapobject/particlefactory/animation.ani.json",
          "animation/ray1.ani"
        );
        var o = t.addAni(
          "passiveobject/mapobject/particlefactory/animation.ani.json",
          "animation/ray2.ani"
        );
        var r = t.addAni(
          "passiveobject/mapobject/particlefactory/animation.ani.json",
          "animation/ray3.ani"
        );
        var i = t.addAni(
          "passiveobject/mapobject/particlefactory/animation.ani.json",
          "animation/ray4.ani"
        );
        var a = [-50, 0, 50, 90, 130];
        {
          var s = a[0];
          e.pos(s, -450 + Math.random() * 20);
          t.tw = l.default
            .get(e, { loop: true })
            .to({ x: s + 10 }, 3e3)
            .wait(50)
            .to({ x: s - 10 }, 3e3)
            .wait(50);
          l.default.removeTweenFromList(t.tw);
        }
        {
          var s = a[1];
          i.pos(s, -450 + Math.random() * 20);
          t.tw4 = l.default
            .get(i, { loop: true })
            .to({ x: s + 10 }, 3e3)
            .wait(50)
            .to({ x: s - 10 }, 3e3)
            .wait(50);
          l.default.removeTweenFromList(t.tw4);
        }
        {
          var s = a[2];
          r.pos(s, -450 + Math.random() * 20);
          t.tw3 = l.default
            .get(r, { loop: true })
            .to({ x: s - 10 }, 3e3)
            .wait(50)
            .to({ x: s + 10 }, 3e3)
            .wait(50);
          l.default.removeTweenFromList(t.tw3);
        }
        {
          var s = a[3];
          n.pos(s, -450 + Math.random() * 20);
          t.tw1 = l.default
            .get(n, { loop: true })
            .to({ x: s - 10 }, 3e3)
            .wait(50)
            .to({ x: s + 10 }, 3e3)
            .wait(50);
          l.default.removeTweenFromList(t.tw1);
        }
        {
          var s = a[4];
          o.pos(s, -450 + Math.random() * 20);
          t.tw2 = l.default
            .get(o, { loop: true })
            .to({ x: s + 10 }, 3e3)
            .wait(50)
            .to({ x: s - 10 }, 3e3)
            .wait(50);
          l.default.removeTweenFromList(t.tw2);
        }
        return t;
      }
      t.prototype.update = function (t) {
        u.prototype.update.call(this, t);
        this.tw.$update(t);
        this.tw1.$update(t);
        this.tw2.$update(t);
        this.tw3.$update(t);
        this.tw4.$update(t);
      };
      t.prototype.onRemove = function () {
        u.prototype.onRemove.call(this);
        this.tw.clean();
        this.tw1.clean();
        this.tw2.clean();
        this.tw3.clean();
        this.tw4.clean();
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(ni);
  var oi = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = n(dt);
    var u = n(A);
    var r = n(qn);
    var i = n(nt);
    var a = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.camp = ht.RoleCamp.NONE;
        return t;
      }
      t.prototype.initData = function () {};
      t.prototype.init = function (t, e, n, o) {
        var r = s.default.getPvfConf(n);
        this.tileData = r[(o || "").toLowerCase()];
        if (e) {
          for (var i = 0; i < e.length; i++) {
            var a = new u.default();
            a.name = t[i * 2] + "";
            a.setAnimation(r[e[i].toLowerCase()], [0, t[i * 2 + 1]]);
            this.addChild(a);
          }
          this.setState(false);
        }
      };
      t.prototype.init2 = function (t, e, n, o) {
        if (n === void 0) {
          n = "";
        }
        if (o === void 0) {
          o = ".json";
        }
        if (e) {
          for (var r = 0; r < e.length; r++) {
            var i = new u.default();
            i.name = t[r * 2] + "";
            var a = s.default.getPvfConf((n + e[r] + o).toLowerCase());
            if (e[r].lastIndexOf(".til") >= 0) {
              this.tileData = a;
              this.tileIntData = [t[r * 2], t[r * 2 + 1]];
            }
            i.setAnimation(a, [0, t[r * 2 + 1]]);
            this.addChild(i);
          }
          this.setState(false);
        }
      };
      t.prototype.setState = function (t) {
        var e = this;
        if (this.isOpen == t) return;
        this.isOpen = t;
        this.children_.forEach(function (t) {
          if (t.name != "0") {
            t.visible = t.name == (e.isOpen ? "2" : "1");
          }
          t.to(0, 0);
        });
      };
      t.prototype.update = function (e) {
        n.prototype.update.call(this, e);
        this.children_.forEach(function (t) {
          return t.visible && t.update(e);
        });
      };
      t.prototype.updateState = function (t) {
        var e;
        if (this.map && !this.isWall) {
          var n = "pathgate" + this.direction;
          this.map.removeEventRect(n);
          if (t) {
            if (
              ((e = this.pathgateRect) === null || e === void 0
                ? void 0
                : e.length) >= 4
            ) {
              this.map.addEventRect(
                r.default.DungeonTo,
                n,
                this.x + this.pathgateRect[0],
                this.position.y + this.pathgateRect[1],
                this.pathgateRect[2],
                this.pathgateRect[3],
                [this.direction]
              );
            } else {
              switch (this.direction) {
                case 0:
                  {
                    this.map.addEventRect(
                      r.default.DungeonTo,
                      n,
                      this.x + 40,
                      this.position.y - 80,
                      40,
                      120,
                      [this.direction]
                    );
                  }
                  break;
                case 1:
                  {
                    this.map.addEventRect(
                      r.default.DungeonTo,
                      n,
                      this.x - 120,
                      this.position.y - 50,
                      40,
                      60,
                      [this.direction]
                    );
                  }
                  break;
                case 2:
                  {
                    this.map.addEventRect(
                      r.default.DungeonTo,
                      n,
                      this.x - 50,
                      this.position.y - 10,
                      100,
                      20,
                      [this.direction]
                    );
                  }
                  break;
                case 3:
                  {
                    this.map.addEventRect(
                      r.default.DungeonTo,
                      n,
                      this.x - 50,
                      this.position.y - 10,
                      100,
                      40,
                      [this.direction]
                    );
                  }
                  break;
              }
            }
          }
        }
      };
      t.prototype.pos = function (t, e) {
        n.prototype.pos.call(this, t, e);
        if (this.map) {
          this.updateState(true);
          if (this.tileData) {
            this.map.addTilePasstype(this.tileData, 0, this.direction);
          }
        }
        return this;
      };
      t.prototype.setMap = function (t) {
        if (!t) this.map.removeEventRect("pathgate" + this.direction);
        return n.prototype.setMap.call(this, t);
      };
      return t;
    })(i.default);
    e.default = a;
  });
  t(oi);
  var ri = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側領主門";
        var e = [
          "animation/granflorisdowngate.ani",
          "animation/granflorisdownclosedoor.ani",
          "animation/granflorisdownopendoor.ani",
          "animation/granflorisdownlight.ani",
        ];
        var n = [0, 6, 1, 6, 2, 6, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ri);
  var ii = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側門";
        var e = [
          "Animation/GranFlorisDownGate.ani",
          "Animation/GranFlorisDownCloseDoor.ani",
          "Animation/GranFlorisDownOpenDoor.ani",
          "Animation/GranFlorisDownLight.ani",
        ];
        var n = [0, 2, 1, 2, 2, 2, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ii);
  var ai = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的左側領主門";
        var e = [
          "animation/granflorisleftu1.ani",
          "animation/granflorisleftgate.ani",
          "animation/granflorisleftclosedoor.ani",
          "animation/granflorisleftopendoor.ani",
          "animation/granflorisleftlight.ani",
          "animation/granflorislefto1.ani",
        ];
        var n = [0, 5, 0, 6, 1, 6, 2, 6, 2, 2, 0, 5, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ai);
  var si = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.name = "洛蘭的左側門";
        var e = [
          "Animation/GranFlorisLeftU1.ani",
          "Animation/GranFlorisLeftGate.ani",
          "Animation/GranFlorisLeftCloseDoor.ani",
          "Animation/GranFlorisLeftOpenDoor.ani",
          "Animation/GranFlorisLeftLight.ani",
          "Animation/GranFlorisLeftO1.ani",
        ];
        var n = [0, 5, 0, 2, 1, 2, 2, 2, 2, 1, 0, 5, 0, 19];
        var o = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        t.init(n, e, o, "Tile/LeftDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(si);
  var ui = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛兰的左侧墙";
        var e = [
          "Animation/GranFlorisLeftWallU1.ani",
          "Animation/GranFlorisLeftWallO1.ani",
        ];
        var n = [0, 5, 0, 5, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ui);
  var li = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側領主門";
        var e = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 5, 0, 6, 1, 6, 2, 6, 2, 2, 0, 5, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(li);
  var fi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側門";
        t.direction = 1;
        var e = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        var n = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var o = [0, 5, 0, 2, 1, 2, 2, 2, 2, 1, 0, 5, 13, 19];
        t.init(o, n, e, "Tile/RightDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(fi);
  var ci = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側牆";
        var e = [
          "animation/granflorisrightwallu1.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 5, 0, 5, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ci);
  var pi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側領主門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 5, 0, 6, 1, 6, 2, 6, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(pi);
  var di = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 5, 0, 2, 1, 2, 2, 2, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(di);
  var hi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側領主門";
        var e = [
          "animation/granflorisdowngate.ani",
          "animation/granflorisdownclosedoor.ani",
          "animation/granflorisdownopendoor.ani",
          "animation/granflorisdownlight.ani",
        ];
        var n = [0, 8, 1, 8, 2, 8, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(hi);
  var vi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側門";
        var e = [
          "Animation/GranFlorisDownGate.ani",
          "Animation/GranFlorisDownCloseDoor.ani",
          "Animation/GranFlorisDownOpenDoor.ani",
          "Animation/GranFlorisDownLight.ani",
        ];
        var n = [0, 4, 1, 4, 2, 4, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(vi);
  var yi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的左側領主門";
        var e = [
          "animation/granflorisleftu1.ani",
          "animation/granflorisleftgate.ani",
          "animation/granflorisleftclosedoor.ani",
          "animation/granflorisleftopendoor.ani",
          "animation/granflorisleftlight.ani",
          "animation/granflorislefto1.ani",
        ];
        var n = [0, 4, 0, 8, 1, 8, 2, 8, 2, 2, 0, 4, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(yi);
  var _i = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.name = "洛蘭的左側門";
        var e = [
          "Animation/GranFlorisLeftU1.ani",
          "Animation/GranFlorisLeftGate.ani",
          "Animation/GranFlorisLeftCloseDoor.ani",
          "Animation/GranFlorisLeftOpenDoor.ani",
          "Animation/GranFlorisLeftLight.ani",
          "Animation/GranFlorisLeftO1.ani",
        ];
        var n = [0, 4, 0, 4, 1, 4, 2, 4, 2, 1, 0, 4, 0, 19];
        var o = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        t.init(n, e, o, "Tile/LeftDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(_i);
  var mi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛兰的左侧墙";
        var e = [
          "Animation/GranFlorisLeftWallU1.ani",
          "Animation/GranFlorisLeftWallO1.ani",
        ];
        var n = [0, 4, 0, 4, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(mi);
  var gi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側領主門";
        var e = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 4, 0, 8, 1, 8, 2, 8, 2, 2, 0, 4, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(gi);
  var bi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側門";
        t.direction = 1;
        var e = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        var n = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var o = [0, 4, 0, 4, 1, 4, 2, 4, 2, 1, 0, 4, 13, 19];
        t.init(o, n, e, "Tile/RightDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(bi);
  var Oi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側牆";
        var e = [
          "animation/granflorisrightwallu1.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 4, 0, 4, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Oi);
  var wi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側領主門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 4, 0, 8, 1, 8, 2, 8, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(wi);
  var Ai = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 4, 0, 4, 1, 4, 2, 4, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ai);
  var Ei = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側領主門";
        var e = [
          "animation/granflorisdowngate.ani",
          "animation/granflorisdownclosedoor.ani",
          "animation/granflorisdownopendoor.ani",
          "animation/granflorisdownlight.ani",
        ];
        var n = [0, 5, 1, 5, 2, 5, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ei);
  var Ti = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側門";
        var e = [
          "Animation/GranFlorisDownGate.ani",
          "Animation/GranFlorisDownCloseDoor.ani",
          "Animation/GranFlorisDownOpenDoor.ani",
          "Animation/GranFlorisDownLight.ani",
        ];
        var n = [0, 1, 1, 1, 2, 1, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ti);
  var Ci = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的左側領主門";
        var e = [
          "animation/granflorisleftu1.ani",
          "animation/granflorisleftgate.ani",
          "animation/granflorisleftclosedoor.ani",
          "animation/granflorisleftopendoor.ani",
          "animation/granflorisleftlight.ani",
          "animation/granflorislefto1.ani",
        ];
        var n = [0, 1, 0, 5, 1, 5, 2, 5, 2, 2, 0, 1, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ci);
  var Pi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.name = "洛蘭的左側門";
        var e = [
          "Animation/GranFlorisLeftU1.ani",
          "Animation/GranFlorisLeftGate.ani",
          "Animation/GranFlorisLeftCloseDoor.ani",
          "Animation/GranFlorisLeftOpenDoor.ani",
          "Animation/GranFlorisLeftLight.ani",
          "Animation/GranFlorisLeftO1.ani",
        ];
        var n = [0, 1, 0, 1, 1, 1, 2, 1, 2, 1, 0, 1, 0, 19];
        var o = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        t.init(n, e, o, "Tile/LeftDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Pi);
  var ji = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛兰的左侧墙";
        var e = [
          "Animation/GranFlorisLeftWallU1.ani",
          "Animation/GranFlorisLeftWallO1.ani",
        ];
        var n = [0, 1, 0, 1, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ji);
  var Si = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側領主門";
        var e = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 1, 0, 5, 1, 5, 2, 1, 2, 2, 0, 1, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Si);
  var Mi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側門";
        t.direction = 1;
        var e = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        var n = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var o = [0, 1, 0, 1, 1, 1, 2, 1, 2, 1, 0, 1, 13, 19];
        t.init(o, n, e, "Tile/RightDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Mi);
  var ki = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側牆";
        var e = [
          "animation/granflorisrightwallu1.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 1, 0, 1, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ki);
  var xi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側領主門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 1, 0, 5, 1, 5, 2, 1, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(xi);
  var Di = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 1, 0, 1, 1, 1, 2, 1, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Di);
  var Ii = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側領主門";
        var e = [
          "animation/granflorisdowngate.ani",
          "animation/granflorisdownclosedoor.ani",
          "animation/granflorisdownopendoor.ani",
          "animation/granflorisdownlight.ani",
        ];
        var n = [0, 6, 1, 6, 2, 6, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ii);
  var Ri = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側門";
        var e = [
          "Animation/GranFlorisDownGate.ani",
          "Animation/GranFlorisDownCloseDoor.ani",
          "Animation/GranFlorisDownOpenDoor.ani",
          "Animation/GranFlorisDownLight.ani",
        ];
        var n = [0, 2, 1, 2, 2, 2, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ri);
  var Li = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的左側領主門";
        var e = [
          "animation/granflorisleftu1.ani",
          "animation/granflorisleftgate.ani",
          "animation/granflorisleftclosedoor.ani",
          "animation/granflorisleftopendoor.ani",
          "animation/granflorisleftlight.ani",
          "animation/granflorislefto1.ani",
        ];
        var n = [0, 2, 0, 6, 1, 6, 2, 6, 2, 2, 0, 2, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Li);
  var Fi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.name = "洛蘭的左側門";
        var e = [
          "Animation/GranFlorisLeftU1.ani",
          "Animation/GranFlorisLeftGate.ani",
          "Animation/GranFlorisLeftCloseDoor.ani",
          "Animation/GranFlorisLeftOpenDoor.ani",
          "Animation/GranFlorisLeftLight.ani",
          "Animation/GranFlorisLeftO1.ani",
        ];
        var n = [0, 2, 0, 2, 1, 2, 2, 2, 2, 1, 0, 2, 0, 19];
        var o = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        t.init(n, e, o, "Tile/LeftDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Fi);
  var Bi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛兰的左侧墙";
        var e = [
          "Animation/GranFlorisLeftWallU1.ani",
          "Animation/GranFlorisLeftWallO1.ani",
        ];
        var n = [0, 2, 0, 2, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Bi);
  var Ni = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側領主門";
        var e = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 2, 0, 6, 1, 6, 2, 6, 2, 2, 0, 2, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ni);
  var Xi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側門";
        t.direction = 1;
        var e = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        var n = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var o = [0, 2, 0, 2, 1, 2, 2, 2, 2, 1, 0, 2, 13, 19];
        t.init(o, n, e, "Tile/RightDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Xi);
  var Ui = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側牆";
        var e = [
          "animation/granflorisrightwallu1.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 2, 0, 2, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ui);
  var Hi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側領主門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 2, 0, 6, 1, 6, 2, 6, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Hi);
  var Gi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 2, 0, 2, 1, 2, 2, 2, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Gi);
  var Vi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側領主門";
        var e = [
          "animation/granflorisdowngate.ani",
          "animation/granflorisdownclosedoor.ani",
          "animation/granflorisdownopendoor.ani",
          "animation/granflorisdownlight.ani",
        ];
        var n = [0, 7, 1, 7, 2, 7, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Vi);
  var $i = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的下側門";
        var e = [
          "Animation/GranFlorisDownGate.ani",
          "Animation/GranFlorisDownCloseDoor.ani",
          "Animation/GranFlorisDownOpenDoor.ani",
          "Animation/GranFlorisDownLight.ani",
        ];
        var n = [0, 3, 1, 3, 2, 3, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t($i);
  var qi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛蘭的左側領主門";
        var e = [
          "animation/granflorisleftu1.ani",
          "animation/granflorisleftgate.ani",
          "animation/granflorisleftclosedoor.ani",
          "animation/granflorisleftopendoor.ani",
          "animation/granflorisleftlight.ani",
          "animation/granflorislefto1.ani",
        ];
        var n = [0, 3, 0, 7, 1, 7, 2, 7, 2, 2, 0, 3, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(qi);
  var Ki = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.name = "洛蘭的左側門";
        var e = [
          "Animation/GranFlorisLeftU1.ani",
          "Animation/GranFlorisLeftGate.ani",
          "Animation/GranFlorisLeftCloseDoor.ani",
          "Animation/GranFlorisLeftOpenDoor.ani",
          "Animation/GranFlorisLeftLight.ani",
          "Animation/GranFlorisLeftO1.ani",
        ];
        var n = [0, 3, 0, 3, 1, 3, 2, 3, 2, 1, 0, 3, 0, 19];
        var o = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        t.init(n, e, o, "Tile/LeftDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ki);
  var Yi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛兰的左侧墙";
        var e = [
          "Animation/GranFlorisLeftWallU1.ani",
          "Animation/GranFlorisLeftWallO1.ani",
        ];
        var n = [0, 3, 0, 3, 0, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/LeftWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Yi);
  var Wi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側領主門";
        var e = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 3, 0, 7, 1, 7, 2, 7, 2, 2, 0, 3, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightDoor.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Wi);
  var zi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側門";
        t.direction = 1;
        var e = "passiveobject/mapobject/pathgate/act1/animation.ani.json";
        var n = [
          "animation/granflorisrightu1.ani",
          "animation/granflorisrightgate.ani",
          "animation/granflorisrightclosedoor.ani",
          "animation/granflorisrightopendoor.ani",
          "animation/granflorisrightlight.ani",
          "animation/granflorisrighto1.ani",
        ];
        var o = [0, 3, 0, 3, 1, 3, 2, 3, 2, 1, 0, 3, 13, 19];
        t.init(o, n, e, "Tile/RightDoor.til");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(zi);
  var Qi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛蘭的右側牆";
        var e = [
          "animation/granflorisrightwallu1.ani",
          "animation/granflorisrighto1.ani",
        ];
        var n = [0, 3, 0, 3, 13, 19];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json",
          "Tile/RightWall.til"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Qi);
  var Ji = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側領主門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 3, 0, 7, 1, 7, 2, 7, 2, 2];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ji);
  var Zi = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "洛蘭的上側門";
        var e = [
          "animation/granflorisupu1.ani",
          "animation/granflorisupgate.ani",
          "animation/granflorisupclosedoor.ani",
          "animation/granflorisupopendoor.ani",
          "animation/granflorisuplight.ani",
        ];
        var n = [0, 3, 0, 3, 1, 3, 2, 3, 2, 1];
        t.init(
          n,
          e,
          "passiveobject/mapobject/pathgate/act1/animation.ani.json"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Zi);
  var ta = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "亞蒙的左側門";
        var e = [
          "animation/02leftladder.ani",
          "animation/02leftgate.ani",
          "animation/02leftclosedoor.ani",
          "animation/02leftopendoor.ani",
          "animation/02leftlightl.ani",
          "animation/02leftlightr.ani",
          "animation/02lefto.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 4, 0, 4, 1, 4, 2, 4, 2, 1, 2, 1, 0, 4, 0, 20];
        t.init2(n, e, "passiveobject/mapobject/pathgate/act2/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ta);
  var ea = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "亞蒙的左側門";
        var e = [
          "animation/02leftladder.ani",
          "animation/02leftgate.ani",
          "animation/02leftclosedoor.ani",
          "animation/02leftopendoor.ani",
          "animation/02leftlightl.ani",
          "animation/02leftlightr.ani",
          "animation/02lefto.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 4, 0, 4, 1, 4, 2, 4, 2, 1, 2, 1, 0, 4, 0, 20];
        t.init2(n, e, "passiveobject/mapobject/pathgate/act2/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ea);
  var na = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "亞蒙的左側領主門";
        var e = [
          "animation/02leftladder.ani",
          "animation/02leftgate.ani",
          "animation/02leftclosedoor.ani",
          "animation/02leftopendoor.ani",
          "animation/02leftlightl.ani",
          "animation/02leftlightr.ani",
          "animation/02lefto.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 5, 0, 5, 1, 5, 2, 5, 2, 2, 2, 2, 0, 5, 0, 20];
        t.init2(n, e, "passiveobject/mapobject/pathgate/act2/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(na);
  var oa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "亞蒙的左側門";
        var e = [
          "animation/02leftladder.ani",
          "animation/02leftgate.ani",
          "animation/02leftclosedoor.ani",
          "animation/02leftopendoor.ani",
          "animation/02leftlightl.ani",
          "animation/02leftlightr.ani",
          "animation/02lefto.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 4, 0, 4, 1, 4, 2, 4, 2, 1, 2, 1, 0, 4, 0, 20];
        t.init2(n, e, "passiveobject/mapobject/pathgate/act2/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(oa);
  var ra = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "亞蒙的左側墻";
        var e = [];
        var n = [];
        t.init2(n, e, "");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ra);
  var ia = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "亞蒙的右側領主門";
        var e = [
          "animation/02rightu.ani",
          "animation/02rightladder.ani",
          "animation/02rightgate.ani",
          "animation/02rightclosedoor.ani",
          "animation/02rightopendoor.ani",
          "animation/02rightlightl.ani",
          "animation/02rightlightr.ani",
          "animation/02righto.ani",
          "tile/rightdoor.til",
        ];
        var n = [0, 5, 0, 5, 0, 5, 1, 5, 2, 5, 2, 2, 2, 2, 0, 5, 13, 21];
        t.init2(n, e, "passiveobject/mapobject/pathgate/act2/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ia);
  var aa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "亞蒙的右側門";
        var e = [
          "animation/02rightu.ani",
          "animation/02rightladder.ani",
          "animation/02rightgate.ani",
          "animation/02rightclosedoor.ani",
          "animation/02rightopendoor.ani",
          "animation/02rightlightl.ani",
          "animation/02rightlightr.ani",
          "animation/02righto.ani",
          "tile/rightdoor.til",
        ];
        var n = [0, 4, 0, 4, 0, 4, 1, 4, 2, 4, 2, 1, 2, 1, 0, 4, 13, 21];
        t.init2(n, e, "passiveobject/mapobject/pathgate/act2/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(aa);
  var sa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "亞蒙的右側墻";
        var e = [];
        var n = [];
        t.init2(n, e, "");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(sa);
  var ua = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "亞蒙的左側門";
        var e = [
          "animation/02leftladder.ani",
          "animation/02leftgate.ani",
          "animation/02leftclosedoor.ani",
          "animation/02leftopendoor.ani",
          "animation/02leftlightl.ani",
          "animation/02leftlightr.ani",
          "animation/02lefto.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 4, 0, 4, 1, 4, 2, 4, 2, 1, 2, 1, 0, 4, 0, 20];
        t.init2(n, e, "passiveobject/mapobject/pathgate/act2/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ua);
  var la = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "亞蒙的左側門";
        var e = [
          "animation/02leftladder.ani",
          "animation/02leftgate.ani",
          "animation/02leftclosedoor.ani",
          "animation/02leftopendoor.ani",
          "animation/02leftlightl.ani",
          "animation/02leftlightr.ani",
          "animation/02lefto.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 4, 0, 4, 1, 4, 2, 4, 2, 1, 2, 1, 0, 4, 0, 20];
        t.init2(n, e, "passiveobject/mapobject/pathgate/act2/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(la);
  var fa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "淺棲之地的左側領主門";
        var e = [
          "Animation/LeftGate.ani",
          "Animation/LeftCloseDoor.ani",
          "Animation/LeftOpenDoor.ani",
          "Animation/LeftLight.ani",
          "Tile/LeftDoor.til",
        ];
        var n = [0, 2, 1, 2, 2, 2, 2, 2, 5, 18];
        t.init2(n, e, "passiveobject/mapobject/pathgate/towerofbloodyfight/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(fa);
  var ca = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "淺棲之地的左側門";
        var e = [
          "Animation/LeftGate.ani",
          "Animation/LeftCloseDoor.ani",
          "Animation/LeftOpenDoor.ani",
          "Animation/LeftLight.ani",
          "Tile/LeftDoor.til",
        ];
        var n = [0, 1, 1, 1, 2, 1, 2, 1, 5, 18];
        t.init2(n, e, "passiveobject/mapobject/pathgate/towerofbloodyfight/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ca);
  var pa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "无尽的祭坛左侧墙";
        var e = ["Animation/LeftWall.ani", "Tile/LeftDoor.til"];
        var n = [0, 1, 5, 18];
        t.init2(n, e, "passiveobject/mapobject/pathgate/towerofbloodyfight/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(pa);
  var da = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "淺棲之地的右側領主門";
        var e = [
          "Animation/RightGate.ani",
          "Animation/RightCloseDoor.ani",
          "Animation/RightOpenDoor.ani",
          "Animation/RightLight.ani",
          "Tile/RightDoor.til",
        ];
        var n = [0, 2, 1, 2, 2, 2, 2, 2, 9, 16];
        t.init2(n, e, "passiveobject/mapobject/pathgate/towerofbloodyfight/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(da);
  var ha = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "淺棲之地的右側門";
        var e = [
          "Animation/RightGate.ani",
          "Animation/RightCloseDoor.ani",
          "Animation/RightOpenDoor.ani",
          "Animation/RightLight.ani",
          "Tile/RightDoor.til",
        ];
        var n = [0, 1, 1, 1, 2, 1, 2, 1, 9, 16];
        t.init2(n, e, "passiveobject/mapobject/pathgate/towerofbloodyfight/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ha);
  var va = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "无尽的祭坛右侧墙";
        var e = ["Animation/RightWall.ani", "Tile/RightDoor.til"];
        var n = [0, 1, 9, 16];
        t.init2(n, e, "passiveobject/mapobject/pathgate/towerofbloodyfight/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(va);
  var ya = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "悲鳴草";
        t.set(
          "passiveobject/mapobject/trap/animation.ani.json",
          "animation/cryplantbasic.ani",
          [28, 16]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ya);
  var _a = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "隨著風扇飄動的橫幅";
        t.set(
          "passiveobject/mapobject/trap/animation/stoppedbanner.ani.json",
          undefined,
          [1, 1]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(_a);
  var ma = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pass_type = "[pass all]";
        t.name = "滾動的岩石";
        console.warn("RollingStone 未实现");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ma);
  var ga = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/glass1.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ga);
  var ba = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/glass2.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ba);
  var Oa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/glass4.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Oa);
  var wa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/glass5.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(wa);
  var Aa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/glass6.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Aa);
  var Ea = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/glass7.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ea);
  var Ta = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/poisonglass1.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ta);
  var Ca = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/poisonglass4.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ca);
  var Pa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/poisonglass5.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Pa);
  var ja = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤草";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/poisonglass6.ani.json",
          undefined,
          [0, 0]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ja);
  var Sa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "大的沼澤";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/poisonswamplarge.ani.json",
          undefined,
          [235, 50]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Sa);
  var Ma = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/poisonswampmedium.ani.json",
          undefined,
          [180, 40]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ma);
  var ka = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/poisonswampsmall.ani.json",
          undefined,
          [125, 30]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ka);
  var xa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "大的沼澤";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/swamplarge.ani.json",
          undefined,
          [235, 50]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(xa);
  var Da = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/swampmedium.ani.json",
          undefined,
          [180, 40]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Da);
  var Ia = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[pass all]";
        t.name = "沼澤";
        t.set(
          "passiveobject/mapobject/trap/swamp/ani/swampsmall.ani.json",
          undefined,
          [125, 30]
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ia);
  var Ra = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(q);
    var s = o(Wo);
    var u = o(He);
    var l = o(Ge);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "左輪槍子彈";
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.fu.hiter.enabled = false;
        t.body.setAnimation(
          r.default.getPvfConf(
            "passiveobject/monster/characterstatue/gunnerstatue/animation/bulletpistol.ani.json"
          )
        );
        t.fu.once(
          fe.BattleUnitEvent.HIT,
          function () {
            a.default.sound.play("BLUNT_HIT", { completeDestroy: true });
            t.onComplete();
          },
          t
        );
        t.body.on(i.default.ATTACK_BOX, t.onAttackBox, t);
        t.on(l.default.COMPLETE, t.onComplete, t);
        return t;
      }
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.initData = function (t) {
        if (t instanceof u.default) {
          t.setBind(this);
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
        this.off(l.default.COMPLETE, this.onComplete, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeSelfFormMap();
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(s.default);
    e.default = f;
  });
  t(Ra);
  var La = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var i = n(L);
    var a = n(q);
    var s = n(Wo);
    var u = n(F);
    var l = n(He);
    var f = n(Ge);
    var c = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.name = "發射型杰克爆彈";
        e.camp = ht.RoleCamp.NONE;
        e.direction = 1;
        e.attribute.attach(
          new u.default(((t = {}), (t[ht.AttributeKeys.FIRE] = 1), t))
        );
        e.fu.hiter.enabled = false;
        e.fu.once(
          fe.BattleUnitEvent.HIT,
          function () {
            a.default.sound.play("BLUNT_HIT", { completeDestroy: true });
            e.onComplete();
          },
          e
        );
        e.body.on(i.default.ATTACK_BOX, e.onAttackBox, e);
        e.on(f.default.COMPLETE, e.onComplete, e);
        return e;
      }
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        n.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.initData = function (t) {
        if (t instanceof l.default) {
          this.tra = t;
          this.tra.setBind(this);
          this.tra.paused();
        }
      };
      t.prototype.onStart = function () {
        n.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.fu.hiter.enabled = true;
        this.body.setAnimation(
          r.default.getPvfConf(
            "passiveobject/monster/characterstatue/animation/launchjolstart.ani.json"
          )
        );
        this.addAnimationEquipment(
          "passiveobject/monster/characterstatue/animation/launchjolfirestart.ani.json",
          undefined,
          undefined,
          true,
          0
        );
        this.body.once(i.default.COMPLETE, this.start, this);
      };
      t.prototype.start = function () {
        this.removeAllEquipment();
        this.body.setAnimation(
          r.default.getPvfConf(
            "passiveobject/monster/characterstatue/animation/launchjolmove.ani.json"
          )
        );
        this.addAnimationEquipment(
          "passiveobject/monster/characterstatue/animation/launchjolfiremove.ani",
          undefined,
          undefined,
          true,
          0
        );
        this.tra.start();
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
        this.off(f.default.COMPLETE, this.onComplete, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeSelfFormMap();
        this.tra = undefined;
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(s.default);
    e.default = c;
  });
  t(La);
  var Fa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(H);
    var a = o(w);
    var s = o(Q);
    var r = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.images = [];
        t.values = [];
        t.count = 0;
        return t;
      }
      t.prototype.addObject = function (t, e, n, o, r) {
        if (r === void 0) {
          r = 0;
        }
        this.images.push(t);
        t.y = -e;
        this.values.push({
          backPower:
            n != undefined
              ? n
              : a.default.radom1d1() * a.default.randomInt(5, 60),
          jumpPower: o != undefined ? o : a.default.randomInt(400, 600),
          state: 1,
          horizon: r,
        });
        this.count += 1;
      };
      t.prototype.update = function (t) {
        var e = t / 1e3;
        for (var n = 0; n < this.values.length; n++) {
          var o = this.values[n];
          var r = this.images[n];
          if (o.state) {
            o.jumpPower -= i.default.G * e;
            r.x += o.backPower * e;
            r.y += -o.jumpPower * e;
          }
          if (r.y > o.horizon) {
            o.state = 0;
            s.default
              .get(r)
              .wait(200)
              .to({ alpha: 0 }, 500)
              .call(this.onEnd, this)
              .remove();
          }
        }
      };
      t.prototype.clean = function () {
        var t;
        while ((t = this.images) === null || t === void 0 ? void 0 : t.length) {
          var e = this.images.pop();
          this.values.pop();
          e.removeSelf();
        }
        this.count = 0;
      };
      t.prototype.onEnd = function () {
        var t;
        this.count += 1;
        var e = (t = this.values) === null || t === void 0 ? void 0 : t.length;
        if (e > 0 && this.count >= e) {
          this.event(XOF.Event.COMPLETE);
        }
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = r;
  });
  t(Fa);
  var Ba = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(q);
    var s = o(Wo);
    var u = o(Ge);
    var l = o(Fa);
    var f = o(w);
    var c = o(A);
    var p = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "石王的星落";
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.fu.hiter.enabled = false;
        t.fu.once(
          fe.BattleUnitEvent.HIT,
          function () {
            a.default.sound.play("R_GOURD_HIT", { completeDestroy: true });
          },
          t
        );
        t.body.on(i.default.ATTACK_BOX, t.onAttackBox, t);
        t.on(u.default.COMPLETE, t.onComplete, t);
        return t;
      }
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
        if (this.destroyEffect) {
          this.destroyEffect.update(t);
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.fu.hiter.enabled = true;
        this.body.setAnimation(
          r.default.getPvfConf(
            "passiveobject/common/animation/sunkenrock.ani.json"
          )
        );
        this.addAnimationEquipment(
          "passiveobject/common/animation/sunkenbg.ani.json",
          undefined,
          undefined,
          true,
          0
        );
        this.body.once(i.default.COMPLETE, this.onComplete, this);
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
        this.off(u.default.COMPLETE, this.onComplete, this);
        if (this.destroyEffect) {
          this.destroyEffect.clean();
          this.destroyEffect = undefined;
        }
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.destroyEffect = new l.default();
        this.destroyEffect.once(
          XOF.Event.COMPLETE,
          this.removeSelfFormMap,
          this
        );
        for (var t = 0; t < 12; t++) {
          var e = new c.default();
          e.setAnimation(
            r.default.getAnimationData(
              "passiveobject/common/animation/sunkendust0" +
                f.default.randomInt(1, 4) +
                ".ani"
            )
          );
          this.destroyEffect.addObject(
            e,
            f.default.randomInt(50, 120),
            f.default.randomInt(-100, 100),
            f.default.randomInt(100, 200)
          );
          this.addChild(e);
        }
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(s.default);
    e.default = p;
  });
  t(Ba);
  var Na = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "罪惡之眼的小眼睛激光";
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/monster/evileye/ani/eyefloorstart.ani"
          )
        );
        t.body.on(i.default.CHANGE, t.onFrame, t);
        return t;
      }
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
      };
      t.prototype.onFrame = function () {
        if (this.body.index == 3) {
          if (this.map) {
            this.body.off(i.default.CHANGE, this.onFrame, this);
            this.addAnimation(
              "passiveobject/monster/evileye/ani/eyefloorflash.ani"
            );
            var t = this.map.createPassiveObject(
              30304,
              this.position.x,
              this.position.y,
              this.position.z
            );
            t.fu.camp = t.camp = this.camp = this.fu.camp;
            t.attribute.attach(this.attribute);
            t.on(i.default.COMPLETE, this.onEnd, this);
          }
        }
      };
      t.prototype.onEnd = function () {
        this.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/monster/evileye/ani/eyefloorend.ani"
          )
        );
        this.body.once(i.default.COMPLETE, this.onComplete, this);
      };
      t.prototype.onRemove = function () {
        this.body.off(i.default.COMPLETE, this.onComplete, this);
        this.body.off(i.default.CHANGE, this.onFrame, this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(Na);
  var Xa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.name = "激光龍頭炮 - 充電后的激光發射部分";
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/monster/evileye/ani/smallchargedlaserfirexor.ani"
          )
        );
        t.body.on(i.default.COMPLETE, t.onComplete, t);
        t.addAnimation(
          "passiveobject/monster/evileye/ani/smallchargedlaserfire.ani"
        );
        var e = t.addAnimation(
          "passiveobject/monster/evileye/ani/smallchargedlasertile.ani"
        );
        var n = t.addAnimation(
          "passiveobject/monster/evileye/ani/smallchargedlasertilexor.ani"
        );
        e.width = n.width = 1e3;
        t.fu.hiter.attackEnabled = false;
        return t;
      }
      t.prototype.update = function (t) {
        o.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.onStart = function () {
        o.prototype.onStart.call(this);
        this.fu.hiter.attackEnabled = true;
      };
      t.prototype.onComplete = function () {
        this.removeSelfFormMap();
        this.fu.hiter.attackEnabled = false;
        this.event(i.default.COMPLETE);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(Xa);
  var Ua = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = o(q);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "天空樹果實的爆炸效果";
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.time = 0;
        t.count = 1;
        t.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/monster/goblin/animation/flybomb.ani.json"
          )
        );
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.initData = function (t) {
        e.prototype.initData.call(this);
        this.time = t || 0;
      };
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
        this.time -= t;
        if (this.time <= 0 && this.count > 0) {
          s.default.sound.play("R_BOMB_HIT", { completeDestroy: true });
          this.fu.setCurActionInfo({
            hitLiftUp: true,
            liftUp: 400,
            ani: "",
            name: "",
            action: "",
          });
          this.body.setAnimation(
            r.default.getAnimationData(
              "passiveobject/common/animation/earthquake.ani.json"
            )
          );
          this.addAnimationEquipment(
            "passiveobject/common/animation/earthquakering.ani.json"
          );
          this.addAnimationEquipment(
            "passiveobject/monster/goblin/animation/flybombflash.ani.json"
          );
          this.body.once(i.default.COMPLETE, this.onComplete, this);
          this.count = 0;
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = u;
  });
  t(Ua);
  var Ha = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var r =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var i =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var n =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              r(e, t, n);
        i(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(dt);
    var u = a(S);
    var l = a(b);
    var f = n(fe);
    var c = a(Xo);
    var p = a(Q);
    var d = a(L);
    var h = a(F);
    var v = a(q);
    var y = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.name = "赤哥布林的火焰";
        e.actor = e;
        e.roleData = {};
        e.camp = ht.RoleCamp.NONE;
        e.direction = 1;
        e.body = new l.default();
        e.body.setAnimation(
          s.default.getPvfConf(
            "passiveobject/monster/goblin/animation/throwstone.ani.json"
          )
        );
        e.attribute = new u.default();
        e.attribute.attach(
          new h.default(((t = {}), (t[ht.AttributeKeys.FIRE] = 1), t))
        );
        e.addChild(e.body);
        e.fu = new f.default(e);
        e.fu.hiter.enabled = false;
        e.fu.once(
          f.BattleUnitEvent.HIT,
          function () {
            p.default.removeTweens(e.position);
            v.default.sound.play("SIZZLE_HIT", { completeDestroy: true });
            e.onComplete();
          },
          e
        );
        e.body.on(d.default.ATTACK_BOX, e.onAttackBox, e);
        return e;
      }
      t.prototype.onAttackBox = function () {
        if (this.map) {
          this.map.event(d.default.ATTACK_BOX);
        }
      };
      Object.defineProperty(t.prototype, "direction", {
        get: function () {
          return this.$direction;
        },
        set: function (t) {
          if (this.$direction == t) return;
          this.$direction = t;
          this.scale(this.$direction, 1);
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        n.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.onStart = function () {
        n.prototype.onStart.call(this);
        var t = this.position.x;
        this.fu.hiter.enabled = true;
        p.default
          .get(this.position)
          .to({ x: t + this.direction * 200 }, 800)
          .call(this.onComplete, this)
          .remove();
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
        this.body.off(d.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(c.default);
    e.default = y;
  });
  t(Ha);
  var Ga = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var r =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var i =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var n =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              r(e, t, n);
        i(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(dt);
    var u = a(S);
    var l = a(b);
    var f = n(fe);
    var c = a(Xo);
    var p = a(Q);
    var d = a(L);
    var h = a(F);
    var v = a(q);
    var y = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.name = "青哥布林的冰柱";
        e.actor = e;
        e.roleData = {};
        e.camp = ht.RoleCamp.NONE;
        e.direction = 1;
        e.body = new l.default();
        e.body.setAnimation(
          s.default.getAnimationData(
            "passiveobject/common/animation/icemissile1.ani.json"
          )
        );
        e.addAnimation("passiveobject/common/animation/icemissile2.ani.json");
        e.attribute = new u.default();
        e.attribute.attach(
          new h.default(((t = {}), (t[ht.AttributeKeys.WATER] = 1), t))
        );
        e.addChild(e.body);
        e.fu = new f.default(e);
        e.fu.hiter.enabled = false;
        e.fu.once(
          f.BattleUnitEvent.HIT,
          function () {
            v.default.sound.play("ICICLE_HIT", { completeDestroy: true });
            e.onComplete();
          },
          e
        );
        e.body.on(d.default.ATTACK_BOX, e.onAttackBox, e);
        return e;
      }
      t.prototype.onAttackBox = function () {
        if (this.map) {
          this.map.event(d.default.ATTACK_BOX);
        }
      };
      Object.defineProperty(t.prototype, "direction", {
        get: function () {
          return this.$direction;
        },
        set: function (t) {
          if (this.$direction == t) return;
          this.$direction = t;
          this.scale(this.$direction, 1);
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        n.prototype.update.call(this, t);
        this.body.update(t);
        if (this.tw) {
          this.tw.$update(t);
        }
      };
      t.prototype.onStart = function () {
        n.prototype.onStart.call(this);
        var t = this.position.x;
        this.fu.hiter.enabled = true;
        this.tw = p.default
          .get(this.position)
          .to({ x: t + this.direction * 200 }, 800)
          .call(this.onComplete, this);
        p.default.removeTweenFromList(this.tw);
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
        this.body.off(d.default.ATTACK_BOX, this.onAttackBox, this);
        if (this.tw) {
          this.tw.clean();
        }
        this.tw = undefined;
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.removeAni("passiveobject/common/animation/icemissile2.ani.json");
        this.fu.hiter.enabled = false;
        this.removeSelfFormMap();
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(c.default);
    e.default = y;
  });
  t(Ga);
  var Va = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(dt);
    var u = a(S);
    var l = a(b);
    var f = i(fe);
    var c = a(Xo);
    var p = a(L);
    var d = a(q);
    var h = a(Ge);
    var v = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "卡格的手里劍";
        t.actor = t;
        t.roleData = {};
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.body = new l.default();
        t.body.setAnimation(
          s.default.getPvfConf(
            "passiveobject/monster/goblin/animation/suriken.ani.json"
          )
        );
        t.attribute = new u.default();
        t.addChild(t.body);
        t.fu = new f.default(t);
        t.fu.hiter.enabled = false;
        t.fu.once(f.BattleUnitEvent.HIT, t.onHit, t);
        t.fu.once(f.BattleUnitEvent.BEHIT, t.onBehit, t);
        t.body.on(p.default.ATTACK_BOX, t.onAttackBox, t);
        t.on(h.default.COMPLETE, t.onComplete, t);
        t.on(h.default.STEP_1, t.onTrajectoryStep1, t);
        t.on(h.default.STEP_2, t.onTrajectoryComplete, t);
        t.fu.setCurActionInfo({
          hitType: "slash",
          attackDirection: "horizon",
          action: "",
          ani: "",
          name: "",
        });
        return t;
      }
      t.prototype.onAttackBox = function () {
        if (this.map) {
          this.map.event(p.default.ATTACK_BOX);
        }
      };
      t.prototype.onHit = function () {
        d.default.sound.play("R_SLASH_HIT", { completeDestroy: true });
        this.onComplete();
      };
      t.prototype.onBehit = function () {
        this.onComplete();
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        if (this.paused) return;
        this.body.update(t);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onTrajectoryStep1 = function () {
        if (this.map) {
          this.map.createPassiveObject(
            48012,
            this.position.x,
            this.position.y,
            0,
            undefined,
            [1, ""]
          );
        }
      };
      t.prototype.onTrajectoryComplete = function () {
        this.paused = true;
        this.body.rotate = 0;
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.fu.off(f.BattleUnitEvent.HIT, this.onHit, this);
        this.fu.off(f.BattleUnitEvent.BEHIT, this.onBehit, this);
        this.body.off(p.default.ATTACK_BOX, this.onAttackBox, this);
        this.off(h.default.COMPLETE, this.onComplete, this);
        this.off(h.default.STEP_1, this.onTrajectoryStep1, this);
        this.off(h.default.STEP_2, this.onTrajectoryComplete, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(c.default);
    e.default = v;
  });
  t(Va);
  var $a = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(dt);
    var u = a(S);
    var l = a(b);
    var f = i(fe);
    var c = a(Xo);
    var p = a(Q);
    var d = a(Fa);
    var h = a(w);
    var v = a(L);
    var y = a(q);
    var _ = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "投擲兵投擲石";
        t.actor = t;
        t.roleData = {};
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.body = new l.default();
        t.body.setAnimation(
          s.default.getPvfConf(
            "passiveobject/monster/goblin/animation/throwstone.ani.json"
          )
        );
        t.attribute = new u.default();
        t.addChild(t.body);
        t.fu = new f.default(t);
        t.fu.hiter.enabled = false;
        t.fu.once(
          f.BattleUnitEvent.HIT,
          function () {
            p.default.removeTween(t.tw);
            y.default.sound.play("STAFF_HIT", { completeDestroy: true });
            t.onComplete();
          },
          t
        );
        t.body.on(v.default.ATTACK_BOX, t.onAttackBox, t);
        return t;
      }
      t.prototype.onAttackBox = function () {
        if (this.map) {
          this.map.event(v.default.ATTACK_BOX);
        }
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
        if (this.tw) {
          this.tw.$update(t);
        }
        if (this.destroyEffect) {
          this.destroyEffect.update(t);
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        var t = this.position.x;
        this.fu.hiter.enabled = true;
        this.tw = p.default
          .get(this.position)
          .to({ x: t + this.direction * 200 }, 800)
          .call(this.onComplete, this);
        this.tw.remove();
        p.default.removeTweenFromList(this.tw);
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(v.default.ATTACK_BOX, this.onAttackBox, this);
        if (this.destroyEffect) {
          this.destroyEffect.clean();
          this.destroyEffect = undefined;
        }
        if (this.tw) {
          delete this.tw;
        }
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.destroyEffect = new d.default();
        this.destroyEffect.once(XOF.Event.COMPLETE, this.removeFromMap, this);
        for (var t = 0; t < 6; t++) {
          var e = new XOF.Image();
          e.skin =
            Math.random() > 0.5
              ? "monster/goblin/passiveobject/throwstonedestroy.img/0.png"
              : "monster/goblin/passiveobject/throwstonedestroy.img/1.png";
          this.destroyEffect.addObject(
            e,
            0,
            h.default.randomInt(-100, 100),
            h.default.randomInt(100, 200),
            this.position.z
          );
          this.addChild(e);
        }
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(c.default);
    e.default = _;
  });
  t($a);
  var qa = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var i = n(S);
    var a = n(b);
    var s = n(fe);
    var u = n(Xo);
    var l = n(L);
    var f = n(F);
    var c = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.name = "凱諾的閃電";
        e.actor = e;
        e.roleData = {};
        e.camp = ht.RoleCamp.NONE;
        e.direction = 1;
        e.body = new a.default();
        e.body.setAnimation(
          r.default.getPvfConf(
            "passiveobject/common/animation/thunderbolt.ani.json"
          )
        );
        e.body.once(l.default.COMPLETE, e.onComplete, e);
        e.attribute = new i.default();
        e.attribute.attach(
          new f.default(((t = {}), (t[ht.AttributeKeys.LIGHT] = 1), t))
        );
        e.addChild(e.body);
        e.fu = new s.default(e);
        e.fu.hiter.enabled = false;
        e.body.on(l.default.ATTACK_BOX, e.onAttackBox, e);
        return e;
      }
      t.prototype.onAttackBox = function () {
        if (this.map) {
          this.map.event(l.default.ATTACK_BOX);
        }
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        n.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.onStart = function () {
        n.prototype.onStart.call(this);
        this.position.x;
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
        this.body.off(l.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(u.default);
    e.default = c;
  });
  t(qa);
  var Ka = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var i = n(L);
    var a = n(Wo);
    var s = n(q);
    var u = n(F);
    var l = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.name = "克拉赫的冰凍針刺群";
        e.direction = 1;
        e.time = 0;
        e.count = 1;
        e.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/common/animation/iceniddlegroup2.ani.json"
          )
        );
        e.attribute.attach(
          new u.default(((t = {}), (t[ht.AttributeKeys.WATER] = 1), t))
        );
        e.fu.hiter.enabled = false;
        return e;
      }
      t.prototype.initData = function (t) {
        n.prototype.initData.call(this);
        this.time = t || 0;
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        n.prototype.update.call(this, t);
        this.body.update(t);
        this.time -= t;
        if (this.time <= 0 && this.count > 0) {
          s.default.sound.play("ICICLE_HIT", { completeDestroy: true });
          this.body.once(i.default.COMPLETE, this.onComplete, this);
          this.count = 0;
        }
      };
      t.prototype.onStart = function () {
        n.prototype.onStart.call(this);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = l;
  });
  t(Ka);
  var Ya = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var i = n(L);
    var a = n(Wo);
    var s = n(q);
    var u = n(F);
    var l = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.name = "彼諾修的隕石之石";
        e.direction = 1;
        e.time = 0;
        e.count = 1;
        e.body.setAnimation(
          r.default.getAnimationData(
            "passiveobject/common/animation/shootingstarstone.ani.json"
          )
        );
        e.attribute.attach(
          new u.default(((t = {}), (t[ht.AttributeKeys.WATER] = 1), t))
        );
        e.fu.hiter.enabled = false;
        return e;
      }
      t.prototype.initData = function (t) {
        n.prototype.initData.call(this);
        this.time = t || 0;
      };
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        n.prototype.update.call(this, t);
        this.body.update(t);
        this.time -= t;
        if (this.time <= 0 && this.count > 0) {
          s.default.sound.play("SSTAR_DMG", { completeDestroy: true });
          this.addAnimationEquipment(
            "passiveobject/common/animation/shootingstarglow.ani.json"
          );
          this.body.once(i.default.COMPLETE, this.onComplete, this);
          this.count = 0;
        }
      };
      t.prototype.onStart = function () {
        n.prototype.onStart.call(this);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        n.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = l;
  });
  t(Ya);
  var Wa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = o(q);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "莎巫塔的地震 S";
        t.direction = 1;
        t.time = 0;
        t.count = 1;
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.initData = function (t) {
        e.prototype.initData.call(this);
        this.time = t || 0;
      };
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
        this.time -= t;
        if (this.time <= 0 && this.count > 0) {
          s.default.sound.play("R_SHOCKWAVE_HIT", { completeDestroy: true });
          this.fu.setCurActionInfo({
            hitLiftUp: true,
            liftUp: 400,
            ani: "",
            name: "",
            action: "",
          });
          this.body.setAnimation(
            r.default.getAnimationData(
              "passiveobject/common/animation/earthquake.ani.json"
            )
          );
          this.addAnimationEquipment(
            "passiveobject/common/animation/earthquakering.ani.json"
          );
          this.addAnimationEquipment(
            "passiveobject/monster/goblin/animation/flybombflash.ani.json"
          );
          this.body.once(i.default.COMPLETE, this.onComplete, this);
          this.count = 0;
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = u;
  });
  t(Wa);
  var za = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(L);
    var a = o(Wo);
    var s = o(q);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "莎巫塔的地震 L";
        t.direction = 1;
        t.time = 0;
        t.count = 1;
        t.fu.hiter.enabled = false;
        return t;
      }
      t.prototype.initData = function (t) {
        e.prototype.initData.call(this);
        this.time = t || 0;
      };
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        this.body.update(t);
        this.time -= t;
        if (this.time <= 0 && this.count > 0) {
          s.default.sound.play("R_SHOCKWAVE_HIT", { completeDestroy: true });
          this.fu.setCurActionInfo({
            hitLiftUp: true,
            liftUp: 400,
            ani: "",
            name: "",
            action: "",
          });
          this.body.setAnimation(
            r.default.getAnimationData(
              "passiveobject/common/animation/earthquake.ani.json"
            )
          );
          this.addAnimationEquipment(
            "passiveobject/common/animation/earthquakering.ani.json"
          );
          this.addAnimationEquipment(
            "passiveobject/monster/goblin/animation/flybombflash.ani.json"
          );
          this.body.once(i.default.COMPLETE, this.onComplete, this);
          this.count = 0;
        }
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.body.off(i.default.ATTACK_BOX, this.onAttackBox, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeFromMap();
      };
      t.prototype.removeFromMap = function () {
        if (this.map) this.map.removeObject(this);
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return false;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(a.default);
    e.default = u;
  });
  t(za);
  var Qa = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "左側門";
        var e = [
          "animation/gate_nor1.ani",
          "animation/gate_nor.ani",
          "animation/gate_nor1.ani",
          "animation/gate_nor.ani",
          "animation/gate_nor2.ani",
          "animation/gate_dod.ani",
          "animation/gate_nor3.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 1, 0, 1, 1, 1, 1, 1, 2, 1, 2, 1, 2, 1, 5, 17];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(n, e, "passiveobject/mapobject/pathgate/event/3kingdoms/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Qa);
  var Ja = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "左墙";
        var e = ["tile/leftwall.til"];
        var n = [1, 16];
        t.init2(n, e, "passiveobject/mapobject/pathgate/event/3kingdoms/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ja);
  var Za = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.name = "左側BOSS門";
        var e = [
          "animation/gate_nor1.ani",
          "animation/gate_nor.ani",
          "animation/gate_nor1.ani",
          "animation/gate_nor.ani",
          "animation/gate_nor2.ani",
          "animation/gate_dod.ani",
          "animation/gate_nor3.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 1, 0, 1, 1, 1, 1, 1, 2, 1, 2, 1, 2, 1, 5, 17];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(n, e, "passiveobject/mapobject/pathgate/event/3kingdoms/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Za);
  var ts = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "右側門";
        var e = [
          "animation/gate_nor1.ani",
          "animation/gate_nor.ani",
          "animation/gate_nor1.ani",
          "animation/gate_nor.ani",
          "animation/gate_nor2.ani",
          "animation/gate_dod.ani",
          "animation/gate_nor3.ani",
          "tile/rightdoor.til",
        ];
        var n = [0, 1, 0, 1, 1, 1, 1, 1, 2, 1, 2, 1, 2, 1, 3, 14];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(n, e, "passiveobject/mapobject/pathgate/event/3kingdoms/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ts);
  var es = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "右側BOSS門";
        var e = [
          "animation/gate_nor1.ani",
          "animation/gate_nor.ani",
          "animation/gate_nor1.ani",
          "animation/gate_nor.ani",
          "animation/gate_nor2.ani",
          "animation/gate_dod.ani",
          "animation/gate_nor3.ani",
          "tile/rightdoor.til",
        ];
        var n = [0, 1, 0, 1, 1, 1, 1, 1, 2, 1, 2, 1, 2, 1, 3, 14];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(n, e, "passiveobject/mapobject/pathgate/event/3kingdoms/");
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(es);
  var ns = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_016.ani";
        t.set(e + n + ".json", undefined, [190, 170]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ns);
  var os = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_018.ani";
        t.set(e + n + ".json", undefined, [350, 240]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(os);
  var rs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_009.ani";
        t.set(e + n + ".json", undefined, [100, 40]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(rs);
  var is = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_000.ani";
        t.set(e + n + ".json", undefined, [110, 100]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(is);
  var as = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_001.ani";
        t.set(e + n + ".json", undefined, [110, 100]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(as);
  var ss = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_002.ani";
        t.set(e + n + ".json", undefined, [80, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ss);
  var us = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_011.ani";
        t.set(e + n + ".json", undefined, [80, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(us);
  var ls = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_014.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ls);
  var fs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_012.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(fs);
  var cs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.closeback;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_020.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(cs);
  var ps = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_005.ani";
        t.set(e + n + ".json", undefined, [80, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ps);
  var ds = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_004.ani";
        t.set(e + n + ".json", undefined, [80, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ds);
  var hs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_021.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(hs);
  var vs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_023.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(vs);
  var ys = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/fire_big_normal.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ys);
  var _s = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/fire_big_normal.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(_s);
  var ms = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/fire_small_dodge.ani";
        t.set(e + n + ".json", undefined, [100, 45]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ms);
  var gs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/fire_small_normal.ani";
        t.set(e + n + ".json", undefined, [100, 45]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(gs);
  var bs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_033.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(bs);
  var Os = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_013.ani";
        t.set(e + n + ".json", undefined, [80, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Os);
  var ws = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_019.ani";
        t.set(e + n + ".json", undefined, [210, 240]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ws);
  var As = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        t.setObjectWidth(80, 40);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(As);
  var Es = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_015.ani";
        t.set(e + n + ".json", undefined, [190, 170]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Es);
  var Ts = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/npc_joun_adoo.ani";
        t.set(e + n + ".json", undefined, [110, 100]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ts);
  var Cs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_024.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Cs);
  var Ps = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_038.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ps);
  var js = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_039.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(js);
  var Ss = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_041.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ss);
  var Ms = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_037.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ms);
  var ks = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_036.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ks);
  var xs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_034.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(xs);
  var Ds = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_030.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ds);
  var Is = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_035.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Is);
  var Rs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/c_event/3kingdoms/";
        var n = "animation/fence2.ani";
        t.set(e + n + ".json", undefined, [85, 40]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Rs);
  var Ls = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.pass_type = "[do not pass]";
        t.name = "";
        t.setObjectWidth(500, 150);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ls);
  var Fs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Wo);
    var i = o(Ge);
    var a = o(dt);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "暗精靈護衛的箭";
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.fu.hiter.enabled = false;
        t.body.setAnimation(
          a.default.getAnimationData(
            "passiveobject/monster/darkelf/animation/arrow.ani"
          )
        );
        t.fu.setCurActionInfo({
          name: "",
          ani: "",
          action: "",
          hitType: "slash",
          attackDirection: "horizon",
        });
        t.fu.once(fe.BattleUnitEvent.HIT, t.onComplete, t);
        t.on(i.default.COMPLETE, t.onComplete, t);
        return t;
      }
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.update = function (t) {
        this.onAttackBox();
        e.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onComplete, this);
        this.off(i.default.COMPLETE, this.onComplete, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeSelfFormMap();
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Fs);
  var Bs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Wo);
    var i = o(Ge);
    var a = o(dt);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.name = "狂教徒短劍";
        t.camp = ht.RoleCamp.NONE;
        t.direction = 1;
        t.fu.hiter.enabled = false;
        t.body.setAnimation(
          a.default.getAnimationData(
            "passiveobject/monster/zealot/ani/dagger.ani"
          )
        );
        t.fu.setCurActionInfo({
          name: "",
          ani: "",
          action: "",
          hitType: "slash",
          attackDirection: "horizon",
        });
        t.fu.once(fe.BattleUnitEvent.HIT, t.onComplete, t);
        t.on(i.default.COMPLETE, t.onComplete, t);
        return t;
      }
      Object.defineProperty(t.prototype, "float", {
        get: function () {
          return this.position.z;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.update = function (t) {
        this.onAttackBox();
        e.prototype.update.call(this, t);
        this.body.update(t);
      };
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.scale(this.direction, 1);
        this.fu.hiter.enabled = true;
      };
      t.prototype.onRemove = function () {
        e.prototype.onRemove.call(this);
        this.fu.off(fe.BattleUnitEvent.HIT, this.onComplete, this);
        this.off(i.default.COMPLETE, this.onComplete, this);
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeSelfFormMap();
      };
      t.prototype.onDataUpdate = function () {};
      t.prototype.isFloat = function () {
        return true;
      };
      t.prototype.isDownAction = function () {
        return false;
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Bs);
  var Ns = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_059.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ns);
  var Xs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_080.ani";
        t.set(e + n + ".json", undefined, [400, 100]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Xs);
  var Us = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/npc_bi_back.ani";
        t.set(e + n + ".json", undefined, [110, 10]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Us);
  var Hs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "左側門";
        var e = [
          "animation/gate_nor.ani",
          "animation/gate_nor.ani",
          "animation/gate_common_left.ani",
          "animation/gate_common_left.ani",
          "tile/leftdoor.til",
        ];
        var n = [0, 1, 1, 1, 2, 1, 2, 1, 5, 17];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(
          n,
          e,
          "passiveobject/mapobject/pathgate/event/3kingdoms/stage2_boss/"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Hs);
  var Gs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "右側門";
        var e = [
          "animation/gate_nor.ani",
          "animation/gate_nor.ani",
          "animation/gate_common_right.ani",
          "animation/gate_common_right.ani",
          "tile/rightdoor.til",
        ];
        var n = [0, 1, 1, 1, 2, 1, 2, 1, 3, 14];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(
          n,
          e,
          "passiveobject/mapobject/pathgate/event/3kingdoms/stage2_boss/"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Gs);
  var Vs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "右側門";
        var e = [
          "animation/gate_nor.ani",
          "animation/gate_nor.ani",
          "animation/new/light_dodge_50.ani",
          "animation/new/light_dodge_50.ani",
          "tile/updoor.til",
        ];
        var n = [0, 2, 1, 2, 2, 2, 2, 2, 5, 23];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(
          n,
          e,
          "passiveobject/mapobject/pathgate/event/3kingdoms/stage2_boss/"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Vs);
  var $s = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "上側門";
        var e = [
          "animation/gate_nor.ani",
          "animation/gate_nor.ani",
          "animation/gate_common_up.ani",
          "animation/gate_common_up.ani",
          "tile/updoor.til",
        ];
        var n = [0, 1, 1, 1, 2, 1, 2, 1, 5, 17];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(
          n,
          e,
          "passiveobject/mapobject/pathgate/event/3kingdoms/stage2_boss/"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t($s);
  var qs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(oi);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "右側門";
        var e = [
          "animation/gate_nor.ani",
          "animation/gate_nor.ani",
          "animation/gate_common_down.ani",
          "animation/gate_common_down.ani",
          "tile/downdoor.til",
        ];
        var n = [0, 1, 1, 1, 2, 1, 2, 1, 3, 14];
        t.pathgateRect = [-40, -30, 80, 60];
        t.init2(
          n,
          e,
          "passiveobject/mapobject/pathgate/event/3kingdoms/stage2_boss/"
        );
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(qs);
  var Ks = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_057.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ks);
  var Ys = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_058.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ys);
  var Ws = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_072.ani";
        t.set(e + n + ".json", undefined, [178, 90]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ws);
  var zs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_079.ani";
        t.set(e + n + ".json", undefined, [60, 30]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(zs);
  var Qs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_065.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Qs);
  var Js = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_064.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Js);
  var Zs = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_066.ani";
        t.set(e + n + ".json", undefined, [178, 70]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Zs);
  var tu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Uo);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.pass_type = "[do not pass]";
        t.name = "";
        var e = "passiveobject/actionobject/map/3kingdom_stage1/";
        var n = "animation/obj_067.ani";
        t.set(e + n + ".json", undefined, [0, 0]);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(tu);
  var eu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(dt);
    var r = o(Wo);
    var i = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        t.layer = vt.layerConstValue.bottom;
        t.name = "洛克?向?气地面效果";
        var e = "passiveobject/actionobject/c_event/3kingdoms/";
        var n = "animation/baldo2_e1.ani.json";
        t.body.setAnimation(a.default.getAnimationData(e + n));
        var o = t.addAnimation(e + "animation/baldo2_e2.ani.json");
        o.parent.setChildIndex(o, 0);
        var r = t.addAnimation(e + "animation/baldo2_e3.ani.json");
        r.parent.setChildIndex(r, 0);
        return t;
      }
      t.prototype.update = function (t) {
        i.prototype.update.call(this, t);
        this.body.update(t);
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(eu);
  var nu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(Ge);
    var a = o(Wo);
    var s = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.layer = vt.layerConstValue.normal;
        t.name = "洛克?向?气地面效果";
        var e = "passiveobject/actionobject/c_event/3kingdoms/";
        var n = "animation/baldo2_slashwave.ani.json";
        t.body.setAnimation(r.default.getAnimationData(e + n));
        t.fu.setCurActionInfo({
          name: "",
          ani: "",
          action: "",
          hitType: "slash",
          attackDirection: "down",
          hitLiftUp: 1,
          pushAside: 1300,
          liftUp: 600,
        });
        t.direction = 1;
        t.on(i.default.COMPLETE, t.onComplete, t);
        return t;
      }
      t.prototype.onStart = function () {
        o.prototype.onStart.call(this);
        this.scale(this.direction, 1);
      };
      t.prototype.initData = function (t) {
        if (t) {
          t.setBind(this);
        }
      };
      t.prototype.onComplete = function () {
        this.body.visible = false;
        this.fu.hiter.enabled = false;
        this.removeSelfFormMap();
      };
      t.prototype.update = function (t) {
        o.prototype.update.call(this, t);
        this.body.update(t);
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(nu);
  var ou = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    var o;
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Ho);
    var i = n(Go);
    var a = n(Vo);
    var s = n($o);
    var u = n(qo);
    var l = n(Ko);
    var f = n(Yo);
    var c = n(zo);
    var p = n(Jo);
    var d = n(Zo);
    var h = n(tr);
    var v = n(er);
    var y = n(nr);
    var _ = n(or);
    var m = n(rr);
    var g = n(ir);
    var b = n(ar);
    var O = n(sr);
    var w = n(ur);
    var A = n(lr);
    var E = n(fr);
    var T = n(cr);
    var C = n(pr);
    var P = n(dr);
    var j = n(hr);
    var S = n(vr);
    var M = n(yr);
    var k = n(_r);
    var x = n(mr);
    var D = n(gr);
    var I = n(br);
    var R = n(Or);
    var L = n(wr);
    var F = n(Ar);
    var B = n(Er);
    var N = n(Tr);
    var X = n(Cr);
    var U = n(Pr);
    var H = n(jr);
    var G = n(Sr);
    var V = n(Mr);
    var $ = n(kr);
    var q = n(xr);
    var K = n(Dr);
    var Y = n(Ir);
    var W = n(Rr);
    var z = n(Lr);
    var Q = n(Fr);
    var J = n(Br);
    var Z = n(Nr);
    var tt = n(Xr);
    var et = n(Ur);
    var nt = n(Hr);
    var ot = n(Gr);
    var rt = n(Vr);
    var it = n($r);
    var at = n(qr);
    var st = n(Kr);
    var ut = n(Yr);
    var lt = n(Wr);
    var ft = n(zr);
    var ct = n(Qr);
    var pt = n(Jr);
    var dt = n(Zr);
    var ht = n(ti);
    var vt = n(ei);
    var yt = n(ni);
    var _t = n(ri);
    var mt = n(ii);
    var gt = n(ai);
    var bt = n(si);
    var Ot = n(ui);
    var wt = n(li);
    var At = n(fi);
    var Et = n(ci);
    var Tt = n(pi);
    var Ct = n(di);
    var Pt = n(hi);
    var jt = n(vi);
    var St = n(yi);
    var Mt = n(_i);
    var kt = n(mi);
    var xt = n(gi);
    var Dt = n(bi);
    var It = n(Oi);
    var Rt = n(wi);
    var Lt = n(Ai);
    var Ft = n(Ei);
    var Bt = n(Ti);
    var Nt = n(Ci);
    var Xt = n(Pi);
    var Ut = n(ji);
    var Ht = n(Si);
    var Gt = n(Mi);
    var Vt = n(ki);
    var $t = n(xi);
    var qt = n(Di);
    var Kt = n(Ii);
    var Yt = n(Ri);
    var Wt = n(Li);
    var zt = n(Fi);
    var Qt = n(Bi);
    var Jt = n(Ni);
    var Zt = n(Xi);
    var te = n(Ui);
    var ee = n(Hi);
    var ne = n(Gi);
    var oe = n(Vi);
    var re = n($i);
    var ie = n(qi);
    var ae = n(Ki);
    var se = n(Yi);
    var ue = n(Wi);
    var le = n(zi);
    var fe = n(Qi);
    var ce = n(Ji);
    var pe = n(Zi);
    var de = n(ta);
    var he = n(ea);
    var ve = n(na);
    var ye = n(oa);
    var _e = n(ra);
    var me = n(ia);
    var ge = n(aa);
    var be = n(sa);
    var Oe = n(ua);
    var we = n(la);
    var Ae = n(fa);
    var Ee = n(ca);
    var Te = n(pa);
    var Ce = n(da);
    var Pe = n(ha);
    var je = n(va);
    var Se = n(ya);
    var Me = n(_a);
    var ke = n(ma);
    var xe = n(ga);
    var De = n(ba);
    var Ie = n(Oa);
    var Re = n(wa);
    var Le = n(Aa);
    var Fe = n(Ea);
    var Be = n(Ta);
    var Ne = n(Ca);
    var Xe = n(Pa);
    var Ue = n(ja);
    var He = n(Sa);
    var Ge = n(Ma);
    var Ve = n(ka);
    var $e = n(xa);
    var qe = n(Da);
    var Ke = n(Ia);
    var Ye = n(Ra);
    var We = n(La);
    var ze = n(Ba);
    var Qe = n(Na);
    var Je = n(Xa);
    var Ze = n(Ua);
    var tn = n(Ha);
    var en = n(Ga);
    var nn = n(Va);
    var on = n($a);
    var rn = n(qa);
    var an = n(Ka);
    var sn = n(Ya);
    var un = n(Wa);
    var ln = n(za);
    var fn = n(Qa);
    var cn = n(Ja);
    var pn = n(Za);
    var dn = n(ts);
    var hn = n(es);
    var vn = n(ns);
    var yn = n(os);
    var _n = n(rs);
    var mn = n(is);
    var gn = n(as);
    var bn = n(ss);
    var On = n(us);
    var wn = n(ls);
    var An = n(fs);
    var En = n(cs);
    var Tn = n(ps);
    var Cn = n(ds);
    var Pn = n(hs);
    var jn = n(vs);
    var Sn = n(ys);
    var Mn = n(_s);
    var kn = n(ms);
    var xn = n(gs);
    var Dn = n(bs);
    var In = n(Os);
    var Rn = n(ws);
    var Ln = n(As);
    var Fn = n(Es);
    var Bn = n(Ts);
    var Nn = n(Cs);
    var Xn = n(Ps);
    var Un = n(js);
    var Hn = n(Ss);
    var Gn = n(Ms);
    var Vn = n(ks);
    var $n = n(xs);
    var qn = n(Ds);
    var Kn = n(Is);
    var Yn = n(Rs);
    var Wn = n(Ls);
    var zn = n(Fs);
    var Qn = n(Bs);
    var Jn = n(Ns);
    var Zn = n(Xs);
    var to = n(Us);
    var eo = n(Hs);
    var no = n(Gs);
    var oo = n(Vs);
    var ro = n($s);
    var io = n(qs);
    var ao = n(Ks);
    var so = n(Ys);
    var uo = n(Ws);
    var lo = n(zs);
    var fo = n(Qs);
    var co = n(Js);
    var po = n(Zs);
    var ho = n(tu);
    var vo = n(eu);
    var yo = n(nu);
    var _o =
      ((o = {}),
      (o[5] = vt.default),
      (o[6] = yt.default),
      (o[222] = N.default),
      (o[223] = T.default),
      (o[225] = C.default),
      (o[226] = S.default),
      (o[227] = P.default),
      (o[228] = M.default),
      (o[230] = j.default),
      (o[231] = E.default),
      (o[243] = x.default),
      (o[244] = L.default),
      (o[245] = D.default),
      (o[246] = F.default),
      (o[247] = I.default),
      (o[248] = B.default),
      (o[249] = k.default),
      (o[250] = R.default),
      (o[251] = xe.default),
      (o[252] = De.default),
      (o[254] = Ie.default),
      (o[255] = Re.default),
      (o[256] = Le.default),
      (o[257] = Fe.default),
      (o[261] = Se.default),
      (o[262] = ke.default),
      (o[272] = J.default),
      (o[273] = Y.default),
      (o[274] = nt.default),
      (o[275] = it.default),
      (o[276] = ut.default),
      (o[281] = pt.default),
      (o[282] = Z.default),
      (o[283] = W.default),
      (o[284] = ot.default),
      (o[285] = at.default),
      (o[286] = lt.default),
      (o[291] = dt.default),
      (o[292] = tt.default),
      (o[293] = z.default),
      (o[294] = rt.default),
      (o[295] = st.default),
      (o[296] = ft.default),
      (o[301] = ht.default),
      (o[302] = et.default),
      (o[303] = Q.default),
      (o[306] = ct.default),
      (o[361] = Xt.default),
      (o[362] = Nt.default),
      (o[363] = Ut.default),
      (o[364] = Gt.default),
      (o[365] = Ht.default),
      (o[366] = Vt.default),
      (o[367] = qt.default),
      (o[368] = $t.default),
      (o[369] = Bt.default),
      (o[370] = Ft.default),
      (o[371] = zt.default),
      (o[372] = Wt.default),
      (o[373] = Qt.default),
      (o[374] = Zt.default),
      (o[375] = Jt.default),
      (o[376] = te.default),
      (o[377] = ne.default),
      (o[378] = ee.default),
      (o[379] = Yt.default),
      (o[380] = Kt.default),
      (o[381] = ae.default),
      (o[382] = ie.default),
      (o[383] = se.default),
      (o[384] = le.default),
      (o[385] = ue.default),
      (o[386] = fe.default),
      (o[387] = pe.default),
      (o[388] = ce.default),
      (o[389] = re.default),
      (o[390] = oe.default),
      (o[391] = Mt.default),
      (o[392] = St.default),
      (o[393] = kt.default),
      (o[394] = Dt.default),
      (o[395] = xt.default),
      (o[396] = It.default),
      (o[397] = Lt.default),
      (o[398] = Rt.default),
      (o[399] = jt.default),
      (o[400] = Pt.default),
      (o[461] = bt.default),
      (o[462] = gt.default),
      (o[463] = Ot.default),
      (o[464] = At.default),
      (o[465] = wt.default),
      (o[466] = Et.default),
      (o[467] = Ct.default),
      (o[468] = Tt.default),
      (o[469] = mt.default),
      (o[470] = _t.default),
      (o[1008] = $e.default),
      (o[1009] = qe.default),
      (o[1010] = Ke.default),
      (o[1011] = He.default),
      (o[1012] = Ge.default),
      (o[1013] = Ve.default),
      (o[3e3] = Be.default),
      (o[3003] = Ne.default),
      (o[3004] = Xe.default),
      (o[3005] = Ue.default),
      (o[5570] = Ee.default),
      (o[5571] = Ae.default),
      (o[5572] = Te.default),
      (o[5573] = Pe.default),
      (o[5574] = Ce.default),
      (o[5575] = je.default),
      (o[5576] = je.default),
      (o[5577] = je.default),
      (o[5578] = je.default),
      (o[5579] = je.default),
      (o[8085] = c.default),
      (o[10130] = r.default),
      (o[10131] = i.default),
      (o[10132] = a.default),
      (o[10133] = s.default),
      (o[10134] = u.default),
      (o[10135] = l.default),
      (o[10136] = f.default),
      (o[30001] = on.default),
      (o[30007] = nn.default),
      (o[30022] = Ze.default),
      (o[30047] = tn.default),
      (o[30057] = en.default),
      (o[30059] = an.default),
      (o[30066] = sn.default),
      (o[30070] = rn.default),
      (o[48012] = w.default),
      (o[30053] = un.default),
      (o[30054] = ln.default),
      (o[109054514] = A.default),
      (o[109055823] = G.default),
      (o[109055285] = H.default),
      (o[109054544] = X.default),
      (o[109054884] = U.default),
      (o[23007] = p.default),
      (o[30568] = We.default),
      (o[30549] = Ye.default),
      (o[30069] = ze.default),
      (o[46003] = V.default),
      (o[30072] = $.default),
      (o[30303] = Qe.default),
      (o[30304] = Je.default),
      (o[1033] = Me.default),
      (o[311] = q.default),
      (o[312] = K.default),
      (o[5660] = ye.default),
      (o[5661] = ve.default),
      (o[5662] = _e.default),
      (o[5663] = ge.default),
      (o[5664] = me.default),
      (o[5665] = be.default),
      (o[5666] = we.default),
      (o[5667] = Oe.default),
      (o[5668] = he.default),
      (o[5669] = de.default),
      (o[20028] = O.default),
      (o[20009] = d.default),
      (o[20010] = _.default),
      (o[20031] = v.default),
      (o[20120] = h.default),
      (o[20121] = y.default),
      (o[20122] = m.default),
      (o[20041] = b.default),
      (o[20066] = g.default),
      (o[54737] = fn.default),
      (o[54736] = cn.default),
      (o[54818] = pn.default),
      (o[54735] = dn.default),
      (o[54733] = hn.default),
      (o[54698] = vn.default),
      (o[54700] = yn.default),
      (o[54817] = _n.default),
      (o[54808] = mn.default),
      (o[54809] = gn.default),
      (o[54810] = bn.default),
      (o[54693] = On.default),
      (o[54696] = wn.default),
      (o[54694] = An.default),
      (o[54702] = En.default),
      (o[54813] = Tn.default),
      (o[54812] = Cn.default),
      (o[54703] = Pn.default),
      (o[54705] = jn.default),
      (o[54727] = Mn.default),
      (o[54728] = Sn.default),
      (o[54730] = kn.default),
      (o[54731] = xn.default),
      (o[54715] = Dn.default),
      (o[54695] = In.default),
      (o[54701] = Rn.default),
      (o[54697] = Fn.default),
      (o[54471] = Ln.default),
      (o[54842] = Bn.default),
      (o[54706] = Nn.default),
      (o[54720] = Xn.default),
      (o[54721] = Un.default),
      (o[54723] = Hn.default),
      (o[54719] = Gn.default),
      (o[54718] = Vn.default),
      (o[54716] = $n.default),
      (o[54712] = qn.default),
      (o[54717] = Kn.default),
      (o[54744] = ao.default),
      (o[54745] = so.default),
      (o[54760] = uo.default),
      (o[54863] = lo.default),
      (o[54746] = Jn.default),
      (o[54864] = Zn.default),
      (o[54751] = co.default),
      (o[54752] = fo.default),
      (o[54753] = po.default),
      (o[54754] = ho.default),
      (o[54862] = Yn.default),
      (o[54839] = Wn.default),
      (o[30539] = zn.default),
      (o[30014] = Qn.default),
      (o[54844] = to.default),
      (o[54854] = eo.default),
      (o[54856] = no.default),
      (o[54855] = oo.default),
      (o[54823] = cn.default),
      (o[54821] = cn.default),
      (o[54857] = ro.default),
      (o[54852] = io.default),
      (o[54858] = vo.default),
      (o[54859] = yo.default),
      o);
    e.default = _o;
  });
  t(ou);
  var ru = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Mo);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.skillSheets =
          ((t = {}), (t["throw"] = "monster/hillgab/hillgabthrow"), t);
        return e;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ru);
  var iu = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Mo);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.skillSheets =
          ((t = {}), (t["throw"] = "monster/seagab/seagabthrow"), t);
        return e;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(iu);
  var au = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Mo);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.skillSheets =
          ((t = {}),
          (t["attack1"] = "monster/lightkinol/attack1"),
          (t["seriallightning"] = "monster/lightkinol/seriallightning"),
          (t["aroundlightning"] = "monster/lightkinol/aroundlightning"),
          t);
        return e;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(au);
  var su = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack1: "monster/taubeast/attack",
          roar: "monster/taubeast/roar",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(su);
  var uu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(uu);
  var lu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          AssaulterPunch: "monster/tau/AssaulterPunch",
          Tackle: "monster/tau/Tackle",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(lu);
  var fu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(fu);
  var cu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          EarthQuake: "monster/tau/shauta/EarthQuake",
          EarthQuakeStrong: "monster/tau/shauta/EarthQuakeStrong",
          ShautaTackleReady: "monster/tau/shauta/ShautaTackleReady",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(cu);
  var pu = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Mo);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = n.call(this) || this;
        e.skillSheets =
          ((t = {}),
          (t["cast"] = "monster/soceress/KerahaCast"),
          (t["cast1"] = "monster/soceress/KerahaCast2"),
          t);
        return e;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(pu);
  var du = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(du);
  var hu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(hu);
  var vu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(vu);
  var yu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(yu);
  var _u = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack: "monster/lugaru/LugaruAttack",
          LugaruJumpAttack1: "monster/lugaru/LugaruJumpAttack1",
          LugaruJumpAttack2: "monster/lugaru/LugaruJumpAttack2",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(_u);
  var mu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack: "monster/lugaru/KurogaruAttack_Curse",
          LugaruJumpAttack1: "monster/lugaru/KurogaruJumpAttack1_Curse",
          LugaruJumpAttack2: "monster/lugaru/KurogarJumpAttack2_Curse",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(mu);
  var gu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack: "monster/lugaru/LugaruAttack",
          LugaruJumpAttack1: "monster/lugaru/LugaruJumpAttack1",
          LugaruJumpAttack2: "monster/lugaru/LugaruJumpAttack2",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(gu);
  var bu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack: "monster/lugaru/KurogaruAttack_Curse",
          LugaruJumpAttack1: "monster/lugaru/KurogaruJumpAttack1_Curse",
          LugaruJumpAttack2: "monster/lugaru/KurogarJumpAttack2_Curse",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(bu);
  var Ou = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        return e.call(this) || this;
      }
      t.prototype.update = function (t) {
        e.prototype.update.call(this, t);
        if (!this.script.fightObjectIsValid(this.fightTarget)) {
          this.fightTarget = this.script.findFightObject();
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ou);
  var wu = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(he);
    var i = n(dt);
    var a = n(St);
    var s = n(we);
    var u = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.size(1, 1);
        t.ai = new Co.BehaviorRoot();
        t.ai.set("self", t);
        return t;
      }
      Object.defineProperty(t.prototype, "hiter", {
        get: function () {
          return this.fu.hiter;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        n.prototype.update.call(this, t);
        if (!this.isDeath) {
          this.ai.run();
        }
      };
      t.prototype.initRole = function () {
        var t;
        var e = this.roleData;
        if (e) {
          if (!e.action) {
            console.log("没有设置动作", e);
            return;
          }
          this.fu.camp = this.camp;
          this.setRoleData(e);
          this.setBodyEquipmentId(e.bodyEquipmentId);
          this.setActionInfo(i.default.conf.action[e.action]);
          this.setAction(this.defaultAction);
          this.labName.text = e.name;
          this.labName.name = e.icon;
          this.labName.y = -e.height - 12;
          this.hp = this.maxHp = 1e3;
          this.mp = this.maxMp = 1e3;
          this.setSize(
            (t = e === null || e === void 0 ? void 0 : e.size) !== null &&
              t !== void 0
              ? t
              : 1
          );
        } else {
          XOF.log("怪物初始化异常，数据不存在.");
        }
      };
      t.prototype.setRoleData = function (t) {
        var e;
        n.prototype.setRoleData.call(this, t);
        if (
          (e = this === null || this === void 0 ? void 0 : this.roleData) ===
            null || e === void 0
            ? void 0
            : e.ai
        ) {
          Co.BehaviorParser.parser(i.default.ai[this.roleData.ai], this.ai);
        } else {
          XOF.log("该怪物没有设置行为AI.");
        }
      };
      t.prototype.setMob = function (t) {
        var e = i.default.conf.monster[t];
        this.setRoleData(e);
        this.initRole();
      };
      t.prototype.setMonsterClass = function (t) {
        this.monsterClass = t;
        if (this.monsterClass == a.default.BOSS) {
          this.labName.visible = true;
          this.labName.textColor = s.default.registerColors[61];
          if (!this.light) {
            this.light = new XOF.Image();
            this.light.skin = "other/0.png";
            this.light.pivot(63, 21);
            this.light.blendMode = "add";
            this.addChildAt(this.light, 0);
          }
        } else if (this.monsterClass == a.default.SPECIAL) {
          this.labName.visible = true;
          this.labName.textColor = s.default.registerColors[60];
        }
      };
      t.prototype.getMonsterClass = function () {
        return this.monsterClass || a.default.NORMAL;
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(wu);
  var Au = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(wu);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.camp = ht.RoleCamp.MONSTER;
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Au);
  var Eu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack1: "monster/kcontents3/hell/normal_man/attack1",
          attack2: "monster/kcontents3/hell/normal_man/attack2",
          attack3: "monster/kcontents3/hell/normal_man/attack3",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Eu);
  var Tu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack1: "monster/kcontents3/hell/normal_woman/attack1",
          attack2: "monster/kcontents3/hell/normal_woman/attack2",
          attack3: "monster/kcontents3/hell/normal_woman/attack3",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Tu);
  var Cu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        t.skillSheets = {
          attack1: "monster/kcontents3/hell/crescent/attack1",
          attack2: "monster/kcontents3/hell/crescent/attack2",
          attack3: "monster/kcontents3/hell/crescent/attack3",
          attack4: "monster/kcontents3/hell/crescent/attack4",
        };
        return t;
      }
      t.prototype.setActioned = function () {
        i.prototype.setActioned.call(this);
        if (this.action == ht.RoleAction.MOVE) {
          if (this.script.HasAnimation("animation/move_l.ani")) return;
          var t = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/move_l.ani"
          );
          this.script.AddStateLayerAnimation(1, t);
          var e = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/move_g1.ani"
          );
          this.script.AddStateLayerAnimation(1, e);
          var n = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/move_e.ani"
          );
          this.script.AddStateLayerAnimation(-1, n);
          var o = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/move_g2.ani"
          );
          this.script.AddStateLayerAnimation(-1, o);
          var r = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/move_c.ani"
          );
          this.script.AddStateLayerAnimation(-1, r);
        } else {
          this.script.RemoveAnimation("animation/move_l.ani");
          this.script.RemoveAnimation("animation/move_g1.ani");
          this.script.RemoveAnimation("animation/move_e.ani");
          this.script.RemoveAnimation("animation/move_g2.ani");
          this.script.RemoveAnimation("animation/move_c.ani");
        }
        if (this.action == ht.RoleAction.STAY) {
          if (this.script.HasAnimation("animation/stay_g1.ani")) return;
          var t = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/stay_g1.ani"
          );
          this.script.AddStateLayerAnimation(1, t);
          var e = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/stay_l.ani"
          );
          this.script.AddStateLayerAnimation(1, e);
          var n = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/stay_e.ani"
          );
          this.script.AddStateLayerAnimation(-1, n);
          var o = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/stay_g2.ani"
          );
          this.script.AddStateLayerAnimation(-1, o);
          var r = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/stay_c.ani"
          );
          this.script.AddStateLayerAnimation(-1, r);
        } else {
          this.script.RemoveAnimation("animation/stay_g1.ani");
          this.script.RemoveAnimation("animation/stay_l.ani");
          this.script.RemoveAnimation("animation/stay_e.ani");
          this.script.RemoveAnimation("animation/stay_g2.ani");
          this.script.RemoveAnimation("animation/stay_c.ani");
        }
        if (this.action == ht.RoleAction.MOVE_BACK) {
          if (this.script.HasAnimation("animation/moveback_g1.ani")) return;
          var t = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/moveback_g1.ani"
          );
          this.script.AddStateLayerAnimation(1, t);
          var e = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/moveback_l.ani"
          );
          this.script.AddStateLayerAnimation(1, e);
          var n = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/moveback_e.ani"
          );
          this.script.AddStateLayerAnimation(-1, n);
          var o = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/moveback_g2.ani"
          );
          this.script.AddStateLayerAnimation(-1, o);
          var r = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/moveback_c.ani"
          );
          this.script.AddStateLayerAnimation(-1, r);
        } else {
          this.script.RemoveAnimation("animation/moveback_g1.ani");
          this.script.RemoveAnimation("animation/moveback_l.ani");
          this.script.RemoveAnimation("animation/moveback_e.ani");
          this.script.RemoveAnimation("animation/moveback_g2.ani");
          this.script.RemoveAnimation("animation/moveback_c.ani");
        }
        if (this.action == ht.RoleAction.DAMAGE1) {
          if (this.script.HasAnimation("animation/damage0_g1.ani")) return;
          var t = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage0_g1.ani"
          );
          this.script.AddStateLayerAnimation(1, t);
          var e = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage0_l.ani"
          );
          this.script.AddStateLayerAnimation(1, e);
          var n = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage0_e.ani"
          );
          this.script.AddStateLayerAnimation(-1, n);
          var o = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage0_g2.ani"
          );
          this.script.AddStateLayerAnimation(-1, o);
          var r = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage0_c.ani"
          );
          this.script.AddStateLayerAnimation(-1, r);
        } else {
          this.script.RemoveAnimation("animation/damage0_g1.ani");
          this.script.RemoveAnimation("animation/damage0_l.ani");
          this.script.RemoveAnimation("animation/damage0_e.ani");
          this.script.RemoveAnimation("animation/damage0_g2.ani");
          this.script.RemoveAnimation("animation/damage0_c.ani");
        }
        if (this.action == ht.RoleAction.DAMAGE2) {
          if (this.script.HasAnimation("animation/damage1_g1.ani")) return;
          var t = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage1_g1.ani"
          );
          this.script.AddStateLayerAnimation(1, t);
          var e = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage1_l.ani"
          );
          this.script.AddStateLayerAnimation(1, e);
          var n = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage1_e.ani"
          );
          this.script.AddStateLayerAnimation(-1, n);
          var o = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage1_g2.ani"
          );
          this.script.AddStateLayerAnimation(-1, o);
          var r = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/crescent1/animation.json",
            "animation/damage1_c.ani"
          );
          this.script.AddStateLayerAnimation(-1, r);
        } else {
          this.script.RemoveAnimation("animation/damage1_g1.ani");
          this.script.RemoveAnimation("animation/damage1_l.ani");
          this.script.RemoveAnimation("animation/damage1_e.ani");
          this.script.RemoveAnimation("animation/damage1_g2.ani");
          this.script.RemoveAnimation("animation/damage1_c.ani");
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Cu);
  var Pu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.skillSheets = {
          attack1: "monster/kcontents3/hell/mars/attack1",
          attack2: "monster/kcontents3/hell/mars/attack2",
          attack3: "monster/kcontents3/hell/mars/attack3",
          attack4: "monster/kcontents3/hell/mars/attack4",
          attack5: "monster/kcontents3/hell/mars/attack5",
        };
        t.superArmor = true;
        return t;
      }
      t.prototype.setActioned = function () {
        r.prototype.setActioned.call(this);
        if (this.action == ht.RoleAction.MOVE) {
          if (this.script.HasAnimation("animation/move_e.ani")) return;
          var t = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/mars/animation.json",
            "animation/move_e.ani"
          );
          this.script.AddStateLayerAnimation(-1, t);
        } else {
          this.script.RemoveAnimation("animation/move_e.ani");
        }
        if (this.action == ht.RoleAction.STAY) {
          if (this.script.HasAnimation("animation/stay_e.ani")) return;
          var e = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/mars/animation.json",
            "animation/stay_e.ani"
          );
          this.script.AddStateLayerAnimation(1, e);
        } else {
          this.script.RemoveAnimation("animation/stay_e.ani");
        }
        if (this.action == ht.RoleAction.DAMAGE1) {
          if (this.script.HasAnimation("animation/damage0_e.ani")) return;
          var e = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/mars/animation.json",
            "animation/damage0_e.ani"
          );
          this.script.AddStateLayerAnimation(1, e);
        } else {
          this.script.RemoveAnimation("animation/damage0_e.ani");
        }
        if (this.action == ht.RoleAction.DAMAGE2) {
          if (this.script.HasAnimation("animation/damage1_e.ani")) return;
          var t = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/mars/animation.json",
            "animation/damage1_e.ani"
          );
          this.script.AddStateLayerAnimation(-1, t);
        } else {
          this.script.RemoveAnimation("animation/damage1_e.ani");
        }
        if (this.action == ht.RoleAction.LAST) {
          if (this.script.HasAnimation("animation/damage1_e.ani")) return;
          var t = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/mars/animation.json",
            "animation/last_3.ani"
          );
          this.script.AddStateLayerAnimation(-1, t);
          var e = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/mars/animation.json",
            "animation/last_e.ani"
          );
          this.script.AddStateLayerAnimation(-1, e);
          var n = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/mars/animation.json",
            "animation/last_1.ani"
          );
          this.script.AddStateLayerAnimation(-1, n);
          var o = this.script.CreateAnimationByPath(
            "monster/kcontents3/hell/mars/animation.json",
            "animation/last_2.ani"
          );
          this.script.AddStateLayerAnimation(-1, o);
        } else {
          this.script.RemoveAnimation("animation/last_3.ani");
          this.script.RemoveAnimation("animation/last_e.ani");
          this.script.RemoveAnimation("animation/last_1.ani");
          this.script.RemoveAnimation("animation/last_2.ani");
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Pu);
  var ju = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          DashReady: "monster/new_flydragon/serimalion/dashAttack",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ju);
  var Su = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {};
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Su);
  var Mu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {};
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Mu);
  var ku = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          AttackHeart: "monster/draconian/attackInfo/LakiusAttackHeart",
          LakiusAttackLong: "monster/draconian/attackInfo/LakiusAttackLong",
          LakiusAttackSpark: "monster/draconian/attackInfo/LakiusAttackSpark",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(ku);
  var xu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {};
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(xu);
  var Du = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          WakeUp: "monster/characterstatue/fighterstatue/wakeup",
        };
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.skill("WakeUp");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Du);
  var Iu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          WakeUp: "monster/characterstatue/fighterstatue/wakeup",
          throw: "monster/characterstatue/gunnerstatue/attack",
        };
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.skill("WakeUp");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Iu);
  var Ru = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          WakeUp: "monster/characterstatue/fighterstatue/wakeup",
          throw: "monster/characterstatue/magicianstatue/attack",
        };
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.skill("WakeUp");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ru);
  var Lu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          WakeUp: "monster/characterstatue/fighterstatue/wakeup",
        };
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.skill("WakeUp");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Lu);
  var Fu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          WakeUp: "monster/characterstatue/fighterstatue/wakeup",
          HardAttack: "monster/characterstatue/attackInfo/SwordmanStatueAttack",
        };
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.skill("WakeUp");
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Fu);
  var Bu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          cast: "monster/dollmaster/attackInfo/StoneMasterCast",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Bu);
  var Nu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          cast: "monster/dollmaster/attackInfo/StoneMasterCast",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Nu);
  var Xu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          cast: "monster/dollmaster/attackInfo/StoneMasterCast",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Xu);
  var Uu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          cast: "monster/dollmaster/attackInfo/StoneMasterCast",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Uu);
  var Hu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Oe);
    var i = o(qn);
    var a = o(Mo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          command: "monster/soldier/attackInfo/AxionExpellerCall",
          pierce: "monster/soldier/attackInfo/LegionExpellerPierce",
        };
        t.on(i.default.TALK, t.talk, t);
        return t;
      }
      t.prototype.talk = function (t, e) {
        if (e === void 0) {
          e = 1800;
        }
        var n = this.talkPop;
        if (!n) {
          n = this.talkPop = new r.default();
          n.setPos(0, -this.roleData.height - 10);
          this.addChild(n);
        }
        n.setText(t, e);
      };
      t.prototype.setMap = function (t) {
        if (t == undefined && this.map) {
          this.off(i.default.TALK, this.talk, this);
          if (this.talkPop) {
            this.talkPop.removeSelf();
            this.talkPop = undefined;
          }
        }
        e.prototype.setMap.call(this, t);
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(Hu);
  var Gu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Oe);
    var i = o(qn);
    var a = o(Mo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          pierce: "monster/soldier/attackInfo/LegionExpellerPierce",
        };
        return t;
      }
      t.prototype.onStart = function () {
        e.prototype.onStart.call(this);
        this.map.on(i.default.MONSTER_COMMAND, this.onCall, this);
      };
      t.prototype.setMap = function (t) {
        if (t == undefined && this.map) {
          this.map.off(i.default.MONSTER_COMMAND, this.onCall, this);
          if (this.talkPop) {
            this.talkPop.removeSelf();
            this.talkPop = undefined;
          }
        }
        e.prototype.setMap.call(this, t);
      };
      t.prototype.onCall = function (t) {
        if (this.isDeath) return;
        if (t == i.default.COMMAND_ALL_ATTACK) {
          if (this.isNormalAction()) {
            this.talk("遵命!");
            this.ai.stop();
            this.skill("pierce");
          }
        }
      };
      t.prototype.talk = function (t, e) {
        if (e === void 0) {
          e = 1500;
        }
        var n = this.talkPop;
        if (!n) {
          n = this.talkPop = new r.default();
          n.setPos(0, -this.roleData.height - 10);
          this.addChild(n);
        }
        n.setText(t, e);
      };
      return t;
    })(a.default);
    e.default = s;
  });
  t(Gu);
  var Vu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          cast: "monster/lordoflight/attackInfo/LordofLightCast",
          nova: "monster/lordoflight/attackInfo/LordofLightNova",
          light: "monster/lordoflight/attackInfo/LordofLightLight",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Vu);
  var $u = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          TackleReady: "monster/new_golem/attackInfo/PlatanyGDAttack",
          DoubleAttack: "monster/new_golem/attackInfo/PlatanyDoubleAttack",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t($u);
  var qu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          pierce: "monster/soldier/attackInfo/LegionExpellerPierce",
        };
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(qu);
  var Ku = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(Mo);
    var i = (function (n) {
      o(t, n);
      function t() {
        return n.call(this) || this;
      }
      t.prototype.setAction = function (t, e) {
        return n.prototype.setAction.call(this, t, e);
      };
      t.prototype.setActioned = function () {
        n.prototype.setActioned.call(this);
        if (this.action == ht.RoleAction.LAST) {
          {
            var t = this.script.CreateAnimationByPath(
              this.roleData.ani,
              "animation/gate_light_back.ani"
            );
            this.script.AddStateLayerAnimation(0, t);
          }
          {
            var t = this.script.CreateAnimationByPath(
              this.roleData.ani,
              "animation/gate_light2.ani"
            );
            this.script.AddStateLayerAnimation(1, t);
          }
          {
            var t = this.script.CreateAnimationByPath(
              this.roleData.ani,
              "animation/gate_light2-1.ani"
            );
            this.script.AddStateLayerAnimation(2, t);
          }
          {
            var t = this.script.CreateAnimationByPath(
              this.roleData.ani,
              "animation/gate_light3.ani"
            );
            this.script.AddStateLayerAnimation(3, t);
          }
          {
            var t = this.script.CreateAnimationByPath(
              this.roleData.ani,
              "animation/gate_light.ani"
            );
            this.script.AddStateLayerAnimation(4, t);
          }
          {
            var t = this.script.CreateAnimationByPath(
              this.roleData.ani,
              "animation/gate_light_move.ani"
            );
            this.script.AddStateLayerAnimation(5, t);
          }
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ku);
  var Yu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Oe);
    var i = o(Mo);
    var a = [
      "Animation/Effect/ora_back.ani",
      0,
      -1,
      "Animation/Effect/ora_front.ani",
      0,
      1,
    ];
    var s = [
      "Animation/Effect/Damage1_Aura.ani",
      0,
      -1,
      "Animation/Effect/ora_back.ani",
      0,
      -1,
      "Animation/Effect/ora_front.ani",
      0,
      1,
    ];
    var u = [
      "Animation/Effect/Damage2_Aura.ani",
      0,
      -1,
      "Animation/Effect/ora_back.ani",
      0,
      -1,
      "Animation/Effect/ora_front.ani",
      0,
      1,
    ];
    var l = [
      "Animation/Effect/Down_Aura.ani",
      0,
      -1,
      "Animation/Effect/ora_back_5.ani",
      0,
      -1,
      "Animation/Effect/ora_front_5.ani",
      0,
      1,
    ];
    var f = [
      "Animation/Effect/ora_back.ani",
      0,
      -1,
      "Animation/Effect/ora_front.ani",
      0,
      1,
    ];
    var c = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack: "monster/newmonsters/3kingdoms/jojo/attackInfo/JojoAttack",
          attack1: "monster/newmonsters/3kingdoms/jojo/attackInfo/JojoTeleport",
          attack3:
            "monster/newmonsters/3kingdoms/jojo/attackInfo/JojoDropsword",
          attack4:
            "monster/newmonsters/3kingdoms/jojo/attackInfo/JojoBladeDown",
        };
        return t;
      }
      t.prototype.setActionBefore = function () {
        this.script.subAnimation(a, 0, undefined);
        this.script.subAnimation(s, 0, undefined);
        this.script.subAnimation(u, 0, undefined);
        this.script.subAnimation(l, 0, undefined);
        this.script.subAnimation(f, 0, undefined);
      };
      t.prototype.setActioned = function () {
        e.prototype.setActioned.call(this);
        if (this.action == ht.RoleAction.MOVE) {
          this.script.subAnimation(
            a,
            1,
            "monster/newmonsters/3kingdoms/jojo/animation/new.json"
          );
        } else if (this.action == ht.RoleAction.DAMAGE1) {
          this.script.subAnimation(
            s,
            1,
            "monster/newmonsters/3kingdoms/jojo/animation/new.json"
          );
        } else if (this.action == ht.RoleAction.DAMAGE2) {
          this.script.subAnimation(
            u,
            1,
            "monster/newmonsters/3kingdoms/jojo/animation/new.json"
          );
        } else if (this.action == ht.RoleAction.DOWN) {
          this.script.subAnimation(
            l,
            1,
            "monster/newmonsters/3kingdoms/jojo/animation/new.json"
          );
        } else if (this.action == ht.RoleAction.STAY) {
          this.script.subAnimation(
            f,
            1,
            "monster/newmonsters/3kingdoms/jojo/animation/new.json"
          );
        } else if (this.action == ht.RoleAction.LAST) {
          this.talk("孤有何罪，若天下无孤，不知有几人称帝，几人称王。", -1e3);
        }
      };
      t.prototype.talk = function (t, e) {
        if (e === void 0) {
          e = 1500;
        }
        var n = this.talkPop;
        if (!n) {
          n = this.talkPop = new r.default();
          n.setPos(0, -this.roleData.height - 10 + 80);
          this.addChild(n);
        }
        n.setText(t, e);
      };
      return t;
    })(i.default);
    e.default = c;
  });
  t(Yu);
  var Wu = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mo);
    var i = [
      "Animation/effect/normal/ora_back.ani",
      0,
      -1,
      "Animation/effect/normal/ora_front.ani",
      0,
      2,
      "Animation/effect/normal/loop_dust.ani",
      0,
      3,
    ];
    var a = [
      "Animation/effect/normal/ora_back.ani",
      0,
      -1,
      "Animation/effect/normal/ora_front.ani",
      0,
      1,
      "Animation/effect/normal/loop_dust.ani",
      0,
      3,
    ];
    var s = [
      "Animation/effect/normal/ora_back.ani",
      0,
      -1,
      "Animation/effect/normal/ora_front.ani",
      0,
      1,
      "Animation/effect/normal/loop_dust.ani",
      0,
      3,
    ];
    var u = [];
    var l = [
      "Animation/effect/normal/ora_back.ani",
      0,
      -2,
      "Animation/effect/dead/dead_effect_back_dodge.ani",
      0,
      -1,
      "Animation/effect/normal/ora_front.ani",
      0,
      1,
      "Animation/effect/dead/dead_effect_normal.ani",
      0,
      2,
      "Animation/effect/normal/loop_dust.ani",
      0,
      3,
      "Animation/effect/dead/dead_effect_front_dodge.ani",
      0,
      4,
    ];
    var f = [
      "Animation/effect/normal/ora_back.ani",
      0,
      -1,
      "Animation/effect/normal/ora_front.ani",
      0,
      1,
      "Animation/effect/normal/loop_dust.ani",
      0,
      2,
      "Animation/effect/eye_effect/eye.ani",
      0,
      3,
    ];
    var c = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.skillSheets = {
          attack: "monster/newmonsters/3kingdoms/yopo/attackInfo/YopoAttack",
          attack1: "monster/newmonsters/3kingdoms/yopo/attackInfo/YopoAttack1",
          attack2: "monster/newmonsters/3kingdoms/yopo/attackInfo/YopoAttack2",
          attack4: "monster/newmonsters/3kingdoms/yopo/attackInfo/YopoAttack4",
        };
        return t;
      }
      t.prototype.setActionBefore = function () {
        this.script.subAnimation(i, 0, undefined);
        this.script.subAnimation(a, 0, undefined);
        this.script.subAnimation(s, 0, undefined);
        this.script.subAnimation(u, 0, undefined);
        this.script.subAnimation(f, 0, undefined);
        this.script.subAnimation(l, 0, undefined);
      };
      t.prototype.setActioned = function () {
        e.prototype.setActioned.call(this);
        if (this.action == ht.RoleAction.MOVE) {
          this.script.subAnimation(
            i,
            1,
            "monster/newmonsters/3kingdoms/yopo/animation.json"
          );
        } else if (this.action == ht.RoleAction.DAMAGE1) {
          this.script.subAnimation(
            a,
            1,
            "monster/newmonsters/3kingdoms/yopo/animation.json"
          );
        } else if (this.action == ht.RoleAction.DAMAGE2) {
          this.script.subAnimation(
            s,
            1,
            "monster/newmonsters/3kingdoms/yopo/animation.json"
          );
        } else if (this.action == ht.RoleAction.DOWN) {
          this.script.subAnimation(
            u,
            1,
            "monster/newmonsters/3kingdoms/yopo/animation.json"
          );
        } else if (this.action == ht.RoleAction.STAY) {
          this.script.subAnimation(
            f,
            1,
            "monster/newmonsters/3kingdoms/yopo/animation.json"
          );
        } else if (this.action == ht.RoleAction.LAST) {
          this.script.subAnimation(
            l,
            1,
            "monster/newmonsters/3kingdoms/yopo/animation.json"
          );
        }
      };
      return t;
    })(r.default);
    e.default = c;
  });
  t(Wu);
  var zu = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var d = n(Do);
    var h = n(Io);
    var v = n(Ro);
    var y = n(Lo);
    var _ = n(Fo);
    var m = n(Mo);
    var g = n(Bo);
    var b = n(No);
    var o = n(Xo);
    var r = n(ou);
    var O = n(ru);
    var w = n(iu);
    var A = n(au);
    var E = n(su);
    var T = n(uu);
    var C = n(lu);
    var P = n(fu);
    var j = n(cu);
    var S = n(pu);
    var M = n(du);
    var k = n(hu);
    var x = n(vu);
    var D = n(yu);
    var I = n(_u);
    var R = n(mu);
    var L = n(gu);
    var F = n(bu);
    var B = n(Ou);
    var N = n(Au);
    var X = n(Eu);
    var U = n(Tu);
    var H = n(Cu);
    var G = n(Pu);
    var V = n(ju);
    var $ = n(Su);
    var q = n(Mu);
    var K = n(ku);
    var Y = n(xu);
    var W = n(Du);
    var z = n(Iu);
    var Q = n(Ru);
    var J = n(Lu);
    var Z = n(Fu);
    var tt = n(Bu);
    var et = n(Nu);
    var nt = n(Xu);
    var ot = n(Uu);
    var rt = n(Hu);
    var it = n(Gu);
    var at = n(Vu);
    var st = n($u);
    var ut = n(qu);
    var lt = n(dt);
    var ft = n(Ku);
    var ct = n(Yu);
    var pt = n(Wu);
    var i = (function () {
      function t() {
        var t, e, n, o, r, i, a, s, u, l, f;
        g.default.define(1, d.default);
        g.default.define(2, v.default);
        g.default.define(3, y.default);
        g.default.define(4, _.default);
        g.default.define(5, h.default);
        g.default.define(7, O.default);
        g.default.define(8, w.default);
        g.default.define(9, A.default);
        g.default.define(10, T.default);
        g.default.define(11, b.default);
        g.default.define(12, E.default);
        g.default.define(13, C.default);
        g.default.define(14, P.default);
        g.default.define(15, j.default);
        g.default.define(21, S.default);
        g.default.define(22, M.default);
        g.default.define(37, tt.default);
        g.default.define(38, ot.default);
        g.default.define(39, nt.default);
        g.default.define(40, et.default);
        g.default.define(50, V.default);
        g.default.define(51, $.default);
        g.default.define(70, q.default);
        g.default.define(71, K.default);
        g.default.define(72, Y.default);
        g.default.define(80, W.default);
        g.default.define(81, z.default);
        g.default.define(82, Q.default);
        g.default.define(83, J.default);
        g.default.define(84, Z.default);
        g.default.define(210, k.default);
        g.default.define(211, x.default);
        g.default.define(212, D.default);
        g.default.define(600, B.default);
        g.default.define(5001, I.default);
        g.default.define(5002, R.default);
        g.default.define(5003, L.default);
        g.default.define(5004, F.default);
        g.default.define(109010636, X.default);
        g.default.define(109010637, U.default);
        g.default.define(2021128, H.default);
        g.default.define(109010635, G.default);
        g.default.define(2000000001, N.default);
        g.default.define(75, m.default);
        g.default.define(34, m.default);
        g.default.define(33, m.default);
        g.default.define(76, m.default);
        g.default.define(78, m.default);
        g.default.define(3001, st.default);
        g.default.define(77, m.default);
        g.default.define(50008, m.default);
        g.default.define(700, it.default);
        g.default.define(701, it.default);
        g.default.define(702, ut.default);
        g.default.define(704, it.default);
        g.default.define(705, it.default);
        g.default.define(3e3, at.default);
        g.default.define(750, m.default, {
          cast: "monster/evileye/attackInfo/EvilEyeAniLaserReady",
        });
        g.default.define(751, m.default, {
          cast: "monster/evileye/attackInfo/EvilEyeAniLaserReady",
        });
        g.default.define(752, m.default, {
          cast: "monster/evileye/attackInfo/EvilEyeAniLaserReady",
        });
        g.default.define(50063, rt.default);
        g.default.define(60, m.default);
        g.default.define(1100, m.default);
        g.default.define(
          61,
          m.default,
          ((t = {}), (t["throw"] = "monster/goblin/suriken"), t)
        );
        g.default.define(2000000002, at.default);
        g.default.define(2000000003, ut.default);
        g.default.define(2000000004, rt.default);
        g.default.define(
          111017,
          m.default,
          ((e = {}),
          (e["throw"] =
            "monster/newmonsters/3kingdoms/sniper/sniper/attack_throw"),
          e)
        );
        g.default.define(
          111018,
          m.default,
          ((n = {}),
          (n["throw"] =
            "monster/newmonsters/3kingdoms/sniper/sniper/attack_throw"),
          n)
        );
        g.default.define(
          50012,
          m.default,
          ((o = {}), (o["throw"] = "monster/zealot/attackInfo/ZealotDagger"), o)
        );
        g.default.define(
          56417,
          m.default,
          ((r = {}), (r["throw"] = "monster/zealot/attackInfo/ZealotDagger"), r)
        );
        g.default.define(
          50009,
          m.default,
          ((i = {}), (i["throw"] = "monster/zealot/attackInfo/ZealotDagger"), i)
        );
        g.default.define(
          56414,
          m.default,
          ((a = {}), (a["throw"] = "monster/zealot/attackInfo/ZealotDagger"), a)
        );
        g.default.define(
          61600,
          m.default,
          ((s = {}),
          (s["throw"] = "monster/zealot/attackInfo/ZealotnewDagger"),
          s)
        );
        g.default.define(
          111008,
          m.default,
          ((u = {}),
          (u["skill1"] =
            "monster/newmonsters/3kingdoms/zhangfei/attackInfo/ZhangfeiAttack"),
          (u["attack1"] =
            "monster/newmonsters/3kingdoms/zhangfei/attackInfo/ZhangfeiAttack1"),
          u)
        );
        g.default.define(
          111014,
          m.default,
          ((l = {}),
          (l["skill1"] =
            "monster/newmonsters/3kingdoms/zhangfei/attackInfo/ZhangfeiAttack"),
          (l["attack1"] =
            "monster/newmonsters/3kingdoms/zhangfei/attackInfo/ZhangfeiAttack1"),
          l)
        );
        g.default.define(
          56099,
          m.default,
          ((f = {}),
          (f["skill1"] =
            "monster/newmonsters/3kingdoms/zhangfei/attackInfo/ZhangfeiAttack"),
          (f["attack1"] =
            "monster/newmonsters/3kingdoms/zhangfei/attackInfo/ZhangfeiAttack1"),
          f)
        );
        g.default.define(111013, ct.default);
        g.default.define(111005, pt.default);
        g.default.define(111023, ft.default);
        for (var c in lt.default.conf.monsterDefine) {
          var p = parseInt(c);
          if (g.default.get(p)) continue;
          g.default.define(p, m.default);
        }
      }
      t.prototype.createPassiveObject = function (t) {
        var e = r.default[t];
        var n;
        if (e) {
          n = new e();
        } else {
          XOF.warn("对象不存在" + t + ".");
          n = new o.default();
        }
        n.id = t;
        return n;
      };
      t.prototype.createMonster = function (t) {
        var e;
        if (g.default.has(t)) {
          var n = g.default.get(t);
          e = new n.cls();
          if (n.skills) e.setSkills(n.skills);
          e.setMob(n.mob);
        } else {
          XOF.warn("怪物不存在" + t + ".");
          var n = g.default.goblin();
          e = new n.cls();
          e.setMob(n.mob);
        }
        return e;
      };
      return t;
    })();
    e.default = i;
  });
  t(zu);
  var Qu = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.MapSteplock = void 0;
    var o = n(k);
    var r = n(q);
    var i = n(B);
    var a = (function () {
      function t(t) {
        this.map = t;
        this.state = 0;
        this.reset();
        this.resetLogs();
        this.roles = [];
        this.citySteps = [];
      }
      t.prototype.put = function (t, e, n) {
        if (this.state < 2) {
          if (t[vt.MAP_ETC_VALUE.MapObjectId]) {
            this.steps.push({
              roleid: t[vt.MAP_ETC_VALUE.MapObjectId],
              key: e,
              state: n,
            });
          } else {
            XOF.log("异常的对象", t);
          }
        }
      };
      t.prototype.putCity = function (t, e, n, o, r, i) {
        if (this.state < 2) {
          if (t[vt.MAP_ETC_VALUE.MapObjectId]) {
            this.citySteps.push({
              roleid: t[vt.MAP_ETC_VALUE.MapObjectId],
              key: e,
              state: n,
              frame: o,
              x: r,
              y: i,
            });
          } else {
            XOF.log("异常的对象", t);
          }
        }
      };
      Object.defineProperty(t.prototype, "paused", {
        get: function () {
          return this.state == 0;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.update = function (t) {
        var e = new Big(Math.floor(t * 1e3) / 1e3);
        while (e.toNumber() > 0) {
          if (this.dt.plus(e).toNumber() >= this.delay.toNumber()) {
            var n = this.delay.minus(this.dt);
            this.dt = this.dt.minus(this.dt);
            this.map.lockUpdate(n.toNumber() * 1e3);
            e = e.minus(n);
            this.sav();
            this.action();
            this.frame += 1;
            this.steps = [];
          } else {
            this.dt = this.dt.plus(e);
            this.map.lockUpdate(e.toNumber() * 1e3);
            e = e.minus(e);
          }
        }
      };
      t.prototype.action = function () {
        if (this.state == 2) {
          if (this.playIndex > this.stepLogs.length) {
            this.stop();
            return;
          } else {
            this.doSteps(this.stepLogs[this.playIndex]);
            this.playIndex = this.playIndex += 1;
          }
        } else {
          this.doSteps(this.steps);
        }
      };
      t.prototype.sav = function () {
        if (this.state == 2);
        else {
          if (this.state == 1) {
            this.saveStep();
          }
        }
      };
      t.prototype.saveStep = function () {
        if (this.steps.length) {
          r.default.log3("当前记录为第" + this.frame + "帧.");
          r.default.log3(
            "ROLE POS",
            this.map.hero.position.x,
            this.map.hero.position.y
          );
          this.stepLogs.push(o.default.clone(this.steps));
        } else {
          this.stepLogs.push(undefined);
        }
      };
      t.prototype.doSteps = function (t) {
        if (t === null || t === void 0 ? void 0 : t.length) {
          if (this.state == 2) {
            r.default.log3("当前执行为第" + this.frame + "帧.");
            r.default.log3(
              "ROLE POS",
              this.map.hero.position.x,
              this.map.hero.position.y
            );
          }
          for (var e = 0; e < t.length; e++, undefined) {
            var n = t[e];
            this.doStep(n);
          }
        } else {
          if (this.state == 2) {
            r.default.log2(2, "无操作的步骤", this.playIndex);
          }
        }
      };
      t.prototype.doStep = function (t, e) {
        var n = e || this.getObject(t.roleid);
        if (n) {
          if (t.state) {
            n.event(XOF.Event.KEY_DOWN, [t.key]);
          } else {
            n.event(XOF.Event.KEY_UP, [t.key]);
          }
        }
      };
      t.prototype.resetLogs = function () {
        this.stepLogs = [];
        this.steps = [];
      };
      t.prototype.reset = function () {
        this.frame = 0;
        this.dt = new Big(0);
        this.delay = new Big(1 / 50);
      };
      t.prototype.replay = function () {
        this.reset();
        this.playIndex = 0;
        this.state = 2;
      };
      t.prototype.stop = function () {
        this.state = 0;
        r.default.log(i.default.randomCount, "随机次数");
      };
      t.prototype.record = function () {
        this.reset();
        this.resetLogs();
        this.state = 1;
      };
      t.prototype.replayNow = function () {
        var t, e;
        this.replay();
        var n =
          (e =
            (t = this === null || this === void 0 ? void 0 : this.stepLogs) ===
              null || t === void 0
              ? void 0
              : t.length) !== null && e !== void 0
            ? e
            : 0;
        for (var o = 0; o < n; o++) {
          this.update(this.delay.toNumber());
        }
      };
      t.prototype.getObject = function (t) {
        var e;
        var n =
          (e = this === null || this === void 0 ? void 0 : this.map) === null ||
          e === void 0
            ? void 0
            : e.updateList;
        var o = n === null || n === void 0 ? void 0 : n.length;
        for (var r = 0; r < o; r++) {
          var i = n[r];
          if (i[vt.MAP_ETC_VALUE.MapObjectId] == t) {
            return i;
          }
        }
      };
      t.prototype.addRole = function (t) {
        if (this.roleIndex(t) >= 0) return;
        this.roles.push(t);
      };
      t.prototype.removeRole = function (t) {
        var e = this.roleIndex(t);
        if (e >= 0) this.roles.splice(e, 1);
      };
      t.prototype.roleIndex = function (t) {
        return this.roles.indexOf(t);
      };
      t.prototype.clean = function () {
        this.map = undefined;
        this.roles = this.stepLogs = this.steps = undefined;
      };
      return t;
    })();
    e.MapSteplock = a;
  });
  t(Qu);
  Qu.MapSteplock;
  var Ju = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(ve);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.$mapWidth = 640;
        t.winWidth = 640;
        t.backgroundX = 0;
        t.backgroundY = 0;
        t.fillMode = "repeat";
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ju);
  var Zu = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.DungeonType = void 0;
    var n = (function () {
      function t() {}
      t.Tower = 91e6;
      t.Test = 94e6;
      t.TowerOfUltimate = 96e6;
      return t;
    })();
    e.default = n;
    var o = (function () {
      function t() {}
      t.Line = "[dungeon line]";
      t.Hell = "[dungeon hell]";
      return t;
    })();
    e.DungeonType = o;
  });
  t(Zu);
  Zu.DungeonType;
  var tl = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var o = (function () {
      function t() {}
      t.getTowerData = function (t, e) {
        for (var n in r.default.conf.hellTower) {
          var o = r.default.conf.hellTower[n];
          if (o.level == t && o.round == e) {
            return o;
          }
        }
      };
      t.getTowerCount = function () {
        var t = 0;
        for (var e = 1; e < Number.MAX_SAFE_INTEGER; e++) {
          if (!this.getTowerData(e, 1)) break;
          t++;
        }
        return t;
      };
      t.getTowerTop = function () {
        var t = 0;
        for (var e in r.default.conf.hellTower) {
          var n = r.default.conf.hellTower[e];
          if (parseInt(n.level) > t) {
            t = parseInt(n.level);
          }
        }
        return t;
      };
      t.getTowerRoundCount = function (t) {
        var e = 0;
        for (var n = 1; n < Number.MAX_SAFE_INTEGER; n++) {
          if (!this.getTowerData(t, n)) break;
          e++;
        }
        return e;
      };
      t.TowerHasBoss = function (t, e) {
        var n, o, r, i;
        if (e) {
          return (
            ((o =
              (n = this.getTowerData(t, e).boss) === null || n === void 0
                ? void 0
                : n.length) !== null && o !== void 0
              ? o
              : 0) > 0
          );
        }
        return (
          ((i =
            (r = this.getTowerData(t, this.getTowerRoundCount(t)).boss) ===
              null || r === void 0
              ? void 0
              : r.length) !== null && i !== void 0
            ? i
            : 0) > 0
        );
      };
      return t;
    })();
    e.default = o;
  });
  t(tl);
  var el = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var o = (function () {
      function t() {}
      t.getTowerData = function (t, e) {
        for (var n in r.default.conf.unknownTower) {
          var o = r.default.conf.unknownTower[n];
          if (o.level == t && o.round == e) {
            return o;
          }
        }
      };
      t.getTowerCount = function () {
        var t = 0;
        for (var e = 1; e < Number.MAX_SAFE_INTEGER; e++) {
          if (!this.getTowerData(e, 1)) break;
          t++;
        }
        return t;
      };
      t.getTowerTop = function () {
        var t = 0;
        for (var e in r.default.conf.unknownTower) {
          var n = r.default.conf.unknownTower[e];
          if (parseInt(n.level) > t) {
            t = parseInt(n.level);
          }
        }
        return t;
      };
      t.getTowerRoundCount = function (t) {
        var e = 0;
        for (var n = 1; n < Number.MAX_SAFE_INTEGER; n++) {
          if (!this.getTowerData(t, n)) break;
          e++;
        }
        return e;
      };
      t.TowerHasBoss = function (t, e) {
        var n, o, r, i;
        if (e) {
          return (
            ((o =
              (n = this.getTowerData(t, e).boss) === null || n === void 0
                ? void 0
                : n.length) !== null && o !== void 0
              ? o
              : 0) > 0
          );
        }
        return (
          ((i =
            (r = this.getTowerData(t, this.getTowerRoundCount(t)).boss) ===
              null || r === void 0
              ? void 0
              : r.length) !== null && i !== void 0
            ? i
            : 0) > 0
        );
      };
      return t;
    })();
    e.default = o;
  });
  t(el);
  var nl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var ot = a(ve);
    var rt = a(_t);
    var it = a(ye);
    var at = a(Ae);
    var s = a(he);
    var T = a(k);
    var u = a(Te);
    var w = a(q);
    var st = a($);
    var l = a(Se);
    var f = a(xo);
    var c = a(zu);
    var p = a(gt);
    var d = a(Q);
    var ut = a(dt);
    var lt = a(qn);
    var ft = a(H);
    var h = a(B);
    var v = a(L);
    var ct = a(Ju);
    var m = a(Mo);
    var pt = a(mt);
    var y = a(x);
    var g = a(St);
    var b = a(bt);
    var O = a($e);
    var A = a(F);
    var E = i(Zu);
    var C = a(tl);
    var P = a(Xo);
    var j = a(yt);
    var S = a(I);
    var M = a(el);
    var _ = (function (_) {
      n(t, _);
      function t() {
        var t = _.call(this) || this;
        t.background_pos = 0;
        t.paused = true;
        t.left = 0;
        t.top = 0;
        t.mapMinX = 0;
        t.mapMaxX = 0;
        t.mapMaxY = 0;
        t.mapMinY = 0;
        t.mapStage = 0;
        t.updateList = [];
        t.onstarts = [];
        t.tweens = [];
        t.monsterPositions = [];
        t.initHashCodes = {};
        t.lastX =
          t.lastY =
          t.$hitCount =
          t.cameraCount =
          t.cameraX_ =
          t.cameraY_ =
          t.offsetY_ =
            0;
        t.pathgates = {};
        t.values = {};
        t.hitTest = new u.default(t);
        t.ms = new Qu.MapSteplock(t);
        t.sk = new f.default();
        t.sk.on(1043, t.onUseSkill, t);
        t.sk.on(1047, t.onCheckSkill, t);
        t.objMgr = new c.default();
        t.initLayer();
        t.setCamera(100, 0);
        t.scale(1.5, 1.5);
        t.timeScale = 1;
        t.mapObjectId = 9e3;
        return t;
      }
      t.prototype.onOpen = function () {
        w.default.gameControler.on(XOF.Event.KEY_DOWN, this.onKeyDown, this);
        w.default.gameControler.on(XOF.Event.KEY_UP, this.onKeyUp, this);
        w.default.eventMgr.on(1040, this.heroStay, this);
        this.on(v.default.UPDATE_DELAY, this.onUpdateAnimationFrame, this);
        this.on(v.default.ATTACK_BOX, this.onAttackBox, this);
        this.on("hell", this.onHellDamage, this);
        w.default.eventMgr.on(1045, this.onUseItem, this);
        w.default.eventMgr.on(1026, this.onRoundRegen, this);
        w.default.eventMgr.on(1029, this.onHellChanged, this);
        this.on(1013, this.updatePathgate, this);
      };
      t.prototype.onClose = function () {
        w.default.gameControler.off(XOF.Event.KEY_DOWN, this.onKeyDown, this);
        w.default.gameControler.off(XOF.Event.KEY_UP, this.onKeyUp, this);
        w.default.eventMgr.off(1040, this.heroStay, this);
        this.off(v.default.UPDATE_DELAY, this.onUpdateAnimationFrame, this);
        this.off(v.default.ATTACK_BOX, this.onAttackBox, this);
        this.off("hell", this.onHellDamage, this);
        w.default.eventMgr.off(1045, this.onUseItem, this);
        w.default.eventMgr.off(1026, this.onRoundRegen, this);
        w.default.eventMgr.off(1029, this.onHellChanged, this);
        this.off(1013, this.updatePathgate, this);
      };
      t.prototype.cleanOtherObject = function () {
        while (this.tweens.length) this.removeTween(this.tweens[0]);
        for (var t = 0, e = this.children_; t < e.length; t++) {
          var n = e[t];
          var o = n.numChild;
          for (var r = o - 1; r >= 0; r--) {
            var i = n.getChildAt(r);
            if (this.initHashCodes[i.hashCode]) continue;
            n.removeChild(i);
          }
        }
      };
      t.prototype.onRoundRegen = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.hero) ===
            null || t === void 0
            ? void 0
            : t.isDeath
        )
          return;
        if (w.default.userData.map.dungeonId == E.default.Tower) {
          this.hero.script.recovery("hp", "%", 15, 1e3);
          this.hero.script.recovery("mp", "%", 15, 1e3);
        }
      };
      Object.defineProperty(t.prototype, "consumable", {
        get: function () {
          var t;
          return (t =
            this === null || this === void 0 ? void 0 : this.parent) === null ||
            t === void 0
            ? void 0
            : t.consumable;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onUseSkill = function (t, e) {
        if (t == this.hero) {
          if (t.isDeath) return;
          if (w.default.userData.map.dungeonId == E.default.Test) return;
          var n = O.default.getData(e);
          if ((n === null || n === void 0 ? void 0 : n.colourless) > 0) {
            w.default.userData.dungeon.useSkill(e);
          }
        }
      };
      t.prototype.onUseItem = function (t, e) {
        if (t == this.hero) {
          if (t.isDeath) return;
          if (t.rs.get(e) <= 0) {
            if (w.default.userData.dungeon.getItemCount(e) > 0) {
              w.default.userData.dungeon.useItem(e);
              t.script.item(e);
              t.rs.item(e);
            } else {
              w.default.userData.home.text("使用次数达到上限");
            }
          } else {
            w.default.userData.home.text("物品正在冷却中");
          }
        } else {
          t.script.item(e);
        }
      };
      t.prototype.onCheckSkill = function (t, e, n) {
        if (t == this.hero) {
          if (n == -1) {
            w.default.userData.home.text("无色小晶块不足");
          } else if (n == -2) {
            w.default.userData.home.text("魔法值不足");
          } else if (n == -3) {
            w.default.userData.home.text("技能正在冷却中");
            w.default.sound.play("SM_COOLTIME", { completeDestroy: true });
          }
        }
      };
      t.prototype.setHero = function (t) {
        this.setMyControler(t);
      };
      Object.defineProperty(t.prototype, "isDungeon", {
        get: function () {
          return pt.default.isFight();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "mapId", {
        get: function () {
          var t;
          return (t =
            this === null || this === void 0 ? void 0 : this.cMapData) ===
            null || t === void 0
            ? void 0
            : t.id;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onKeyDown = function (t) {
        if (!this.paused) {
          var e = this.hero;
          this.ms.put(e, t, true);
          if (w.default.userData.map.isCity()) {
            w.default.userData.city.sendKeyState(
              t,
              1,
              e.position.x,
              e.position.y,
              e.direction,
              this.ms.frame
            );
          }
        }
      };
      t.prototype.onKeyUp = function (t) {
        if (!this.paused) {
          var e = this.hero;
          this.ms.put(e, t, false);
          if (w.default.userData.map.isCity()) {
            w.default.userData.city.sendKeyState(
              t,
              0,
              e.position.x,
              e.position.y,
              e.direction,
              this.ms.frame
            );
          }
        }
      };
      t.prototype.initLayer = function () {
        for (var t in vt.layerConst) {
          var e = new XOF.Sprite();
          e.name = vt.layerConst[t];
          this.addChild(e);
        }
        this.eventAreaBox = [];
        this.moveAreaBox = [];
        this.grids = {};
      };
      t.prototype.heroStay = function (t) {
        if (t === void 0) {
          t = false;
        }
        var e = this.hero;
        if (e) {
          e.stay(t, t);
        }
      };
      t.prototype.setMyControler = function (t) {
        if (this.hero) {
          this.hero.off(p.default.CD_ON, this.onHeroCDChanged, this);
          this.hero.off(p.default.CD_OFF, this.onHeroCDChanged, this);
          this.hero.off(p.default.CD_CHANGED, this.onHeroCDChanged, this);
        }
        this.hero = t;
        if (this.hero) {
          this.hero.on(p.default.CD_ON, this.onHeroCDChanged, this);
          this.hero.on(p.default.CD_OFF, this.onHeroCDChanged, this);
          this.hero.on(p.default.CD_CHANGED, this.onHeroCDChanged, this);
        }
      };
      t.prototype.onHeroCDChanged = function (t) {
        w.default.eventMgr.event(1042);
      };
      t.prototype.updatePathgate = function () {
        var t = this.getFightObjects(ht.RoleCamp.MONSTER).filter(function (t) {
          return t.hp > 0;
        });
        var e = w.default.userData.map.monsterCount <= 0 && t.length <= 0;
        if (e == this.pathgateIsOpen) return;
        for (var n in this.pathgates) {
          var o = this.pathgates[n];
          if (o) {
            o.setState(e);
          }
          this.pathgateIsOpen = e;
        }
        w.default.eventMgr.event(1010, [e]);
      };
      t.prototype.onResLoaded = function () {
        this.event(y.default.MAP_RES_LOADED);
      };
      t.prototype.seed = function (t) {
        h.default.seed(t);
        return this;
      };
      t.prototype.loadBgm = function () {
        var t = this.mapData;
        if (t["[sound]"]) {
          var e = t["[sound]"];
          for (var n = 0, o = e; n < o.length; n++) {
            var r = o[n];
            w.default.sound.loadSound(r);
          }
        }
      };
      t.prototype.playBgm = function () {
        var t;
        var e = this.mapData;
        var n =
          (t = e === null || e === void 0 ? void 0 : e["[sound]"]) !== null &&
          t !== void 0
            ? t
            : [];
        for (var o = w.default.sound.backgrounds.length - 1; o >= 0; o--) {
          var r = w.default.sound.backgrounds[o];
          if (n.indexOf(r) == -1) {
            w.default.sound.stopBgm(r);
          }
        }
        if (n) {
          for (var i = 0, a = n; i < a.length; i++) {
            var s = a[i];
            w.default.sound.playBGM(s);
          }
        }
      };
      t.prototype.stopAllSound = function (t) {
        if (t === void 0) {
          t = false;
        }
        var e = this.mapData;
        for (var n in this.updateList) {
          if (this.updateList[n] instanceof at.default) {
            w.default.sound.stopAll(this.updateList[n]);
          }
        }
        if (t) {
          for (var n in e["[sound]"]) {
            w.default.sound.stopBgm(e["[sound]"][n]);
          }
        }
      };
      t.prototype.toMap = function (t) {
        var e =
          ut.default.conf.map.map[t === null || t === void 0 ? void 0 : t.id];
        if (e) {
          this.mapLoadRes(e, !(t.pathgate >= 0));
          this.setMap(e, t.dungeonX, t.dungeonY);
          this.setMapComplete(t);
        } else {
          XOF.log("地图不存在:", t === null || t === void 0 ? void 0 : t.id);
        }
      };
      t.prototype.setHeroPos = function (t) {
        var e;
        var n;
        var o = t.heroX,
          r = t.heroY;
        if (!o) {
          var i = rt.default.getPvfMap(t.id);
          var a = void 0,
            s = void 0;
          if (t.oid) {
            var u = ut.default.conf.map.map[t.oid];
            if (u.area == 2) {
              var l = -1,
                f = 0,
                c = 0;
              switch (t.pathgate) {
                case 0:
                  l = 1;
                  f = -1;
                  break;
                case 1:
                  l = 0;
                  f = 1;
                  break;
                case 2:
                  l = 3;
                  c = -1;
                  break;
                case 3:
                  l = 2;
                  c = 1;
                  break;
              }
              if (l >= 0) {
                a = i["[pathgate pos]"][l * 2];
                s = i["[pathgate pos]"][l * 2 + 1];
                var p = void 0,
                  d = void 0;
                if (
                  (n =
                    this === null || this === void 0 ? void 0 : this.hero) ===
                    null || n === void 0
                    ? void 0
                    : n.roleData
                ) {
                  (e = this.hero.roleData.width), (p = e[0]), (d = e[1]);
                }
                for (var h = 0; h < 8; h++) {
                  if (this.testMove(a, s, p, d, false)) break;
                  a += f * ft.default.MapGridWidth;
                  s += c * ft.default.MapGridHeight;
                }
              }
            } else if (u.area == 1) {
              var v = ut.default.conf.map.map[t.id];
              if (
                v.area == 1 &&
                (i === null || i === void 0 ? void 0 : i.townMoveArea)
              ) {
                var y = i.townMoveArea;
                for (var h = 0; h < y.length; h += 6) {
                  var _ = y[h + 4];
                  var m = y[h + 5];
                  if (u.town == m && u.city == _) {
                    a = y[h] + y[h + 2] / 2;
                    s = y[h + 1] + y[h + 3] / 2;
                    break;
                  }
                }
              } else if (v.area == 2) {
                if (i["[dungeon start area]"]) {
                  var g = i["[dungeon start area]"],
                    b = g[0],
                    O = g[1],
                    p = g[2],
                    d = g[3];
                  a = b;
                  s = O;
                } else {
                  w.default.log2(2, "该地图没有起始位置" + v.id + ".");
                }
              }
            }
          }
          if (a > 0) {
            (o = a), (r = s);
          } else {
            (o = 600), (r = 250);
          }
        }
        this.hero.setPos(o, r);
        this.lastRect = this.testEvent(
          this.hero.position.x,
          this.hero.position.y
        );
      };
      t.prototype.mapLoadRes = function (t, e) {
        if (e === void 0) {
          e = false;
        }
        if (w.default.userData.setting.preload) {
          var n = w.default.userData.map;
          var o = l.default.getMapImages(t.id);
          if (n.currentScreen() == 2) {
            var r = [];
            if (n.dungeonId == E.default.Tower) {
              for (var i = 1; i < 255; i++) {
                var a = rt.default.getTowerData(n.level, i);
                if (!a) break;
                if (a.boss) r.push.apply(r, a.boss);
                if (a.special) r.push.apply(r, a.special);
                if (a.archer) r.push.apply(r, a.archer);
                if (a.soldier) r.push.apply(r, a.soldier);
              }
            } else if (
              rt.default.getDungeonTypeByDungeonId(n.dungeonId) ==
              E.DungeonType.Hell
            ) {
              for (var i = 1; i < 255; i++) {
                var a = C.default.getTowerData(n.level, i);
                if (!a) break;
                if (a.boss) r.push.apply(r, a.boss);
                if (a.special) r.push.apply(r, a.special);
                if (a.archer) r.push.apply(r, a.archer);
                if (a.soldier) r.push.apply(r, a.soldier);
              }
            } else if (n.dungeonId == E.default.TowerOfUltimate) {
              for (var i = 1; i < 255; i++) {
                var a = M.default.getTowerData(n.level, i);
                if (!a) break;
                if (a.boss) r.push.apply(r, a.boss);
                if (a.special) r.push.apply(r, a.special);
                if (a.archer) r.push.apply(r, a.archer);
                if (a.soldier) r.push.apply(r, a.soldier);
              }
            } else {
              for (var s in n.monsterList) {
                r.push(n.monsterList[s].monsterID);
              }
            }
            o.push.apply(o, l.default.getFightUIRes());
            o.push.apply(o, l.default.getSkillsImages());
            r = T.default.ArrayUnique(r);
            for (var s in r) {
              o.push.apply(o, l.default.getMonsterImages(r[s]));
            }
            if (
              rt.default.getDungeonTypeByDungeonId(n.dungeonId) ==
              E.DungeonType.Hell
            ) {
              o.push.apply(o, l.default.getHellTowerRes());
            }
          }
          if (t.area == 2 && e) {
            w.default.viewMgr.open(S.default.MapLoading, [
              t.id,
              o,
              this.onResLoaded,
              this,
            ]);
          } else {
            l.default.checkLoaded(o, true, this.onResLoaded, this);
          }
        }
      };
      t.prototype.setMap = function (t, e, n) {
        var o, r, i, a, s, u;
        this.paused = true;
        this.dungeonX = e;
        this.dungeonY = n;
        this.cameraX_ = this.cameraY_ = this.offsetY_ = 0;
        this.size(st.default.mapWidth, st.default.mapHeight);
        this.lock(undefined);
        this.cMapData = t;
        var l = (this.mapData = rt.default.getPvfMap(t.id));
        var f = rt.default.getMapAnimations(t.id);
        var c = f;
        this.background_pos = l["[background pos]"] || 80;
        this.setOffset(0, t.offsetY);
        var p =
          (r =
            (o = l.animation) === null || o === void 0 ? void 0 : o.length) !==
            null && r !== void 0
            ? r
            : 0;
        for (var d = 0; d < p; d += 5) {
          var h = l.animation[d];
          var v = l.animation[d + 1];
          var y = l.animation[d + 2];
          var _ = l.animation[d + 3];
          var m = new ot.default();
          m.name = h;
          var g = f[h.toLocaleLowerCase()];
          if (g) {
            m.setAnimation(g);
          } else {
            XOF.log("ANI数据不存在:" + h);
          }
          this.addObject(m, v, y, _);
        }
        if (l.tile) {
          var b = l.tile.length;
          for (var d = 0; d < b; d++) {
            var O = l.tile[d];
            var v = vt.layerConstValue.tile;
            var m = new it.default();
            var w = c[O.toLowerCase()];
            m.pos(d * 224, 0);
            m.setAnimation(w);
            if (w["[pass type]"]) {
              this.addTilePasstype(w, d);
            }
            this.addObject(m, v);
          }
          var A = 600 - 22;
          var E = 0;
          if (l["[extended tile]"]) {
            var T = l["[extended tile]"]["[tile files]"];
            var C = l["[extended tile]"]["[tile map]"];
            var v = vt.layerConstValue.extended_tile;
            E += 1;
            for (var d = 0, y = 0, _ = 0; d < C.length; d++, y++) {
              var P = C[d];
              var m = new it.default();
              if (y > 0 && y % b == 0) {
                y = 0;
                _ += 1;
                A += 120;
                E += 1;
              }
              m.pos(
                y * 224,
                360 +
                  _ * 120 +
                  ((a =
                    (i =
                      this === null || this === void 0
                        ? void 0
                        : this.cMapData) === null || i === void 0
                      ? void 0
                      : i.extended_tile_y) !== null && a !== void 0
                    ? a
                    : 120)
              );
              var g = c[T[P].toLowerCase()];
              if (g) {
                m.setAnimation(g);
              } else {
                console.log(c, P, T);
              }
              this.addObject(m, v);
            }
            A += 120;
          }
          if (this.isDungeon) {
            var j = 27 + (t.tile2Y ? 7 : 0) + E * 6;
            for (var d = 0; d < b; d++) {
              for (var S = 0; S < ft.default.MapTileXGridCount; S++) {
                this.grids[d * ft.default.MapTileXGridCount + S + "," + j] = 2;
              }
            }
            var M = b * ft.default.MapTileXGridCount;
            for (var _ = 0; _ < j; _++) {
              this.grids[-1 + "," + _] = 2;
              this.grids[M + "," + _] = 2;
            }
          }
          var k =
            this.cMapData.width > 0 ? this.cMapData.width : l.tile.length * 224;
          var x = this.cMapData.height > 0 ? this.cMapData.height : A;
          this.size(k, x);
          this.mapWidth = k;
          this.mapHeight = x;
          this.left =
            st.default.mapWidth > k
              ? ((st.default.mapWidth - k) / 2) * this.scaleX
              : 0;
          this.pos(this.left, this.top);
        }
        if (l.background) {
          for (var D = 0, I = l.background; D < I.length; D++) {
            var R = I[D];
            var L = R.filename;
            var v = R.layer;
            var F = R.order;
            var m = new ct.default();
            m.pos(0, 0);
            m.setAnimation(f[L.toLowerCase()]);
            if (F == vt.layerConstValue.upper) {
              m.size(this.width + st.default.mapWidth);
              v = vt.layerConstValue.upper;
            } else {
              if (v.indexOf(vt.layerConstValue.distantback) >= 0) {
                v = vt.layerConstValue.distantback;
                var B = this.mapData.farScroll || 90;
                m.size(Math.ceil(this.width * (100 / B)));
              } else {
                v = vt.layerConstValue.middleback;
                var N = this.mapData.middleScroll || 80;
                m.size(Math.ceil(this.width * (100 / N)));
              }
            }
            this.addObject(m, v);
          }
        }
        if (l["townMoveArea"]) {
          var X = l["townMoveArea"];
          for (var d = 0; d < X.length; d += 6) {
            var U = X[d + 4];
            var H = X[d + 5];
            this.addEventRect(
              lt.default.MapTo,
              undefined,
              X[d],
              X[d + 1],
              X[d + 2],
              X[d + 3],
              [U, H]
            );
            if (this.cMapData.pathgate) {
              var y = X[d] + X[d + 2] / 2;
              var _ = X[d + 1] + X[d + 3] / 2;
              for (var S = 3; S >= 1; S--) {
                var m = new ot.default();
                m.name = "animation/gateall_0" + S + ".ani";
                m.setAnimation(
                  ut.default.getAnimationData(
                    "common/etc/animation/pathgate.ani.json",
                    m.name
                  )
                );
                this.addObject(
                  m,
                  S == 1
                    ? vt.layerConstValue.normal
                    : vt.layerConstValue.bottom,
                  y,
                  _
                );
              }
            }
          }
        }
        if (l["moveArea"]) {
          var X = l["moveArea"];
          for (var d = 0; d < X.length; d += 4) {
            this.addMoveRect(undefined, X[d + 0], X[d + 1], X[d + 2], X[d + 3]);
          }
        }
        if (l.npc) {
          for (var d = 0; d < l.npc.length; d += 5) {
            var P = l.npc[d];
            var G = l.npc[d + 1];
            var y = l.npc[d + 2];
            var _ = l.npc[d + 3];
            var v = vt.layerConstValue.normal;
            var m = new at.default(P);
            m.direction = G == "[left]" ? -1 : 1;
            this.addObject(m, v);
            m.setPos(y, _, false);
          }
        }
        if (this.cMapData.type == "[dungeon line]") {
          var V = ut.default.conf.dungeon[t.city];
          var $ = void 0;
          if (l["[dungeon]"]) {
            $ = V.greeds[this.dungeonY][this.dungeonX];
          }
          this.pathgateIsOpen = true;
          if (l["[pathgate pos]"]) {
            var q = l["[pathgate pos]"];
            var K = V.pathgateObject;
            var Y = [0, 3, 6, 8];
            for (
              var d = 0, W = 0, y = void 0, _ = void 0;
              d < q.length;
              d += 2, W++
            ) {
              (y = q[d]), (_ = q[d + 1]);
              var z = void 0;
              if (rt.default.hasPathgate($, W)) {
                if (pt.default.curIsBossDungeon() || this.directionIsBoss(W)) {
                  z = this.objMgr.createPassiveObject(K[Y[W] + 1]);
                } else {
                  z = this.objMgr.createPassiveObject(K[Y[W]]);
                }
              } else if (W < 2) {
                z = this.objMgr.createPassiveObject(K[Y[W] + 2]);
                z.isWall = true;
              }
              if (z) {
                z.direction = W;
                this.addObject(z, z.layer, y, _);
                z.setState(this.pathgateIsOpen);
                this.pathgates[W] = z;
              }
            }
          }
          if (l["[monster]"]) {
            for (
              var d = 0, Q = 10;
              d < l["[monster]"].length - (Q - 1);
              d += Q
            ) {
              if (l["[monster]"][d] == "111023") {
                continue;
              }
              this.monsterPositions.push([
                parseInt(l["[monster]"][d + 3]),
                parseInt(l["[monster]"][d + 4]),
              ]);
            }
          }
        }
        if (l["[passive object]"]) {
          var q = l["[passive object]"];
          for (var d = 0; d < q.length; d += 4) {
            var P = q[d + 0];
            var y = q[d + 1];
            var _ = q[d + 2];
            q[d + 3];
            var z = this.objMgr.createPassiveObject(P);
            if (z) {
              if (!z.layer) console.log("passive id:" + P + " 没有设置layer.");
              this.addObject(z, z.layer || vt.layerConstValue.normal, y, _);
            }
          }
        }
        if (l["[special passive object]"]) {
          var q = l["[special passive object]"];
          var J = "[passive object]";
          var d = 0;
          var Z = 0;
          while (d < q.length) {
            var tt = 0;
            switch (J) {
              case "[passive object]":
                tt = 5;
                break;
              case "[hellparty]":
                tt = 8;
                break;
              case "[item]":
              case "[monster]":
              case "[trap]":
              default:
                tt = 6;
            }
            if (J == "[passive object]") {
              var P = parseInt(q[d + 0]);
              var y = parseInt(q[d + 1]);
              var _ = parseInt(q[d + 2]);
              q[d + 3];
              Z = parseInt(q[d + 4]);
              var z = this.objMgr.createPassiveObject(P);
              if (z) {
                this.addObject(z, undefined, y, _);
              }
            } else {
              var P = parseInt(q[d + 1]);
              Z--;
            }
            if (Z > 0) {
              J = q[d + tt];
            } else {
              J = "[passive object]";
            }
            d += tt;
          }
        }
        if (
          (u =
            (s = this.cMapData) === null || s === void 0
              ? void 0
              : s.wayPoint) === null || u === void 0
            ? void 0
            : u.length
        ) {
          var et = this.cMapData.wayPoint.length;
          for (var d = 0, Q = 4; d < et - (Q - 1); d += Q) {
            var y = this.cMapData.wayPoint[d];
            var _ = this.cMapData.wayPoint[d + 1];
            var nt = this.createMonster(1, y, _, undefined, undefined);
            nt.ai.clean();
          }
        }
        this.addObject(this.hero);
        this.mapStage = 0;
        this.updateStagePos();
      };
      t.prototype.setMapComplete = function (t) {
        this.setHeroPos(t);
        this.lock(this.hero);
        this.reorder(this.getLayer(vt.layerConstValue.normal));
        this.cameraToTarget(this.hero, true);
        this.hero.mapSwitch();
        this.updatePathgate();
        this.loadBgm();
        this.mapInited = true;
      };
      t.prototype.directionIsBoss = function (t) {
        var e = 0,
          n = 0;
        if (t == 0) {
          e--;
        } else if (t == 1) {
          e++;
        } else if (t == 2) {
          n--;
        } else if (t == 3) {
          n++;
        }
        return pt.default.isBossDungeon(this.dungeonX + e, this.dungeonY + n);
      };
      t.prototype.updateStagePos = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.mapData) ===
            null || t === void 0
            ? void 0
            : t["[arcade scroll area]"]
        ) {
          var e = 4;
          var n = this.mapStage * e;
          var o = this.mapData["[arcade scroll area]"].slice(n, n + e);
          this.mapMinX = o[0];
          this.mapMaxX = this.mapMinX + o[2];
          this.mapMinY = o[1];
          this.mapMaxY = this.mapMinY + o[3];
          this.removeEventRect(-1e3);
          if (this.mapData["[arcade scroll area]"].length > n + e) {
            this.addEventRect(
              lt.default.NextStage,
              -1e3,
              this.mapMaxX - 100 + 40,
              0,
              20,
              this.mapMaxY
            );
          }
        } else {
          this.mapMaxX = this.mapWidth;
          this.mapMaxY = this.mapHeight;
        }
      };
      t.prototype.initLevel = function () {
        this.bossIds = [];
        this.initMonster();
      };
      t.prototype.initMonster = function () {
        var o = this;
        var t;
        var e = w.default.userData.map;
        var n;
        var r;
        if (e.dungeonId == E.default.Tower) {
          r = rt.default.getTowerData(e.level, e.round);
          n = function (t) {
            var e = [
              [1100, 200],
              [1100, 300],
              [800, 200],
              [800, 300],
              [500, 200],
              [500, 300],
              [650, 250],
              [950, 250],
              [450, 250],
              [1250, 250],
            ];
            return e[t] || [200, 300];
          };
        } else if (
          rt.default.getDungeonTypeByDungeonId(e.dungeonId) ==
          E.DungeonType.Hell
        ) {
          r = C.default.getTowerData(e.level, e.round);
          n = function (t) {
            var e = [
              [200, 250],
              [400, 250],
              [600, 250],
              [300, 320],
              [500, 320],
              [700, 320],
              [900, 320],
              [200, 390],
              [400, 290],
              [600, 290],
              [800, 290],
              [800, 290],
            ];
            var n = e[t] || [700, 300];
            return [n[0] + o.mapMinX, n[1]];
          };
        } else if (e.dungeonId == E.default.TowerOfUltimate) {
          r = M.default.getTowerData(e.level, e.round);
          n = function (t) {
            var e = [
              [440, 260],
              [440, 200],
              [440, 320],
              [220, 260],
              [220, 200],
              [220, 320],
              [660, 260],
              [660, 200],
              [660, 320],
            ];
            var n = e[t] || [440, 260];
            return [n[0] + o.mapMinX, n[1]];
          };
        } else {
          n = function (t) {
            var e = o.monsterPositions;
            var n = e[t] || e[0] || [700, 300];
            return [n[0] + o.mapMinX, n[1]];
          };
          var i = rt.default.getMapType(this.mapId);
          if (i == E.DungeonType.Line) {
            r = rt.default.getDungeonLineMapBy(e.level, e.round);
          } else {
            console.log("异常的地图:", this.mapId);
          }
        }
        if (!r) {
          console.log("不存在的副本信息");
          return;
        }
        var a =
          (t = r === null || r === void 0 ? void 0 : r.grade) !== null &&
          t !== void 0
            ? t
            : 1;
        var s = 0;
        for (var u in e.monsterList) {
          var l = e.monsterList[u];
          var f = n(s);
          if (l.class == g.default.BOSS) {
            if (
              rt.default.getDungeonTypeByDungeonId(e.dungeonId) ==
              E.DungeonType.Hell
            ) {
              var c = this.getHellObject();
              f[0] = c.position.x;
              f[1] = c.position.y;
            }
          } else {
            if (e.dungeonId == 96002e3 || e.dungeonId == 96004e3) {
              if (l.monsterID == 111023) {
                f[0] = 870;
                f[1] = 109;
              }
            }
          }
          var p = this.createMonster(
            l.monsterID,
            f[0],
            f[1],
            l.class,
            l.monsterRealID
          );
          p.setLevel(a);
          if (r.attrs) {
            p.attribute.attach(new A.default(r.attrs));
          }
          if (l.class == g.default.SPECIAL && r.specialAttrs) {
            p.attribute.attach(new A.default(r.specialAttrs));
          }
          if (l.class == g.default.BOSS && r.bossAttrs) {
            p.attribute.attach(new A.default(r.bossAttrs));
          }
          p.hp = p.maxHp = p.attribute.hp;
          s++;
        }
      };
      t.prototype.size = function (t, e) {
        for (var n = 0, o = this.children_; n < o.length; n++) {
          var r = o[n];
          r.size(t, e);
        }
        return _.prototype.size.call(this, t, e);
      };
      t.prototype.onDataUpdate = function (t) {
        if (t === void 0) {
          t = 0;
        }
        if (this.paused) return;
        var e = this.updateList.length;
        for (var n = 0, o = void 0; n < e; n++) {
          o = this.updateList[n];
          if (!o.onDataUpdate) {
            continue;
          }
          o.onDataUpdate(t);
        }
      };
      t.prototype.update = function (t) {
        var e = t * this.timeScale;
        if (this.paused) return;
        this.ms.update(e);
      };
      t.prototype.onUpdateAnimationFrame = function (t) {
        if (t < this.lowFrame) {
          this.lowFrame = t;
        }
      };
      t.prototype.onAttackBox = function () {
        this.$hitCount++;
      };
      t.prototype.onHellDamage = function (t) {
        if (
          rt.default.getDungeonTypeByDungeonId(
            w.default.userData.map.dungeonId
          ) == E.DungeonType.Hell
        ) {
          if (w.default.userData.map.round > 0) {
            if (t == 1) {
              w.default.userData.map.nextRound();
            } else if (t >= 4) {
              w.default.eventMgr.event(1030);
              w.default.userData.map.hellDeath();
            }
          }
        }
      };
      t.prototype.onHellChanged = function () {
        if (
          rt.default.getDungeonTypeByDungeonId(
            w.default.userData.map.dungeonId
          ) == E.DungeonType.Hell
        ) {
          var t = this.getHellObject();
          w.default.timerMgr.delay(500, 1, function () {
            if (t) {
              t.event("drop");
            }
          });
        }
      };
      t.prototype.getHellObject = function () {
        for (var t in this.updateList) {
          var e = this.updateList[t];
          if (e instanceof P.default) {
            if (e.id == 109054514) {
              return e;
            }
          }
        }
      };
      t.prototype.lockUpdate = function (t) {
        var e = t;
        if (e >= this.lowFrame) {
          e = this.lowFrame;
          this.lowFrame = Number.MAX_VALUE;
        }
        t -= e;
        this.dt = e;
        {
          this.sk.onUpdate(e);
          this.updateTween(e);
          while (this.onstarts.length) {
            this.onstarts.shift().onStart();
          }
          var n = this.updateList;
          for (var o = 0, r = void 0; o < n.length; o++) {
            r = n[o];
            r.update(e);
          }
          if (this.$hitCount > 0 || st.default.debug2) {
            var i = this.hitTest.update(e);
            if (i == false) {
              this.$hitCount = 0;
            }
          }
          this.eventLogic();
        }
        this.reorder(this.getLayer(vt.layerConstValue.normal));
        if (this.cameraCount > 0) this.cameraToTarget(this.target, false);
        if (t > 0) {
          this.lockUpdate(t);
        }
      };
      t.prototype.eventLogic = function () {
        var t, e, n;
        if (this.hero) {
          e = this.hero.position.x;
          n = this.hero.position.y;
          t = this.testEvent(e, n);
        }
        if (t >= -1 && t != this.lastRect) {
          var o = this.eventAreaBox[t + 4];
          var r = this.eventAreaBox[t + 5];
          switch (o) {
            case lt.default.Log:
              {
                XOF.log.apply(XOF, r);
              }
              break;
            case lt.default.MapTo:
              {
                var i = r[0],
                  a = r[1];
                if (i == -1 || a == -1) {
                  var s = void 0;
                  if (this.cMapData.type == "[dungeon gate]") {
                    s = this.cMapData.dungeonId;
                  }
                  if (s) {
                    w.default.eventMgr.event(1065);
                    w.default.viewMgr.open(S.default.DungeonSelect, [s]);
                  } else {
                    XOF.log("不存在的副本");
                  }
                } else {
                  var u = rt.default.getMapByCityandTown(i, a);
                  if (u) {
                    if (u.open) {
                      var l = rt.default.getTownMovePos(this.cMapData.id, u.id),
                        f = l[0],
                        c = l[1];
                      w.default.userData.map.enterMap(
                        u.id,
                        f,
                        c,
                        this.hero.direction
                      );
                    } else {
                      w.default.eventMgr.event(1061, [110008]);
                    }
                  } else {
                    w.default.eventMgr.event(1061, [110008]);
                    XOF.log("不存在的地区", i, a);
                  }
                }
              }
              break;
            case lt.default.DungeonTo:
              {
                if (
                  this.pathgateIsOpen ? !pt.default.curIsBossDungeon() : false
                ) {
                  var p = r[0];
                  w.default.userData.map.pathgateTo(p);
                }
              }
              break;
            case lt.default.NextStage:
              {
                if (w.default.userData.map.monsterCount <= 0) {
                  this.mapStage += 1;
                  this.updateStagePos();
                }
              }
              break;
            default:
              XOF.log("无法识别的事件", o);
          }
        }
        this.lastRect = t;
        this.lastX = e;
        this.lastY = n;
      };
      t.prototype.isBoss = function (t) {
        if (this.bossIds) {
          for (var e in this.bossIds) {
            if (this.bossIds[e] == t) {
              return true;
            }
          }
        }
        return false;
      };
      t.prototype.testEvent = function (t, e, n, o) {
        if (this.eventAreaBox) {
          var r = this.eventAreaBox;
          for (var i = 0; i < r.length; i += 7) {
            if (n > 0) {
              if (
                T.default.testRect(
                  t - n / 2,
                  e - o / 2,
                  n,
                  o,
                  r[i],
                  r[i + 1],
                  r[i + 2],
                  r[i + 3]
                )
              ) {
                return i;
              }
            } else if (
              T.default.pointHitRect(t, e, r[i], r[i + 1], r[i + 2], r[i + 3])
            ) {
              return i;
            }
          }
        }
        return -15;
      };
      t.prototype.render = function (t) {
        _.prototype.render.call(this, t);
        if (!st.default.debug2) return;
        t.pushStyle();
        var e = this.scaleX;
        var n = this.scaleY;
        var o = -this.cameraX_;
        var r = -this.cameraY_ + this.offsetY_ + this.background_pos;
        if (this.moveAreaBox) {
          var i = this.moveAreaBox;
          for (var a = 0; a < i.length; a += 6) {
            var s = i[a] + o;
            var u = i[a + 1] + r;
            if (i[a + 4]) {
              t.$.strokeStyle = "#ffff00";
            } else {
              t.$.strokeStyle = "#ff0000";
            }
            t.$.fillText(
              i[a + 5] + "",
              s * e + this.left + 5,
              u * n + this.top + 5
            );
            t.rect(
              s * e + this.left,
              u * n + this.top,
              i[a + 2] * e,
              i[a + 3] * n,
              "stroke"
            );
          }
        }
        if (this.grids) {
          t.$.strokeStyle = "#ffffff";
          for (var l in this.grids) {
            var f = this.grids[l];
            if (f == 2) {
              var c = l.split(","),
                p = c[0],
                d = c[1];
              var s = parseInt(p) * ft.default.MapGridWidth + o;
              var u =
                parseInt(d) * ft.default.MapGridHeight +
                r -
                this.background_pos;
              t.rect(
                s * e + this.left,
                u * n + this.top,
                ft.default.MapGridWidth * e,
                ft.default.MapGridHeight * n,
                "stroke"
              );
            }
          }
        }
        if (this.hero) {
          t.$.fillStyle = "#0000ff";
          t.$.globalAlpha = 0.6;
          var h = 40;
          var v = 10;
          var s = this.hero.x + o + -h / 2;
          var u = this.hero.position.y + r + -v / 2;
          t.rect(s * e + this.left, u * n + this.top, h * e, v * n, "fill");
        }
        for (var l in this.updateList) {
          if (this.updateList[l] instanceof m.default) {
            var y = this.updateList[l];
            t.$.fillStyle = "#ffff00";
            t.$.globalAlpha = 0.6;
            var h = 40;
            var v = 10;
            var s = y.x + o + -h / 2;
            var u = y.position.y + r + -v / 2;
            t.rect(s * e + this.left, u * n + this.top, h * e, v * n, "fill");
          }
        }
        if (this.eventAreaBox) {
          var i = this.eventAreaBox;
          t.$.fillStyle = "#0000ff";
          t.$.globalAlpha = 0.4;
          for (var a = 0; a < i.length; a += 7) {
            var s = i[a] + o;
            var u = i[a + 1] + r;
            t.rect(
              s * e + this.left,
              u * n + this.top,
              i[a + 2] * e,
              i[a + 3] * n,
              "fill"
            );
          }
        }
        t.popStyle();
        if (this.isDungeon);
        this.hitTest.draw(t);
      };
      t.prototype.setOffset = function (t, e) {
        this.offsetY_ = e || 0;
        for (var n = 0, o = this.children_; n < o.length; n++) {
          var r = o[n];
          if (
            [
              vt.layerConstValue.distantback,
              vt.layerConstValue.middleback,
              vt.layerConstValue.tile,
              ,
              vt.layerConstValue.upper,
            ].indexOf(r.name) >= 0
          )
            continue;
          r.y = this.offsetY_;
        }
      };
      t.prototype.setCamera = function (t, e) {
        var n = this;
        var o =
          (t == undefined ? false : this.cameraX_ != t) ||
          (e == undefined ? false : this.cameraY_ != e);
        this.cameraX_ = t == undefined ? this.cameraX_ : t;
        this.cameraY_ = e || this.cameraY_;
        if (this.cameraX_ < this.mapMinX) {
          this.cameraX_ = this.mapMinX;
        }
        var r = this.mapMaxX - Math.min(this.width, st.default.mapWidth);
        if (this.cameraX_ > r) {
          this.cameraX_ = r;
        }
        this.pos(
          Math.floor(-this.cameraX_ * this.scaleX) + this.left,
          this.top +
            Math.floor((-this.cameraY_ + this.background_pos) * this.scaleY)
        );
        if (this.mapData) {
          var i = this.mapData.farScroll || 90;
          var a = this.mapData.middleScroll || 80;
          var s = this.mapData.nearScroll || 100;
          [
            vt.layerConstValue.distantback,
            vt.layerConstValue.middleback,
            vt.layerConstValue.distantback2,
            vt.layerConstValue.middleback2,
            vt.layerConstValue.close,
          ].forEach(function (t) {
            var e = n.getLayer(t);
            if (
              t == vt.layerConstValue.distantback ||
              t == vt.layerConstValue.distantback2
            ) {
              e.pos((n.cameraX_ * (100 - i)) / 100);
            } else if (
              t == vt.layerConstValue.middleback ||
              t == vt.layerConstValue.middleback2
            ) {
              e.pos((n.cameraX_ * (100 - a)) / 100);
            } else if (t == vt.layerConstValue.close) {
              e.pos((n.cameraX_ * (100 - s)) / 100);
            }
          });
        }
        if (o) {
          w.default.eventMgr.event(1002);
        }
      };
      t.prototype.clean = function () {
        for (var t = 0, e = this.children_; t < e.length; t++) {
          var n = e[t];
          while (n.numChild) {
            this.removeObject(n.getChildAt(0));
          }
        }
        this.setMyControler(undefined);
        this.ms.clean();
        this.hitTest.clean();
        this.monsterPositions =
          this.ms =
          this.hitTest =
          this.initHashCodes =
          this.values =
          this.hero =
          this.bossIds =
          this.target =
          this.cMapData =
          this.mapData =
          this.updateList =
          this.eventAreaBox =
          this.moveAreaBox =
          this.pathgates =
          this.grids =
            undefined;
      };
      t.prototype.getLayer = function (t) {
        var e = this.getChildAt(vt.layerConst.indexOf(t));
        return e;
      };
      t.prototype.reorder = function (n) {
        n.children_
          .concat()
          .sort(function (t, e) {
            return t.order == e.order
              ? t.position.y == e.position.y
                ? t.hashCode - e.hashCode
                : t.position.y - e.position.y
              : t.order - e.order;
          })
          .forEach(function (t, e) {
            return n.setChildIndex(t, e);
          });
      };
      t.prototype.createPassiveObject = function (t, e, n, o, r, i) {
        var a = this.objMgr.createPassiveObject(t);
        if (a.position) {
          a.position.setX(e);
          a.position.setY(n);
        }
        if (i) a.initData.apply(a, i);
        if (o) {
          if (a.position.setZ) {
            a.position.setZ(o);
          } else {
            XOF.log("该对象不存在Z轴.");
          }
        }
        this.addObject(a, r || a.layer);
        return a;
      };
      t.prototype.addObject = function (t, e, n, o, r) {
        e = e || vt.layerConstValue.normal;
        if (!this.contains(t)) {
          if (t.hashCode && !this.mapInited) {
            this.initHashCodes[t.hashCode] = 1;
          }
          var i = this.mapObjectId;
          if (r === null || r === void 0 ? void 0 : r.realyId) {
            i = r.realyId;
          }
          t[vt.MAP_ETC_VALUE.MapObjectId] = i + "";
          this.mapObjectId += 1;
          this.updateList.push(t);
          if (t.onStart && this.onstarts.indexOf(t) == -1) {
            this.onstarts.push(t);
          }
        }
        if (e && vt.layerConst.indexOf(e) >= 0) {
          var a = this.getChildAt(vt.layerConst.indexOf(e));
          t.setMap(this);
          a.addChild(t);
          if (t.fu) this.hitTest.addObject(t);
          if (n != undefined) t.position.set(n, o);
          this.updatePathgate();
        } else {
          XOF.log("不存在的层级", e);
        }
      };
      t.prototype.removeObject = function (t) {
        if (this.contains(t)) {
          var e = this.updateList.indexOf(t);
          if (e >= 0) this.updateList.splice(e, 1);
          t.removeSelf();
          t.setMap(undefined);
          if (t == this.target && this.target != undefined)
            this.lock(undefined);
          this.hitTest.removeObject(t);
          var n = this.onstarts.indexOf(t);
          if (n >= 0) {
            this.onstarts.splice(n, 1);
          }
          if (t.onRemove) {
            t.onRemove();
          }
          delete t[vt.MAP_ETC_VALUE.MapObjectId];
          this.updatePathgate();
          j.default.push(t);
          return true;
        }
        return false;
      };
      t.prototype.getObjectId = function (t) {
        if (this.contains(t)) {
          return t[vt.MAP_ETC_VALUE.MapObjectId];
        }
      };
      t.prototype.getObjectById = function (t) {
        var e = this;
        for (var n = 0, o = e.children_; n < o.length; n++) {
          var r = o[n];
          for (var i = 0, a = r.children_; i < a.length; i++) {
            var s = a[i];
            if (s[vt.MAP_ETC_VALUE.MapObjectId] == t) {
              return s;
            }
          }
        }
        return;
      };
      t.prototype.hasMonster = function (t) {
        var e = this.hitTest.fighters;
        for (var n = 0, o = e; n < o.length; n++) {
          var r = o[n];
          if (r.fu.camp == ht.RoleCamp.MONSTER) {
            if (t ? true : r.isDeath == t) {
              return true;
            }
          }
        }
        return false;
      };
      t.prototype.hasBoss = function () {
        var t = this.getFightObjects(ht.RoleCamp.MONSTER, true);
        var e = t.length;
        for (var n = e - 1; n >= 0; n--) {
          var o = t[n];
          if (o.isDeath !== true && o.monsterClass == g.default.BOSS) {
            return true;
          }
        }
        return false;
      };
      t.prototype.isRole = function (t) {
        if (t instanceof s.default) {
          return true;
        }
        if (t instanceof m.default) {
          return true;
        }
        return false;
      };
      t.prototype.getFightObjects = function (e, n) {
        var o = this;
        if (n === void 0) {
          n = false;
        }
        var t = this.hitTest.fighters;
        t = t.filter(function (t) {
          return t.fu.camp == e && (n ? o.isRole(t) : true);
        });
        return t;
      };
      t.prototype.addTilePasstype = function (t, e, n) {
        if (t) {
          var o = t["[pass type]"];
          var r = n >= 0;
          if (n == 1) {
            e = this.mapData.tile.length - 1;
          }
          for (var i = 0, a = 0, s = r ? 1 : 2; i < o.length; i++, a++) {
            var u = o[i];
            if (a >= ft.default.MapTileXGridCount) {
              a = 0;
              s += 1;
            }
            var l = this.grids[e * ft.default.MapTileXGridCount + a + "," + s];
            if (l != 2)
              this.grids[e * ft.default.MapTileXGridCount + a + "," + s] = u;
          }
        }
      };
      t.prototype.addTileEventRect = function (t, e, n, o, r, i, a, s) {
        var u = 0,
          l = 0,
          f = 0;
        if (s != undefined) {
          if (s == 1) {
            u = this.mapData.tile.length - 1;
          }
          l = u * ft.default.MapGridWidth * ft.default.MapTileXGridCount;
        }
        this.addEventRect(
          t,
          e,
          l + n * ft.default.MapGridWidth,
          f + o * ft.default.MapGridHeight,
          r,
          i,
          a
        );
        return e;
      };
      t.prototype.addMoveRect = function (t, e, n, o, r, i) {
        if (i === void 0) {
          i = true;
        }
        if (t == undefined) t = XOF.hashCode();
        if (i) {
          this.moveAreaBox.unshift(e, n, o, r, i, t);
        } else {
          this.moveAreaBox.push(e, n, o, r, i, t);
        }
        return t;
      };
      t.prototype.removeMoveRect = function (t) {
        for (var e = 0; e <= this.moveAreaBox.length; e += 6) {
          var n = this.moveAreaBox[e + 5];
          if (n == t) {
            this.moveAreaBox.splice(e, 6);
            break;
          }
        }
      };
      t.prototype.addEventRect = function (t, e, n, o, r, i, a) {
        if (e == undefined) e = XOF.hashCode();
        this.eventAreaBox.push(n, o, r, i, t, a, e);
        return e;
      };
      t.prototype.removeEventRect = function (t) {
        for (var e = 0; e <= this.eventAreaBox.length; e += 7) {
          var n = this.eventAreaBox[e + 6];
          if (n == t) {
            this.eventAreaBox.splice(e, 7);
            break;
          }
        }
      };
      t.prototype.lock = function (t) {
        if (this.target)
          this.target.off(XOF.Event.MOVE, this.wantCameraTo, this);
        this.target = t;
        if (this.target) {
          this.target.on(XOF.Event.MOVE, this.wantCameraTo, this);
          this.wantCameraTo();
        }
      };
      t.prototype.wantCameraTo = function () {
        this.cameraCount += 1;
      };
      t.prototype.cameraToTarget = function (t, e) {
        var n, o, r;
        if (t) {
          var i = t.position.x,
            a = t.position.y + this.background_pos;
          var s = this.width,
            u = this.height;
          var l = st.default.mapWidth,
            f = st.default.mapHeight;
          var c = void 0,
            p = 0;
          if (e) {
            (n = T.default.getScenePos(i, a, s, u, l, f)),
              (c = n[0]),
              (p = n[1]);
          } else {
            var d = 50,
              h = 30;
            var v = i - this.cameraX_;
            var y = a - this.cameraY_;
            if (v < l / 2 - d) {
              c = T.default.getScenePos(i + d, a, s, u, l, f)[0];
            } else if (v > l / 2 + d) {
              c = T.default.getScenePos(i - d, a, s, u, l, f)[0];
            }
            if (y < f / 2 - h) {
              (o = T.default.getScenePos(i, a + h, s, u, l, f)), (p = o[1]);
            } else if (y >= f / 2 + h) {
              (r = T.default.getScenePos(i, a - h, s, u, l, f)), (p = r[1]);
            }
          }
          this.setCamera(c != undefined ? -c : undefined, -p);
        }
        this.cameraCount = 0;
      };
      t.prototype.getMonstersById = function (t) {
        var e, n;
        var o =
          (n =
            (e = ut.default.conf.monsterDefine) === null || e === void 0
              ? void 0
              : e[t]) === null || n === void 0
            ? void 0
            : n.mob;
        return this.getFightObjects(ht.RoleCamp.MONSTER).filter(function (t) {
          return t.roleData.id == o;
        });
      };
      t.prototype.createMonster = function (t, e, n, o, r) {
        if (o === void 0) {
          o = "[normal]";
        }
        var i = this.objMgr.createMonster(t);
        i.monsterId = t;
        i.monsterClass = o;
        this.addObject(i, undefined, e, n, { realyId: r });
        if (o == g.default.BOSS) {
          var a = new b.default(
            ut.default.getAnimationData(
              "common/etc/animation/aura/bossauramaster.ani.json"
            )
          );
          a.setFollowObject(i);
          a.deathDestroy = true;
          this.addObject(a, vt.layerConstValue.bottom);
          var s = this.getObjectId(i);
          if (s) {
            this.bossIds.push(s);
          } else {
            w.default.log2(2, "领主怪物初始化异常");
          }
        } else if (o.indexOf(g.default.SPECIAL) >= 0);
        return i;
      };
      t.prototype.getGrid = function (t, e) {
        var n;
        var o = Math.floor(t / ft.default.MapGridWidth);
        var r = Math.floor(
          (e + this.background_pos) / ft.default.MapGridHeight
        );
        return (n = this.grids) === null || n === void 0
          ? void 0
          : n[o + "," + r];
      };
      t.prototype.isNoMoveRect = function (t, e, n, o) {
        var r;
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 0;
        }
        if (
          (r = this === null || this === void 0 ? void 0 : this.moveAreaBox) ===
            null || r === void 0
            ? void 0
            : r.length
        ) {
          var i = this.moveAreaBox;
          for (var a = 0; a < i.length; a += 6) {
            if (i[a + 4]) break;
            var s = i[a],
              u = i[a + 1],
              l = i[a + 2],
              f = i[a + 3];
            if (
              n > 0
                ? T.default.testRect(t - n / 2, e - o / 2, n, o, s, u, l, f)
                : T.default.pointHitRect(t, e, s, u, l, f)
            ) {
              return true;
            }
          }
        }
        return false;
      };
      t.prototype.isInMoveRect = function (t, e, n, o) {
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 0;
        }
        var r = this.moveAreaBox;
        var i = t - n / 2,
          a = e - o / 2;
        for (var s = 6, u = r.length - s, l = 0; u >= 0; u -= s) {
          if (r[u + 4] == false) break;
          var f = r[u],
            c = r[u + 1],
            p = r[u + 2],
            d = r[u + 3];
          if (n > 0) {
            if (T.default.pointHitRect(t, e, f, c, p, d)) l = l | 1;
            if (T.default.pointHitRect(i, a, f, c, p, d)) l = l | 2;
            if (T.default.pointHitRect(i + n, a + o, f, c, p, d)) l = l | 4;
            if (T.default.pointHitRect(i + n, a, f, c, p, d)) l = l | 8;
            if (T.default.pointHitRect(i, a + o, f, c, p, d)) l = l | 16;
            if (
              (l | 1) == l &&
              (l | 2) == l &&
              (l | 4) == l &&
              (l | 8) == l &&
              (l | 16) == l
            )
              return true;
          } else {
            if (T.default.pointHitRect(t, e, f, c, p, d)) {
              return true;
            }
          }
        }
        return false;
      };
      t.prototype.moveObject = function (t, e, n, o, r) {
        var i;
        var a;
        if (o === void 0) {
          o = true;
        }
        if (r === void 0) {
          r = true;
        }
        if (!this.paused) {
          var s = o ? this.dt / 1e3 : 1;
          var u = new Big(e).times(s).toNumber();
          var l = new Big(n).times(s).toNumber();
          var f = void 0,
            c = void 0,
            p = 0,
            d = 0,
            h = 0,
            v = 0,
            y = t.position.x,
            _ = t.position.y,
            m = y + u,
            g = _ + l;
          var b = this.isDungeon;
          f = c = b;
          if (
            (a = t === null || t === void 0 ? void 0 : t.roleData) === null ||
            a === void 0
              ? void 0
              : a.width
          ) {
            (i = t.roleData.width), (p = i[0]), (d = i[1]);
            h = p / 2;
            v = d / 2;
          }
          var O = p > 0;
          if (r) {
            if (this.isNoMoveRect(m, _, p, d)) {
              f = false;
            }
            if (this.isNoMoveRect(y, g, p, d)) {
              c = false;
            }
            if (b) {
              if (m < this.mapMinX + 20) {
                f = false;
              }
              if (m > this.mapMaxX - 20) {
                f = false;
              }
              if (u != 0) {
                var w = u > 0 ? 1 : -1;
                if (O) {
                  var A = Math.ceil(d / ft.default.MapGridHeight);
                  for (var E = 0; E <= A; E++) {
                    if (
                      this.getGrid(
                        m + (p / 2) * w,
                        _ + -v + Math.min(d, E * ft.default.MapGridHeight)
                      ) == 2
                    ) {
                      f = false;
                      break;
                    }
                  }
                } else if (this.getGrid(m, _) == 2) {
                  f = false;
                }
              }
              if (l != 0) {
                var w = l > 0 ? 1 : -1;
                if (O) {
                  var A = Math.ceil(p / ft.default.MapGridWidth);
                  for (var E = 0; E <= A; E++) {
                    if (
                      this.getGrid(
                        y + -h + Math.min(p, E * ft.default.MapGridWidth),
                        g + (d / 2) * w
                      ) == 2
                    ) {
                      c = false;
                      break;
                    }
                  }
                } else if (this.getGrid(y, g) == 2) {
                  c = false;
                }
              }
            } else {
              if (this.isInMoveRect(m, _, 0, 0)) {
                f = true;
              }
              if (this.isInMoveRect(y, g, 0, 0)) {
                c = true;
              }
            }
          }
          if (f && c) {
            t.position.add(u, l);
          } else if (f) {
            t.position.addX(u);
          } else if (c) {
            t.position.addY(l);
          }
        }
      };
      t.prototype.testMove = function (t, e, n, o, r) {
        if (n === void 0) {
          n = 0;
        }
        if (o === void 0) {
          o = 0;
        }
        if (r === void 0) {
          r = true;
        }
        if (r && this.testEvent(t, e, n, o) >= -1) {
          return true;
        }
        var i = this.moveAreaBox;
        var a = n > 0 && o > 0;
        var s = this.isDungeon;
        var u = t,
          l = e,
          f = n / 2,
          c = o / 2;
        if (a) {
          u = t - f;
          l = e - c;
        }
        for (var p = 0; p < i.length; p += 6) {
          var d = i[p],
            h = i[p + 1],
            v = i[p + 2],
            y = i[p + 3],
            _ = i[p + 4];
          if (_) break;
          else if (T.default.testRect(u, l, n, o, d, h, v, y)) return false;
        }
        if (s) {
          if (!T.default.isVoidObject(this.grids)) {
            if (a) {
              var m = Math.ceil(o / ft.default.MapGridHeight);
              var g = Math.ceil(n / ft.default.MapTileXGridCount);
              for (var b = 0; b < m; b++) {
                for (var O = 0; O < g; O++) {
                  if (
                    this.getGrid(
                      u + Math.min(n, O * ft.default.MapGridWidth),
                      l + Math.min(o, b * ft.default.MapGridHeight)
                    ) == 2
                  ) {
                    return false;
                  }
                }
              }
            } else if (this.getGrid(t, e) == 2) {
              return false;
            }
          }
          return true;
        } else {
          for (var w = 6, A = i.length - w, E = 0; A >= 0; A -= w) {
            if (i[A + 4] == false) break;
            var d = i[A],
              h = i[A + 1],
              v = i[A + 2],
              y = i[A + 3];
            if (T.default.pointHitRect(t, e, d, h, v, y)) E = E | 1;
            if (T.default.pointHitRect(u, l, d, h, v, y)) E = E | 2;
            if (T.default.pointHitRect(u + n, l + o, d, h, v, y)) E = E | 4;
            if (T.default.pointHitRect(u + n, l, d, h, v, y)) E = E | 8;
            if (T.default.pointHitRect(u, l + o, d, h, v, y)) E = E | 16;
            if (
              (E | 1) == E &&
              (E | 2) == E &&
              (E | 4) == E &&
              (E | 8) == E &&
              (E | 16) == E
            )
              return true;
          }
        }
        return false;
      };
      t.prototype.getDistance = function (t, e, n, o) {
        if (n === void 0) {
          n = true;
        }
        if (o === void 0) {
          o = false;
        }
        e = e || this.hero;
        var r = 0;
        if (n) r += Math.abs(t.x - e.x);
        if (o) r += Math.abs(t.y - e.y);
        return r;
      };
      t.prototype.tween = function (t) {
        var e = d.default.get(t);
        d.default.removeTweenFromList(e);
        this.pushTween(e);
        return e;
      };
      t.prototype.pushTween = function (t) {
        if (this.tweens.indexOf(t) >= 0) {
          return;
        }
        this.tweens.push(t);
      };
      t.prototype.updateTween = function (t) {
        var e = this.tweens;
        for (var n = 0, o = e; n < o.length; n++) {
          var r = o[n];
          r.$update(t);
        }
      };
      t.prototype.removeTween = function (t) {
        if (t) {
          var e = this.tweens.indexOf(t);
          if (e >= 0) this.tweens.splice(e, 1);
          t === null || t === void 0 ? void 0 : t.clean();
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = _;
  });
  t(nl);
  var ol = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var U = n(dt);
    var o = n(s);
    var H = n(F);
    var G = n(k);
    var V = n(at);
    var $ = n(st);
    var q = n(je);
    var K = n($e);
    var r = (function () {
      function t() {}
      t.update = function (t, e) {
        var n, o, r, i, a;
        this.unAtteach(t);
        var s = [];
        var u = [];
        for (var l in e.equipCollect) {
          var f = e.equipCollect[l];
          var c =
            (o =
              (n = U.default.conf.collect.equipCollect) === null || n === void 0
                ? void 0
                : n[f]) === null || o === void 0
              ? void 0
              : o.attr;
          if (c) {
            this.addAttribute(t, c);
          }
        }
        for (var l in e.skinCollect) {
          var f = e.skinCollect[l];
          var c =
            (i =
              (r = U.default.conf.collect.skinCollect) === null || r === void 0
                ? void 0
                : r[f]) === null || i === void 0
              ? void 0
              : i.attr;
          if (c) {
            this.addAttribute(t, c);
          }
        }
        var p = {};
        for (var d in e.equipments) {
          var h = e.equipments[d];
          var v = h.itemID;
          if (v) {
            var y = $.default.getItemData(v);
            var _ =
              (a = y === null || y === void 0 ? void 0 : y.level) !== null &&
              a !== void 0
                ? a
                : 1;
            s.push(v);
            if (y.buff) {
              for (var m = 0, g = y.buff; m < g.length; m++) {
                var b = g[m];
                u.push(b);
              }
            }
            var O = this.addAttributeFinal(t);
            if (h.durability <= 0) {
              if (y.class == V.default.TITLE);
              else {
                continue;
              }
            }
            if (h === null || h === void 0 ? void 0 : h.leftBadge) {
              var c = G.default.copy($.default.getItemData(h.leftBadge).attr);
              O.attach(new H.default(c));
            }
            if (h === null || h === void 0 ? void 0 : h.rightBadge) {
              var c = G.default.copy($.default.getItemData(h.rightBadge).attr);
              O.attach(new H.default(c));
            }
            if (y.suit) {
              if (!p[y.suit]) p[y.suit] = 0;
              p[y.suit] += 1;
            }
            if (y.attr || y.grow > 0) {
              var w = y.class == V.default.TITLE;
              var c = G.default.copy(y.attr);
              if (y.grow) {
                c = G.default.kvMarge(
                  y.attr,
                  q.default.getGrowWeaponAttribute(y.id, e.lv)
                );
              }
              q.default.getRankAttribute(c, w ? 1 : h.rank);
              O.attach(new H.default(c));
            }
            var A =
              y.grow > 0
                ? Math.min(Math.max(Math.floor(e.lv / 5) * 5, _), y.grow)
                : _;
            if (h.intensifyLevel > 0) {
              var c = q.default.getIntensifyLevelAttribute(
                h.intensifyLevel,
                y.class,
                A
              );
              O.attach(new H.default(c));
            }
            if (h.growthLevel > 0) {
              var c = q.default.getGrowthLevelAttribute(
                h.growthLevel,
                y.class,
                A
              );
              O.attach(new H.default(c));
            }
          }
        }
        for (var d in e.skin) {
          var f = e.skin[d];
          if (f > 0) {
            var y = $.default.getItemData(f);
            if (y.suit) {
              if (!p[y.suit]) p[y.suit] = 0;
              p[y.suit] += 1;
            }
            if (y.attr) {
              var c = y.attr;
              this.addAttribute(t, c);
            }
          }
        }
        for (var l in p) {
          var E = parseInt(l);
          var T = p[E];
          var C = U.default.conf.suit[E];
          for (var P = 2; P <= 8; P++) {
            if (T >= P) {
              if (C["attr" + P]) {
                this.addAttribute(t, C["attr" + P]);
              }
            }
            if (C["buff" + P]) {
              for (var j = 0, S = C["buff" + P]; j < S.length; j++) {
                var b = S[j];
                if (T >= P) {
                  u.push(b);
                }
              }
            }
          }
        }
        for (var l in e.skills) {
          var M = K.default.getSkillLevelAttribute(l, e.skills[l]);
          if (G.default.isVoidObject(M)) continue;
          this.addAttribute(t, M);
        }
        {
          var k = this.initHero(t);
          for (var x = 0, D = k.buffs; x < D.length; x++) {
            var b = D[x];
            if (u.indexOf(b) == -1) {
              t.buffAttribute.rm(b);
            }
          }
          for (var I = 0, R = k.items; I < R.length; I++) {
            var L = R[I];
            if (s.indexOf(L) == -1) {
              t.special.unApply(L);
            }
          }
          for (var F = 0, B = u; F < B.length; F++) {
            var b = B[F];
            t.buffAttribute.add(b);
            if (t.buffAttribute.has(b)) continue;
          }
          for (var N = 0, X = s; N < X.length; N++) {
            var L = X[N];
            if (t.special.has(L)) continue;
            t.special.apply(L);
          }
          k.buffs = u;
          k.items = s;
        }
      };
      t.initHero = function (t) {
        var e = this.attributes[t.hashCode];
        if (!e) {
          e = { attrs: [], items: [], buffs: [], equipCopy: {} };
          this.attributes[t.hashCode] = e;
        }
        return e;
      };
      t.addAttributeFinal = function (t) {
        var e = this.initHero(t);
        var n = new o.default({});
        t.attribute.attach(n);
        e.attrs.push(n);
        return n;
      };
      t.addAttribute = function (t, e) {
        var n = this.initHero(t);
        var o = new H.default(e);
        t.attribute.attach(o);
        n.attrs.push(o);
        return o;
      };
      t.unAtteach = function (t) {
        var e;
        if (t) {
          t.special.unApplyAll();
          var n = this.attributes[t.hashCode];
          while (
            (e = n === null || n === void 0 ? void 0 : n.attrs) === null ||
            e === void 0
              ? void 0
              : e.length
          ) {
            var o = n.attrs.pop();
            t.attribute.unattach(o);
          }
        }
      };
      t.attributes = {};
      return t;
    })();
    e.default = r;
  });
  t(ol);
  var rl = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(q);
    var r = (function () {
      function t() {}
      t.init = function () {
        if (
          o.default.platform.getItem(t.system_setting_showcityrole) == undefined
        ) {
          o.default.platform.setItem(t.system_setting_showcityrole, "0");
        }
        if (
          o.default.platform.getItem(t.system_setting_showskin) == undefined
        ) {
          o.default.platform.setItem(t.system_setting_showskin, "1");
        }
        if (o.default.platform.getItem(t.system_setting_music) == undefined) {
          o.default.platform.setItem(t.system_setting_music, "1");
        }
        if (o.default.platform.getItem(t.system_setting_sound) == undefined) {
          o.default.platform.setItem(t.system_setting_sound, "1");
        }
      };
      t.setValue = function (t, e) {
        o.default.platform.setItem(t, e);
      };
      t.getValue = function (t, e) {
        return o.default.platform.getItem(t, e);
      };
      t.getBoolValue = function (t) {
        return this.getValue(t) == "1";
      };
      t.system_setting_music = "system_setting_music";
      t.system_setting_sound = "system_setting_sound";
      t.system_setting_showcityrole = "system_setting_showcityrole";
      t.system_setting_showskin = "system_setting_showskin";
      t.fightui_skillsGroup_scale = "fightui_skillsGroup_scale";
      t.fightui_skillsGroup_x = "fightui_skillsGroup_x";
      t.fightui_skillsGroup_y = "fightui_skillsGroup_y";
      t.fightui_itemsGroup_scale = "fightui_itemsGroup_scale";
      t.fightui_itemsGroup_x = "fightui_itemsGroup_x";
      t.fightui_itemsGroup_y = "fightui_itemsGroup_y";
      t.fightui_joystic_scale = "fightui_joystic_scale";
      t.fightui_joystic_x = "fightui_joystic_x";
      t.fightui_joystic_y = "fightui_joystic_y";
      return t;
    })();
    e.default = r;
  });
  t(rl);
  var il = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(he);
    var m = a(dt);
    var u = a(F);
    var g = a(st);
    var l = a(V);
    var b = a(je);
    var O = i(at);
    var f = a(q);
    var w = a(ol);
    var A = a(rl);
    var c = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        t.isBeamswd = false;
        t.weaponEffect = false;
        t.weaponEffectDealy = 100;
        t.relifeTime = -4095;
        t.labName.y = -125;
        t.size(1, 1);
        var e = (t.data = m.default.conf.character["swordman"]);
        t.setRoleData(e);
        var n = e.job;
        t.setBodyEquipmentId(e.bodyEquipmentId);
        t.setActionInfo(m.default.conf.action[n]);
        t.setAction(t.defaultAction);
        t.attrLevel = new u.default();
        t.attribute.attach(t.attrLevel);
        return t;
      }
      t.prototype.isNormalAttackAction = function () {
        return (
          i.prototype.isNormalAttackAction.call(this) ||
          this.isAction(
            "weaponcombolight1",
            "weaponcombolight2",
            "weaponcombolight3"
          )
        );
      };
      t.prototype.update = function (t) {
        var e, n;
        i.prototype.update.call(this, t);
        if (this.relifeTime > -4095) {
          this.relifeTime -= t;
          if (this.relifeTime < 0) {
            this.heroRelife();
            this.relifeTime = -4095;
          }
        }
        if (this.isDeath) return;
        if (this.targetX) {
          if (!this.key.isDownMoveKey()) {
            var o = this.targetX - this.position.x;
            var r = this.targetY - this.position.y;
            if (Math.abs(o) > 2 || Math.abs(r) > 2) {
              this.position.setX(this.targetX);
              this.position.setY(this.targetY);
              this.targetY = this.targetX = undefined;
            }
          }
        }
        if (
          ((n =
            (e = this.map) === null || e === void 0 ? void 0 : e.isDungeon) !==
            null && n !== void 0
            ? n
            : true) == false
        ) {
          if (this.buffAttribute.has(18100)) {
            this.weaponEffectDealy -= t;
            if (this.x == this.lastX && this.y == this.lastY);
            else if (this.weaponEffectDealy < 0) {
              this.weaponEffectDealy = 140;
              if (A.default.getBoolValue(A.default.system_setting_showskin)) {
                this.script.createRoleEffect(null);
                this.script.createWeaponEffect(null);
              }
            }
          }
        } else if (this.weaponEffect) {
          this.weaponEffectDealy -= t;
          if (this.x == this.lastX && this.y == this.lastY);
          else if (this.weaponEffectDealy < 0) {
            this.weaponEffectDealy = 140;
            this.script.createWeaponEffect("rgb(48,89,255)");
          }
        }
        this.lastX = this.x;
        this.lastY = this.y;
      };
      t.prototype.hitTest_ = function (t, e) {
        return this.body.hitTest(t, e, this.actor.scaleX, this.actor.scaleY);
      };
      t.prototype.updateLevel = function (t, e) {
        this.fu.level = t;
        this.labName.text = l.default.tr(83, t, e);
        this.attrLevel.setAttr(m.default.conf.role.level.swordman[t]);
      };
      t.prototype.heroRelife = function () {
        this.reset();
        this.setAction(ht.RoleAction.SIT, true);
        this.script.hpMpAdd(1, 0);
        this.script.recovery("hp", "%", 100, 500, true);
        var t = this.script.CreateAnimationByPath(
          "common/commoneffect/animation/blast1.ani.json"
        );
        this.script.AddStateLayerAnimation(-1, t, 0, 0);
        var e = this.script.CreateAnimationByPath(
          "common/commoneffect/animation/blast2.ani.json"
        );
        this.script.AddStateLayerAnimation(100, e, 0, 0);
        this.script.createPassiveObject(30022, 0, 0, 0);
      };
      t.prototype.floatLieDeath = function () {
        var t, e;
        if (
          ((e =
            (t = this === null || this === void 0 ? void 0 : this.map) ===
              null || t === void 0
              ? void 0
              : t.values) === null || e === void 0
            ? void 0
            : e.heroDeathCount) == undefined &&
          this.buffAttribute.has(10019)
        ) {
          this.map.values.heroDeathCount = 1;
          this.relifeTime = 1e3;
          if (this.isMyControler()) {
            f.default.userData.home.text("发动<6>幸存者的奥秘</6>!");
          }
        } else if (this.relifeTime < 0) {
          i.prototype.floatLieDeath.call(this);
        }
      };
      t.prototype.setData = function (t) {
        var e, n;
        this.roleContext = t;
        w.default.update(this, t);
        this.updateLevel(t.lv, t.name);
        this.rmEquipments();
        this.setWeapon(1004023);
        this.setTitle(undefined);
        this.setAura(undefined);
        this.hitType = ht.HitType.KNOCK;
        var o;
        var r = [];
        if (this.data.bodyEquipmentId) {
          r.push(this.data.bodyEquipmentId);
        }
        if (this.data.weaponEquipmentId) {
          o = this.data.weaponEquipmentId;
        }
        for (var i in this.data.skinEquipmentId) {
          r.push(this.data.skinEquipmentId[i]);
        }
        for (var a in t.equipments) {
          var s = t.equipments[a];
          var u = s.itemID;
          if (u) {
            var l = g.default.getItemData(u);
            if (l.equ) {
              r.push(l.equ);
            }
            if (l.class == O.default.WEAPON) {
              this.hitType = l.hitType;
              o = l.equ;
              this.setWeapon(u);
            }
          }
        }
        var f = [];
        for (var a in t.skin) {
          var c = t.skin[a];
          if (c > 0) {
            var l = g.default.getItemData(c);
            if (
              (l === null || l === void 0 ? void 0 : l.class) ==
              O.SkinClass.BODY
            ) {
              if (
                A.default.getBoolValue(A.default.system_setting_showskin) ==
                false
              ) {
                continue;
              }
            }
            if (l.equ) {
              r.push(l.equ);
            }
            if (
              (e = l === null || l === void 0 ? void 0 : l.equs) === null ||
              e === void 0
                ? void 0
                : e.length
            ) {
              f.push.apply(f, l.equs);
            }
          }
        }
        r.push.apply(r, f);
        var p = this.getEquipmentByType("weapon");
        if (p && p.equId != o) {
          this.rmEquipment(p.equId);
          p = undefined;
        }
        if (!p && o) {
          p = this.addEquipment(o);
        }
        var d = false;
        r = b.default.sortEqusByType(r);
        for (var h = 0, v = r; h < v.length; h++) {
          var y = v[h];
          var s = m.default.conf.equipment[y];
          if (s.type == "weapon") {
            if (d == true) continue;
            if (y != (p === null || p === void 0 ? void 0 : p.equId)) {
              var _ = this.addEquipment(y);
              _.hitBox = false;
              d = true;
            }
          } else {
            if (d == false) {
              d =
                ((n = s === null || s === void 0 ? void 0 : s.position) !==
                  null && n !== void 0
                  ? n
                  : []
                ).indexOf("weapon") >= 0;
            }
            if (s.type == "body") {
              this.setBodyEquipmentId(s.id);
            } else if (s.type == "title") {
              this.setTitle(s.id);
            } else if (s.type == "aura") {
              this.setAura(s.id);
            } else {
              this.addEquipment(y);
            }
          }
        }
        if (d) {
          p.visible = false;
        }
        this.adjustEquipment();
        this.maxHp = this.attribute.hp;
        this.maxMp = this.attribute.mp;
        if (t.hp > 0) {
          this.hp = Math.min(this.maxHp, t.hp || this.maxHp);
          this.mp = Math.min(this.maxMp, t.mp || this.maxMp);
        }
        this.updateRate();
      };
      t.prototype.setWeapon = function (t) {
        var e, n;
        this.weaponId = t;
        this.isBeamswd = false;
        if (this.weaponId) {
          var o = g.default.getItemData(this.weaponId);
          if (o) {
            this.fu.weaponWav =
              (n =
                (e = m.default.conf.weaponWav.swordman) === null || e === void 0
                  ? void 0
                  : e[o.group]) === null || n === void 0
                ? void 0
                : n.sound;
            this.isBeamswd = o.group == 3;
            this.weaponEffect = o.quality == 5;
          }
        }
      };
      t.prototype.attack = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.map) === null ||
          t === void 0
            ? void 0
            : t.isDungeon
        ) {
          if (this.isBeamswd) {
            this.skill(122);
          } else {
            this.skill(51);
          }
        }
      };
      t.prototype.skillZ = function () {};
      t.prototype.skillC = function () {};
      return t;
    })(s.default);
    e.default = c;
  });
  t(il);
  var al = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.recoverys = [];
      }
      t.prototype.use = function (t, e) {};
      t.prototype.hpRecovery = function (t, e, n) {
        this.recoverys.push({
          type: 1,
          roleid: t,
          value: e,
          time: n,
          amount: 0,
        });
      };
      t.prototype.mpRecovery = function (t, e, n) {
        this.recoverys.push({
          type: 2,
          roleid: t,
          value: e,
          time: n,
          amount: 0,
        });
      };
      t.prototype.update = function (t, e) {
        var n = this.recoverys.length;
        if (!e) return;
        for (var o = 0; o < n; o++) {
          var r = this.recoverys[o];
          if (r.amount >= r.value) continue;
          var i = e.getObjectById(r.roleid);
          if (!i || i.isDeath) continue;
          var a = r.value / (r.time || 1);
          var s = t * 1e3 * a;
          if (s > r.value - r.amount) {
            s = r.value - r.amount;
            r.amount = r.value;
          } else {
            r.amount += s;
          }
          if (s <= 0) continue;
          var u = 0,
            l = 0;
          if (r.type == 1) {
            u = s;
          } else if (r.type == 2) {
            l = s;
          }
          if (i.script.hpMpAdd) {
            i.script.hpMpAdd(u, l);
          } else {
            i.hp += u;
            i.mp += l;
          }
        }
        for (var o = n - 1; o >= 0; o--) {
          var r = this.recoverys[o];
          if (r.amount >= r.value) {
            this.recoverys.splice(o, 1);
          }
        }
      };
      return t;
    })();
    e.default = n;
  });
  t(al);
  var sl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(he);
    var m = a(dt);
    var u = a(F);
    var g = a(st);
    var l = a(V);
    var b = a(je);
    var O = i(at);
    var f = a(q);
    var w = a(ol);
    var A = a(rl);
    var c = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        t.isBeamswd = false;
        t.weaponEffect = false;
        t.weaponEffectDealy = 100;
        t.relifeTime = -4095;
        t.labName.y = -125;
        t.size(1, 1);
        var e = (t.data = m.default.conf.character["berserker"]);
        t.setRoleData(e);
        var n = e.job;
        t.setBodyEquipmentId(e.bodyEquipmentId);
        t.setActionInfo(m.default.conf.action[n]);
        t.setAction(t.defaultAction);
        t.attrLevel = new u.default();
        t.attribute.attach(t.attrLevel);
        return t;
      }
      t.prototype.isNormalAttackAction = function () {
        return (
          i.prototype.isNormalAttackAction.call(this) ||
          this.isAction("frenzy1", "frenzy2", "frenzy3")
        );
      };
      t.prototype.update = function (t) {
        var e, n;
        i.prototype.update.call(this, t);
        if (this.relifeTime > -4095) {
          this.relifeTime -= t;
          if (this.relifeTime < 0) {
            this.heroRelife();
            this.relifeTime = -4095;
          }
        }
        if (this.isDeath) return;
        if (this.targetX) {
          if (!this.key.isDownMoveKey()) {
            var o = this.targetX - this.position.x;
            var r = this.targetY - this.position.y;
            if (Math.abs(o) > 2 || Math.abs(r) > 2) {
              this.position.setX(this.targetX);
              this.position.setY(this.targetY);
              this.targetY = this.targetX = undefined;
            }
          }
        }
        if (
          ((n =
            (e = this.map) === null || e === void 0 ? void 0 : e.isDungeon) !==
            null && n !== void 0
            ? n
            : true) == false
        ) {
          if (this.buffAttribute.has(18100)) {
            this.weaponEffectDealy -= t;
            if (this.x == this.lastX && this.y == this.lastY);
            else if (this.weaponEffectDealy < 0) {
              this.weaponEffectDealy = 140;
              if (A.default.getBoolValue(A.default.system_setting_showskin)) {
                this.script.createRoleEffect(null);
                this.script.createWeaponEffect(null);
              }
            }
          }
        } else if (this.weaponEffect) {
          this.weaponEffectDealy -= t;
          if (this.x == this.lastX && this.y == this.lastY);
          else if (this.weaponEffectDealy < 0) {
            this.weaponEffectDealy = 140;
            this.script.createWeaponEffect("rgb(48,89,255)");
          }
        }
        this.lastX = this.x;
        this.lastY = this.y;
      };
      t.prototype.hitTest_ = function (t, e) {
        return this.body.hitTest(t, e, this.actor.scaleX, this.actor.scaleY);
      };
      t.prototype.updateLevel = function (t, e) {
        this.fu.level = t;
        this.labName.text = l.default.tr(83, t, e);
        this.attrLevel.setAttr(m.default.conf.role.level.swordman[t]);
      };
      t.prototype.heroRelife = function () {
        this.reset();
        this.setAction(ht.RoleAction.SIT, true);
        this.script.hpMpAdd(1, 0);
        this.script.recovery("hp", "%", 100, 500, true);
        var t = this.script.CreateAnimationByPath(
          "common/commoneffect/animation/blast1.ani.json"
        );
        this.script.AddStateLayerAnimation(-1, t, 0, 0);
        var e = this.script.CreateAnimationByPath(
          "common/commoneffect/animation/blast2.ani.json"
        );
        this.script.AddStateLayerAnimation(100, e, 0, 0);
        this.script.createPassiveObject(30022, 0, 0, 0);
      };
      t.prototype.floatLieDeath = function () {
        var t, e;
        if (
          ((e =
            (t = this === null || this === void 0 ? void 0 : this.map) ===
              null || t === void 0
              ? void 0
              : t.values) === null || e === void 0
            ? void 0
            : e.heroDeathCount) == undefined &&
          this.buffAttribute.has(10019)
        ) {
          this.map.values.heroDeathCount = 1;
          this.relifeTime = 1e3;
          if (this.isMyControler()) {
            f.default.userData.home.text("发动<6>幸存者的奥秘</6>!");
          }
        } else if (this.relifeTime < 0) {
          i.prototype.floatLieDeath.call(this);
        }
      };
      t.prototype.setData = function (t) {
        var e, n;
        this.roleContext = t;
        w.default.update(this, t);
        this.updateLevel(t.lv, t.name);
        this.rmEquipments();
        this.special.unApplyAll();
        this.setWeapon(1004023);
        this.setTitle(undefined);
        this.setAura(undefined);
        var o;
        this.hitType = ht.HitType.KNOCK;
        var r = [];
        if (this.data.bodyEquipmentId) {
          r.push(this.data.bodyEquipmentId);
        }
        if (this.data.weaponEquipmentId) {
          o = this.data.weaponEquipmentId;
        }
        for (var i in this.data.skinEquipmentId) {
          r.push(this.data.skinEquipmentId[i]);
        }
        for (var a in t.equipments) {
          var s = t.equipments[a];
          var u = s.itemID;
          if (u) {
            var l = g.default.getItemData(u);
            this.special.apply(l.id);
            if (l.equ) {
              r.push(l.equ);
            }
            if (l.class == O.default.WEAPON) {
              this.hitType = l.hitType;
              o = l.equ;
              this.setWeapon(u);
            }
          }
        }
        var f = [];
        for (var a in t.skin) {
          var c = t.skin[a];
          if (c > 0) {
            var l = g.default.getItemData(c);
            if (
              (l === null || l === void 0 ? void 0 : l.class) ==
              O.SkinClass.BODY
            ) {
              if (
                A.default.getBoolValue(A.default.system_setting_showskin) ==
                false
              ) {
                continue;
              }
            }
            if (l.equ) {
              r.push(l.equ);
            }
            if (
              (e = l === null || l === void 0 ? void 0 : l.equs) === null ||
              e === void 0
                ? void 0
                : e.length
            ) {
              f.push.apply(f, l.equs);
            }
          }
        }
        r.push.apply(r, f);
        var p = this.getEquipmentByType("weapon");
        if (p && p.equId != o) {
          this.rmEquipment(p.equId);
          p = undefined;
        }
        if (!p && o) {
          p = this.addEquipment(o);
        }
        var d = false;
        r = b.default.sortEqusByType(r);
        for (var h = 0, v = r; h < v.length; h++) {
          var y = v[h];
          var s = m.default.conf.equipment[y];
          if (s.type == "weapon") {
            if (d == true) continue;
            if (y != (p === null || p === void 0 ? void 0 : p.equId)) {
              var _ = this.addEquipment(y);
              _.hitBox = false;
              d = true;
            }
          } else {
            if (d == false) {
              d =
                ((n = s === null || s === void 0 ? void 0 : s.position) !==
                  null && n !== void 0
                  ? n
                  : []
                ).indexOf("weapon") >= 0;
            }
            if (s.type == "body") {
              this.setBodyEquipmentId(s.id);
            } else if (s.type == "title") {
              this.setTitle(s.id);
            } else if (s.type == "aura") {
              this.setAura(s.id);
            } else {
              this.addEquipment(y);
            }
          }
        }
        if (d) {
          p.visible = false;
        }
        this.adjustEquipment();
        this.maxHp = this.attribute.hp;
        this.maxMp = this.attribute.mp;
        if (t.hp > 0) {
          this.hp = Math.min(this.maxHp, t.hp || this.maxHp);
          this.mp = Math.min(this.maxMp, t.mp || this.maxMp);
        }
        this.updateRate();
      };
      t.prototype.setWeapon = function (t) {
        var e, n;
        this.weaponId = t;
        this.isBeamswd = false;
        if (this.weaponId) {
          var o = g.default.getItemData(this.weaponId);
          if (o) {
            this.fu.weaponWav =
              (n =
                (e = m.default.conf.weaponWav.swordman) === null || e === void 0
                  ? void 0
                  : e[o.group]) === null || n === void 0
                ? void 0
                : n.sound;
            this.isBeamswd = o.group == 3;
            this.weaponEffect = o.quality == 5;
          }
        }
      };
      t.prototype.attack = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.map) === null ||
          t === void 0
            ? void 0
            : t.isDungeon
        ) {
          this.skill(139);
        }
      };
      t.prototype.skillZ = function () {};
      t.prototype.skillC = function () {};
      return t;
    })(s.default);
    e.default = c;
  });
  t(sl);
  var ul = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      Object.defineProperty(e, "inst", {
        get: function () {
          if (!e.$inst) e.$inst = new e();
          return e.$inst;
        },
        enumerable: false,
        configurable: true,
      });
      e.prototype.log = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
      };
      return e;
    })(XOF.EventDispatcher);
    e.default = o;
  });
  t(ul);
  var ll = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(V);
    var a = o(dt);
    var s = o(F);
    var r = o(he);
    var u = o(ol);
    var l = (function (r) {
      n(t, r);
      function t(t) {
        var e = r.call(this) || this;
        e.weaponEffect = false;
        e.weaponEffectDealy = 100;
        e.body.shadow = false;
        e.labName.y = -125;
        e.size(1, 1);
        var n = (e.data = a.default.conf.character[t]);
        e.setRoleData(n);
        var o = n.job;
        e.setBodyEquipmentId(n.bodyEquipmentId);
        e.setActionInfo(a.default.conf.action[o]);
        e.setAction(e.defaultAction);
        e.attrLevel = new s.default();
        e.attribute.attach(e.attrLevel);
        return e;
      }
      t.prototype.hitTest_ = function (t, e) {
        return this.body.hitTest(t, e, this.actor.scaleX, this.actor.scaleY);
      };
      t.prototype.updateLevel = function (t, e) {
        this.fu.level = t;
        this.labName.text = i.default.tr(83, t, e);
        this.attrLevel.setAttr(a.default.conf.role.level.swordman[t]);
      };
      t.prototype.setData = function (t) {
        this.roleContext = t;
        u.default.update(this, t);
        this.updateLevel(t.lv, t.name);
        this.setWeapon(1004023);
        this.setTitle(undefined);
        this.maxHp = this.attribute.hp;
        this.maxMp = this.attribute.mp;
        this.hp = Math.min(this.maxHp, t.hp || this.maxHp);
        this.mp = Math.min(this.maxMp, t.mp || this.maxMp);
        this.updateRate();
      };
      t.prototype.setWeapon = function (t) {};
      t.prototype.attack = function () {};
      t.prototype.skillZ = function () {};
      t.prototype.skillC = function () {};
      return t;
    })(r.default);
    e.default = l;
  });
  t(ll);
  var fl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var O = a(q);
    var s = a(R);
    var u = a(he);
    var l = a(nl);
    var f = a(dt);
    var c = a(il);
    var p = a(Mo);
    var d = a(rt);
    var h = a(Q);
    var v = a(B);
    var y = a(mt);
    var _ = a(x);
    var m = a(al);
    var g = a(bt);
    var b = i(Zu);
    var w = a(yt);
    var A = a(I);
    var E = a($);
    var T = a(sl);
    var C = a(ul);
    var P = a(_t);
    var j = a(ll);
    var S = a(rl);
    var M = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.cityRoles = {};
        t.mapScenes = [];
        t.delMapScenes = [];
        t.consumable = new m.default();
        t.initHero();
        t.time = 0;
        t.slowCount = 1;
        t.resComplete = t.initComplete = true;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        O.default.eventMgr.on(1007, this.update, this);
        O.default.eventMgr.on(1008, this.onDataUpdate, this);
        O.default.eventMgr.on(1036, this.updateHero, this);
        O.default.eventMgr.on(1012, this.onUnitDeath, this);
        O.default.eventMgr.on(1013, this.onDungeonUnitDeath, this);
        O.default.eventMgr.on(1032, this.onHeroLevelup, this);
        O.default.eventMgr.on(1030, this.slow, this);
        O.default.eventMgr.on(1021, this.onCityRoleEnter, this);
        O.default.eventMgr.on(1019, this.onCityRoleUpdate, this);
        O.default.eventMgr.on(1020, this.onCityRoleQuit, this);
        O.default.eventMgr.on(1022, this.onCityRoleKey, this);
        O.default.eventMgr.on(1065, this.heroRelease, this);
        XOF.stage.on("pause", this.onPause, this);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        O.default.eventMgr.off(1007, this.update, this);
        O.default.eventMgr.off(1008, this.onDataUpdate, this);
        O.default.eventMgr.off(1036, this.updateHero, this);
        O.default.eventMgr.off(1012, this.onUnitDeath, this);
        O.default.eventMgr.off(1013, this.onDungeonUnitDeath, this);
        O.default.eventMgr.off(1032, this.onHeroLevelup, this);
        O.default.eventMgr.off(1030, this.slow, this);
        O.default.eventMgr.off(1021, this.onCityRoleEnter, this);
        O.default.eventMgr.off(1019, this.onCityRoleUpdate, this);
        O.default.eventMgr.off(1020, this.onCityRoleQuit, this);
        O.default.eventMgr.off(1022, this.onCityRoleKey, this);
        O.default.eventMgr.off(1065, this.heroRelease, this);
        XOF.stage.off("pause", this.onPause, this);
      };
      t.prototype.onPause = function () {
        if (O.default.userData.map.currentScreen() == 2) {
          O.default.viewMgr.open(A.default.DungeonPaused);
          return;
        }
      };
      t.prototype.onHeroLevelup = function () {
        var t = this.hero;
        if (t) {
          t.updateLevel(
            O.default.userData.hero.lv,
            O.default.userData.hero.name
          );
        }
      };
      t.prototype.initHero = function () {
        var t = this.createRoleByJob(O.default.userData.hero.job);
        this.hero = t;
        t.addHeroAura();
        t.key.setConf({ f: 65, g: 70, h: 81, q: 71, w: 84, e: 67, r: 90 });
        this.updateHero(true);
      };
      t.prototype.updateHero = function (t) {
        var e, n, o, r, i, a;
        if (t === void 0) {
          t = false;
        }
        var s = this.hero;
        var u = O.default.userData.hero;
        O.default.userData.bag;
        var l = O.default.userData.skill;
        var f = {};
        for (var c in u.skins) {
          f[c] = u.skins[c].itemID;
        }
        var p = {};
        for (var c in u.wears) {
          p[c] = u.wears[c];
        }
        var d = {};
        for (var c in l.skills) {
          d[l.skills[c].skillsID] = l.skills[c].level;
        }
        var h = O.default.userData.equipCollct.getActiveList();
        var v = O.default.userData.skinCollct.getActiveList();
        var y = {
          name: u.name,
          lv: u.lv,
          skin: f,
          equipments: p,
          skills: d,
          equipCollect: h,
          skinCollect: v,
        };
        if (t) {
          y.hp = Number.MAX_SAFE_INTEGER;
          y.mp = Number.MAX_SAFE_INTEGER;
        }
        var _ = [];
        for (var m = 0; m < 12; m++) {
          _[m] =
            (n =
              (e = l.slots) === null || e === void 0 ? void 0 : e[511 + m]) ===
              null || n === void 0
              ? void 0
              : n.id;
        }
        s.setSkills(_);
        var g = [];
        var b = ["slot1", "slot2", "slot3", "slot4"];
        for (var m = 0; m < 4; m++) {
          g[m] =
            (a =
              (i =
                (r =
                  (o = O.default.userData.map) === null || o === void 0
                    ? void 0
                    : o.itemSlots) === null || r === void 0
                  ? void 0
                  : r[b[m]]) === null || i === void 0
                ? void 0
                : i.itemID) !== null && a !== void 0
              ? a
              : 0;
        }
        s.setItems(g);
        s.setData(y);
        s.addKeyLogic();
        s.defaultMoveAction = ht.RoleAction.DASH;
        s.useDashAttack = false;
      };
      t.prototype.releaseKey = function () {
        var t = this.hero;
        if (t) {
          var e = [
            f.default.key.left,
            f.default.key.right,
            f.default.key.up,
            f.default.key.down,
          ];
          for (var n = 0, o = e; n < o.length; n++) {
            var r = o[n];
            t.key.keyRelease(r);
          }
        }
      };
      t.prototype.heroRelease = function () {
        this.releaseKey();
        var t = this.curScene;
        if (t) {
          this.lastX = t.lastX;
          this.lastY = t.lastY;
        }
        var e = this.hero;
        if (e) {
          e.position.setX(this.lastX);
          e.position.setY(this.lastY);
        }
      };
      t.prototype.toMap = function (t) {
        var e =
          f.default.conf.map.map[t === null || t === void 0 ? void 0 : t.id];
        if (e) {
          this.resComplete = this.initComplete = false;
          var n = t.id;
          O.default.log2(2, "切换地图", n);
          var o = "" + t.id;
          if (t.dungeonX >= 0) o = t.dungeonX + "_" + t.dungeonY + "_" + t.id;
          var r = this.curScene;
          var i = this.getMapScene(o);
          if (t.seed) v.default.seed(t.seed);
          if (i != undefined && r == i) return;
          if (r) {
            r.paused = true;
            r.off(_.default.MAP_RES_LOADED, this.onMapSceneInitComplete, this);
            r.sk.stop(this.hero);
            r.setHero(undefined);
            r.removeObject(this.hero);
            this.releaseKey();
            r.onClose();
            r.stopAllSound();
            if (r.cMapData.area == 1) {
              r.cleanOtherObject();
            }
            this.removeChild(r);
          }
          if (i) {
            i.setHero(this.hero);
            i.onOpen();
            i.addObject(this.hero);
            i.setMapComplete(t);
            this.onMapSceneInitComplete("res");
          } else {
            i = new l.default();
            i.once(
              _.default.MAP_RES_LOADED,
              this.onMapSceneInitComplete,
              this,
              ["res"]
            );
            i.name = o;
            i.setHero(this.hero);
            i.onOpen();
            i.addObject(this.hero);
            i.toMap(t);
            this.addMapScene(i);
          }
          this.addChild(i);
          this.curScene = i;
          this.onMapSceneInitComplete("init");
          O.default.eventMgr.event(1004);
          this.cleanScenes(this.curScene);
        } else {
          XOF.log("地图不存在:", t === null || t === void 0 ? void 0 : t.id);
        }
      };
      t.prototype.onMapSceneInitComplete = function (t) {
        var e, n;
        if (t == "init") this.initComplete = true;
        if (t == "res") this.resComplete = true;
        if (this.initComplete && this.resComplete) {
          var o = [
            f.default.key.left,
            f.default.key.right,
            f.default.key.up,
            f.default.key.down,
          ];
          this.slowCount = 1;
          this.curScene.paused = false;
          this.curScene.playBgm();
          this.hero.stay(true);
          this.event(1006);
          O.default.eventMgr.event(1006);
          this.addBlack();
          var r = O.default.userData.map;
          if (r.isCity()) {
            O.default.userData.city.sendKeyState(
              0,
              0,
              this.hero.position.x,
              this.hero.position.y,
              this.hero.direction,
              this.curScene.ms.frame
            );
          } else {
            var i =
              [b.default.TowerOfUltimate, b.default.Tower].indexOf(
                r.dungeonId
              ) >= 0 ||
              ((n =
                (e = r === null || r === void 0 ? void 0 : r.dungeonEntered) ===
                  null || e === void 0
                  ? void 0
                  : e.length) !== null && n !== void 0
                ? n
                : 0) == 3 ||
              P.default.getDungeonTypeByDungeonId(r.dungeonId) ==
                b.DungeonType.Hell;
            if (i) {
              this.resetTime();
              var a = Math.ceil((O.default.userData.hero.lv / 25) * 10);
              if (a < 10) {
                this.hero.buffAttribute.add(10035, a);
              } else {
                this.hero.buffAttribute.rm(10035);
              }
            }
          }
          for (var s = 0, u = o; s < u.length; s++) {
            var l = u[s];
            if (O.default.gameControler.isDown(l)) this.curScene.onKeyDown(l);
          }
        }
      };
      t.prototype.cleanScenes = function (t) {
        for (var e = this.mapScenes.length - 1, n = void 0; e >= 0; e--) {
          n = this.mapScenes[e];
          if (n == t) continue;
          if (t ? t.cMapData.area != n.cMapData.area : true) {
            this.removeMapScene(n);
          }
        }
      };
      t.prototype.resetTime = function () {
        this.time = 0;
      };
      t.prototype.update = function (t) {
        this.delMapScenes_();
        if (this.paused) return;
        if (t > 3) {
          this.onPause();
        }
        var e = this.curScene;
        if (e) {
          e.update(t);
        }
      };
      t.prototype.onDataUpdate = function (t) {
        if (this.paused) return;
        var e = this.curScene;
        if (e) {
          if ((this.resComplete == this.initComplete) == true) {
            this.time += t * 1e3;
            e.onDataUpdate(t);
            this.consumable.update(t, e);
          }
        }
      };
      t.prototype.onKeyRelease = function (t) {
        var e = this.curScene;
        if (e) {
          e.sk.onKeyRelease(t);
        }
      };
      t.prototype.addMapScene = function (t) {
        if (this.mapScenes.indexOf(t) == -1) {
          this.mapScenes.push(t);
        }
        return this;
      };
      t.prototype.removeMapScene = function (t, e) {
        if (e && !t) {
          for (var n = 0; n < this.mapScenes.length; n++) {
            var o = this.mapScenes[n];
            if (this.delMapScenes.indexOf(o) >= 0) continue;
            if (e == o.cMapData.id) {
              t = o;
              break;
            }
          }
        }
        if (t) {
          if (this.delMapScenes.indexOf(t) >= 0) {
            return;
          }
          if (t == this.curScene) {
            this.curScene = undefined;
          }
          t.paused = true;
          this.delMapScenes.push(t);
        }
      };
      t.prototype.delMapScenes_ = function () {
        for (var t = this.delMapScenes.length - 1; t >= 0; t--) {
          var e = this.delMapScenes[t];
          this.delMapScenes.splice(t, 1);
          for (var n = 0; n < this.mapScenes.length; n++) {
            var o = this.mapScenes[n];
            if (e == o) {
              this.mapScenes.splice(n, 1);
              o.paused = true;
              o.setHero(undefined);
              o.removeObject(this.hero);
              o.onClose();
              o.stopAllSound(true);
              o.cleanOtherObject();
              this.removeChild(o);
              o.clean();
              return;
            }
          }
        }
      };
      t.prototype.getMapScene = function (t) {
        for (var e = 0; e < this.mapScenes.length; e++) {
          var n = this.mapScenes[e];
          if (this.delMapScenes.indexOf(n) >= 0) continue;
          if (t == n.name) {
            return n;
          }
        }
      };
      t.prototype.onUnitDeath = function (t, e) {
        var n = this.curScene,
          o;
        if (n && (o = n.getObjectById(e))) {
          if (o instanceof p.default) {
            O.default.userData.map.unitDeath(e);
          } else if (o instanceof u.default);
        }
      };
      t.prototype.onDungeonUnitDeath = function (t) {
        var e = this.curScene,
          n;
        if (e && (n = e.getObjectById(t))) {
          var o = e.isBoss(t);
          if (!o && [111023].indexOf(n.monsterId) < 0) {
            this.createWhiteEffect(n, e);
            e.removeObject(n);
          }
          if (y.default.curIsBossDungeon() && o && !e.hasBoss()) {
            var r = e.getFightObjects(ht.RoleCamp.MONSTER, true);
            r.forEach(function (t) {
              if (!t.isDeath) {
                t.death();
              }
            });
            if (this.slowCount > 0) {
              if (
                O.default.userData.map.dungeonId == b.default.Tower ||
                O.default.userData.map.dungeonId == b.default.TowerOfUltimate ||
                P.default.getMapType(O.default.userData.map.id) ==
                  "[dungeon line]"
              ) {
                this.slow(true, n);
              }
            }
          }
          e.event(1013);
        }
      };
      t.prototype.slow = function (t, e) {
        var n = this.curScene;
        if (n) {
          this.stopRewardTween();
          if (t) {
            var o = new g.default(
              f.default.getAnimationData(
                "common/commoneffect/animation/laststrikeforkillboss.ani.json"
              )
            );
            n.addObject(
              o,
              vt.layerConstValue.cover,
              e.position.x,
              e.position.y - 50
            );
          }
          this.twn = h.default
            .get(n)
            .set({ timeScale: 0.2 })
            .wait(1500)
            .to({ timeScale: 1 }, 500)
            .wait(1500)
            .call(function () {})
            .remove();
        }
        this.slowCount--;
      };
      t.prototype.createWhiteEffect = function (t, e) {
        var n = w.default.pop("FigureEffect", d.default);
        n.clone(t.body);
        n.scale(t.actor.scaleX, t.actor.scaleY);
        n.float = t.$float;
        n.alpha = 0.9;
        e.addObject(n, undefined, t.x, t.y);
        var o = e.tween(n).wait(220).call(e.removeObject, e, [n]);
        o.call(e.removeTween, e, [o]);
        return n;
      };
      t.prototype.stopRewardTween = function () {
        if (this.twn) h.default.removeTween(this.twn);
        this.twn = undefined;
      };
      Object.defineProperty(t.prototype, "pathgateIsOpen", {
        get: function () {
          return this.curScene.pathgateIsOpen;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "cameraX_", {
        get: function () {
          return this.curScene.cameraX_;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "cameraY_", {
        get: function () {
          return this.curScene.cameraY_;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.allDeath = function (t) {
        if (t === void 0) {
          t = 0;
        }
        C.default.inst.event("d", [t]);
      };
      t.prototype.getRoleCount = function () {
        var t = 0;
        for (var e in this.cityRoles) {
          t += 1;
        }
        return t;
      };
      t.prototype.createRoleByJob = function (t, e) {
        if (e) {
          switch (t) {
            case "swordman":
            case "berserker":
              return new j.default("swordmanwhite");
          }
        } else {
          if (t == "swordman") {
            return new c.default();
          } else if (t == "berserker") {
            return new T.default();
          }
        }
        return new c.default();
      };
      t.prototype.checkRoleData = function (t) {
        if (t) {
          if (!t.id) return false;
          if (!t.name) return false;
          if (!t.wear) return false;
          if (!t.skills) return false;
          if (!t.wearSkin) return false;
          if (!t.skinAtlas) return false;
          if (!t.equipAtlas) return false;
          return true;
        }
        return false;
      };
      t.prototype.onCityRoleEnter = function (t) {
        if (this.cityRoles[t]) return;
        var e = this.curScene;
        if (e) {
          var n = this.getRoleCount();
          if (n >= 30) return;
          var o = O.default.userData.city.cityRoles[t];
          var r = S.default.getBoolValue(S.default.system_setting_showcityrole)
            ? 6
            : 0;
          if (o && this.checkRoleData(o)) {
            var i = this.createRoleByJob(o.job, n >= r);
            i.lockstepTime = o.frame;
            i.addKeyLogic();
            this.updateCityRole(i, o);
            e.addObject(i, undefined, o.x, o.y);
            i.rest(true);
            i.direction = o.direction;
            this.cityRoles[t] = i;
            i.on(XOF.TouchEvent.TAP, this.onTapRole, this, [i]);
          }
        }
      };
      t.prototype.updateCityRole = function (t, e) {
        var n = t;
        var o = {};
        for (var r in e.wearSkin) {
          o[r] = e.wearSkin[r].itemID;
        }
        var i = {};
        for (var r in e.wear) {
          i[r] = e.wear[r];
        }
        var a = {};
        for (var r in e.skills) {
          a[e.skills[r].skillsID] = e.skills[r].level;
        }
        var s = {
          name: e.name,
          lv: e.level,
          skin: o,
          equipments: i,
          skills: a,
          equipCollect: e.equipAtlas,
          skinCollect: e.skinAtlas,
        };
        var u = [];
        n.setSkills(u);
        var l = [];
        n.setItems(l);
        n.setData(s);
        n.useDashAttack = false;
      };
      t.prototype.onCityRoleUpdate = function (t) {
        var e = this.cityRoles[t];
        var n = O.default.userData.city.cityRoles[t];
        if (e && n) {
          this.updateCityRole(e, n);
        }
      };
      t.prototype.onCityRoleQuit = function (t) {
        var e = this.cityRoles[t];
        if (e) {
          if (e.map) {
            e.map.removeObject(e);
          }
          delete this.cityRoles[t];
          O.default.sound.stopAll(e);
          u.default.prototype.destory.call(e);
        }
      };
      t.prototype.onTapRole = function (t) {
        if (t.attribute) {
          O.default.viewMgr.open(A.default.HeroProfileAttribute, [t.attribute]);
        }
      };
      t.prototype.onCityRoleKey = function (t, e, n, o, r, i) {
        var a = this.cityRoles[t];
        if (a === null || a === void 0 ? void 0 : a.map) {
          if (e == 0) {
            a.lockstepTime = o;
          } else {
            a.map.ms.put(a, e, !!n);
            a.position.setX(r);
            a.position.setY(i);
          }
        }
      };
      t.prototype.addBlack = function () {
        if (
          O.default.isMobile ||
          O.default.platform.platformType == "HBuilder"
        ) {
          if (this.blackL) {
            this.setChildIndex(this.blackL, this.numChild);
            this.setChildIndex(this.blackR, this.numChild);
          } else {
            var t = new XOF.Image();
            t.size(150, E.default.height);
            t.skin = "interface/0.png";
            this.addChild(t);
            var e = new XOF.Image();
            e.size(150, E.default.height);
            e.skin = t.skin;
            t.touchEnabled = e.touchEnabled = true;
            this.blackL = t;
            this.blackR = e;
            this.addChild(e);
          }
          if (this.curScene) {
            this.blackL.x = this.curScene.x - this.blackL.width;
            this.blackR.x = Math.floor(
              this.curScene.x + this.curScene.width * this.curScene.scaleX
            );
          }
        }
      };
      return t;
    })(s.default);
    e.default = M;
  });
  t(fl);
  var cl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(R);
    var a = o(I);
    var s = o(W);
    var u = o(T);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = u.default.MAIN_UI;
        t.touchThrough = false;
        s.default.initSkin("ui/Map/DungeonPaused", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnClose.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnQuit.on(XOF.TouchEvent.TAP, this.onClickQuit, this);
        var t = r.default.viewMgr.getOpenView(a.default.Map);
        t.paused = true;
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnQuit.off(XOF.TouchEvent.TAP, this.onClickQuit, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.close, this);
        var t = r.default.viewMgr.getOpenView(a.default.Map);
        t.paused = false;
      };
      t.prototype.onClickQuit = function () {
        r.default.userData.map.dungeonReturn();
        this.close();
      };
      return t;
    })(i.default);
    e.default = l;
  });
  t(cl);
  var pl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var i = o(W);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/Dungeon/DungeonStay", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(pl);
  var dl = e(function (t, e) {
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var n =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var i =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = i(q);
    var s = i(st);
    var u = n(it);
    var l = (function () {
      function t() {}
      t.isQuick = function (t) {
        return t >= 501 && t < 501 + 5;
      };
      t.getConsumeList = function () {
        var t = a.default.userData.bag.items;
        var e = [];
        for (var n in t) {
          var o = s.default.getItemData(t[n].itemID);
          if (o.type == u.default.ITEM && o.class == u.ItemClass.ITEM) {
            e.push(t[n].itemID);
          }
        }
        return e;
      };
      return t;
    })();
    e.default = l;
  });
  t(dl);
  var hl = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(q);
    var r = (function () {
      function t() {}
      t.checkConsume = function () {
        var t = o.default.userData.dungeon.itemSlots;
        for (var e in t) {
          if (o.default.userData.bag.getItemCount(t[e]) > 0);
          else {
            return false;
          }
        }
        return true;
      };
      t.getConsumeUpCount = function () {
        var t = 0;
        var e = o.default.userData.dungeon.itemSlots;
        for (var n in e) {
          if (o.default.userData.bag.getItemCount(e[n]) > 0) {
            t += 1;
          }
        }
        return t;
      };
      return t;
    })();
    e.default = r;
  });
  t(hl);
  var vl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      Object.defineProperty(e.prototype, "data", {
        get: function () {
          return this.$data;
        },
        set: function (t) {
          this.$data = t;
          this.dataChanged_();
        },
        enumerable: false,
        configurable: true,
      });
      e.prototype.dataChanged_ = function () {};
      return e;
    })(XOF.Sprite);
    e.default = o;
  });
  t(vl);
  var yl = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = n(V);
    var s = n(dt);
    var o = (function () {
      function t() {}
      t.getEquipClassEmblmeSlotColor = function (t) {
        var e, n, o, r;
        var i =
          (r =
            (o =
              (n =
                (e = s.default.conf) === null || e === void 0
                  ? void 0
                  : e.rule) === null || n === void 0
                ? void 0
                : n.badgeWear) === null || o === void 0
              ? void 0
              : o[t]) === null || r === void 0
            ? void 0
            : r.emblem;
        switch (i + "") {
          case "1":
            return 112;
          case "2":
            return 113;
          case "3":
            return 110;
          case "4":
            return 111;
          case "5":
            return 114;
        }
        return 1;
      };
      t.getEquipClassEmblmeSlotName = function (t) {
        var e, n, o, r;
        var i =
          (r =
            (o =
              (n =
                (e = s.default.conf) === null || e === void 0
                  ? void 0
                  : e.rule) === null || n === void 0
                ? void 0
                : n.badgeWear) === null || o === void 0
              ? void 0
              : o[t]) === null || r === void 0
            ? void 0
            : r.emblem;
        switch (i + "") {
          case "1":
            return a.default.tr(300);
          case "2":
            return a.default.tr(302);
          case "3":
            return a.default.tr(301);
          case "4":
            return a.default.tr(299);
          case "5":
            return a.default.tr(303);
        }
        return "";
      };
      t.getEquipClassEmblmeSlotColors = function (t) {
        var e, n, o, r, i;
        var a =
          (i =
            (r =
              (o =
                (n =
                  (e = s.default.conf) === null || e === void 0
                    ? void 0
                    : e.rule) === null || n === void 0
                  ? void 0
                  : n.badgeWear) === null || o === void 0
                ? void 0
                : o[t]) === null || r === void 0
              ? void 0
              : r.emblems) !== null && i !== void 0
            ? i
            : [];
        return a.map(function (t) {
          return t + "";
        });
      };
      t.getEquipClassEmblmeIcon = function (t) {
        var e, n, o, r;
        var i =
          (r =
            (o =
              (n =
                (e = s.default.conf) === null || e === void 0
                  ? void 0
                  : e.rule) === null || n === void 0
                ? void 0
                : n.badgeWear) === null || o === void 0
              ? void 0
              : o[t]) === null || r === void 0
            ? void 0
            : r.emblem;
        switch (i + "") {
          case "1":
            return "item/talismanmark.img/4.png";
          case "2":
            return "item/talismanmark.img/2.png";
          case "3":
            return "item/talismanmark.img/3.png";
          case "4":
            return "item/talismanmark.img/1.png";
          case "5":
            return "item/talismanmark.img/0.png";
        }
        return "";
      };
      return t;
    })();
    e.default = o;
  });
  t(yl);
  var _l = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(W);
    var i = o(vl);
    var a = o(q);
    var s = o(it);
    var u = o(yl);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.touchEnabled = true;
        t.initSkin();
        t.labCount.text = t.imgIcon.skin = "";
        t.imgLeftBadge.visible =
          t.imgRightBadge.visible =
          t.imgMark.visible =
          t.imgLock.visible =
          t.imgLight.visible =
            false;
        return t;
      }
      t.prototype.initSkin = function () {
        r.default.initSkin("ui/Bag/EquipmentSlot", this, this);
      };
      t.prototype.dataChanged_ = function () {
        var t = this.data;
        this.imgBg.visible =
          (t === null || t === void 0 ? void 0 : t.showBg) == undefined
            ? true
            : !!t.showBg;
        this.labCount.text = this.imgIcon.skin = "";
        this.imgQuality.skin =
          "ui_interface_m/ui_atlas_common/M5UI_Common_Iconrarity0" + 0 + ".png";
        if ((t === null || t === void 0 ? void 0 : t.tap) === false) {
          this.off(XOF.TouchEvent.TAP, this.onTap, this);
        } else {
          this.on(XOF.TouchEvent.TAP, this.onTap, this);
        }
        this.imgLeftBadge.visible =
          this.imgRightBadge.visible =
          this.imgMark.visible =
          this.imgLock.visible =
          this.imgLight.visible =
            false;
        if (t === null || t === void 0 ? void 0 : t.itemData) {
          if (t.itemData.type == s.default.EQUIP) {
            var e = t.extra;
            if (e) {
              this.imgLock.visible = e.sign > 0;
              var n = "";
              if (e.intensifyLevel > 0) {
                n += "<2>+" + e.intensifyLevel + "</2>";
              }
              if (e.growthLevel > 0) {
                n += "<4>+" + e.growthLevel + "</4>";
              }
              this.labCount.text = n;
              var o = u.default.getEquipClassEmblmeIcon(t.itemData.class);
              this.imgLeftBadge.skin = this.imgRightBadge.skin = o;
              if (e.leftBadge) {
                this.imgLeftBadge.visible = true;
              }
              if (e.rightBadge) {
                this.imgRightBadge.visible = true;
              }
            }
          } else if (t.count > 1) {
            this.labCount.text = t.count + "";
          }
          if (t.itemData.iconmark) {
            this.imgMark.visible = true;
            this.imgMark.skin = t.itemData.iconmark;
            this.imgMark.width = this.imgMark.height = undefined;
          }
          var r = t.itemData.icon;
          if (t.itemData.reuse > 0 && t.itemData.notcost) {
            var i = (t.extra && t.extra.use) || 0;
            if (i >= t.itemData.reuse && t.itemData.voidicon)
              r = t.itemData.voidicon;
          }
          this.imgLight.visible = !!t.light;
          this.imgIcon.skin = r;
          if (t.itemData.quality) {
            if (t.itemData.quality == 5) {
              this.imgQuality.skin =
                "ui_interface_m/ui_atlas_common/M5UI_Common_Iconrarity0" +
                (3 - 1) +
                ".png";
            } else {
              this.imgQuality.skin =
                "ui_interface_m/ui_atlas_common/M5UI_Common_Iconrarity0" +
                (t.itemData.quality - 1) +
                ".png";
            }
          }
        }
      };
      t.prototype.onTap = function () {
        var t, e;
        if (
          (e =
            (t = this === null || this === void 0 ? void 0 : this.data) ===
              null || t === void 0
              ? void 0
              : t.itemData) === null || e === void 0
            ? void 0
            : e.id
        ) {
          a.default.eventMgr.event(1033, [
            this.data.itemData,
            this.data.isBag,
            this.data.object,
          ]);
        }
      };
      return t;
    })(i.default);
    e.default = l;
  });
  t(_l);
  var ml = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(vl);
    var i = o(W);
    var a = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        i.default.initSkin("ui/Dungeon/TowerMonsterIcon", t, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        var t, e, n, o;
        r.prototype.dataChanged_.call(this);
        this.imgIcon.skin =
          (e =
            (t = this === null || this === void 0 ? void 0 : this.data) ===
              null || t === void 0
              ? void 0
              : t.icon) !== null && e !== void 0
            ? e
            : "";
        this.imgBoss.visible =
          (o =
            (n = this === null || this === void 0 ? void 0 : this.data) ===
              null || n === void 0
              ? void 0
              : n.isBoss) !== null && o !== void 0
            ? o
            : false;
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(ml);
  var gl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(W);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.initSkin("ui/Dungeon/TowerNode", t, t);
        t.select = false;
        return t;
      }
      Object.defineProperty(t.prototype, "select", {
        get: function () {
          return this.imgSelect.visible;
        },
        set: function (t) {
          this.imgSelect.visible = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setStyle = function (t) {
        this.imgBg.width =
          this.imgBg.height =
          this.imgSelect.width =
          this.imgSelect.height =
          this.imgLamp.width =
          this.imgLamp.height =
            undefined;
        if (t == 3) {
          this.imgBg.skin =
            "ui_interface_m/ui_atlas_scene_dungeonillusionwindowui/UI_TowerOfIllusion_Img_01Top.png";
          this.imgSelect.skin =
            "ui_interface_m/ui_atlas_scene_dungeonillusionwindowui/UI_TowerOfIllusion_Img_01Top_Select.png";
          this.imgLamp.skin =
            "ui_interface_m/ui_atlas_scene_dungeonillusionwindowui/UI_TowerOfIllusion_Img_01Top_ClearLight.png";
          this.imgBg.pos(42, -66);
          this.imgSelect.pos(42, -74);
          this.imgLamp.pos(42, -66);
        } else {
          this.imgBg.skin =
            "ui_interface_m/ui_atlas_scene_dungeonillusionwindowui/UI_TowerOfIllusion_Img_02Middle1.png";
          this.imgSelect.skin =
            "ui_interface_m/ui_atlas_scene_dungeonillusionwindowui/UI_TowerOfIllusion_Img_02Middle1_Select.png";
          this.imgLamp.skin =
            "ui_interface_m/ui_atlas_scene_dungeonillusionwindowui/UI_TowerOfIllusion_Img_02Middle1_ClearLight.png";
          this.imgBg.pos(58, 0);
          this.imgSelect.pos(52, -11);
          this.imgLamp.pos(70, 30);
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(gl);
  var bl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var p = o(q);
    var r = o(R);
    var i = o(I);
    var a = o(W);
    var s = o(dl);
    var y = o(st);
    var u = o(hl);
    var l = o(_l);
    var _ = o(jo);
    var m = o(_t);
    var f = o(ml);
    var c = o(gl);
    var d = o(V);
    var h = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.viewCache = true;
        a.default.initSkin("ui/Dungeon/TowerSelect", t, t);
        t.initTower();
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.listMonsterIcon.itemRenderer = f.default;
        this.listReward.itemRenderer = l.default;
        this.listFirstReward.itemRenderer = l.default;
        this.btnClose.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickEnter, this);
        this.btnItem.on(XOF.TouchEvent.TAP, this.onClickItem, this);
        this.btnSkill.on(XOF.TouchEvent.TAP, this.onClickSkills, this);
        var t = m.default.getTowerCount();
        this.selectTower(Math.min(p.default.userData.hero.bloodTower + 1, t));
        this.scrollToTower(this.layer);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickEnter, this);
        this.btnItem.off(XOF.TouchEvent.TAP, this.onClickItem, this);
        this.btnSkill.off(XOF.TouchEvent.TAP, this.onClickSkills, this);
        this.layer =
          this.listMonsterIcon.itemRenderer =
          this.listReward.itemRenderer =
          this.listFirstReward.itemRenderer =
            undefined;
      };
      t.prototype.onClickEnter = function () {
        var t = p.default.userData.hero.bloodTower + 1;
        var e = this.layer;
        if (e > t) {
          p.default.eventMgr.event(1055, ["需要先通关前一层"]);
          return;
        }
        var n = u.default.getConsumeUpCount();
        var o = false,
          f;
        if (n < 4) {
          f = s.default.getConsumeList().filter(function (t) {
            return y.default.getItemData(t).level <= p.default.userData.hero.lv;
          });
          if (f.length > n) {
            o = true;
          }
        }
        var r = this;
        function c() {
          p.default.sound.play("QUEST_ACCEPT", {
            completeDestroy: true,
            volume: 0.4,
          });
          p.default.userData.map.enterTower(r.layer);
        }
        if (o) {
          p.default.comm.msgBox({
            text: d.default.tr(206),
            confirm: {
              label: d.default.tr(207),
              callback: function () {
                return c();
              },
              close: true,
            },
            cancel: {
              close: true,
              label: d.default.tr(42),
              callback: function () {
                var t = [];
                var e = [];
                var n = {};
                for (var o in p.default.userData.dungeon.itemSlots) {
                  var r = p.default.userData.dungeon.itemSlots[o];
                  if (p.default.userData.bag.getItemCount(r) > 0) {
                    n[o] = r;
                    t.push(r + "");
                  } else {
                    e.push(o);
                  }
                }
                for (var i = 0, a = e; i < a.length; i++) {
                  var r = a[i];
                  for (var s = 0, u = f; s < u.length; s++) {
                    var l = u[s];
                    if (t.indexOf(l + "") >= 0) continue;
                    n[r] = l + "";
                    t.push(l + "");
                    break;
                  }
                }
                p.default.userData.dungeon
                  .updateItemSet2(n[1], n[2], n[3], n[4])
                  .then(function () {
                    return c();
                  });
              },
            },
          });
        } else {
          c();
        }
      };
      t.prototype.onClickItem = function () {
        p.default.viewMgr.open(i.default.DungeonItemSet);
      };
      t.prototype.onClickSkills = function () {
        p.default.viewMgr.open(i.default.FightSet);
      };
      t.prototype.initTower = function () {
        var t = m.default.getTowerCount();
        var e = 260;
        var n = 0;
        for (var o = t; o >= 1; o--, n++) {
          var r = new c.default();
          r.level = o;
          r.on(XOF.TouchEvent.TAP, this.onClickTower, this, [o, r]);
          r.pos(74, e + n * 112);
          this.gTower.addChild(r);
        }
        {
          var r = new c.default();
          r.setStyle(3);
          r.pos(80, e - 112);
          this.gTower.addChild(r);
        }
        this.gTower.height = n * 112 + e;
      };
      t.prototype.scrollToTower = function (t) {
        var e = m.default.getTowerCount();
        var n = 260;
        var o = e;
        var r = o * 112 + n;
        this.scTower.scrollV = Math.max(
          0,
          r - (t - 1) * 112 - this.scTower.height
        );
      };
      t.prototype.updateView = function () {
        this.ScMonsterIcon.stopAnimation();
        this.ScMonsterIcon.scrollH = 0;
        var t = m.default.getTowerData(this.layer, 1);
        var e = [];
        var n = [];
        var o = [];
        if (t) {
          this.labLayer.text = t.title;
          var r = [];
          var i = [];
          var a = ["soldier", "archer", "special", "boss"];
          for (var s = 1; s < Number.MAX_SAFE_INTEGER; s++) {
            var u = m.default.getTowerData(this.layer, s);
            if (!u) break;
            for (var l = 0, f = a; l < f.length; l++) {
              var c = f[l];
              var p = c == "boss";
              for (var d in u[c]) {
                var h = u[c][d];
                if (p) i.push(h);
                if (r.indexOf(h) >= 0) continue;
                r.push(h);
              }
            }
          }
          r.sort(function (t, e) {
            return i.indexOf(e) - i.indexOf(t);
          });
          e = r.map(function (t) {
            var e;
            return {
              id: t,
              icon:
                (e = _.default.getData(t)) === null || e === void 0
                  ? void 0
                  : e.icon,
              isBoss: i.indexOf(t) >= 0,
            };
          });
          for (var v in t.monsterdrop) {
            n.push({ itemData: y.default.getItemData(parseInt(v)) });
          }
          for (var v in t.first) {
            o.push({
              itemData: y.default.getItemData(parseInt(v)),
              count: t.first[v],
            });
          }
        }
        this.listMonsterIcon.dataProvider = e;
        this.listReward.dataProvider = n;
        this.listFirstReward.dataProvider = o;
      };
      t.prototype.onClickTower = function (t, e) {
        this.selectTower(t);
        p.default.sound.play(
          "CLICK_BUTTON4",
          { completeDestroy: true, overload: true },
          this.hashCode
        );
      };
      t.prototype.selectTower = function (t) {
        var n = this;
        if (this.layer == t) return;
        this.layer = t;
        var o;
        this.gTower.children_.forEach(function (t) {
          var e = n.layer == t.level;
          t.select = e;
          if (e) o = t;
        });
        if (o) this.gTower.setChildIndex(o, this.gTower.numChild - 1);
        this.updateView();
      };
      return t;
    })(r.default);
    e.default = h;
  });
  t(bl);
  var Ol = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t(t, e) {
        var n = this;
        this.firstCharHeight = 0;
        this.charCache = {};
        this.fontName = "FONT" + XOF.hashCode();
        if (typeof t == "string") {
          var o = XOF.loader.get(t);
          if (o) {
            this.texture = o;
          } else {
            XOF.log("图形字体没有预加载:" + t);
            XOF.loader.loadImage(t, undefined, undefined, function (t) {
              n.texture = t;
              n.install();
            });
          }
        } else {
          this.texture = t;
        }
        if (typeof e == "string") {
          this.charList = this.parseConfig(e);
        } else if (e && e.hasOwnProperty("frames")) {
          this.charList = e.frames;
        } else {
          this.charList = {};
        }
        this.install();
      }
      t.prototype.install = function () {
        if (this.texture) {
          this.installToPixi(this.texture);
        }
      };
      t.prototype.installToPixi = function (t) {
        var e = [];
        for (var n in this.charList) {
          var o = this.charList[n];
          e.push(
            "char id=" +
              n.charCodeAt(0) +
              " x=" +
              o.x +
              " y=" +
              o.y +
              " width=" +
              o.w +
              " height=" +
              o.h +
              " xoffset=" +
              o.offX +
              " yoffset=" +
              o.offY +
              " xadvance=" +
              o.sourceW +
              " page=0 chnl=15"
          );
        }
        var r =
          'info face="' +
          this.fontName +
          '" size=32 bold=0 italic=0 charset="" stretchH=100\ncommon lineHeight=32 base=26 pages=1\npage id=0 file="./font/level.png"\nchars count=' +
          e.length +
          "\n" +
          e.join("\n");
        PIXI.BitmapFont.install(r, PIXI.Texture.from(t));
      };
      t.prototype.draw = function (t, e, n, o) {
        var r = 0,
          i = 0;
        for (var a = 0, s = e; a < s.length; a++) {
          var u = s[a];
          var l = this.charList[u];
          if (!l || !this.texture) return null;
          t.$.drawImage(
            this.texture,
            l.x,
            l.y,
            l.w,
            l.h,
            t.x + n + l.offX + r,
            t.y + o + l.offY + i,
            l.w,
            l.h
          );
          r += l.xadvance;
        }
      };
      t.prototype.drawCharacter = function (t, e, n, o) {
        var r = this.charList[e];
        if (!r || !this.texture) return null;
        t.$.drawImage(
          this.texture,
          r.x,
          r.y,
          r.w,
          r.h,
          t.x + n + r.offX,
          t.y + o + r.offY,
          r.w,
          r.h
        );
      };
      t.prototype.getCharacter = function (t) {
        if (!this.charCache[t]) {
          var e = this.charList[t];
          if (!e || !this.texture) return null;
          var n = new PIXI.Texture(
            PIXI.BaseTexture.from(this.texture),
            new PIXI.Rectangle(e.x, e.y, e.w, e.h)
          );
          this.charCache[t] = n;
        }
        return this.charCache[t];
      };
      t.prototype.getWidth = function (t) {
        var e = this.charList[t];
        if (!e) {
          return 0;
        }
        return e.w;
      };
      t.prototype.getHeight = function (t) {
        var e = this.charList[t];
        if (!e) {
          return 0;
        }
        return e.h;
      };
      t.prototype.getWidth2 = function (t) {
        var e = 0;
        for (var n = 0, o = t; n < o.length; n++) {
          var r = o[n];
          var i = this.charList[r];
          if (!i || !this.texture) return null;
          e += i.xadvance;
        }
        return e;
      };
      t.prototype.getConfig = function (t, e) {
        if (!this.charList[t]) {
          return 0;
        }
        return this.charList[t][e];
      };
      t.prototype._getFirstCharHeight = function () {
        if (this.firstCharHeight == 0) {
          for (var t in this.charList) {
            var e = this.charList[t];
            if (e) {
              var n = e.sourceH;
              if (n === undefined) {
                var o = e.h;
                if (o === undefined) {
                  o = 0;
                }
                var r = e.offY;
                if (r === undefined) {
                  r = 0;
                }
                n = o + r;
              }
              if (n <= 0) {
                continue;
              }
              this.firstCharHeight = n;
              break;
            }
          }
        }
        return this.firstCharHeight;
      };
      t.prototype.parseConfig = function (t) {
        t = t.split("\r\n").join("\n");
        var e = t.split("\n");
        var n = this.getConfigByKey(e[3], "count");
        var o = {};
        for (var r = 4; r < 4 + n; r++) {
          var i = e[r];
          var a = String.fromCharCode(this.getConfigByKey(i, "id"));
          var s = {};
          o[a] = s;
          s["x"] = this.getConfigByKey(i, "x");
          s["y"] = this.getConfigByKey(i, "y");
          s["w"] = this.getConfigByKey(i, "width");
          s["h"] = this.getConfigByKey(i, "height");
          s["offX"] = this.getConfigByKey(i, "xoffset");
          s["offY"] = this.getConfigByKey(i, "yoffset");
          s["xadvance"] = this.getConfigByKey(i, "xadvance");
        }
        return o;
      };
      t.prototype.getConfigByKey = function (t, e) {
        var n = t.split(" ");
        for (var o = 0, r = n.length; o < r; o++) {
          var i = n[o];
          if (e == i.substring(0, e.length)) {
            var a = i.substring(e.length + 1);
            return parseInt(a);
          }
        }
        return 0;
      };
      t.prototype.hasCharacter = function (t) {
        if (!this.charList[t]) {
          return false;
        }
        return true;
      };
      t.prototype.measureText = function (t) {
        var e = this.getWidth2(t.split(""));
        return { width: e };
      };
      return t;
    })();
    e.default = n;
  });
  t(Ol);
  var wl = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(dt);
    var l = n(x);
    var r = n(Ol);
    var f = n(we);
    var c = n(w);
    var i = (function () {
      function u() {}
      u.textSplite = function (t, e, n) {
        var o;
        if (n instanceof f.default) {
          o = f.default;
        } else {
          o = XOF.Label;
        }
        if (t) {
          if (
            t.indexOf("\n") >= 0 ||
            t.indexOf("\r") >= 0 ||
            o.measureText(n, t).width > e
          ) {
            var r = [];
            var i = "";
            var a = t.split("");
            for (var s = 0, u = a; s < u.length; s++) {
              var l = u[s];
              if (l == "\n") {
                r.push(i);
                i = "";
              } else if (l == "\r");
              else if (o.measureText(n, i + l).width > e) {
                r.push(i);
                i = l;
              } else {
                i += l;
              }
            }
            if (i.length) {
              r.push(i);
            }
            return r;
          }
        }
        return [t];
      };
      u.stratDarg = function (t, e, n, o) {
        this.dragBarWidth = e;
        this.dragBarHeight = n;
        this.dragRange = o;
        this.onDragBegin(t);
      };
      u.stopDrag = function (t) {
        t.off(XOF.TouchEvent.TOUCH_BEGIN, this.onDragBegin, this);
        this.onDragEnd(t);
      };
      u.onDragBegin = function (t) {
        var e = t.localToGlobal(0, 0);
        this.dragStartX = e.x;
        this.dragStartY = e.y;
        this.dragOffsetX = XOF.stage.mouseX - e.x;
        this.dragOffsetY = XOF.stage.mouseY - e.y;
        this.dragging = true;
        XOF.stage.on(XOF.TouchEvent.TOUCH_MOVE, this.onDragMove, this, [t]);
        t.on(XOF.TouchEvent.TOUCH_END, this.onDragEnd, this, [t]);
        t.on(XOF.TouchEvent.TOUCH_CANCEL, this.onDragEnd, this, [t]);
        XOF.stage.on(XOF.TouchEvent.TOUCH_END, this.onDragEnd, this, [t]);
        XOF.stage.on(XOF.TouchEvent.TOUCH_CANCEL, this.onDragEnd, this, [t]);
      };
      u.onDragMove = function (t) {
        if (this.dragging) {
          var e = void 0,
            n = void 0;
          {
            var o = t.parent.globalToLocal(
                XOF.stage.mouseX - this.dragOffsetX,
                XOF.stage.mouseY - this.dragOffsetY
              ),
              r = o.x,
              i = o.y;
            e = r;
            n = c.default.rangeFixed(
              i,
              this.dragRange.y,
              this.dragRange.y + this.dragRange.height - this.dragBarHeight
            );
          }
          var a = this.dragRange.width > 0 ? e : t.x;
          var s = this.dragRange.height > 0 ? n : t.y;
          t.pos(a, s);
          t.event(l.default.SCROLLBAR_CHANGE);
        }
      };
      u.onDragEnd = function (t) {
        this.dragStartX = this.dragStartY = 0;
        this.dragging = false;
        XOF.stage.off(XOF.TouchEvent.TOUCH_MOVE, this.onDragMove, this);
        t.off(XOF.TouchEvent.TOUCH_END, this.onDragEnd, this);
        t.off(XOF.TouchEvent.TOUCH_CANCEL, this.onDragEnd, this);
        XOF.stage.off(XOF.TouchEvent.TOUCH_END, this.onDragEnd, this);
        XOF.stage.off(XOF.TouchEvent.TOUCH_CANCEL, this.onDragEnd, this);
      };
      u.localToParent = function (t, e, n, o) {
        if (e === void 0) {
          e = 0;
        }
        if (n === void 0) {
          n = 0;
        }
        var r = 0,
          i = 0;
        if (o.contains(t)) {
          var a = t.localToParent(e, n);
          r = a.x;
          i = a.y;
          var s = t.parent;
          if (s && s != o) {
            a = u.localToParent(s, r, i, o);
            r = a.x;
            i = a.y;
          }
        } else {
          r = e;
          i = n;
        }
        return { x: r, y: i };
      };
      u.getBitmapFont = function (t, e) {
        if (!this.fonts[t]) {
          this.fonts[t] = new r.default(t, o.default.font[e]);
        }
        return this.fonts[t];
      };
      u.relativeSet = function (t, e, n, o, r, i, a, s, u, l) {
        if (e === void 0) {
          e = NaN;
        }
        if (n === void 0) {
          n = NaN;
        }
        if (o === void 0) {
          o = NaN;
        }
        if (r === void 0) {
          r = NaN;
        }
        if (i === void 0) {
          i = NaN;
        }
        if (a === void 0) {
          a = NaN;
        }
        s = s || t.width;
        u = u || t.height;
        l = l || t.parent;
        if (l && s > 0 && u > 0) {
          var f = l.width,
            c = l.height;
          if (!isNaN(e)) {
            e = e || 0;
            t.x = (f - s) / 2 + e;
          } else if (!isNaN(o) || !isNaN(r)) {
            if (!isNaN(i) && !isNaN(a)) {
              t["setWidth_"](f - o - r, false);
              t.x = i;
            } else if (!isNaN(o)) {
              t.x = o;
            } else if (!isNaN(r)) {
              t.x = f - s - r;
            }
          }
          if (!isNaN(n)) {
            n = n || 0;
            t.y = (c - u) / 2 + n;
          } else if (!isNaN(i) || !isNaN(a)) {
            if (!isNaN(i) && !isNaN(a)) {
              t["setHeight_"](c - i - a, false);
              t.y = i;
            } else if (!isNaN(i)) {
              t.y = i;
            } else if (!isNaN(a)) {
              t.y = c - u - a;
            }
          }
        } else {
          XOF.log("不存在父元素");
        }
      };
      u.dragStartX = 0;
      u.dragStartY = 0;
      u.dragOffsetX = 0;
      u.dragOffsetY = 0;
      u.dragging = false;
      u.fonts = {};
      return u;
    })();
    e.default = i;
  });
  t(wl);
  var Al = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var b = a(dt);
    var s = a($);
    var p = a(q);
    var u = a(R);
    var d = a(I);
    var l = a(W);
    var O = a(Se);
    var w = a(Ce);
    var f = a(wl);
    var c = a(Q);
    var h = i(Zu);
    var v = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.mapItemCount = 3;
        t.viewCache = true;
        t.touchThrough = false;
        l.default.initSkin("ui/M_Controler/MapSelect", t, t);
        t.mapItemCount = t.items.numChild;
        t.fullview = true;
        t.size(s.default.width, s.default.height);
        t.imgBlack.size(t.width, t.height);
        t.imgBox.size(t.width, t.height);
        f.default.relativeSet(t.imgBox, 0, 0);
        return t;
      }
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.btnBack.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnStart.off(XOF.TouchEvent.TAP, this.onClickStart, this);
        c.default.removeTweens(this.imgTips);
        for (var t = 0; t < this.mapItemCount; t++) {
          var e = this.getItemAt(t);
          e.off(XOF.TouchEvent.TAP, this.onClickItem, this);
          c.default.removeTweens(e);
        }
        this.maps = undefined;
      };
      t.prototype.onOpen = function (t) {
        if (t === void 0) {
          t = 1001;
        }
        o.prototype.onOpen.call(this);
        this.gPanel.visible = false;
        this.dots.visible = false;
        this.selectIndex = this.areaId = undefined;
        this.areaId = t;
        this.btnBack.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnStart.on(XOF.TouchEvent.TAP, this.onClickStart, this);
        for (var e = 0; e < this.mapItemCount; e++) {
          var n = this.getItemAt(e);
          n.on(XOF.TouchEvent.TAP, this.onClickItem, this, [e]);
          n.touchEnabled = false;
        }
        p.default.eventMgr.event(1009);
        this.dots.children_.forEach(function (t) {
          return (t.visible = false);
        });
        this.setMap(t);
        this.updateView();
      };
      t.prototype.updateView = function () {
        this.updateMapList();
      };
      t.prototype.onLoaded = function () {
        var t = this;
        this.imgLeft.visible =
          this.imgRight.visible =
          this.gPanel.visible =
            true;
        this.imgTips.alpha = 0;
        c.default
          .get(this.imgTips)
          .to({ alpha: 1 }, 400)
          .wait(300)
          .to({ alpha: 0 }, 400)
          .call(function () {
            return (t.dots.visible = true);
          })
          .remove();
        for (var e = 0; e < this.mapItemCount; e++) {
          var n = this.getItemAt(e);
          n.alpha = 0;
          c.default
            .get(n)
            .wait(1100)
            .to({ alpha: 1 }, 500)
            .set({ touchEnabled: true })
            .remove();
        }
        this.imgBg.width = this.imgBg.height = undefined;
        var o = XOF.loader.get(this.imgBg.skin);
        var r = this.gPanel.width / 2;
        if (o) {
          var i = this.height / o.height;
          this.imgBg.size(o.width * i, this.height);
          r = (this.gPanel.width - this.imgBg.width) / 2;
          this.imgBg.x = r;
        }
        this.imgLeft.x = r - 160;
        this.imgRight.x = r + this.imgBg.width + 160;
      };
      t.prototype.setMap = function (t) {
        var e, n, o, r, i, a, s;
        var u = [];
        var l = [
          {
            url: "worldmap/selectdungeon02.img/191.png",
            type: w.default.IMAGE,
          },
        ];
        this.areaId = t;
        for (var f in b.default.conf.dungeonarea) {
          var c = b.default.conf.dungeonarea[f];
          if (!c.show) continue;
          if (c.areaId == this.areaId) {
            u.push(c);
          }
        }
        u.sort(function (t, e) {
          return t.sort - e.sort;
        });
        this.maps = u;
        var p = this.maps.length;
        for (var d = 0; d < this.mapItemCount; d++) {
          var h = this.getItemAt(d);
          if (d < p) {
            var v = this.maps[d];
            l.push({ url: v.img, type: w.default.IMAGE });
            h.imgIcon.skin = v.img;
            h.labLv.text =
              "l" +
              ((n =
                (e = b.default.conf.dungeon) === null || e === void 0
                  ? void 0
                  : e[v.mapId]) === null || n === void 0
                ? void 0
                : n.level);
            var y = b.default.conf.dungeonselectbox[v.box];
            if (y === null || y === void 0 ? void 0 : y.img)
              l.push({ url: y.img, type: w.default.IMAGE });
            h.setBoxType(v.box);
            var _ = (o = v.pos) === null || o === void 0 ? void 0 : o[0];
            var m = (r = v.pos) === null || r === void 0 ? void 0 : r[1];
            h.x = _ + h.pivotX;
            h.y = m + h.pivotY + 20;
            var g = this.dots.getChildAt(d);
            if (g) {
              g.visible = true;
              g.x = h.x;
              g.y = h.y + 40;
            }
          }
          h.visible = d < p;
        }
        this.imgBg.skin =
          ((s =
            (a =
              (i = b.default.conf) === null || i === void 0
                ? void 0
                : i.dungeonareabg) === null || a === void 0
              ? void 0
              : a[this.areaId]) === null || s === void 0
            ? void 0
            : s.bg) || "interface/0.png";
        l.push({ url: this.imgBg.skin, type: w.default.IMAGE });
        O.default.checkLoaded(l, true, this.onLoaded, this);
      };
      t.prototype.getItemAt = function (t) {
        return this["map" + t];
      };
      t.prototype.updateMapList = function () {
        var t = 1.3;
        for (var e = 0; e < this.mapItemCount; e++) {
          var n = this.getItemAt(e);
          n.scaleX = n.scaleY = this.selectIndex == e ? t : t * 0.85;
          n.imgLight.visible = this.selectIndex == e;
        }
      };
      t.prototype.onClickItem = function (t) {
        if (this.selectIndex == t) {
          this.onClickStart();
        } else {
          this.selectIndex = t;
          this.updateMapList();
        }
      };
      t.prototype.onClickStart = function () {
        var t, e, n, o, r, i, a;
        if (this.selectIndex >= 0) {
          var s =
            (t = this.maps) === null || t === void 0
              ? void 0
              : t[this.selectIndex];
          if (s) {
            if (s.open && s.mapId) {
              var u =
                (e = b.default.conf.dungeon) === null || e === void 0
                  ? void 0
                  : e[s.mapId];
              var l =
                (n = u === null || u === void 0 ? void 0 : u.level) !== null &&
                n !== void 0
                  ? n
                  : 1;
              if (l > p.default.userData.hero.lv) {
                p.default.comm.mtr(245, l);
                return;
              }
              switch (s.mapId) {
                case h.default.Test:
                  p.default.userData.map.enterTest();
                  break;
                case 92e6:
                  p.default.viewMgr.open(d.default.HellTower);
                  break;
                case h.default.TowerOfUltimate:
                  p.default.userData.map.enterTowerOfUnlimited();
                  break;
                case h.default.Tower:
                  p.default.viewMgr.open(d.default.TowerSelect);
                  break;
                default:
                  var f = u === null || u === void 0 ? void 0 : u.type;
                  if (f == h.DungeonType.Line) {
                    p.default.userData.map.enterDungeonLine(s.mapId);
                  } else if (f == h.DungeonType.Hell) {
                    var c =
                      (r =
                        (o = b.default.conf.map) === null || o === void 0
                          ? void 0
                          : o.map) === null || r === void 0
                        ? void 0
                        : r[
                            (a =
                              (i =
                                u === null || u === void 0
                                  ? void 0
                                  : u.define) === null || i === void 0
                                ? void 0
                                : i[0]) === null || a === void 0
                              ? void 0
                              : a[0]
                          ];
                    if (c === null || c === void 0 ? void 0 : c.city) {
                      p.default.userData.map.enterHell(s.mapId, c.city);
                    } else {
                      XOF.log("未定义的副本入场", s.mapId);
                    }
                  } else {
                    XOF.log("未定义的副本入场", s.mapId);
                  }
              }
            } else {
              p.default.comm.mtr(243);
            }
          } else {
            XOF.log("地图索引异常无法进入.");
          }
        } else {
          p.default.comm.mtr(244);
        }
      };
      return t;
    })(u.default);
    e.default = v;
  });
  t(Al);
  var El = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(D);
    var d = a(q);
    var h = a(I);
    var u = a(fl);
    var v = a(dt);
    var l = a(cl);
    var f = a(pl);
    var c = a(bl);
    var y = a(mt);
    var p = i(Zu);
    var _ = a(V);
    var m = a(Al);
    var g = a(yt);
    var b = a(_t);
    var O = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        d.default.viewMgr.register(h.default.Map, u.default);
        d.default.viewMgr.register(h.default.DungeonPaused, l.default);
        d.default.viewMgr.register(h.default.DungeonStay, f.default);
        d.default.viewMgr.register(h.default.TowerSelect, c.default);
        d.default.viewMgr.register(h.default.DungeonSelect, m.default);
        d.default.eventMgr.on(1003, t.onMapTo, t);
        d.default.eventMgr.on(1017, t.onDungeonEnter, t);
        d.default.eventMgr.on(1025, t.onDungeonRoundUpdate, t);
        d.default.eventMgr.on(1018, t.onMapEnter, t);
        d.default.eventMgr.on(1014, t.onDungeonReturn, t);
        return t;
      }
      t.prototype.onStart = function () {
        d.default.viewMgr.open(h.default.Map);
      };
      t.prototype.onMapTo = function (t) {
        if (!t) return;
        var e = t.id;
        if (!e) return;
        var n = v.default.conf.map.map[e];
        if (!n) {
          XOF.log("不存在的地图数据");
          return;
        }
        var o = d.default.viewMgr.getOpenView(h.default.Map);
        if (!o) return;
        o.toMap(t);
      };
      t.prototype.onMapEnter = function (t, e, n, o) {
        var r = this;
        var i = d.default.viewMgr.getOpenView(h.default.Map);
        var a = i.hero;
        i.once(1006, function () {
          d.default.eventMgr.event(1031);
          d.default.eventMgr.event(1024);
          d.default.eventMgr.event(1034);
          d.default.eventMgr.event(1044);
        });
        r.onMapTo({ id: t, heroX: e, heroY: n, dungeonX: 0, dungeonY: 0 });
        i.updateHero(true);
        a.direction = o;
        y.default.updateFramerate();
      };
      t.prototype.onDungeonEnter = function () {
        var t;
        var e, n, o;
        var r = this;
        var i = d.default.userData.map;
        var a = d.default.viewMgr.getOpenView(h.default.Map);
        var s = a.hero;
        a.once(1006, function () {
          d.default.eventMgr.event(1031);
          d.default.eventMgr.event(1024);
          d.default.eventMgr.event(1034);
          d.default.eventMgr.event(1044);
        });
        var u = 150,
          l = 250,
          f = 1;
        if (
          (e = v.default.conf.map.map[i.id]) === null || e === void 0
            ? void 0
            : e.start
        ) {
          (t =
            (n = v.default.conf.map.map[i.id].start) !== null && n !== void 0
              ? n
              : [150, 250]),
            (u = t[0]),
            (l = t[1]),
            (f = t[2]);
        }
        var c = { id: i.id, heroX: u, heroY: l, dungeonX: 0, dungeonY: 0 };
        var p = true;
        if (i.lastId && i.direction >= 0) {
          c.dungeonX = i.dungeonCurPos[0];
          c.dungeonY = i.dungeonCurPos[1];
          c.oid = i.lastId;
          c.pathgate = i.direction;
          delete c.heroX;
          delete c.heroY;
          f = 0;
          p = false;
        } else if (
          (o = i === null || i === void 0 ? void 0 : i.dungeonStart) === null ||
          o === void 0
            ? void 0
            : o.length
        ) {
          c.dungeonX = i.dungeonStart[0];
          c.dungeonX = i.dungeonStart[1];
        }
        r.onMapTo(c);
        a.updateHero(p);
        if (f) s.direction = f;
        a.curScene.initLevel();
        d.default.sound.play("LADDER_DOWN", { completeDestroy: true });
        y.default.updateFramerate();
      };
      t.prototype.onDungeonRoundUpdate = function () {
        var e = d.default.userData.map;
        function t() {
          if (e.currentScreen() == 2) {
            d.default.eventMgr.event(1024);
            d.default.eventMgr.event(1026);
          }
        }
        function n() {
          if (e.currentScreen() == 2) {
            var t = d.default.viewMgr.getOpenView(h.default.Map);
            t.curScene.initLevel();
          }
        }
        if (
          b.default.getDungeonTypeByDungeonId(e.dungeonId) == p.DungeonType.Hell
        ) {
          n();
        } else if (
          e.dungeonId == p.default.Tower ||
          d.default.userData.map.dungeonId == p.default.TowerOfUltimate
        ) {
          d.default.timerMgr.delay(800, 1, function () {
            return t();
          });
          d.default.timerMgr.delay(2e3, 1, function () {
            return n();
          });
        } else {
          var o = b.default.getDungeonTypeByDungeonId(e.dungeonId);
          if (o == "[dungeon line]") {
            var r = e.getDungeonLineRoundByXY(
              e.dungeonCurPos[0],
              e.dungeonCurPos[1]
            );
            if (!(r >= 0)) {
              XOF.log("无法获取到前往过的地图", e.dungeonId, r);
              return;
            }
            var i = b.default.getMapByCityandTown(e.dungeonId, r);
            if (i) {
              e.id = i.id;
              this.onDungeonEnter();
            } else {
              XOF.log("异常的地图参数", e.dungeonId, r);
            }
          } else {
            XOF.log("异常的地图类型", o);
          }
        }
      };
      t.prototype.onDungeonReturn = function (t, e, n, o) {
        {
          var r = d.default.viewMgr.getOpenView(h.default.Map);
          var i = r.hero;
          if (i) {
            i.key.allRelease();
            i.reset();
          }
          r.cleanScenes();
        }
        d.default.viewMgr.close(h.default.MonsterHp);
        g.default.release("RoleDamageLabel");
        g.default.release("FigureEffect");
        g.default.release("AttributeVo");
        g.default.release("ColorLabel2");
        {
          if (t) {
            e =
              Math.abs(y.default.map.lastX - e) <= 10 ? y.default.map.lastX : e;
            n =
              Math.abs(y.default.map.lastY - n) <= 10 ? y.default.map.lastY : n;
            d.default.eventMgr.event(1018, [t, e, n, o]);
          }
          y.default.updateFramerate();
          d.default.eventMgr.event(1031);
        }
      };
      t.prototype.enterCity = function () {
        function t(t) {
          var e, n;
          var o =
              (n =
                (e = v.default.conf.map.map[t]) === null || e === void 0
                  ? void 0
                  : e.start) !== null && n !== void 0
                ? n
                : [150, 250],
            r = o[0],
            i = o[1],
            a = o[2];
          d.default.userData.map.enterMap(t, r, i, a);
        }
        d.default.comm.msgBox({
          text: _.default.tr(241),
          confirm: {
            callback: function () {
              return t(95e6);
            },
            close: true,
          },
          cancel: {},
        });
      };
      return t;
    })(s.default);
    e.default = O;
  });
  t(El);
  var Tl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var i = o(q);
    var a = o(I);
    var s = o($);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.size(s.default.width, s.default.height);
        return t;
      }
      t.prototype.onOpened = function () {
        e.prototype.onOpened.call(this);
        if (i.default.isMobileUI) {
          i.default.viewMgr.open(a.default.mHome);
        } else {
          i.default.viewMgr.open(a.default.Bottom);
        }
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(Tl);
  var Cl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.size(56, 56);
        t.lab = new XOF.Label();
        t.lab.textAlign = "center";
        t.lab.pos(t.width / 2, t.height / 2 - 6);
        t.lab.stroke = 1;
        t.lab.strokeColor = "#000000";
        t.addChild(t.lab);
        t.value = t.max = 0;
        t.ratio = 1;
        t.on(XOF.TouchEvent.TOUCH_ENTER, t.onTouchEnter, t);
        t.on(XOF.TouchEvent.TOUCH_OUT, t.onTouchOut, t);
        return t;
      }
      t.prototype.onTouchEnter = function () {
        this.mouseIn = true;
        this.updateText();
      };
      t.prototype.onTouchOut = function () {
        this.mouseIn = false;
        this.updateText();
      };
      Object.defineProperty(t.prototype, "skin", {
        get: function () {
          return this.skin_ || this.texture_;
        },
        set: function (t) {
          if (t == this.skin_) return;
          this.skin_ = t;
          if (this.skin == undefined) {
            this.texture_ = undefined;
          } else {
            if (XOF.player.preLoadImage) XOF.loader.loadImage(this.skin_);
            var e = XOF.loader.get(this.skin_);
            if (e) {
              this.texture_ = e;
            }
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.draw = function (t) {
        o.prototype.draw.call(this, t);
        if (this.skin_ || this.texture_) {
          if (!this.texture_) {
            this.texture_ = XOF.loader.get(this.skin_);
          }
          var e = 1 - this.ratio;
          var n = this.height;
          if (this.texture_) {
            t.draw(this.texture_, 0, e * n, n, n, "scale", [0, +e * n, n, n]);
          }
        }
      };
      t.prototype.setValue = function (t, e) {
        this.max = e || this.max;
        this.value = t;
        var n = 0;
        if (this.max == 0 || this.value < 0) {
          n = 0;
        } else if (this.value >= this.max) {
          n = 100;
        } else {
          var o = r.default.toFixed((this.value / this.max) * 100, 1);
          n = o <= 0 ? 0.1 : o;
        }
        this.ratio = n / 100;
        this.updateText();
      };
      t.prototype.updateText = function () {
        this.lab.text = this.mouseIn
          ? this.value + "/" + this.max
          : r.default.toFixed(this.ratio * 100, 1) + "%";
      };
      t.prototype.setSkin = function (t) {
        this.skin = t;
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(Cl);
  var Pl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.on(XOF.TouchEvent.TOUCH_BEGIN, t.$onBegin, t);
        t.on(XOF.TouchEvent.TOUCH_ENTER, t.onHover_, t);
        t.on(XOF.TouchEvent.TOUCH_OUT, t.onUnHover_, t);
        return t;
      }
      Object.defineProperty(t.prototype, "disabled", {
        get: function () {
          return this.$disabled;
        },
        set: function (t) {
          this.disabledTap = this.$disabled = t;
          this.$updateState();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "selected", {
        get: function () {
          return this.$selected || this.$selected2;
        },
        set: function (t) {
          this.$selected = t;
          this.$updateState();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "normalImage", {
        get: function () {
          return this.$normalImage;
        },
        set: function (t) {
          if (this.$normalImage != t) {
            this.setStateImage(0, t);
          }
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "hoverImage", {
        get: function () {
          return this.$hoverImage;
        },
        set: function (t) {
          if (this.$hoverImage != t) {
            this.setStateImage(1, t);
          }
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "pressImage", {
        get: function () {
          return this.$pressImage;
        },
        set: function (t) {
          if (this.$pressImage != t) {
            this.setStateImage(2, t);
          }
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "disabledImage", {
        get: function () {
          return this.$disabledImage;
        },
        set: function (t) {
          if (this.$disabledImage != t) {
            this.setStateImage(3, t);
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.$updateState = function () {
        if (this.disabled) {
          this.skin = this.disabledImage || this.normalImage;
        } else if (this.selected) {
          this.skin = this.pressImage || this.normalImage;
        } else if (this.$hover) {
          this.skin = this.hoverImage || this.normalImage;
        } else {
          this.skin = this.normalImage;
        }
      };
      t.prototype.setImages = function (t, e, n, o) {
        this.skin = undefined;
        this.setStateImage(0, t);
        this.setStateImage(1, e);
        this.setStateImage(2, n);
        this.setStateImage(3, o);
      };
      t.prototype.setStateImage = function (t, e) {
        switch (t) {
          case 1:
            this.$hoverImage = e;
            break;
          case 2:
            this.$pressImage = e;
            break;
          case 3:
            this.$disabledImage = e;
            break;
          default:
            this.$normalImage = e;
        }
        e && XOF.loader.loadImage(e, undefined, undefined, this.onLoaded, this);
        this.$updateState();
      };
      t.prototype.onLoaded = function () {
        if (this.normalImage) if (!XOF.loader.get(this.normalImage)) return;
        if (this.hoverImage) if (!XOF.loader.get(this.hoverImage)) return;
        if (this.pressImage) if (!XOF.loader.get(this.pressImage)) return;
        if (this.disabledImage) if (!XOF.loader.get(this.disabledImage)) return;
        this.event(XOF.Event.COMPLETE);
      };
      t.prototype.$onBegin = function () {
        this.$selected2 = true;
        this.$updateState();
        this.on(XOF.TouchEvent.TOUCH_END, this.onEnd_, this);
        this.on(XOF.TouchEvent.TOUCH_CANCEL, this.onEnd_, this);
        this.on(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, this.onEnd_, this);
        this.on(XOF.TouchEvent.TAP, this.onTap, this);
      };
      t.prototype.onEnd_ = function () {
        this.$selected2 = false;
        this.$updateState();
      };
      t.prototype.onHover_ = function () {
        if (!this.$hover) {
          if (this.enterSound)
            r.default.sound.play(this.enterSound, undefined, this);
        }
        this.$hover = true;
        this.$updateState();
      };
      t.prototype.onUnHover_ = function () {
        this.$hover = false;
        this.$updateState();
      };
      t.prototype.onTap = function () {
        XOF.stage.event("CLICK_BUTTON");
        if (this.clickSound) {
          r.default.sound.play(this.clickSound, undefined, this);
        }
        if (this.parent) {
          this.parent.event("group_change", [this]);
        }
      };
      return t;
    })(XOF.Image);
    e.default = i;
  });
  t(Pl);
  var jl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (e) {
      n(k, e);
      function k() {
        var t = e.call(this) || this;
        t.$textLines = [];
        t.$lineHeights = [];
        t.$textLinesChanged = false;
        t.$textOffsetX = 0;
        t.$textOffsetY = 0;
        t.$textStartX = 0;
        t.$textStartY = 0;
        t.$letterSpacing = t.$lineSpeacing = 0;
        t.$textAlign = "left";
        t.$vAlign = "top";
        return t;
      }
      k.prototype.$initRenderer = function () {
        var t = Object.keys(PIXI.BitmapFont.available)[0];
        this.$renderer = new PIXI.BitmapText("", { fontName: t });
      };
      Object.defineProperty(k.prototype, "text", {
        get: function () {
          return this.text_;
        },
        set: function (t) {
          if (t == this.text_) return;
          this.text_ = t;
          this.$textLinesChanged = true;
          this.font_ && this.text_ && this.$setText(this.text_);
          this.$renderer.text = t;
          this.$renderUpdate();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(k.prototype, "font", {
        get: function () {
          return this.font_;
        },
        set: function (t) {
          var e;
          if (t == this.font_) return;
          this.font_ = t;
          if (
            (e = this === null || this === void 0 ? void 0 : this.font_) ===
              null || e === void 0
              ? void 0
              : e.fontName
          )
            this.$renderer.fontName = this.font_.fontName;
          this.font_ && this.text_ && this.$setText(this.text_);
          this.$renderUpdate();
          this.$textLinesChanged = true;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(k.prototype, "textAlign", {
        get: function () {
          return this.$textAlign;
        },
        set: function (t) {
          if (t == this.textAlign) return;
          this.$textAlign = t;
          this.$renderUpdate();
          this.$textLinesChanged = true;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(k.prototype, "vAlign", {
        get: function () {
          return this.$vAlign;
        },
        set: function (t) {
          if (t == this.vAlign) return;
          this.$vAlign = t;
          this.$renderUpdate();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(k.prototype, "letterSpacing", {
        get: function () {
          return this.$letterSpacing;
        },
        set: function (t) {
          if (this.$letterSpacing == t) return;
          this.$letterSpacing = t;
          this.$renderer.letterSpacing = t;
          this.$textLinesChanged = true;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(k.prototype, "lineSpeacing", {
        get: function () {
          return this.$lineSpeacing;
        },
        set: function (t) {
          if (this.$lineSpeacing == t) return;
          this.$lineSpeacing = t;
          this.$textLinesChanged = true;
        },
        enumerable: false,
        configurable: true,
      });
      k.prototype.$mesure = function () {
        if (!this.$textLinesChanged) return this.$textLines;
        var t = this.text;
        var e = this.font;
        var n = [];
        this.$textLines = n;
        if (!e || !t) return n;
        this.$textLinesChanged = false;
        var o = 0;
        var r = 0;
        var i = 0;
        var a = 0;
        var s = !isNaN(this.width_);
        var u = this.width_;
        var l = this.height_;
        var f = [];
        this.$textLinesWidth = f;
        var c = [];
        this.$lineHeights = c;
        var p = e._getFirstCharHeight();
        var d = Math.ceil(p * k.EMPTY_FACTOR);
        var h = t.split(/(?:\r\n|\r|\n)/);
        var v = h.length;
        var y = this.$letterSpacing;
        var _ = this.$lineSpeacing;
        var m;
        var g;
        var b;
        var O;
        for (var w = 0; w < v; w++) {
          var A = h[w];
          var E = A.length;
          b = 0;
          O = 0;
          m = true;
          g = false;
          for (var T = 0; T < E; T++) {
            if (!m) {
              O += y;
            }
            var C = A.charAt(T);
            var P = void 0;
            var j = void 0;
            if (!e.hasCharacter(C)) {
              if (C == " ") {
                P = d;
                j = p;
              } else {
                if (m) {
                  m = false;
                }
                continue;
              }
            } else {
              P = e.getConfig(C, "sourceW") || e.getWidth(C) || 0;
              j = e.getConfig(C, "sourceH") || e.getHeight(C) || 0;
            }
            if (m) {
              m = false;
            }
            if (s && T > 0 && O + P > u) {
              if (!S(A.substring(0, T))) break;
              A = A.substring(T);
              E = A.length;
              T = 0;
              if (T == E - 1) {
                O = P;
              } else {
                O = e.getConfig(C, "xadvance") || P;
              }
              b = j;
              continue;
            }
            if (T == E - 1) {
              O += P;
            } else {
              O += e.getConfig(C, "xadvance") || P;
            }
            b = Math.max(j, b);
          }
          if (l && w > 0 && r > l) {
            break;
          }
          g = true;
          if (!S(A)) break;
        }
        function S(t) {
          if (l && n.length > 0 && r > l) {
            return false;
          }
          r += b + _;
          if (!m && !g) {
            O -= y;
          }
          n.push(t);
          c.push(b);
          f.push(O);
          o = Math.max(O, o);
          return true;
        }
        r -= _;
        this.$textWidth = o;
        this.$textHeight = r;
        this.$textOffsetX = i;
        this.$textOffsetY = a;
        this.$textStartX = 0;
        this.$textStartY = 0;
        var M;
        if (u > o) {
          M = this.textAlign;
          if (M == "right") {
            this.$textStartX = u - o;
          } else if (M == "center") {
            this.$textStartX = Math.floor((u - o) / 2);
          }
        }
        return n;
      };
      k.prototype.$setText = function (t) {
        var u = this;
        var e;
        var l = [];
        if (t && (t.indexOf("\n") >= 0 || t.indexOf("\r") >= 0)) {
          e = t.split(/(?:\r\n|\r|\n)/);
        } else {
          e = [t];
        }
        var f = this.width_;
        if (f) {
          e.forEach(function (t) {
            if (u.font_.measureText(t).width > f) {
              var e = t.split("");
              var n = "";
              var o = 0;
              for (var r = 0, i = e; r < i.length; r++) {
                var a = i[r];
                var s = u.font_.measureText(a).width;
                if (o + s > f) {
                  if (o == 0) {
                    l.push(n);
                  } else {
                    l.push(n);
                    n = a;
                    o = 0;
                  }
                } else {
                  n += a;
                }
                o += s;
              }
              if (n) l.push(n);
            } else {
              l.push(t);
            }
          });
        } else l = e;
        this.texts = l;
      };
      k.prototype.$renderUpdate = function () {
        if (this.texts) {
          this.$renderer.scale.set(this.scaleX_, this.scaleY_);
          this.$renderer.text = this.texts.join("\n");
          var t = this.x_ || 0,
            e = this.y_ || 0,
            n = this.width * this.scaleX_ || 0,
            o = this.height * this.scaleY_ || 0;
          var r = Math.floor(n - this.$renderer.width);
          if (this.textAlign == "right") {
            t += r;
          } else if (this.textAlign == "center") {
            t += r / 2;
          }
          var i = o - this.$renderer.height;
          if (this.vAlign == "bottom") {
            e += i;
          } else if (this.vAlign == "middle") {
            e += i / 2;
          }
          this.$renderer.position.set(t, e);
        }
      };
      k.EMPTY_FACTOR = 0.33;
      return k;
    })(XOF.Sprite);
    e.default = o;
  });
  t(jl);
  var Sl = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(w);
    var i = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.size(625, 20);
        t.touchThrough = false;
        var e = (t.img = new XOF.Image());
        e.fillMode = "repeat";
        t.addChild(e);
        t.lab = new XOF.Label();
        t.lab.textAlign = "center";
        t.lab.pos(t.width / 2, 4 / 2 - 6);
        t.lab.stroke = 1;
        t.lab.strokeColor = "#000000";
        t.addChild(t.lab);
        t.on(XOF.TouchEvent.TOUCH_ENTER, t.onTouchEnter, t);
        t.on(XOF.TouchEvent.TOUCH_OUT, t.onTouchOut, t);
        return t;
      }
      t.prototype.onTouchEnter = function () {
        this.mouseIn = true;
        this.updateText();
      };
      t.prototype.onTouchOut = function () {
        this.mouseIn = false;
        this.updateText();
      };
      Object.defineProperty(t.prototype, "skin", {
        set: function (t) {
          this.img.skin = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setValue = function (t, e) {
        this.max = e || this.max;
        this.value = t;
        var n = 0;
        if (this.max == 0 || this.value < 0) {
          n = 0;
        } else if (this.value >= this.max) {
          n = 100;
        } else {
          var o = r.default.toFixed((this.value / this.max) * 100, 1);
          n = o <= 0 ? 0.1 : o;
        }
        this.ratio = n / 100;
        this.img.width = Math.min(this.width, this.width * this.ratio);
        this.updateText();
      };
      t.prototype.updateText = function () {
        if (this.ratio >= 1) {
          this.lab.text = "Max";
        } else {
          this.lab.text = this.value + "/" + this.max;
        }
        this.lab.visible = this.mouseIn;
      };
      return t;
    })(XOF.Box);
    e.default = i;
  });
  t(Sl);
  var Ml = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(I);
    var a = o($);
    var s = o(me);
    var u = o(x);
    var l = o(wl);
    var f = (function (e) {
      n(o, e);
      function o() {
        var t = e.call(this) || this;
        t.size(30, 30);
        if (!o.font)
          o.font = l.default.getBitmapFont(
            "font/mininumberset.png",
            "font/mininumberset.fnt"
          );
        t.initUI();
        return t;
      }
      o.prototype.initUI = function () {};
      o.prototype.registerEvents = function () {
        this.on(XOF.TouchEvent.TOUCH_ENTER, this.onHover, this);
        this.on(XOF.TouchEvent.TOUCH_OUT, this.onUnHover, this);
        this.on(XOF.TouchEvent.TAP, this.onTap, this);
        this.on(XOF.TouchEvent.TOUCH_BEGIN, this.onBegin, this);
        this.on(XOF.TouchEvent.TOUCH_END, this.onEnd, this);
      };
      o.prototype.unregisterEvents = function () {
        this.unHover();
        this.off(XOF.TouchEvent.TOUCH_ENTER, this.onHover, this);
        this.off(XOF.TouchEvent.TOUCH_OUT, this.onUnHover, this);
        this.off(XOF.TouchEvent.TAP, this.onTap, this);
        this.off(XOF.TouchEvent.TOUCH_BEGIN, this.onBegin, this);
        this.off(XOF.TouchEvent.TOUCH_END, this.onEnd, this);
      };
      o.prototype.onTap = function () {};
      o.prototype.checkCanPickup = function () {
        return false;
      };
      o.prototype.checkCanPutdown = function (t) {
        return false;
      };
      o.prototype.onBegin = function () {
        var t, e;
        if (
          ((e = (t = this.data) === null || t === void 0 ? void 0 : t.drag) !==
            null && e !== void 0
            ? e
            : true) &&
          this.checkCanPickup()
        ) {
          o.selectItem = this;
          var n = r.default.viewMgr.getOpenView(i.default.Finger);
          n.setIcon(o.selectItem.data.itemData.icon);
          XOF.stage.on(XOF.TouchEvent.TOUCH_END, this.onEnd, this);
          r.default.sound.play("CLICK_MOVE", {
            overload: true,
            completeDestroy: true,
          });
        }
      };
      o.prototype.onPutDownStage = function () {};
      o.prototype.onPutDown = function () {};
      o.prototype.onEnd = function (t) {
        var e, n;
        if (o.selectItem) {
          if (
            (n =
              (e = this === null || this === void 0 ? void 0 : this.data) ===
                null || e === void 0
                ? void 0
                : e.receive) !== null && n !== void 0
              ? n
              : true
          ) {
            if (this.checkCanPutdown(o.selectItem)) {
              if (t.currentTarget == XOF.stage) {
                o.selectItem.onPutDownStage();
              } else {
                this.onPutDown();
              }
              s.default.stageStopPropagation(t);
            }
            o.stopSelectItem();
            this.stop();
          }
        }
      };
      o.stopSelectItem = function () {
        var t;
        if (o.selectItem) o.selectItem.stop();
        o.selectItem = undefined;
        (t = s.default.finger) === null || t === void 0
          ? void 0
          : t.setIcon(null);
      };
      o.prototype.stop = function () {
        XOF.stage.off(XOF.TouchEvent.TOUCH_END, this.onEnd, this);
      };
      o.prototype.onHover = function () {
        this.imgLight.visible =
          this.data.showLight == undefined ? true : this.data.showLight;
        var t;
        if (this.data && this.data.itemData) {
          r.default.eventMgr.event(1033, [
            this.data.itemData,
            this.data,
            this.id,
          ]);
          t = r.default.viewMgr.getOpenView(i.default.ItemDetails);
        }
        if (t) {
          var e = r.default.viewMgr.localToLayer(this, 0, 0);
          var n = e.x;
          var o = e.y;
          if (t.height + o > a.default.height) o = a.default.height - t.height;
          if (o < 0) o = 0;
          n = e.x > a.default.width / 2 ? n - t.width : n + 32;
          if (n < 0) n = 0;
          t.pos(n, o);
        }
      };
      o.prototype.onUnHover = function () {
        this.imgLight.visible = false;
        r.default.viewMgr.close(i.default.ItemDetails);
      };
      o.prototype.unHover = function () {};
      Object.defineProperty(o.prototype, "data", {
        get: function () {
          return this.data_;
        },
        set: function (t) {
          this.data_ = t;
          this.dataChanged_();
          this.updateItemDetails();
        },
        enumerable: false,
        configurable: true,
      });
      o.prototype.updateItemDetails = function () {
        if (this.id) {
          if (r.default.viewMgr.isOpen(i.default.ItemDetails)) {
            r.default.eventMgr.event(u.default.ITEM_SLOT_UPDATE, [
              this.data.itemData,
              this.data,
              this.id,
            ]);
          } else if (this.imgLight.visible) {
            this.onHover();
          }
        }
      };
      o.prototype.dataChanged_ = function () {};
      return o;
    })(XOF.Sprite);
    e.default = f;
  });
  t(Ml);
  var kl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(_e);
    var i = o(me);
    var a = o(st);
    var s = o(Ml);
    var u = o(dt);
    var l = o(Q);
    var f = o(W);
    var c = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.initUI = function () {
        f.default.initSkin("ui/bag/itemiconbase", this, this);
        this.labCount.font = s.default.font;
        this.imgKey.skin = undefined;
        this.imgLight.visible = false;
        this.imgBlack.visible = false;
        this.registerEvents();
      };
      e.prototype.onTap = function () {
        if (this.id) {
          var t = i.default.getFingerState();
          var e = a.default.isBagOrQuickSlot(this.id);
          if (t == r.default.SELL && e);
          else if (
            t == r.default.FIXED &&
            (e || a.default.isEquipSlot(this.id))
          );
        }
      };
      e.prototype.checkCanPickup = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.data) ===
            null || t === void 0
            ? void 0
            : t.itemData
        ) {
          if (this.id) {
            return i.default.itemCanMove();
          }
        }
        return false;
      };
      e.prototype.checkCanPutdown = function (t) {
        var e = t === null || t === void 0 ? void 0 : t.id;
        if (a.default.isBagOrQuickSlot(this.id)) {
          return a.default.isBagOrQuickSlot(e) || a.default.isEquipSlot(e);
        } else if (a.default.isEquipSlot(this.id)) {
          return a.default.isBagOrQuickSlot(e);
        }
      };
      e.prototype.onPutDown = function () {};
      e.prototype.onPutDownStage = function () {};
      e.prototype.dataChanged_ = function () {
        var t = this.data;
        this.imgBg.visible = !!t.showBg;
        if (t.key) {
          var e = u.default.getKeyIcon(this.data.key);
          if (e) {
            this.imgKey.skin = e.name;
          } else {
            XOF.log("不存在的按键", t.key);
          }
        }
        this.labCount.text = this.imgIcon.skin = "";
        this.imgBlack.visible = this.imgQuality.visible = false;
        l.default.removeTweens(this.imgBlack);
        if (t.itemData) {
          if (t.count > 1) {
            this.labCount.text = t.count + "";
          }
          var n = t.itemData.icon;
          if (t.itemData.reuse > 0 && t.itemData.notcost) {
            var o = (t.extra && t.extra.use) || 0;
            if (o >= t.itemData.reuse && t.itemData.voidicon)
              n = t.itemData.voidicon;
          }
          this.imgIcon.skin = n;
          if (t.itemData.quality) {
            this.imgQuality.skin =
              "interface/mark/" + t.itemData.quality + ".png";
            this.imgQuality.visible = true;
          }
          if (t.cd && t.itemData.cd) {
            this.imgBlack.visible = true;
            var r = t.cd;
            if (t.cd > t.itemData.cd) r = t.itemData.cd;
            this.imgBlack.height = (r / t.itemData.cd) * 28;
            l.default.get(this.imgBlack).to({ height: 0 }, r).remove();
          }
        }
      };
      return e;
    })(s.default);
    e.default = c;
  });
  t(kl);
  var xl = e(function (t, e) {
    var _ =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var m = n(dt);
    var g = n(w);
    var b = n(k);
    var o = (function () {
      function t() {}
      t.attr2str = function (t, e, n, r) {
        var o;
        if (e === void 0) {
          e = "\n";
        }
        if (r === void 0) {
          r = {};
        }
        var i = "";
        var a = b.default.JsonExtends(
          {
            color: false,
            sort: false,
            add: "+",
            dec: "",
            template: "{0}:{1}",
            percentTemplate: "{0}:{1}%",
            titleType: 0,
            percentLength: 1,
            args: [],
          },
          n
        );
        if (a.sort) {
          t.sort(function (t, e) {
            var n = r[t.k] || m.default.conf.role.attribute[t.k];
            var o = r[e.k] || m.default.conf.role.attribute[e.k];
            return n.sort - o.sort;
          });
        }
        for (var s = 0, u = t; s < u.length; s++) {
          var l = u[s];
          var f = r[l.k] || m.default.conf.role.attribute[l.k];
          var c = l.k + "";
          var p = l.v;
          var d = 1;
          if (f) {
            c = f.name;
            d = f.type;
            p *= f.sign;
            if (a.titleType == 1);
          }
          var h = Math.floor(p) + "";
          if (d === 2) h = g.default.toFixed(p * 100, a.percentLength) + "";
          i += i ? e : "";
          var v = "";
          if (f.showValue) {
            v = b.default.format.apply(
              b.default,
              _(
                [
                  d == 1 ? a.template : a.percentTemplate,
                  c,
                  h,
                  p > 0 ? a.add : a.dec,
                ],
                a.args
              )
            );
          } else {
            v = c;
          }
          if (a.color) {
            var y =
              l.v > 0
                ? (o = f === null || f === void 0 ? void 0 : f.grade) !==
                    null && o !== void 0
                  ? o
                  : "1"
                : "0";
            v = "<" + y + ">" + v + "</" + y + ">";
          }
          i += v;
        }
        return i;
      };
      t.getJobDialogNpc = function (t) {
        switch (t) {
          case "swordman":
            return 900002;
        }
        return 900001;
      };
      return t;
    })();
    e.default = o;
  });
  t(xl);
  var Dl = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.id = t;
        e.skin = "interface/status_icon.img/0.png";
        e.imgIcon = new XOF.Image();
        e.imgIcon.size(20, 20).pos(1, 1).addTo(e);
        e.imgBlack = new XOF.Image();
        e.imgBlack.skin = "interface/0.png";
        e.imgBlack.alpha = 0.6;
        e.imgBlack.size(22, 22);
        e.imgBlack.addTo(e);
        e.setTimeRate(1);
        return e;
      }
      t.prototype.setIcon = function (t) {
        this.imgIcon.skin = t;
      };
      t.prototype.setTimeRate = function (t) {
        this.imgBlack.y = 22 * t;
        this.imgBlack.height = 22 * (1 - t);
      };
      return t;
    })(XOF.Image);
    e.default = n;
  });
  t(Dl);
  var Il = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var c = o(V);
    var p = o(dt);
    var r = o(q);
    var d = o(k);
    var u = o(w);
    var h = o(xl);
    var v = o(M);
    var y = o(me);
    var l = o(Dl);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      e.prototype.setRole = function (t) {
        if (this.role)
          this.role.buffAttribute.off("action", this.updateView, this);
        this.role = t;
        this.removeChildren();
        this.updateView();
        if (this.role) {
          this.role.buffAttribute.on("action", this.updateView, this);
          r.default.eventMgr.on(1039, this.updateTime, this);
        } else {
          r.default.eventMgr.off(1039, this.updateTime, this);
        }
      };
      e.prototype.updateView = function () {
        var n = this;
        if (this.role) {
          this.count = 0;
          this.children_.forEach(function (t) {
            return (t.visible = false);
          });
          this.role.buffAttribute.buffs.forEach(function (t) {
            var e = p.default.conf.buff[t.id];
            if (t.attr.valid == true && e.show) {
              n.update(t.id, t.attr, t.level, t.timestamp);
            }
          });
        }
      };
      e.prototype.indexOf = function (t) {
        for (var e = 0; e < this.numChild; e++) {
          var n = this.getChildAt(e);
          if (n.name == "" + t) {
            return e;
          }
        }
        return -1;
      };
      e.prototype.updateTime = function () {
        var s = this;
        if (this.role) {
          this.role.buffAttribute.buffs.forEach(function (t) {
            var e = p.default.conf.buff[t.id];
            var n = e.duration;
            var o = t.id;
            var r = s.indexOf(o);
            if (r >= 0) {
              var i = s.getChildAt(r);
              if (!i) return;
              if (t.attr.valid && n > 0) {
                var a = 1 - Math.min(n, t.timestamp) / n;
                i.setTimeRate(u.default.rangeFixed(a, 0, 1));
                if (y.default.tipsPanel == i) {
                  y.default.setTextPopupText(
                    s.getBuffText(o, t.level, t.attr, t.timestamp)
                  );
                }
              } else if (i) {
                s.updateView();
              }
            }
          });
        }
      };
      e.prototype.getBuffText = function (t, e, n, o) {
        var r;
        var i = p.default.conf.buff[t];
        if (i && n.valid) {
          var a = i.duration;
          var s = [];
          var u = "";
          var l = d.default.kvmap2arr(v.default.getBuffLevelAttribute(t, e));
          if (l) {
            u = h.default.attr2str(l, undefined, {
              template: "{0}{2}{1}",
              percentTemplate: "{0}{2}{1}%",
            });
          }
          var f = y.default.simpleTimeFormat(
            Math.ceil((a - Math.min(a, o)) / 1e3)
          );
          if (i.desc)
            s.push(
              d.default.format(
                i.desc,
                (r = i.name) !== null && r !== void 0 ? r : "",
                u,
                f
              )
            );
          if (!i.cityValid) s.push(c.default.tr(84));
          return s.join("\n");
        }
        return "";
      };
      e.prototype.update = function (t, e, n, o) {
        var r = p.default.conf.buff[t];
        if (!r.show) return;
        var i = this.indexOf(t);
        var a;
        if (i >= 0) {
          a = this.getChildAt(i);
        } else {
          a = new l.default(t);
          a.name = t + "";
          a.setIcon(r.icon);
          this.addChild(a);
        }
        a.visible = r.activedShow ? e.valid : r.show;
        var s = this.getBuffText(t, n, e, o);
        y.default.setTextPopup(a, true, s);
        a.pos(this.count * 24, 0);
        if (a.visible) {
          this.count += 1;
        }
      };
      return e;
    })(XOF.Sprite);
    e.default = i;
  });
  t(Il);
  var Rl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Ml);
    var s = o(dt);
    var i = o(me);
    var a = o(st);
    var u = o(Q);
    var l = o(W);
    var f = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.initUI = function () {
        l.default.initSkin("ui/skill/skillicon", this, this);
        this.labLv.set("interface/skillbuywindow.img", 60, "l0123456789");
        this.imgKey.skin = undefined;
        this.imgEnabled.visible =
          this.imgLight.visible =
          this.imgBlack.visible =
            false;
        this.registerEvents();
      };
      e.prototype.checkCanPickup = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.data) ===
            null || t === void 0
            ? void 0
            : t.itemData
        ) {
          if (this.id) {
            return i.default.itemCanMove();
          }
        }
        return false;
      };
      e.prototype.checkCanPutdown = function (t) {
        var e = t === null || t === void 0 ? void 0 : t.id;
        if (a.default.isQuickSkillSlot(this.id)) {
          return a.default.isSkillOrQuickSkillSlot(e);
        }
        return false;
      };
      e.prototype.onPutDownStage = function () {};
      e.prototype.onPutDown = function () {};
      e.prototype.dataChanged_ = function () {
        var t, e;
        var n = this.data;
        this.imgBg.visible = !!n.showBg;
        if (n.key) {
          var o = s.default.getKeyIcon(this.data.key);
          if (o) {
            this.imgKey.skin = o.name;
          } else {
            XOF.log("不存在的按键", n.key);
          }
        }
        this.imgIcon.skin = "";
        this.imgLock.visible =
          this.labLv.visible =
          this.imgBlack.visible =
          this.imgEnabled.visible =
            false;
        u.default.removeTweens(this.imgBlack);
        if (n.itemData) {
          var r = n.itemData.icon;
          if (n.itemData.reuse > 0 && n.itemData.notcost) {
            var i = (n.extra && n.extra.use) || 0;
            if (i >= n.itemData.reuse && n.itemData.voidicon)
              r = n.itemData.voidicon;
          }
          this.labLv.visible = true;
          this.labLv.text =
            "l" +
            ((e =
              (t = n === null || n === void 0 ? void 0 : n.extra) === null ||
              t === void 0
                ? void 0
                : t.lv) !== null && e !== void 0
              ? e
              : 1);
          this.imgLock.visible = !!n.lock;
          this.imgIcon.skin = r;
          this.imgEnabled.visible = !n.extra.enabled;
          if (n.cd && n.itemData.cd) {
            this.imgBlack.visible = true;
            var a = n.cd;
            if (n.cd > n.itemData.cd) a = n.itemData.cd;
            this.imgBlack.height = (a / n.itemData.cd) * 28;
            u.default.get(this.imgBlack).to({ height: 0 }, a).remove();
          }
        }
      };
      return e;
    })(r.default);
    e.default = f;
  });
  t(Rl);
  var Ll = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var _ = o(Cl);
    var r = o(R);
    var m = o(Pl);
    var g = o(dt);
    var b = o(jl);
    var f = o(q);
    var O = o(I);
    var w = o(Sl);
    var c = o(st);
    var i = o(me);
    var a = o(V);
    var A = o(kl);
    var E = o(Il);
    var p = o(mt);
    var T = o(Rl);
    var C = o($);
    var P = o(wl);
    var s = (function (y) {
      n(t, y);
      function t() {
        var t = y.call(this) || this;
        t.items = [];
        t.skills = [];
        var e = new XOF.Sprite();
        e.addTo(t)
          .size(800, 91)
          .pos((C.default.width - 800) / 2, C.default.height - 91);
        var n = new XOF.Image();
        n.skin = "interface/hud/0.png";
        e.addChild(n);
        var o = (t.imgHp = new _.default());
        o.setSkin("interface/hud/1.png");
        o.pos(14, 15);
        n.addChild(o);
        var r = (t.imgMp = new _.default());
        r.setSkin("interface/hud/2.png");
        r.pos(732, 15);
        n.addChild(r);
        var i = (t.imgExp = new w.default());
        i.size(625, 4);
        i.skin = "interface/hud/27.png";
        i.addTo(e).pos(88, 82);
        var a = [1, 2, 3, 4, 5, 6];
        for (var s = 0; s < a.length; s++) {
          var u = new A.default();
          u.data = { showBg: false, key: g.default.getKey(a[s]) };
          u.pos(84 + s * 30, 48).addTo(e);
          u.id = 501 + s;
          t.items[s] = u;
        }
        a = ["a", "s", "d", "f", "g", "h", "q", "w", "e", "r", "t", "y"];
        for (var s = 0; s < a.length; s++) {
          var u = new T.default();
          u.id = 511 + s;
          u.data = { showBg: false, key: g.default.getKey(a[s]) };
          if (s < 6) {
            u.pos(537 + s * 30, 48);
          } else {
            u.pos(537 + (s % 6) * 30, 10);
            u.data.showBg = true;
          }
          u.addTo(e);
          t.skills[s] = u;
        }
        var l = (t.btnShop = new m.default());
        l.setImages(
          "interface/hud/72.png",
          "interface/hud/73.png",
          "interface/hud/74.png",
          "interface/hud/75.png"
        );
        l.addTo(e).pos(284, 51);
        l.clickSound = "CLICK_BUTTON1";
        l.on(XOF.TouchEvent.TAP, t.switchView, t, [O.default.Shop, 1001]);
        var f = (t.btnMenu = new m.default());
        f.setImages(
          "interface/hud/68.png",
          "interface/hud/69.png",
          "interface/hud/70.png"
        );
        f.addTo(e).pos(465, 51);
        f.clickSound = "CLICK_BUTTON1";
        f.on(XOF.TouchEvent.TAP, t.switchView, t, [O.default.Setting]);
        var c = (t.btnList = []);
        var p = [
          O.default.HeroProfile,
          O.default.Bag,
          O.default.Quest,
          O.default.Skill,
          undefined,
        ];
        for (var s = 0; s < 5; s++) {
          var d = new m.default();
          c.push(d);
          d.setImages(
            "interface/hud/" + (5 + s * 3) + ".png",
            "interface/hud/" + (5 + s * 3 + 1) + ".png",
            "interface/hud/" + (5 + s * 3 + 2) + ".png",
            "interface/hud/" + (93 + s) + ".png"
          );
          d.addTo(e).pos(336 + 26 * s, 51);
          d.on(XOF.TouchEvent.TAP, t.switchView, t, [p[s]]);
        }
        c[4].disabled = true;
        var h = (t.labLv = new b.default());
        h.pos(35, 76);
        h.text = "a1";
        h.textAlign = "center";
        h.font = P.default.getBitmapFont("font/level.png", "font/level.fnt");
        h.addTo(e);
        var v = (t.labSp = new b.default());
        v.pos(765, 76);
        v.text = "0";
        v.textAlign = "center";
        v.font = P.default.getBitmapFont("font/sp.png", "font/sp.fnt");
        v.addTo(e);
        t.buffPanel = new E.default();
        t.buffPanel.pos(96, 20).addTo(e);
        return t;
      }
      t.prototype.updateHotKeys = function () {
        var n = this;
        i.default.setTextPopup(
          this.btnShop,
          true,
          a.default.tr(
            g.default.key.f5 ? 12 : 13,
            a.default.tr(14),
            g.default.key.f5
          )
        );
        i.default.setTextPopup(
          this.btnMenu,
          true,
          a.default.tr(
            g.default.key.esc ? 12 : 13,
            a.default.tr(19),
            g.default.key.esc
          )
        );
        i.default.setTextPopup(
          this.btnList[0],
          true,
          a.default.tr(
            g.default.key.m ? 12 : 13,
            a.default.tr(20),
            g.default.key.m
          )
        );
        i.default.setTextPopup(
          this.btnList[1],
          true,
          a.default.tr(
            g.default.key.i ? 12 : 13,
            a.default.tr(15),
            g.default.key.i
          )
        );
        i.default.setTextPopup(
          this.btnList[2],
          true,
          a.default.tr(
            g.default.key.f1 ? 12 : 13,
            a.default.tr(16),
            g.default.key.f1
          )
        );
        i.default.setTextPopup(
          this.btnList[3],
          true,
          a.default.tr(
            g.default.key.k ? 12 : 13,
            a.default.tr(17),
            g.default.key.k
          )
        );
        this.items.forEach(function (t, e) {
          return t.on(
            XOF.TouchEvent.RMOUSE_TAP,
            n.onItem,
            n,
            [g.default.getKey(e + 1)],
            true
          );
        });
        var o = ["a", "s", "d", "f", "g", "h", "q", "w", "e", "r", "t", "y"];
        this.skills.forEach(function (t, e) {
          return t.on(
            XOF.TouchEvent.RMOUSE_TAP,
            n.onRSkill,
            n,
            [g.default.getKey(o[e])],
            true
          );
        });
      };
      t.prototype.updateSkills = function () {
        var t = f.default.userData.skill;
        var e = p.default.map;
        var n = e.hero;
        var o = ["a", "s", "d", "f", "g", "h", "q", "w", "e", "r", "t", "y"];
        for (var r = 0; r < o.length; r++) {
          var i = this.skills[r];
          var a = i.data;
          a.key = g.default.getKey(o[r]);
          var s = t.slots[511 + r];
          if (s === null || s === void 0 ? void 0 : s.id) {
            var u = g.default.conf.skills.all[s.id];
            a.itemData = u;
            var l = n ? e.curScene.sk.onCheckUse(s.id, n) > 0 : false;
            a.cd = !n ? 0 : n.rs.get(s.id);
            a.extra = { slotType: "skill", lv: t.getSkillLv(s.id), enabled: l };
            a.lock = t.isLock(s.id);
          } else {
            a.itemData = undefined;
          }
          i.data = a;
        }
      };
      t.prototype.updateItems = function () {
        var t = f.default.userData.bag;
        var e = [1, 2, 3, 4, 5, 6];
        for (var n = 0; n < e.length; n++) {
          var o = { showBg: false, key: g.default.getKey(e[n]) };
          var r = t.items[501 + n];
          if (r && r.count && r.itemID) {
            var i = r.itemID;
            o.itemData = c.default.getItemData(i);
            o.count = r.count;
            o.extra = r;
            o.cd = t.getItemCountdown(i);
          }
          var a = this.items[n];
          a.data = o;
        }
      };
      t.prototype.switchView = function (e) {
        var t = [];
        for (var n = 1; n < arguments.length; n++) {
          t[n - 1] = arguments[n];
        }
        if (e) {
          if (f.default.viewMgr.isOpen(e)) {
            f.default.viewMgr.close(e);
          } else {
            if (
              p.default.isFight() &&
              [O.default.ChangeRoom].some(function (t) {
                return t == e;
              })
            ) {
              console.log("地下城中不能开启:", e);
              return;
            }
            f.default.viewMgr.open(e, t);
          }
        }
        f.default.sound.play("CLICK_BUTTON1");
      };
      t.prototype.onKeyUp = function (t) {
        p.default === null || p.default === void 0
          ? void 0
          : p.default.map.onKeyRelease(t);
      };
      t.prototype.onKeyDown = function (t) {
        if (t == g.default.key.esc) {
          var e = [O.default.Skill, O.default.NpcDialog, O.default.NpcOption];
          if (
            e.some(function (t) {
              return f.default.viewMgr.isOpen(t);
            })
          ) {
            return;
          }
          var n = f.default.viewMgr.hot;
          if (n) {
            f.default.viewMgr.closeView(n);
          } else {
            this.switchView(O.default.Setting);
          }
        } else if (t) {
          var o = void 0;
          switch (t) {
            case g.default.key.i:
              o = O.default.Bag;
              break;
            case g.default.key.m:
              o = O.default.HeroProfile;
              break;
            case g.default.key.k:
              o = O.default.Skill;
              break;
            case g.default.key.n:
              break;
            case g.default.key.u:
              o = O.default.ChangeRoom;
              break;
            case g.default.key[1]:
            case g.default.key[2]:
            case g.default.key[3]:
            case g.default.key[4]:
            case g.default.key[5]:
            case g.default.key[6]:
              this.onItem(t);
              break;
            case g.default.key.q:
            case g.default.key.w:
            case g.default.key.e:
            case g.default.key.r:
            case g.default.key.t:
            case g.default.key.y:
            case g.default.key.a:
            case g.default.key.s:
            case g.default.key.d:
            case g.default.key.f:
            case g.default.key.g:
            case g.default.key.h:
              this.onSkill(t);
              break;
          }
          if (o) {
            this.switchView(o);
          }
        }
      };
      t.prototype.onItem = function (t) {
        if (i.default.itemCanUse()) {
          switch (t) {
            case g.default.key[1]:
              break;
            case g.default.key[2]:
              break;
            case g.default.key[3]:
              break;
            case g.default.key[4]:
              break;
            case g.default.key[5]:
              break;
            case g.default.key[6]:
              break;
          }
        }
      };
      t.prototype.onSkill = function (t) {
        var e, n, o, r;
        var i = p.default.map;
        if (i === null || i === void 0 ? void 0 : i.hero) {
          var a = f.default.userData.skill;
          var s = [
            g.default.key.a,
            g.default.key.s,
            g.default.key.d,
            g.default.key.f,
            g.default.key.g,
            g.default.key.h,
            g.default.key.q,
            g.default.key.w,
            g.default.key.e,
            g.default.key.r,
            g.default.key.t,
            g.default.key.y,
          ];
          var u = 511 + s.indexOf(t);
          if (c.default.isQuickSkillSlot(u)) {
            var l =
              (o =
                (n =
                  (e = a === null || a === void 0 ? void 0 : a.slots) ===
                    null || e === void 0
                    ? void 0
                    : e[u]) === null || n === void 0
                  ? void 0
                  : n.id) !== null && o !== void 0
                ? o
                : 0;
            if (l > 0) {
              (r = i.hero) === null || r === void 0 ? void 0 : r.skill(l, t);
            }
          }
        }
      };
      t.prototype.onRSkill = function (t) {
        var e, n, o;
        var r = f.default.userData.skill;
        var i = [
          g.default.key.a,
          g.default.key.s,
          g.default.key.d,
          g.default.key.f,
          g.default.key.g,
          g.default.key.h,
          g.default.key.q,
          g.default.key.w,
          g.default.key.e,
          g.default.key.r,
          g.default.key.t,
          g.default.key.y,
        ];
        var a = 511 + i.indexOf(t);
        if (c.default.isQuickSkillSlot(a)) {
          var s =
            (o =
              (n =
                (e = r === null || r === void 0 ? void 0 : r.slots) === null ||
                e === void 0
                  ? void 0
                  : e[a]) === null || n === void 0
                ? void 0
                : n.id) !== null && o !== void 0
              ? o
              : 0;
          if (s) {
            r.lock(s, !r.isLock(s));
          }
        }
      };
      t.prototype.onOpen = function () {
        y.prototype.onOpen.call(this);
        f.default.gameControler.on(XOF.Event.KEY_DOWN, this.onKeyDown, this);
        f.default.gameControler.on(XOF.Event.KEY_UP, this.onKeyUp, this);
        f.default.eventMgr.register(this.updateItems, this, 1032);
        f.default.eventMgr.register(this.updateSkills, this, 1034);
        f.default.eventMgr.register(this.updateSkills, this, 1042);
        this.updateView();
        this.updateHotKeys();
        XOF.Timer.startTimer(this.updateTime, this);
        var t = f.default.viewMgr.getOpenView(O.default.Map);
        if (t.hero) {
          this.buffPanel.setRole(t.hero);
        } else {
          console.log("游戏初始化错误..");
        }
      };
      t.prototype.onClose = function () {
        y.prototype.onClose.call(this);
        f.default.gameControler.off(XOF.Event.KEY_DOWN, this.onKeyDown, this);
        f.default.gameControler.off(XOF.Event.KEY_UP, this.onKeyUp, this);
        f.default.eventMgr.unregister(this.updateItems, this);
        f.default.eventMgr.unregister(this.updateSkills, this);
      };
      t.prototype.updateTime = function () {
        this.updateHpMp();
      };
      t.prototype.updateHpMp = function () {
        var t = f.default.viewMgr.getOpenView(O.default.Map);
        if (t && t.hero) {
          this.imgHp.setValue(Math.floor(t.hero.hp), Math.floor(t.hero.maxHp));
          this.imgMp.setValue(Math.floor(t.hero.mp), Math.floor(t.hero.maxMp));
        }
      };
      t.prototype.updateView = function () {
        this.updateHpMp();
        this.labLv.text = "a" + f.default.userData.hero.lv;
        this.imgExp.setValue(
          f.default.userData.hero.exp,
          f.default.userData.hero.maxExp
        );
        this.updateItems();
        this.updateSkills();
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Ll);
  var Fl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var c = o(Q);
    var i = o(wl);
    var a = o(W);
    var l = o(St);
    var f = o(jo);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.maxWidth = 284;
        t.hpValue = 400;
        t.headWidth = 29;
        a.default.initSkin("ui/Dungeon/MonsterHp", t, t);
        t.imgBg.grid = [37, 6, 593, 20];
        t.imgHp.height = t.imgHpBack.height = t.imgBg.height = undefined;
        t.imgHpBack.fillMode = t.imgHp.fillMode = "repeat";
        t.labHpCount.font = i.default.getBitmapFont(
          "font/upgrade_number.png",
          "font/upgrade_number.fnt"
        );
        t.labHpCount.text = "x123456789~";
        t.labHpCount.letterSpacing = -2;
        t.panel = new XOF.Sprite();
        t.panel.pos(400, 120);
        t.imgBg.pos(0, 0);
        t.panel.addChild(t.imgBg);
        t.panel.addChild(t.img2);
        t.panel.addChild(t.hpPanel);
        t.panel.addChild(t.headPanel);
        t.panel.addChild(t.typePanel);
        t.panel.addChild(t.labHpCount);
        t.panel.addChild(t.buffPanel);
        t.panel.scale(1.5, 1.5);
        t.addChild(t.panel);
        t.whiteAnimations = [];
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.setBoxType();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.clean();
        this.setObject(undefined);
        this.buffPanel.setRole(undefined);
      };
      t.prototype.clean = function () {
        c.default.removeTweens(this.imgDeath);
        c.default.removeTweens(this.imgHp);
        c.default.removeTweens(this.imgHpBack);
      };
      t.prototype.setObject = function (t) {
        var e, n, o, r;
        if (t == this.target) return;
        if (t && (t.maxHp || 0) <= 0) {
          return;
        }
        if (this.target) {
          this.target.off(1023, this.onDamage, this);
          this.remove();
        }
        this.target = t;
        this.buffPanel.setRole(this.target);
        if (this.target) {
          var i = this.target.monsterClass;
          var a =
            (n =
              (e = this.target) === null || e === void 0
                ? void 0
                : e.roleLevel) !== null && n !== void 0
              ? n
              : 1;
          if (a > 30) {
            this.hpValue = 3600;
          } else if (a > 20) {
            this.hpValue = 2400;
          } else if (a > 10) {
            this.hpValue = 1200;
          } else {
            this.hpValue = 400;
          }
          if (i == l.default.BOSS) {
            this.setBoxType(2);
          } else if (i == l.default.SPECIAL) {
            this.setBoxType(1);
          } else {
            this.setBoxType();
          }
          this.target.on(1023, this.onDamage, this);
          if (t.action == ht.RoleAction.DEATH);
          else {
            this.imgIcon.skin = this.target.roleIcon;
            this.labName.text = this.target.roleName;
            for (var s in (r =
              (o = this.target) === null || o === void 0
                ? void 0
                : o.roleData) === null || r === void 0
              ? void 0
              : r.category) {
              var u = f.default.getTypeImage(this.target.roleData.category[s]);
              if (u) {
                this.imgType.skin = u;
                break;
              }
            }
            this.setHp(t.hp, t.hp, t.maxHp);
          }
        }
      };
      t.prototype.setBoxType = function (t) {
        if (t === void 0) {
          t = 0;
        }
        this.boxType = t;
        this.maxWidth = 360;
        this.headWidth = 29;
        this.imgBgRightY = 15;
        if (t == 1) {
          this.imgBg.skin = "other/monster_hp.img/9.png";
          this.img2.skin = "other/monster_hp.img/10.png";
          this.imgBg.pivot(2, 2);
          this.typePanel.pos(this.imgBg.x + 32, this.imgBg.y);
          this.hpPanel.pos(this.imgBg.x + 34, this.imgBg.y + 17);
          this.headWidth += 7;
          this.imgBgRightY = 16;
          this.labHpCount.pos(
            this.maxWidth - this.labHpCount.width,
            this.imgBg.y - 6
          );
          this.buffPanel.pos(this.imgBg.x, this.imgBg.y + 32);
        } else if (t == 2) {
          this.imgBg.skin = "other/monster_hp.img/11.png";
          this.img2.skin = "other/monster_hp.img/12.png";
          this.imgBg.pivot(2, 2);
          this.typePanel.pos(this.imgBg.x + 32, this.imgBg.y + 8);
          this.hpPanel.pos(this.imgBg.x + 31, this.imgBg.y + 1);
          this.headWidth += 4;
          this.imgBgRightY = 0;
          this.labHpCount.pos(
            this.maxWidth - this.labHpCount.width - 4,
            this.imgBg.y + 4
          );
          this.buffPanel.pos(this.imgBg.x, this.imgBg.y + 32);
        } else {
          this.imgBg.skin = "other/monster_hp.img/1.png";
          this.img2.skin = "other/monster_hp.img/8.png";
          this.imgBg.pivot(0, 0);
          this.typePanel.pos(this.imgBg.x + 30, this.imgBg.y + 1);
          this.hpPanel.pos(this.imgBg.x + 29, this.imgBg.y + 17);
          this.labHpCount.pos(
            this.maxWidth - this.labHpCount.width,
            this.imgBg.y - 5
          );
          this.buffPanel.pos(this.imgBg.x, this.imgBg.y + 32);
        }
        this.imgHpBack.width = this.maxWidth - this.headWidth;
        this.headPanel.pos(this.imgBg.x + 2, this.imgBg.y + 2);
        this.imgDeath.visible = false;
      };
      t.prototype.onDamage = function (t, e, n, o) {
        if (t == this.target) {
          this.setHp(e, n, o);
        }
      };
      t.prototype.setHp = function (t, e, n) {
        if (e > n) e = n;
        if (t < 0) t = 0;
        var o = 0;
        this.labHpCount.visible = this.imgHpBack.visible = false;
        if (n < this.hpValue) {
          var r = Math.ceil(
            (n / this.hpValue) * (this.maxWidth - this.headWidth)
          );
          this.imgBg.width = this.headWidth + r;
          this.imgHp.width = (t / n) * r;
          if (e > t || t <= 0) {
            var i = ((e - t) / n) * r;
            o = i > 0 ? i : 2;
          }
          this.imgHp.skin = this.getHpImage(1);
        } else {
          var a = t > 0 ? t % this.hpValue || this.hpValue : 0;
          var s = Math.max(Math.ceil(t / this.hpValue), 1);
          this.labHpCount.visible = s > 1;
          if (this.labHpCount.visible) this.labHpCount.text = "x" + s;
          this.imgHp.skin = this.getHpImage(s);
          if (s > 1) {
            this.imgHpBack.visible = true;
            this.imgHpBack.skin = this.getHpImage(s - 1);
          }
          var u = this.maxWidth - this.headWidth;
          this.imgBg.width = this.maxWidth;
          this.imgHp.width = Math.ceil((a / this.hpValue) * u);
          if (e > t) {
            var l = Math.max(Math.ceil(e / this.hpValue), 1);
            o = ((e - t) / this.hpValue) * u;
            if (l > s) {
              var i = u - this.imgHp.width;
              this.hpAnimation(this.imgHp.x, Math.min(u, o - i), 2);
              o = i;
            }
          } else if (t <= 0) {
            o = 2;
          }
        }
        this.img2.pos(
          this.imgBg.x + this.imgBg.width - this.imgBg.pivotX,
          this.imgBg.y + this.imgBgRightY - this.imgBg.pivotY
        );
        if (o) {
          this.hpAnimation(this.imgHp.x + this.imgHp.width, o);
        }
        this.clean();
        if (this.boxType == 2) {
          var f = this.imgHp.drawX;
          c.default
            .get(this.imgHp, { loop: true })
            .set({ drawX: f })
            .to({ drawX: f + 38 }, 2e3);
          c.default
            .get(this.imgHpBack, { loop: true })
            .set({ drawX: f })
            .to({ drawX: f + 38 }, 2e3);
        }
        if (t <= 0) {
          c.default
            .get(this.imgDeath)
            .set({ visible: true })
            .wait(200)
            .set({ visible: false })
            .wait(200)
            .set({ visible: true })
            .wait(200)
            .set({ visible: false })
            .wait(200)
            .set({ visible: true })
            .wait(300)
            .call(this.close, this);
        }
      };
      t.prototype.remove = function () {
        while (this.whiteAnimations.length) {
          this.whiteAnimations.pop().removeSelf();
        }
      };
      t.prototype.getHpImage = function (t) {
        var e = this.boxType == 2 ? 12 : 1;
        if (t < 0) t = 1;
        if (t <= 5) return "other/monster_hp.img/" + (e + t) + ".png";
        return "other/monster_hp.img/" + (e + 1 + (t % 4 || 4)) + ".png";
      };
      t.prototype.hpAnimation = function (t, e, n) {
        var o = new XOF.Image();
        o.skin =
          this.boxType == 2
            ? "other/monster_hp.img/18.png"
            : "other/monster_hp.img/7.png";
        o.fillMode = "repeat";
        o.pos(t, 0);
        o.width = e;
        if (n == 2) {
          this.imgHp.parent.addChild(o);
        } else {
          this.gAni.addChild(o);
        }
        this.whiteAnimations.push(o);
        c.default
          .get(o)
          .wait(120)
          .to({ alpha: 0 }, 160)
          .call(o.removeSelf, o)
          .remove();
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Fl);
  var Bl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(be);
    var i = o(R);
    var a = o(T);
    var c = o(we);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = a.default.TIPS;
        t.touchThrough = true;
        t.touchEnabled = false;
        t.maxWidth_ = 20;
        t.bg = new r.default("interface/popup.img/{0}.png", 289);
        t.size(202, 400);
        t.addChild(t.bg);
        t.lineHeight = 12;
        t.lineSpacing = 2;
        t.content = new XOF.Sprite();
        t.content.pos(6, 6);
        t.content.size(190, 100);
        t.addChild(t.content);
        return t;
      }
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        if (t) this.resetText(t);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.clean();
      };
      t.prototype.clean = function () {
        delete this.text;
        delete this.void;
        delete this.lines;
        this.content.removeChildren();
      };
      t.prototype.resetText = function (t) {
        this.clean();
        this.text = t;
        this.lines = 0;
        this.maxWidth_ = 20;
        this.void = false;
        this.updateView();
      };
      t.prototype.updateView = function () {
        var t = this.text;
        this.addText(t);
        this.content.height =
          this.lines * (this.lineSpacing + this.lineHeight) - this.lineSpacing;
        this.content.width = this.maxWidth_;
        this.height = this.content.height + 12;
        this.width = this.maxWidth_ + 12;
        this.bg.size(this.width, this.height);
      };
      t.prototype.addText = function (t, e, n, o) {
        var r = this;
        if (t === void 0) {
          t = "";
        }
        this.void = false;
        var i = 0,
          a = 1;
        var s = new c.default();
        var u = this.content.width;
        if (t) {
          if (n == "right") {
            i = u;
            s.textAlign = "right";
          }
          var l = [t];
          if (t.indexOf("\n") >= 0 || t.indexOf("\r") >= 0)
            l = t.split(/(?:\r\n|\r|\n)/);
          l.forEach(function (t) {
            var e = c.default.measureText(s, t.replace(/<.+?>/g, "")).width;
            if (e > r.maxWidth_) r.maxWidth_ = e;
          });
          a = l.length;
          var f = l.join("\n");
          if (e) s.textColor = e;
          s.lineSpacing = this.lineSpacing;
          s.text = f;
          s.pos(i, this.lines * (this.lineSpacing + this.lineHeight));
          this.content.addChild(s);
        }
        if (!o) this.lines += a;
      };
      return t;
    })(i.default);
    e.default = s;
  });
  t(Bl);
  var Nl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var f = o(Pl);
    var c = o(ge);
    var i = o(q);
    var a = o(I);
    var s = o($);
    var u = o(me);
    var l = o(x);
    var p = o(k);
    var d = o(Ae);
    var h = o(dt);
    var v = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.list = [];
        t.itemHeight = 21;
        t.itemWidth = 100;
        t.imgTitle = new XOF.Image();
        t.imgTitle.size(t.itemWidth, t.itemHeight);
        t.imgTitle.skin = "interface/0.png";
        t.addChild(t.imgTitle);
        t.imgTitle.touchEnabled = true;
        t.labTitle = new XOF.Label();
        t.labTitle.y = 4;
        t.labTitle.size(t.itemWidth, t.itemHeight);
        t.labTitle.textAlign = "center";
        t.imgTitle.addChild(t.labTitle);
        return t;
      }
      t.prototype.clear = function () {
        while (this.list.length) {
          var t = this.list.pop();
          t.removeSelf();
        }
      };
      t.prototype.addOption = function (t, e) {
        var n;
        var o = this.itemHeight,
          r = this.itemWidth;
        var i = new f.default();
        var a =
          ((n = {}),
          (n[c.default.TALK] = 47),
          (n[c.default.TASK] = 41),
          (n[c.default.SHOP] = 44),
          n);
        var s = a[t];
        for (var u = 0; u < 3; u++) {
          i.setStateImage(u, "interface/popup.img/" + (s + u) + ".png");
        }
        var l = this.list.length;
        i.on(XOF.TouchEvent.TAP, this.onClick, this, [t]);
        i.pos(0, (l + 1) * o);
        this.size(r, o * l);
        this.list.push(i);
        this.addChild(i);
      };
      t.prototype.onTouch = function (t) {
        u.default.stageStopPropagation(t);
      };
      t.prototype.onClick = function (t, e) {
        this.lastEvent = t;
        u.default.stageStopPropagation(e);
        this.onClickClose();
      };
      t.prototype.onClickClose = function (t) {
        var e;
        if (t === null || t === void 0 ? void 0 : t.target) {
          if (t.target instanceof d.default) {
            e = t.target.id;
          }
        }
        this.event(l.default.NPC_OPTION_SELECT, [this.lastEvent, e]);
        i.default.viewMgr.closeView(this);
        p.default.removeAllEvents(this, l.default.NPC_OPTION_SELECT);
      };
      t.prototype.onMapOffset = function () {
        var t = i.default.viewMgr.getOpenView(a.default.Map);
        var e = t.cameraX_;
        var n = t.cameraY_;
        var o = this.mapCameraX - e + this.mouseX_;
        var r = this.mapCameraY - n + this.mouseY_;
        if (
          o + this.itemWidth < 0 ||
          o > s.default.width ||
          r + this.list.length * this.itemHeight < 0 ||
          r > s.default.height - 100
        ) {
          this.onClickClose();
        } else {
          this.pos(
            this.mapCameraX - e + this.mouseX_,
            this.mapCameraY - n + this.mouseY_
          );
        }
      };
      t.prototype.setPos = function (t, e) {
        var n = i.default.viewMgr.getOpenView(a.default.Map);
        this.mapCameraX = n.cameraX_;
        this.mapCameraY = n.cameraY_;
        this.mouseX_ = t;
        this.mouseY_ = e;
        this.pos(t, e);
      };
      t.prototype.setTitle = function (t) {
        this.labTitle.text = t;
      };
      t.prototype.onKey = function (t) {
        if (t == h.default.key.esc) {
          this.onClickClose();
        }
      };
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.lastEvent = c.default.FAREWELL;
        this.on(XOF.TouchEvent.RMOUSE_BEGIN, this.onTouch, this);
        this.on(XOF.TouchEvent.TOUCH_BEGIN, this.onTouch, this);
        XOF.stage.on(XOF.TouchEvent.RMOUSE_BEGIN, this.onClickClose, this);
        XOF.stage.on(XOF.TouchEvent.TOUCH_BEGIN, this.onClickClose, this);
        i.default.eventMgr.on(1002, this.onMapOffset, this);
        i.default.eventMgr.on(1051, this.onClickClose, this);
        i.default.gameControler.on(XOF.Event.KEY_DOWN, this.onKey, this);
        i.default.eventMgr.event(1040);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.off(XOF.TouchEvent.RMOUSE_BEGIN, this.onTouch, this);
        this.off(XOF.TouchEvent.TOUCH_BEGIN, this.onTouch, this);
        XOF.stage.off(XOF.TouchEvent.RMOUSE_BEGIN, this.onClickClose, this);
        XOF.stage.off(XOF.TouchEvent.TOUCH_BEGIN, this.onClickClose, this);
        i.default.eventMgr.off(1002, this.onMapOffset, this);
        i.default.eventMgr.off(1051, this.onClickClose, this);
        i.default.gameControler.off(XOF.Event.KEY_DOWN, this.onKey, this);
      };
      return t;
    })(r.default);
    e.default = v;
  });
  t(Nl);
  var Xl = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = { RIGHT: 2, LEFT: 0 };
    e.default = n;
  });
  t(Xl);
  var Ul = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var i = o(Q);
    var l = o(q);
    var f = o(Xl);
    var c = o(dt);
    var a = o(T);
    var s = o(W);
    var p = o(xl);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.chatSpeed = 80;
        t.orderIndex = a.default.NPC_DIALOG;
        s.default.initSkin("ui/Home/NpcDialog", t, t);
        t.imgBlack.touchEnabled = true;
        t.labName.stroke = 1;
        t.labName.strokeColor = "#000";
        t.labName.textColor = "rgb(228,198,154)";
        t.labText.textColor = "rgb(228,198,154)";
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.imgBlack.alpha = 0;
        i.default.get(this.imgBlack).to({ alpha: 0.2 }, 500).remove();
        this.imgBlack.on(XOF.TouchEvent.TOUCH_BEGIN, this.onClick, this);
        this.imgBlack.on(XOF.TouchEvent.RMOUSE_BEGIN, this.onClick, this);
        l.default.gameControler.on(XOF.Event.KEY_DOWN, this.onKey, this);
        l.default.eventMgr.event(1040);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        i.default.removeTweens(this.imgNextLight);
        i.default.removeTweens(this.imgBg);
        i.default.removeTweens(this.imgBlack);
        this.imgBlack.off(XOF.TouchEvent.TOUCH_BEGIN, this.onClick, this);
        this.imgBlack.off(XOF.TouchEvent.RMOUSE_BEGIN, this.onClick, this);
        l.default.gameControler.off(XOF.Event.KEY_DOWN, this.onKey, this);
        this.chars = undefined;
        this.charIndex = undefined;
        this.texts_ = undefined;
        this.textsIndex = undefined;
        l.default.sound.cleanAll(this.hashCode);
      };
      t.prototype.dialog = function (t, e) {
        if (c.default.conf.npcdialog[t]) {
          var n = t,
            o = e;
          var r = void 0,
            i = [];
          do {
            r = c.default.conf.npcdialog[n];
            var a = {
              text: r.text,
              title: "",
              face: undefined,
              facePos: f.default.LEFT,
            };
            o = r.npcid;
            var s = void 0;
            if (r.npcid == -1) {
              o = e;
            } else if (r.npcid == -2) {
              o = p.default.getJobDialogNpc(l.default.userData.hero.job);
              s = l.default.userData.hero.name;
            }
            if (o) {
              if (c.default.conf.npc[o]) {
                var u = c.default.conf.npc[o];
                a.title = s || u.name;
                a.face = u.bigFace;
              }
            }
            i.push(a);
          } while ((n = r === null || r === void 0 ? void 0 : r.nextdialogid));
          this.texts(i);
        } else {
          XOF.log("不存在对话内容", t);
        }
      };
      t.prototype.text = function (t, e, n, o) {
        var r = this;
        this.labName.text = this.labText.text = "";
        this.facePos = o;
        this.charIndex = 0;
        this.chars = (t + "").split("");
        this.labName.text = e;
        this.imgNext.alpha = this.imgNextLight.alpha = 0;
        i.default.removeTweens(this.imgNextLight);
        i.default
          .get(this.imgBg, { loop: true })
          .wait(this.chatSpeed)
          .call(function () {
            r.charIndex += 1;
            if (r.charIndex > r.chars.length) {
              i.default.removeTweens(r.imgBg);
              r.endl();
            } else {
              r.labText.text = r.chars.slice(0, r.charIndex).join("");
            }
          });
        if (n) {
          this.imgFace.visible = true;
          this.setFace(n);
        } else {
          this.imgFace.visible = false;
        }
        l.default.sound.play("WRITE_CHAR_LOOP", { loop: -1 }, this.hashCode);
      };
      t.prototype.textByIndex = function (t) {
        this.textsIndex = t;
        var e = this.texts_[this.textsIndex];
        this.text(e.text, e.title, e.face, e.facePos);
      };
      t.prototype.texts = function (t) {
        this.texts_ = t;
        this.textByIndex(0);
      };
      t.prototype.setFace = function (t) {
        this.imgFace.skin = t;
      };
      t.prototype.onClick = function () {
        if (this.charIndex >= this.chars.length) {
          var t = this.textsIndex + 1;
          if (t >= this.texts_.length) {
            l.default.viewMgr.closeView(this);
          } else {
            this.textByIndex(t);
          }
        } else {
          this.charIndex = this.chars.length;
          this.endl();
        }
      };
      t.prototype.onKey = function (t) {
        if (
          t == c.default.key.enter ||
          t == c.default.key.space ||
          t == c.default.key.esc
        ) {
          this.onClick();
        }
      };
      t.prototype.endl = function () {
        this.labText.text = this.chars.join("");
        this.imgNext.alpha = 1;
        this.imgNextLight.alpha = 0.6;
        i.default
          .get(this.imgNextLight, { loop: true })
          .to({ alpha: 1 }, 500)
          .to({ alpha: 0.6 }, 500);
        l.default.sound.stopAll(this.hashCode);
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(Ul);
  var Hl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var i = o(T);
    var a = o(be);
    var h = o(dt);
    var v = o(V);
    var y = o(st);
    var _ = o(k);
    var m = o(xl);
    var f = o(we);
    var s = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.orderIndex = i.default.TIPS;
        t.bg = new a.default("interface/popup.img/{0}.png", 289);
        t.bg.addTo(t);
        t.size(202, 400);
        t.lineHeight = 12;
        t.lineSpacing = 2;
        t.content = new XOF.Sprite();
        t.content.pos(6, 6);
        t.content.size(190, 100);
        t.addChild(t.content);
        t.lab = new f.default();
        t.lab.lineSpacing = t.lineSpacing;
        t.lab.addTo(t.content);
        return t;
      }
      t.prototype.size = function (t, e) {
        this.bg.size(t, e);
        return o.prototype.size.call(this, t, e);
      };
      t.prototype.addText = function (t, e, n, o) {
        if (t === void 0) {
          t = "";
        }
        this.void = false;
        var r = 0,
          i = 1;
        var a = this.content.width;
        if (t) {
          var s = void 0;
          if (n == "right") {
            s = new XOF.Label();
            r = a;
            s.text = "";
            s.textAlign = "right";
            if (e) s.textColor = f.default.registerColors[e];
            s.lineSpacing = this.lineSpacing;
            this.content.addChild(s);
            s.pos(r, this.lines * (this.lineSpacing + this.lineHeight));
          } else {
            s = this.lab;
          }
          var u = f.default.textSplite(t, a, s);
          i = u.length;
          var l = u.join("\n");
          s.text += "<" + e + ">" + l + "</" + e + ">\n";
        }
        if (!o) this.lines += i;
      };
      t.prototype.addLine = function () {
        this.void = false;
        var t = new XOF.Image();
        t.skin = "interface/popup.img/270.png";
        var e = this.lineSpacing + this.lineHeight;
        t.pos(0, this.lines * e + e / 2 - this.lineSpacing / 2);
        this.content.addChild(t);
        this.lines++;
        this.lab.text += "\n";
      };
      t.prototype.updateView = function () {
        var t = this.itemData;
        var e = h.default.conf.suit[t.suit];
        this.addText(v.default.tr(80, e.name), 10);
        this.addLine();
        var n = 0;
        var o = [];
        if (this.checkWear);
        for (var r = 0, i = e.equips; r < i.length; r++) {
          var a = i[r];
          var s = y.default.getItemData(a);
          if (a == t.id || o.indexOf(a) >= 0) {
            this.addText(s.name, 10);
          } else {
            this.addText(s.name, 0);
          }
          if (o.indexOf(a) >= 0) {
            n += 1;
          }
        }
        this.addLine();
        for (var u = 2, l = true; u <= 5; u++) {
          var f = e["attr" + u] || e["buff" + u];
          if (f) {
            if (l) {
              l = false;
            } else {
              this.addVoid();
            }
            var c = n >= u;
            this.addText(v.default.tr(81, u), c ? 10 : 0);
            if (e["attr" + u]) {
              var p = _.default.kvmap2arr(e["attr" + u]);
              var d = m.default.attr2str(p, undefined, {
                template: "{0} {2}{1}",
                percentTemplate: "{0} {2}{1}%",
                color: c,
                sort: true,
              });
              this.addText(d, c ? 1 : 0);
              if (e["desc" + u]) {
                this.addText(e["desc" + u], c ? 2 : 0);
              }
            }
          }
        }
        if (e.desc) {
          this.addLine();
          this.addText(e.desc, 0);
        }
        this.content.height =
          this.lines * (this.lineSpacing + this.lineHeight) - this.lineSpacing;
        this.height = this.content.height + 12;
      };
      t.prototype.addVoid = function () {
        if (this.void) return;
        this.lines++;
        this.void = true;
        this.lab.text += "\n";
      };
      t.prototype.onOpen = function (t, e, n) {
        o.prototype.onOpen.call(this);
        this.itemData = t;
        this.data = e;
        this.lines = 0;
        this.void = false;
        this.checkWear = n;
        this.lab.text = "";
        this.updateView();
      };
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        delete this.itemData;
        delete this.void;
        delete this.lines;
        delete this.data;
        this.content.removeChildren();
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Hl);
  var Gl = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(q);
    var i = n(R);
    var a = n(I);
    var s = n(W);
    var u = n(T);
    var l = n(Ml);
    var f = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.orderIndex = u.default.MAIN_UI_BOTTOM;
        s.default.initSkin("ui/m_controler/mainui", t, t);
        t.touchThrough = true;
        t.btnSwitch.visible = false;
        return t;
      }
      t.prototype.onClose = function () {
        n.prototype.onClose.call(this);
        this.btnSwitch.off(XOF.TouchEvent.TAP, this.onClickSwitch, this);
        r.default.eventMgr.off(1031, this.updateUI, this);
      };
      t.prototype.onOpen = function () {
        n.prototype.onOpen.call(this);
        this.btnSwitch.on(XOF.TouchEvent.TAP, this.onClickSwitch, this);
        r.default.eventMgr.on(1031, this.updateUI, this);
        r.default.eventMgr.on(1004, this.onMapClean, this);
        XOF.Timer.startTimer(this.systemUpdate, this);
      };
      t.prototype.onOpened = function () {
        n.prototype.onOpened.call(this);
        this.updateUI();
      };
      t.prototype.size = function (t, e) {
        n.prototype.size.call(this, t, e);
        return this;
      };
      t.prototype.onClickSwitch = function () {
        if (r.default.viewMgr.isOpen(a.default.FightUI)) {
          r.default.viewMgr.close(a.default.FightUI);
          r.default.viewMgr.open(a.default.HomeUI);
        } else {
          r.default.viewMgr.close(a.default.HomeUI);
          r.default.viewMgr.open(a.default.FightUI);
        }
      };
      t.prototype.updateUI = function () {
        var t = r.default.userData.map.currentScreen();
        switch (t) {
          case 0:
            r.default.viewMgr.close(a.default.FightUI);
            r.default.viewMgr.close(a.default.CityUI);
            r.default.viewMgr.open(a.default.HomeUI);
            break;
          case 1:
            r.default.viewMgr.close(a.default.FightUI);
            r.default.viewMgr.close(a.default.HomeUI);
            r.default.viewMgr.open(a.default.CityUI);
            break;
          case 2:
            r.default.viewMgr.close(a.default.HomeUI);
            r.default.viewMgr.close(a.default.CityUI);
            r.default.viewMgr.open(a.default.FightUI);
            break;
        }
      };
      t.prototype.onMapClean = function () {
        r.default.eventMgr.event(1051);
        r.default.viewMgr.close(a.default.Shop);
        r.default.viewMgr.close(a.default.NpcDialog);
        r.default.viewMgr.close(a.default.MonsterHp);
        r.default.viewMgr.close(a.default.ChangeRoom);
        r.default.viewMgr.close(a.default.DungeonStay);
        r.default.viewMgr.close(a.default.TowerSelect);
        r.default.viewMgr.close(a.default.DungeonSelect);
        r.default.viewMgr.close(a.default.Bag);
        r.default.viewMgr.close(a.default.Skill);
        r.default.viewMgr.close(a.default.RoleMenu);
        r.default.viewMgr.close(a.default.Mail);
        r.default.viewMgr.close(a.default.Activity);
        r.default.viewMgr.close(a.default.TaskMain);
        r.default.viewMgr.close(a.default.RankMain);
        r.default.viewMgr.close(a.default.EquipmentUpgrade);
        l.default.stopSelectItem();
      };
      t.prototype.systemUpdate = function () {
        var t = XOF.Timer.dt;
        r.default.eventMgr.event(1007, [t]);
        r.default.eventMgr.event(1008, [t]);
        r.default.eventMgr.event(1039, [t]);
      };
      return t;
    })(i.default);
    e.default = f;
  });
  t(Gl);
  var Vl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var f = o(dt);
    var c = o(q);
    var u = o(w);
    var r = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.panelSize = 280;
        t.centerSize = 70;
        t.out = { x: 0, y: 0 };
        t.keys = [];
        t.size(t.panelSize, t.panelSize);
        t.imgBg = new XOF.Image();
        t.imgBg.skin =
          "ui_interface_m/ui_atlas_common/M5UI_MoveControllerBG.png";
        t.imgBg.size(284, 284);
        t.imgBg.pos(
          (t.panelSize - t.imgBg.width) / 2,
          (t.panelSize - t.imgBg.height) / 2
        );
        t.addChild(t.imgBg);
        t.imgCenter = new XOF.Image();
        t.addChild(t.imgCenter);
        t.reset();
        return t;
      }
      t.prototype.onOpen = function () {
        this.imgBg.on(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBegin, this);
        this.imgBg.on(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.imgBg.on(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onTouchEnd,
          this
        );
        XOF.stage.on(XOF.TouchEvent.TOUCH_MOVE, this.onTouchMove, this);
        XOF.stage.on(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
      };
      t.prototype.onClose = function () {
        this.imgBg.off(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBegin, this);
        this.imgBg.off(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.imgBg.off(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onTouchEnd,
          this
        );
        XOF.stage.off(XOF.TouchEvent.TOUCH_MOVE, this.onTouchMove, this);
        XOF.stage.off(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
      };
      t.prototype.reset = function () {
        this.touchId = undefined;
        this.centerSize = 70;
        this.imgBg.skin =
          "ui_interface_m/ui_atlas_common/M5UI_MoveControllerBG.png";
        this.imgCenter.skin =
          "ui_interface_m/ui_atlas_common/M5UI_MoveController_TrackBall.png";
        this.imgCenter.pivot(this.centerSize / 2, this.centerSize / 2);
        this.imgCenter.pos(this.panelSize / 2, this.panelSize / 2);
        this.out.x = this.out.y = 0;
        this.onChanged();
        this.touchIn = false;
      };
      t.prototype.start = function () {
        this.centerSize = 88;
        this.imgBg.skin =
          "ui_interface_m/ui_atlas_common/M5UI_MoveController_BG_TF.png";
        this.imgCenter.skin =
          "ui_interface_m/ui_atlas_common/M5UI_MoveController_TrackBall_TF.png";
        this.imgCenter.pivot(this.centerSize / 2, this.centerSize / 2);
        this.imgCenter.pos(this.panelSize / 2, this.panelSize / 2);
        this.onChanged();
        this.touchIn = true;
      };
      t.prototype.onTouchBegin = function (t) {
        this.touchId = t.touchId;
        this.start();
        this.onTouchMove(t);
      };
      t.prototype.onTouchMove = function (t) {
        if (this.touchIn && t.touchId == this.touchId) {
          var e = this.panelSize / 2;
          var n = this.localToGlobal(0, 0);
          var o = this.parent.scaleX;
          var r = this.parent.scaleY;
          var i = XOF.stage.mouseX - (n.x + e * o);
          var a = XOF.stage.mouseY - (n.y + e * r);
          var s = this.getXY(i * (1 / o), a * (1 / r)),
            u = s.x,
            l = s.y;
          this.out.x = u / (e - this.centerSize / 2);
          this.out.y = l / (e - this.centerSize / 2);
          this.imgCenter.pos(u + e, l + e);
          this.onChanged();
        }
      };
      t.prototype.onTouchEnd = function (t) {
        this.reset();
      };
      t.prototype.getXY = function (t, e) {
        var n = this.panelSize / 2 - this.centerSize / 2;
        var o = Math.sqrt(t * t + e * e);
        var r = t;
        var i = e;
        if (o > n) {
          var a = o / n;
          r = t / a;
          i = e / a;
        }
        return { x: r, y: i };
      };
      t.prototype.isDown = function (t) {
        return this.keys.indexOf(t) >= 0;
      };
      t.prototype.getDirection = function (t) {
        var e = 360 / 8;
        var n = e / 2;
        var o =
          ((180 / Math.PI) * this.getRad(this.out.x, this.out.y) + 180 + n) %
          360;
        var r = [4, 7, 8, 9, 6, 3, 2, 1];
        var i = 0;
        for (var a = 0, s = 0; a < 360; a += e, s++) {
          if (u.default.isRange(o, a, a + e)) {
            i = r[s];
            break;
          }
        }
        return i;
      };
      t.prototype.getRad = function (t, e) {
        var n = Math.sqrt(Math.pow(t, 2) + Math.pow(e, 2));
        var o = t / n;
        var r = Math.acos(o);
        if (e < 0) {
          r = -r;
        }
        return r;
      };
      t.prototype.onChanged = function () {
        var e = [];
        var t = 0;
        var n = this.touchIn == false;
        if (n) {
          t = this.getDirection(0.3);
        } else {
          t = this.getDirection(0);
        }
        if (t == 6) {
          e.push(f.default.key.right);
        } else if (t == 4) {
          e.push(f.default.key.left);
        } else if (t == 8) {
          e.push(f.default.key.up);
        } else if (t == 2) {
          e.push(f.default.key.down);
        } else if (t == 7) {
          e.push(f.default.key.up, f.default.key.left);
        } else if (t == 1) {
          e.push(f.default.key.down, f.default.key.left);
        } else if (t == 9) {
          e.push(f.default.key.up, f.default.key.right);
        } else if (t == 3) {
          e.push(f.default.key.down, f.default.key.right);
        }
        this.event("change");
        var o = [
          f.default.key.left,
          f.default.key.right,
          f.default.key.up,
          f.default.key.down,
        ].filter(function (t) {
          return e.indexOf(t) == -1;
        });
        for (var r = 0, i = o; r < i.length; r++) {
          var a = i[r];
          var s = this.keys.indexOf(a);
          if (s >= 0) {
            this.keys.splice(s, 1);
            c.default.eventMgr.event(1064, [a]);
          }
        }
        for (var u = 0, l = e; u < l.length; u++) {
          var a = l[u];
          var s = this.keys.indexOf(a);
          if (s == -1) {
            this.keys.push(a);
            c.default.eventMgr.event(1063, [a, true]);
          }
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = r;
  });
  t(Vl);
  var $l = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var b = o(dt);
    var O = o(q);
    var r = o(R);
    var i = o(W);
    var a = o(be);
    var w = o(k);
    var A = o(Q);
    var E = o(mt);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.pathTemplate = "map/minimap/act3.img/{0}.png";
        t.iconWidth = t.iconHeight = 18;
        i.default.initSkin("ui/Map/DungeonMap", t, t);
        t.mapBg = new a.default("interface/minimap.img/{0}.png", 27);
        t.addChild(t.mapBg);
        t.panel = new XOF.Box();
        t.panel.scale(2, 2);
        t.addChild(t.panel);
        t.panel.addChild(t.roleImage);
        t.panel.addChild(t.bossImage);
        t.roleImage.pivot(-6, -3);
        t.bossImage.pivot(-1, -2);
        return t;
      }
      t.prototype.setMapBoxSize = function (t, e) {
        this.panel.size(t, e);
        this.mapBg.size(t + 11, e + 11);
        this.mapBg.pos(this.width - this.mapBg.width - 2, this.mapBox.y);
        this.panel.pos(this.mapBg.x + 7, this.mapBox.y + 7);
        this.size(this.panel.width, this.panel.height);
      };
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.reset();
        this.updateView();
        O.default.eventMgr.on(1006, this.setMap, this);
        O.default.eventMgr.on(1010, this.updateView, this);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.clean();
        O.default.eventMgr.off(1006, this.setMap, this);
        O.default.eventMgr.off(1010, this.updateView, this);
      };
      t.prototype.setMap = function () {
        this.reset();
        this.updateView();
      };
      t.prototype.clean = function () {
        while (this.panel.children_.length) {
          var t = this.panel.getChildAt(0);
          this.panel.removeChild(t);
          A.default.removeTweens(t);
        }
      };
      t.prototype.isOpenDoor = function () {
        var t;
        return O.default.userData.map.monsterCount > 0
          ? false
          : (t = E.default.map) === null || t === void 0
          ? void 0
          : t.pathgateIsOpen;
      };
      t.prototype.reset = function () {
        this.clean();
        var t = O.default.userData.map;
        var e = b.default.conf.map.map[t.id];
        var n = b.default.conf.dungeon[e.city];
        if (n) {
          var o = 0,
            r = 0;
          var i = n.size,
            a = i[0],
            s = i[1];
          var u = n.greeds;
          for (var l = 0, f = 0; l < s; l++) {
            for (var c = 0; c < a; c++, f++) {
              var p = this.getImage(u[l][c], false);
              if (p) {
                var d = new XOF.Image();
                d.name = l + "," + c;
                d.skin = p;
                d.pos(o + this.iconWidth * c, r + this.iconHeight * l);
                this.panel.addChild(d);
                d.visible = false;
              }
            }
          }
          this.setMapBoxSize(
            a * this.iconWidth * this.panel.scaleX,
            s * this.iconHeight * this.panel.scaleY
          );
        }
        this.panel.addChild(this.roleImage);
        this.panel.addChild(this.bossImage);
      };
      t.prototype.updateView = function () {
        var t = O.default.userData.map;
        var e = b.default.conf.map.map[t.id];
        var n = b.default.conf.dungeon[e.city];
        if (n) {
          var o = w.default.format(this.pathTemplate, 120);
          var r = w.default.format(this.pathTemplate, 121);
          var i = 0,
            a = 0;
          var s = n.size,
            u = s[0],
            l = s[1];
          var f = n.greeds;
          for (var c = 0, p = 0; c < l; c++) {
            for (var d = 0; d < u; d++, p++) {
              var h = E.default.isMyDungeon(d, c);
              var v = E.default.isBossDungeon(d, c);
              var y = E.default.isEnteredDungeon(d, c);
              var _ = E.default.isMyAroundDungeon(d, c);
              var m = this.panel.getChildByName(c + "," + d);
              if (h)
                this.roleImage.pos(
                  i + this.iconWidth * d,
                  a + this.iconHeight * c
                );
              if (v)
                this.bossImage.pos(
                  i + this.iconWidth * d,
                  a + this.iconHeight * c
                );
              if (m) {
                var g = this.getImage(f[c][d], h);
                A.default.removeTweens(m);
                if (y) {
                  m.visible = y;
                  if (_ && this.isOpenDoor()) {
                    A.default
                      .get(m, { loop: true })
                      .wait(250)
                      .set({ skin: this.getImage(f[c][d], true) })
                      .wait(250)
                      .set({ skin: g });
                  }
                } else if (_) {
                  g = o;
                  if (this.isOpenDoor()) {
                    m.visible = true;
                    A.default
                      .get(m, { loop: true })
                      .wait(250)
                      .set({ skin: r })
                      .wait(250)
                      .set({ skin: o });
                  } else {
                    m.visible = v;
                  }
                } else if (v) {
                  g = o;
                  m.visible = true;
                }
                m.skin = g;
              }
            }
          }
        }
      };
      t.prototype.getImage = function (t, e) {
        if (e === void 0) {
          e = false;
        }
        var n = this.pathTemplate;
        var o = -1;
        switch (t) {
          case "AA":
            break;
          case "EE":
            o = 24;
            break;
          case "GG":
            o = 40;
            break;
          case "FF":
            o = 32;
            break;
          case "MM":
            o = 88;
            break;
          case "HH":
            o = 48;
            break;
          case "OO":
            o = 104;
            break;
          case "PP":
            o = 112;
            break;
          case "NN":
            o = 96;
            break;
          case "CC":
            o = 8;
            break;
          case "DD":
            o = 16;
            break;
          case "KK":
            o = 72;
            break;
          case "LL":
            o = 80;
            break;
          case "BB":
            o = 0;
            break;
          case "JJ":
            o = 64;
            break;
          case "II":
            o = 56;
            break;
        }
        return o >= 0 ? w.default.format(n, o + (e ? 4 : 0)) : undefined;
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t($l);
  var ql = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var f = a(dt);
    var v = a(q);
    var s = a(R);
    var u = a(I);
    var l = a(W);
    var c = a(wl);
    var p = a(k);
    var y = a(st);
    var d = a(_t);
    var _ = a(mt);
    var h = a(Vl);
    var m = a($e);
    var g = i(Zu);
    var b = a(tl);
    var O = a(rl);
    var w = a($l);
    var A = a(el);
    var E = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.viewCache = true;
        l.default.initSkin("ui/M_Controler/FightUI", t, t);
        t.initUI();
        t.labTime.font = c.default.getBitmapFont(
          "font/pvptimecount.png",
          "font/pvptimecount.fnt"
        );
        var e = (t.joysticView = new h.default());
        t.dungeonMap = new w.default();
        t.bJoystic.addChild(e);
        return t;
      }
      t.prototype.initPos = function () {
        this.skillsGroup.scaleX = this.skillsGroup.scaleY = parseFloat(
          v.default.platform.getItem(O.default.fightui_skillsGroup_scale, 1)
        );
        this.skillsGroup.x = parseFloat(
          v.default.platform.getItem(O.default.fightui_skillsGroup_x, 905)
        );
        this.skillsGroup.y = parseFloat(
          v.default.platform.getItem(O.default.fightui_skillsGroup_y, 315)
        );
        this.itemsGroup.scaleX = this.itemsGroup.scaleY = parseFloat(
          v.default.platform.getItem(O.default.fightui_itemsGroup_scale, 1)
        );
        this.itemsGroup.x = parseFloat(
          v.default.platform.getItem(O.default.fightui_itemsGroup_x, 446)
        );
        this.itemsGroup.y = parseFloat(
          v.default.platform.getItem(O.default.fightui_itemsGroup_y, 625)
        );
        this.bJoystic.scaleX = this.bJoystic.scaleY = parseFloat(
          v.default.platform.getItem(O.default.fightui_joystic_scale, 0.9)
        );
        this.bJoystic.x = parseFloat(
          v.default.platform.getItem(O.default.fightui_joystic_x, 70)
        );
        this.bJoystic.y = parseFloat(
          v.default.platform.getItem(O.default.fightui_joystic_y, 420)
        );
      };
      t.prototype.onClose = function () {
        r.prototype.onClose.call(this);
        this.stopTimer();
        v.default.eventMgr.unregister(this.updateSkills, this);
        v.default.eventMgr.unregister(this.updateItems, this);
        v.default.eventMgr.off(1046, this.updateItems, this);
        v.default.eventMgr.off(1049, this.updateItems, this);
        v.default.eventMgr.off(1056, this.onAddText, this);
        this.btnHome.off(XOF.TouchEvent.TAP, this.onClickHome, this);
        v.default.eventMgr.off(1024, this.initLevel, this);
        v.default.eventMgr.off(1009, this.joysticView.reset, this.joysticView);
        v.default.eventMgr.off(1007, this.onTime, this);
        v.default.eventMgr.off(1015, this.stopTimer, this);
        v.default.eventMgr.off(1008, this.onUpdateCountdown, this);
        v.default.eventMgr.off(1028, this.initPos, this);
        XOF.stage.off("pause", this.joysticView.reset, this.joysticView);
        this.joysticView.off("change", this.onJoysticChange, this);
        this.joysticView.onClose();
        v.default.timerMgr.remove(this.updateSkills, this);
        this.heroHeadView.onClose();
        if (this.dungeonMap.parent) {
          this.dungeonMap.onClose();
          this.dungeonMap.removeSelf();
        }
      };
      t.prototype.onOpen = function () {
        var t, e, n, o;
        r.prototype.onOpen.call(this);
        this.resetItemsCountdown();
        this.updateSkills();
        this.updateItems();
        v.default.eventMgr.register(this.updateSkills, this, 1034);
        v.default.eventMgr.register(this.updateItems, this, 1032);
        v.default.eventMgr.on(1046, this.updateItems, this);
        v.default.eventMgr.on(1049, this.updateItems, this);
        v.default.eventMgr.on(1056, this.onAddText, this);
        v.default.eventMgr.on(1024, this.initLevel, this);
        v.default.eventMgr.on(1009, this.joysticView.reset, this.joysticView);
        this.btnHome.on(XOF.TouchEvent.TAP, this.onClickHome, this);
        v.default.eventMgr.on(1007, this.onTime, this);
        v.default.eventMgr.on(1015, this.stopTimer, this);
        v.default.eventMgr.on(1008, this.onUpdateCountdown, this);
        v.default.eventMgr.on(1028, this.initPos, this);
        XOF.stage.on("pause", this.joysticView.reset, this.joysticView);
        this.joysticView.on("change", this.onJoysticChange, this);
        this.joysticView.onOpen();
        v.default.timerMgr.delay(1e3, -1, this.updateSkills, this);
        this.heroHeadView.onOpen();
        this.initPos();
        if (
          ((o =
            (t = f.default.conf.dungeon) === null || t === void 0
              ? void 0
              : t[
                  (n =
                    (e = f.default.conf.map.map) === null || e === void 0
                      ? void 0
                      : e[v.default.userData.map.id]) === null || n === void 0
                    ? void 0
                    : n.city
                ]) === null || o === void 0
            ? void 0
            : o.type) == "[dungeon line]"
        ) {
          this.addChild(this.dungeonMap);
          this.dungeonMap.onOpen();
          this.dungeonMap.pos(this.width - this.dungeonMap.width, 36);
        }
      };
      t.prototype.onAddText = function (t) {
        v.default.timerMgr.callLater(this.itemTips.addTips, this.itemTips, t);
      };
      t.prototype.onTime = function () {
        if (v.default.userData.map.currentScreen() == 2) {
          var t = v.default.viewMgr.getOpenView(u.default.Map).time / 10;
          this.labTime.text = p.default.unitFormat(
            t,
            [60 * 100, 1 * 100, 1],
            ["'", '"', ""],
            function (t, e) {
              return (t < 10 ? "0" + t : t) + e;
            }
          );
        }
      };
      t.prototype.stopTimer = function () {
        v.default.eventMgr.off(1007, this.onTime, this);
      };
      t.prototype.onClickAtk = function () {
        v.default.gameControler.keyPress(f.default.key.x);
      };
      t.prototype.initUI = function () {
        this.skills = [];
        var t = { f: 65, g: 70, h: 81, q: 71, w: 84, e: 67, r: 90 };
        var e = ["x", "s", "d", "f", "g", "h", "q", "w", "e", "r"];
        for (var n = 0; n < e.length; n++) {
          var o = this.skillsGroup.getChildByName("sslot" + (n + 1));
          var r = t[e[n]] || f.default.key[e[n]];
          o.on(XOF.TouchEvent.TOUCH_BEGIN, this.onKeyPress, this, [r]);
          o.on(XOF.TouchEvent.TOUCH_END, this.onKeyRelease, this, [r]);
          o.on(XOF.TouchEvent.TOUCH_CANCEL, this.onKeyRelease, this, [r]);
          o.on(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, this.onKeyRelease, this, [
            r,
          ]);
          this.skills.push(o);
          o.id = 511 + n;
          o.data = { showBg: false };
        }
        this.items = [];
        e = ["1", "2", "3", "4"];
        for (var n = 0; n < e.length; n++) {
          var o = this.itemsGroup.getChildByName("islot" + e[n]);
          this.items.push(o);
          o.data = {};
          var r = t[e[n]] || f.default.key[e[n]];
          o.on(XOF.TouchEvent.TOUCH_BEGIN, this.onKeyPress, this, [r]);
          o.on(XOF.TouchEvent.TOUCH_END, this.onKeyRelease, this, [r]);
          o.on(XOF.TouchEvent.TOUCH_CANCEL, this.onKeyRelease, this, [r]);
          o.on(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, this.onKeyRelease, this, [
            r,
          ]);
          o.id = 501 + n;
          o.data = { showBg: false };
        }
      };
      t.prototype.onKeyPress = function (t) {
        v.default.gameControler.keyPress(t, true);
      };
      t.prototype.onKeyRelease = function (t) {
        v.default.gameControler.keyRelease(t);
      };
      t.prototype.updateItems = function () {
        var t = v.default.userData.bag;
        var e = _.default.map;
        if (!t) return;
        if (!e) return;
        var n = [
          f.default.key["1"],
          f.default.key["2"],
          f.default.key["3"],
          f.default.key["4"],
        ];
        var o = ["slot1", "slot2", "slot3", "slot4"];
        for (var r = 0; r < o.length; r++) {
          var i = o[r];
          var a = { showBg: false, key: f.default.getKey(n[r]) };
          var s = v.default.userData.map.itemSlots[i];
          if (s && s.itemID) {
            var u = s.itemID;
            a.itemData = y.default.getItemData(u);
            a.count = s.count;
            a.extra = s;
            a.extra = { enabled: !e.hero.isDeath && s.count > 0 };
          }
          var l = this.items[r];
          l.data = a;
        }
      };
      t.prototype.updateSkills = function () {
        var t = _.default.map;
        if (t === null || t === void 0 ? void 0 : t.curScene) {
          var e = v.default.userData.skill;
          var n = t.hero;
          var o = ["a", "s", "d", "f", "g", "h", "q", "w", "e", "r", "t", "y"];
          for (var r = 0; r < Math.min(this.skills.length, o.length); r++) {
            var i = this.skills[r];
            var a = i.data;
            var s = e.slots[511 + r];
            if (s === null || s === void 0 ? void 0 : s.id) {
              var u = f.default.conf.skills.all[s.id];
              a.itemData = u;
              var l = n ? t.curScene.sk.onCheckUse(s.id, n) > 0 : false;
              a.extra = {
                slotType: "skill",
                lv: e.getSkillLv(s.id),
                enabled: l,
              };
              a.lock = e.isLock(s.id);
            } else {
              a.itemData = undefined;
            }
            i.data = a;
          }
        }
      };
      t.prototype.resetItemsCountdown = function () {
        for (var t = 0, e = this.items; t < e.length; t++) {
          var n = e[t];
          n.gTime.rate = 0;
        }
        for (var o = 0, r = this.skills; o < r.length; o++) {
          var i = r[o];
          i.gTime.rate = 0;
        }
      };
      t.prototype.onUpdateCountdown = function (t) {
        var e, n, o, r, i, a;
        if (!(v.default.userData.map.currentScreen() == 2)) return;
        if (
          (e =
            _.default === null || _.default === void 0
              ? void 0
              : _.default.map) === null || e === void 0
            ? void 0
            : e.paused
        )
          return;
        if (!((n = _.default.map) === null || n === void 0 ? void 0 : n.hero))
          return;
        var s = _.default.map.hero;
        for (var u = 0, l = this.items; u < l.length; u++) {
          var f = l[u];
          var c =
            (r =
              (o = y.default.getItemData(f.itemId)) === null || o === void 0
                ? void 0
                : o.cd) !== null && r !== void 0
              ? r
              : 0;
          if (c > 0) f.updateCountdown(Math.max(0, s.rs.getCDRate(f.itemId)));
        }
        for (var p = 0, d = this.skills; p < d.length; p++) {
          var h = d[p];
          var c =
            (a =
              (i = m.default.getData(h.itemId)) === null || i === void 0
                ? void 0
                : i.cd) !== null && a !== void 0
              ? a
              : 0;
          if (c > 0) h.updateCountdown(Math.max(0, s.rs.getCDRate(h.itemId)));
        }
      };
      t.prototype.onClickHome = function () {
        v.default.viewMgr.open(u.default.DungeonPaused);
      };
      t.prototype.initLevel = function () {
        var t, e, n, o;
        this.fightRoundView.visible = false;
        if (v.default.userData.map.dungeonId == g.default.Tower) {
          this.fightRoundView.visible = true;
          this.labMapName.text = d.default.getTowerData(
            v.default.userData.map.level,
            v.default.userData.map.round
          ).title;
          this.playReadyAnimation(v.default.userData.map.round);
        } else if (
          v.default.userData.map.dungeonId == g.default.TowerOfUltimate
        ) {
          this.fightRoundView.visible = true;
          this.labMapName.text = A.default.getTowerData(
            v.default.userData.map.level,
            v.default.userData.map.round
          ).title;
          this.playReadyAnimation(v.default.userData.map.round);
        } else {
          var r = d.default.getDungeonTypeByDungeonId(
            v.default.userData.map.dungeonId
          );
          if (r == g.DungeonType.Line) {
            this.addChild(this.dungeonMap);
            this.dungeonMap.updateView();
            this.labMapName.text =
              (e =
                (t = f.default.conf.map.map) === null || t === void 0
                  ? void 0
                  : t[v.default.userData.map.dungeonId]) === null ||
              e === void 0
                ? void 0
                : e.name;
          } else if (r == g.DungeonType.Hell) {
            this.labMapName.text = b.default.getTowerData(
              v.default.userData.map.level,
              v.default.userData.map.round
            ).title;
          } else {
            this.labMapName.text =
              (o =
                (n = f.default.conf.map.map) === null || n === void 0
                  ? void 0
                  : n[v.default.userData.map.dungeonId]) === null ||
              o === void 0
                ? void 0
                : o.name;
          }
        }
        this.updateItems();
      };
      t.prototype.playReadyAnimation = function (t, e, n) {
        if (e === void 0) {
          e = 0;
        }
        if (n === void 0) {
          n = false;
        }
        this.fightRoundView.playReadyAnimation(t, e, n);
      };
      t.prototype.onJoysticChange = function (t) {
        if (this.joysticView.out.x > 0);
      };
      t.prototype.isDown = function (t) {
        return this.joysticView.isDown(t);
      };
      return t;
    })(s.default);
    e.default = E;
  });
  t(ql);
  var Kl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(R);
    var a = o(I);
    var s = o(W);
    var u = o(k);
    var l = o(T);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/RoleMenu/RoleMenu", t, t);
        t.touchThrough = false;
        t.touchEnabled = t.imgBg.touchEnabled = true;
        t.orderIndex = l.default.MAIN_UI;
        t.bgCoin.grid = t.bgGold.grid = [7, 8, 5, 5];
        return t;
      }
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.closeAll();
        this.btnBack.off(XOF.TouchEvent.TAP, this.close, this);
      };
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnBack.on(XOF.TouchEvent.TAP, this.close, this);
        this.onSwitch(0);
        this.updateView();
      };
      t.prototype.closeAll = function () {
        r.default.viewMgr.close(a.default.MenuProfile);
      };
      t.prototype.onSwitch = function (t) {
        this.closeAll();
        switch (t) {
          case 0:
            r.default.viewMgr.open(a.default.MenuProfile);
            break;
        }
      };
      t.prototype.updateView = function () {
        this.labCoin.text = u.default.formatMoney(r.default.userData.bag.coin);
        this.labGold.text = u.default.formatMoney(r.default.userData.bag.gold);
      };
      return t;
    })(i.default);
    e.default = f;
  });
  t(Kl);
  var Yl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(dt);
    var s = o(je);
    var r = o(de);
    var i = o(pe);
    var u = o(ue);
    var l = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        var e = a.default.conf.character["swordman"];
        t.setRoleData(e);
        var n = e.job;
        t.setBodyEquipmentId(e.bodyEquipmentId);
        t.setActionInfo(a.default.conf.action[n]);
        t.setAction(ht.RoleAction.REST);
        t.body.shadow = false;
        XOF.Timer.startTimer(t.update, t);
        return t;
      }
      t.prototype.update = function (t) {
        if (this.equTitle) this.equTitle.update((t || XOF.Timer.dt) * 1e3);
        if (this.equAura) this.equAura.update((t || XOF.Timer.dt) * 1e3);
        this.body.update((t || XOF.Timer.dt) * 1e3);
        for (var e = 0, n = this.equipments; e < n.length; e++) {
          var o = n[e];
          o.sync(this.body);
        }
      };
      t.prototype.setBodyEquipmentId = function (t) {
        this.bodyEquipmentId = t;
        var e = a.default.conf.equipment[t];
        var n = a.default.getPvfConf(
          a.default.conf.equanistaticdata.animation_detail_data[e["sani"]].ani
        );
        var o = e.variation[0] * 100 + e.variation[1];
        this.body.equipmentTypes =
          a.default.conf.equipment[this.bodyEquipmentId].position;
        this.setBodyAnimationGroup(n, [o]);
      };
      t.prototype.setAura = function (t) {
        if (this.noshowAura) return;
        var e = this.equAura;
        if (!t) {
          if (e) {
            e.removeSelf();
            e.unattend(this);
            e.reset();
          }
        }
        if (!e) {
          e = new r.default(t);
          this.equAura = e;
          e.attend(this);
        } else if (t) {
          e.unattend(this);
          e.setEquipment(t);
          e.attend(this);
        }
      };
      t.prototype.setTitle = function (t) {
        var e, n;
        if (this.noshowTitle) return;
        var o = this.equTitle;
        if (!t) {
          if (o) {
            o.removeSelf();
            o.reset();
          }
        }
        if (!o) {
          o = new i.default(t);
          o.floatOffset = 0;
          this.equTitle = o;
        } else if (t) {
          o.setEquipment(t);
        }
        if (t) {
          o.roleHeight =
            (n =
              (e =
                this === null || this === void 0 ? void 0 : this.roleData) ===
                null || e === void 0
                ? void 0
                : e.height) !== null && n !== void 0
              ? n
              : 120;
          o.addTo(this);
        }
      };
      t.prototype.setEquipments = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        this.rmEquipments();
        this.setTitle(undefined);
        this.setAura(undefined);
        t = s.default.sortEqusByType(t);
        for (var n = 0, o = t; n < o.length; n++) {
          var r = o[n];
          if (a.default.conf.equipment[r].type == "body") {
            this.setBodyEquipmentId(r);
          } else if (a.default.conf.equipment[r].type == "title") {
            this.setTitle(r);
          } else if (a.default.conf.equipment[r].type == "aura") {
            this.setAura(r);
          } else {
            var i = this.addEquipment(r);
            if (i) i.shadow = false;
          }
        }
        this.setAction(ht.RoleAction.REST, true);
      };
      t.prototype.destory = function () {
        this.rmEquipments();
        XOF.Timer.stopTimer(this.update, this);
        o.prototype.destory.call(this);
      };
      return t;
    })(u.default);
    e.default = l;
  });
  t(Yl);
  var Wl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.ItemAutoType = void 0;
    var l = o(q);
    var r = o(R);
    var i = o(W);
    var a = o(T);
    var s = o(_l);
    var f = o(st);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/Bag/BagAutoSell", t, t);
        t.orderIndex = a.default.MAIN_UI2;
        t.viewCache = true;
        t.selectIndex = [1, 2];
        t.listEquip.itemRenderer = s.default;
        return t;
      }
      t.prototype.onOpen = function (t) {
        var n = this;
        e.prototype.onOpen.call(this);
        this.type = t || c.SELL;
        l.default.eventMgr.on(1032, this.updateView, this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClick, this);
        if (this.selectIndex.length == 0) this.selectIndex.push(1);
        this.gQuality.children_.forEach(function (t, e) {
          if (t instanceof XOF.Image) {
            t.on(XOF.TouchEvent.TAP, n.onChange, n, [parseInt(t.name)]);
          }
        });
        if (this.type == c.SELL) {
          this.labTitle.text = "批量出售";
        } else if (this.type == c.DECOMPOSE) {
          this.labTitle.text = "批量分解";
        }
        this.updateGroup();
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        l.default.eventMgr.off(1032, this.updateView, this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClick, this);
        this.listEquip.dataProvider = [];
      };
      t.prototype.onChange = function (t) {
        var e = this.selectIndex.indexOf(t);
        if (e >= 0) {
          this.selectIndex.splice(e, 1);
        } else {
          this.selectIndex.push(t);
        }
        this.updateGroup();
        this.updateView();
      };
      t.prototype.updateView = function () {
        var t = [];
        for (
          var e = 0, n = l.default.userData.equip.equips;
          e < n.length;
          e++
        ) {
          var o = n[e];
          var r = { showBg: true };
          var i = o;
          if (i && i.count && i.itemID && !(i.sign > 0)) {
            var a = i.itemID;
            var s = f.default.getItemData(a);
            var u = this.selectIndex.indexOf(s.quality) >= 0;
            if (s.type == 1 && s.class == 10) {
              u = false;
            }
            if (u) {
              r.object = i;
              r.extra = i;
              r.isBag = true;
              r.itemData = s;
              r.count = i.count;
              t.push(r);
            }
          }
        }
        this.listEquip.dataProvider = t.sort(function (t, e) {
          return -t.itemData.quality - -e.itemData.quality;
        });
      };
      t.prototype.updateGroup = function () {
        var n = this;
        this.gQuality.children_.forEach(function (t, e) {
          if (t instanceof XOF.Image) {
            t.skin =
              n.selectIndex.indexOf(parseInt(t.name)) >= 0
                ? "ui_interface_m/ui_atlas_common/M5UI_Common_RadioBtnon_00.png"
                : "ui_interface_m/ui_atlas_common/M5UI_Common_RadioBtnoff_00.png";
          } else if (t instanceof XOF.Label) {
            t.textColor = f.default.getQualityColor(parseInt(t.name));
          }
        });
      };
      t.prototype.onClick = function () {
        var e = this;
        var t, n;
        if (
          ((n =
            (t = this.listEquip) === null || t === void 0
              ? void 0
              : t.dataProvider) === null || n === void 0
            ? void 0
            : n.length) > 0
        ) {
          l.default.comm.netloading(1e4);
          if (this.type == c.SELL) {
            l.default.userData.equip
              .equipAutoSell(this.selectIndex)
              .then(function (t) {
                if (t) e.close();
                l.default.comm.netloading(0);
              });
          } else if (this.type == c.DECOMPOSE) {
            l.default.userData.equip
              .equipAutoDecompose(this.selectIndex)
              .then(function (t) {
                if (t) e.close();
                l.default.comm.netloading(0);
              });
          }
        } else {
          l.default.comm.tip("可处理的装备不足");
        }
      };
      return t;
    })(r.default);
    e.default = u;
    var c;
    (function (t) {
      t[(t["SELL"] = 0)] = "SELL";
      t[(t["DECOMPOSE"] = 1)] = "DECOMPOSE";
    })((c = e.ItemAutoType || (e.ItemAutoType = {})));
  });
  t(Wl);
  Wl.ItemAutoType;
  var zl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(V);
    var c = a(dt);
    var p = a(q);
    var u = a(R);
    var l = a(x);
    var f = a(I);
    var d = a(W);
    var h = a(k);
    var v = a(T);
    var y = a(Yl);
    var _ = i(at);
    var m = a(st);
    var g = a(it);
    var b = a(je);
    var O = a(_l);
    var w = a(mt);
    var A = a(rl);
    var E = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = v.default.MAIN_UI2;
        d.default.initSkin("ui/rolemenu/menuprofile", t, t);
        t.listEquip.itemRenderer = O.default;
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(l.default.CLOSE, this.close, this);
        this.btnList.selectIndex = 0;
        var n = [
          s.default.tr(157),
          s.default.tr(143),
          s.default.tr(144),
          s.default.tr(72),
          s.default.tr(145),
        ];
        this.btnList.children_.forEach(function (t, e) {
          return (t.label = n[e]);
        });
        this.btnList.on(l.default.RADIOGROUP_CHANGED, this.onChange, this);
        p.default.eventMgr.on(1032, this.updateView, this);
        p.default.eventMgr.on(1036, this.updateEquips, this);
        p.default.eventMgr.on(1036, this.updateSkins, this);
        p.default.eventMgr.on(1036, this.updateBody, this);
        this.btnRepair.on(XOF.TouchEvent.TAP, this.onClickRepair, this);
        this.btnSell.on(XOF.TouchEvent.TAP, this.onClickSell, this);
        this.btnDecompose.on(XOF.TouchEvent.TAP, this.onClickDecompose, this);
        this.btnAttri.on(XOF.TouchEvent.TAP, this.onClickAttr, this);
        this.btnList.selectIndex = 0;
        this.btnList2.selectIndex = 0;
        this.btnList2.on(l.default.RADIOGROUP_CHANGED, this.onSelect, this);
        this.onSelect();
        this.initBodyData();
        this.updateBody();
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnList.off(l.default.RADIOGROUP_CHANGED, this.onChange, this);
        p.default.eventMgr.off(1032, this.updateView, this);
        p.default.eventMgr.off(1036, this.updateEquips, this);
        p.default.eventMgr.off(1036, this.updateBody, this);
        p.default.eventMgr.off(1036, this.updateSkins, this);
        this.btnRepair.off(XOF.TouchEvent.TAP, this.onClickRepair, this);
        this.btnSell.off(XOF.TouchEvent.TAP, this.onClickSell, this);
        this.btnDecompose.off(XOF.TouchEvent.TAP, this.onClickDecompose, this);
        this.btnList2.off(l.default.RADIOGROUP_CHANGED, this.onSelect, this);
        this.btnAttri.off(XOF.TouchEvent.TAP, this.onClickAttr, this);
        this.bg.onClose();
        this.body.removeSelf();
        this.body.destory();
        delete this.body;
      };
      t.prototype.initBodyData = function () {
        this.body = new y.default();
        this.gBody.addChild(this.body);
      };
      t.prototype.updateBody = function () {
        var t;
        var e, n;
        var o = [];
        var r = p.default.userData.hero.job;
        var i = c.default.conf.character[r];
        if (i.bodyEquipmentId) o.push(i.bodyEquipmentId);
        if (i.weaponEquipmentId) o.push(i.weaponEquipmentId);
        if (i.skinEquipmentId) o.push.apply(o, i.skinEquipmentId);
        for (var a in p.default.userData.hero.wears) {
          var s = m.default.getItemData(
            p.default.userData.hero.wears[a].itemID
          );
          if (s === null || s === void 0 ? void 0 : s.equ) {
            o.push(s.equ);
          }
        }
        var u = p.default.userData.hero.skins;
        for (var a in u) {
          var l = m.default.getItemData(u[a].itemID);
          if (
            (l === null || l === void 0 ? void 0 : l.class) == _.SkinClass.BODY
          ) {
            if (
              A.default.getBoolValue(A.default.system_setting_showskin) == false
            ) {
              continue;
            }
          }
          if (l === null || l === void 0 ? void 0 : l.equ) {
            o.push(l.equ);
          }
          if (
            (e = l === null || l === void 0 ? void 0 : l.equs) === null ||
            e === void 0
              ? void 0
              : e.length
          ) {
            o.push.apply(o, l.equs);
          }
        }
        if (
          o.length > 0 &&
          ((n = this === null || this === void 0 ? void 0 : this.lastEquips) ===
            null || n === void 0
            ? void 0
            : n.length) == o.length
        ) {
          var f = true;
          for (var a in o) {
            if (this.lastEquips[a] != o[a]) {
              f = false;
            }
          }
          if (f) return;
        }
        (t = this.body).setEquipments.apply(t, o);
        this.lastEquips = h.default.copy(o);
      };
      t.prototype.updateView = function () {
        this.updateEquips();
        this.updateSkins();
        this.updateItems();
        this.labName.text = s.default.tr(
          83,
          p.default.userData.hero.lv,
          p.default.userData.hero.name
        );
        this.labJob.text =
          c.default.conf.character[p.default.userData.hero.job].name;
      };
      t.prototype.updateItems = function () {
        var t = p.default.userData.bag;
        var e = [];
        var n = Math.ceil(p.default.userData.equip.getGridCount() / 5) * 5;
        var o = [].concat(
          p.default.userData.equip.equips,
          p.default.userData.equip.skins
        );
        for (var r = 0; r < n; r++) {
          e.push({ showBg: true });
        }
        for (var r = 0, i = 0; r < o.length; r++) {
          var a = { showBg: true };
          var s = o[r];
          if (s && s.count && s.itemID) {
            var u = s.itemID;
            var l = m.default.getItemData(u);
            if (!l) continue;
            var f = false;
            if (this.equipCls == "-2") {
              f = l.type == g.default.SKIN;
            } else if (l.type == g.default.EQUIP) {
              if (this.equipCls == "-1") {
                f = l.class != _.default.WEAPON;
              } else if (this.equipCls) {
                f = l.class == this.equipCls;
              } else {
                f = true;
              }
            }
            if (f) {
              a.object = s;
              a.extra = s;
              a.isBag = true;
              a.itemData = l;
              a.count = s.count;
              a.cd = t.getItemCountdown(u);
              e[i] = a;
              i++;
            }
          }
        }
        this.listEquip.dataProvider = e.sort(function (t, e) {
          var n, o, r, i, a, s, u, l;
          var f =
            ((o =
              (n = e === null || e === void 0 ? void 0 : e.extra) === null ||
              n === void 0
                ? void 0
                : n.sign) !== null && o !== void 0
              ? o
              : 0) -
            ((i =
              (r = t === null || t === void 0 ? void 0 : t.extra) === null ||
              r === void 0
                ? void 0
                : r.sign) !== null && i !== void 0
              ? i
              : 0);
          if (f == 0)
            return (
              ((s =
                (a = e === null || e === void 0 ? void 0 : e.itemData) ===
                  null || a === void 0
                  ? void 0
                  : a.quality) !== null && s !== void 0
                ? s
                : 0) -
              ((l =
                (u = t === null || t === void 0 ? void 0 : t.itemData) ===
                  null || u === void 0
                  ? void 0
                  : u.quality) !== null && l !== void 0
                ? l
                : 0)
            );
          return f;
        });
      };
      t.prototype.updateEquips = function () {
        var r = p.default.userData.hero;
        this.equipBox.children_.forEach(function (t) {
          var e = r.getEquipByEquipClass(t.equipCls);
          if (e === null || e === void 0 ? void 0 : e.itemID) {
            var n = {};
            var o = m.default.getItemData(e.itemID);
            n.itemData = o;
            n.extra = e;
            n.isBag = true;
            n.object = e;
            t.data = n;
          } else {
            t.data = {};
          }
        });
      };
      t.prototype.updateSkins = function () {
        var r = p.default.userData.hero;
        this.skinBox.children_.forEach(function (t) {
          var e = r.getSkinBySkinClass(t.equipCls);
          if (e === null || e === void 0 ? void 0 : e.itemID) {
            var n = {};
            var o = m.default.getItemData(e.itemID);
            n.itemData = o;
            n.extra = e;
            n.isBag = true;
            n.object = e;
            t.data = n;
          } else {
            t.data = {};
          }
        });
      };
      t.prototype.onChange = function () {
        var t = [, _.default.WEAPON, "-1", _.default.TITLE, "-2"];
        this.equipCls = t[this.btnList.selectIndex];
        this.updateItems();
        this.equipList.stopAnimation();
        this.equipList.scrollV = 0;
      };
      t.prototype.onSelect = function () {
        this.equipBox.visible = this.skinBox.visible = false;
        if (this.btnList2.selectIndex == 0) {
          this.equipBox.visible = true;
          this.btnList.selectIndex = 0;
        } else if (this.btnList2.selectIndex == 1) {
          this.skinBox.visible = true;
          this.btnList.selectIndex = 4;
        }
        this.equipList.stopAnimation();
        this.equipList.scrollV = 0;
      };
      t.prototype.onClickAttr = function () {
        p.default.viewMgr.open(f.default.HeroProfileAttribute, [
          w.default.map.hero.attribute,
        ]);
      };
      t.prototype.onClickSell = function () {
        p.default.viewMgr.open(f.default.ItemAutoSell, [Wl.ItemAutoType.SELL]);
      };
      t.prototype.onClickDecompose = function () {
        p.default.viewMgr.open(f.default.ItemAutoSell, [
          Wl.ItemAutoType.DECOMPOSE,
        ]);
      };
      t.prototype.onClickRepair = function () {
        var t = 0;
        var e = 0;
        for (var n in p.default.userData.hero.wears) {
          var o = p.default.userData.hero.wears[n];
          var r = m.default.getItemData(o.itemID);
          if (r) {
            var i = r.durability - o.durability;
            if (i > 0) {
              t += b.default.getEquipRepair(i, r);
              e += 1;
            }
          }
        }
        if (t > 0) {
          p.default.comm.msgBox({
            text: s.default.tr(235, e, h.default.formatMoney(t)),
            confirm: {
              callback: function () {
                return p.default.userData.equip
                  .equipRepairAll()
                  .then(function (t) {
                    if (t) {
                      p.default.comm.mtr(236);
                    }
                  });
              },
              close: true,
            },
            cancel: {},
          });
        } else {
          p.default.comm.mtr(89);
        }
      };
      return t;
    })(u.default);
    e.default = E;
  });
  t(zl);
  var Ql = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Q);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.$icon = new XOF.Image();
        t.addChild(t.$icon);
        t.on(XOF.TouchEvent.TOUCH_BEGIN, t.onTouchBegin, t);
        t.on(XOF.TouchEvent.TOUCH_END, t.onTouchEnd, t);
        t.on(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, t.onTouchEnd, t);
        t.on(XOF.TouchEvent.TAP, t.onTap, t);
        t.on(XOF.Event.RESIZE, t.onResize, t);
        t.pressScale = 0.9;
        t.releaseScale = 1;
        return t;
      }
      Object.defineProperty(t.prototype, "skin", {
        get: function () {
          return this.$icon.skin;
        },
        set: function (t) {
          if (this.$icon.skin == t) return;
          this.$icon.skin = t;
          XOF.loader.loadImage(t, undefined, undefined, this.onLoaded, this);
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "grid", {
        get: function () {
          return this.$icon.grid;
        },
        set: function (t) {
          this.$icon.grid = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "releaseScale", {
        get: function () {
          return this.$releaseScale;
        },
        set: function (t) {
          if (t == this.$releaseScale) return;
          this.$releaseScale = t;
          this.$icon.scale(this.$releaseScale, this.$releaseScale);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onTouchBegin = function () {
        r.default.removeTweens(this.$icon);
        r.default
          .get(this.$icon)
          .to({ scaleX: this.pressScale, scaleY: this.pressScale }, 100)
          .remove();
      };
      t.prototype.onTouchEnd = function () {
        r.default.removeTweens(this.$icon);
        r.default
          .get(this.$icon)
          .to({ scaleX: this.releaseScale, scaleY: this.releaseScale }, 100)
          .remove();
      };
      t.prototype.onLoaded = function () {
        this.onResize();
      };
      t.prototype.onResize = function () {
        var t = XOF.loader.get(this.skin);
        if (t) {
          var e = this.width_,
            n = this.height_;
          if (e == undefined) {
            e = t.width;
            n = t.height;
          }
          this.$icon.pivot(t.width / 2, t.height / 2);
          this.$icon.pos(Math.floor(e / 2), Math.floor(n / 2));
        }
      };
      t.prototype.onTap = function () {
        XOF.stage.event("CLICK_BUTTON");
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(Ql);
  var Jl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Ql);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      Object.defineProperty(e.prototype, "data", {
        get: function () {
          return this.$data;
        },
        set: function (t) {
          this.$data = t;
          this.skin = t.data.icon;
        },
        enumerable: false,
        configurable: true,
      });
      return e;
    })(r.default);
    e.default = i;
  });
  t(Jl);
  var Zl = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o($);
    var a = o(q);
    var s = o(R);
    var u = o(I);
    var l = o(W);
    var f = o(k);
    var c = o(Q);
    var p = o(me);
    var d = o(Jl);
    var h = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.touchThrough = false;
        l.default.initSkin("ui/M_Controler/HomeUI", t, t);
        t.bgCoin.grid = t.bgGold.grid = [7, 8, 5, 5];
        t.size(i.default.width, i.default.height);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.cityHead.open();
        this.chat.onOpen();
        this.btnTower.on(XOF.TouchEvent.TAP, this.onClickTower, this);
        this.btnGoldAdd.on(XOF.TouchEvent.TAP, this.onClickGoldAdd, this);
        this.btnCoinAdd.on(XOF.TouchEvent.TAP, this.onClickCoinAdd, this);
        this.btnSetting.on(XOF.TouchEvent.TAP, this.onClickSetting, this);
        a.default.eventMgr.on(1032, this.updateView, this);
        c.default
          .get(this.imgRole, { loop: true })
          .to({ scaleY: 1.02, scaleX: 1.01 }, 3e3)
          .wait(200)
          .to({ scaleY: 1, scaleX: 1 }, 3e3)
          .wait(200);
        this.updateView();
        this.updateTopIcon();
        this.updateBottomIcon();
      };
      t.prototype.updateTopIcon = function () {
        for (var t in r.default.conf.uiicons.top) {
          var e = r.default.conf.uiicons.top[t];
          if (e.show) {
            var n = new d.default();
            n.size(this.topIcon.gridWidth, this.topIcon.gridHeight);
            n.data = { data: e, red: 0 };
            n.on(XOF.TouchEvent.TAP, this.onClickIcon, this, [e.link]);
            this.topIcon.addChild(n);
          }
        }
        this.topIcon.reorder();
      };
      t.prototype.updateBottomIcon = function () {
        for (var t in r.default.conf.uiicons.bottom) {
          var e = r.default.conf.uiicons.bottom[t];
          if (e.show) {
            var n = new d.default();
            n.size(this.bottomIcon.gridWidth, this.bottomIcon.gridHeight);
            n.data = { data: e, red: 0 };
            n.on(XOF.TouchEvent.TAP, this.onClickIcon, this, [e.link]);
            this.bottomIcon.addChild(n);
          }
        }
        this.bottomIcon.reorder();
      };
      t.prototype.updateView = function () {
        this.labCoin.text = f.default.formatMoney(a.default.userData.bag.coin);
        this.labGold.text = f.default.formatMoney(a.default.userData.bag.gold);
        this.updateHead();
      };
      t.prototype.updateHead = function () {
        this.cityHead.updateHead();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.cityHead.close();
        this.chat.onClose();
        this.btnGoldAdd.off(XOF.TouchEvent.TAP, this.onClickGoldAdd, this);
        this.btnCoinAdd.off(XOF.TouchEvent.TAP, this.onClickCoinAdd, this);
        this.btnTower.off(XOF.TouchEvent.TAP, this.onClickTower, this);
        this.btnSetting.off(XOF.TouchEvent.TAP, this.onClickSetting, this);
        a.default.eventMgr.off(1032, this.updateView, this);
        c.default.removeTweens(this.imgRole);
      };
      t.prototype.onClickIcon = function (t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        p.default.openView(t, e);
      };
      t.prototype.onClickBag = function () {
        a.default.viewMgr.open(u.default.RoleMenu);
      };
      t.prototype.onClickGoldAdd = function () {
        a.default.comm.msgBox("可以通过兑换获取点券");
      };
      t.prototype.onClickCoinAdd = function () {
        a.default.comm.msgBox("可以在商城中使用点券兑换金币");
      };
      t.prototype.onClickTower = function () {
        a.default.viewMgr.open(u.default.TowerSelect);
      };
      t.prototype.onClickSetting = function () {
        a.default.viewMgr.open(u.default.SystemSetting);
      };
      return t;
    })(s.default);
    e.default = h;
  });
  t(Zl);
  var tf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(dt);
    var i = o($);
    var s = o(q);
    var r = o(R);
    var u = o(x);
    var l = o(W);
    var f = o(Se);
    var c = o(Ce);
    var p = o(Pe);
    var d = o(wl);
    var h = o(Q);
    var v = o(T);
    var y = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        t.time = 1500;
        t.orderIndex = v.default.LOADING;
        t.touchThrough = false;
        t.touchEnabled = true;
        t.resLoader = new p.default();
        t.resLoader.on(u.default.PROGRESS, t.onProgress, t);
        l.default.initSkin("ui/M_Controler/MapLoad", t, t);
        t.size(i.default.width, i.default.height);
        t.imgBlack.size(t.width, t.height);
        t.imgBox.size(t.width, t.height);
        d.default.relativeSet(t.imgBox, 0, 0);
        t.imgLoad.x = t.imgBox.width + t.imgBox.x - t.imgLoad.width;
        t.labProgress.x = t.imgLoad.x + 64;
        return t;
      }
      t.prototype.onClose = function () {
        r.prototype.onClose.call(this);
        h.default.removeTweens(this.imgLight);
        this.callback = undefined;
        this.thisObj = undefined;
      };
      t.prototype.onOpen = function (t, e, n, o) {
        r.prototype.onOpen.call(this);
        this.now = XOF.now();
        this.gPanel.visible = false;
        this.imgBlack.visible = true;
        this.imgBlack.alpha = 1;
        this.callback = n;
        this.thisObj = o;
        s.default.eventMgr.event(1009);
        this.setMap(t);
        this.updateView();
        this.labProgress.text = "";
        if (e === null || e === void 0 ? void 0 : e.length) {
          this.resLoader.once(XOF.Event.COMPLETE, this.onComplete, this);
          this.resLoader.push(e);
        } else {
          this.onComplete();
        }
        h.default
          .get(this.imgLight, { loop: true })
          .set({ rotate: 0 })
          .to({ rotate: 360 }, 1e3);
      };
      t.prototype.updateView = function () {};
      t.prototype.onLoaded = function () {
        this.imgLeft.visible =
          this.imgRight.visible =
          this.gPanel.visible =
            true;
        this.imgBg.width = this.imgBg.height = undefined;
        var t = XOF.loader.get(this.imgBg.skin);
        var e = this.gPanel.width / 2;
        if (t) {
          var n = this.height / t.height;
          this.imgBg.size(t.width * n, this.height);
          e = (this.gPanel.width - this.imgBg.width) / 2;
          this.imgBg.x = e;
        }
        this.imgLeft.x = e - 160;
        this.imgRight.x = e + this.imgBg.width + 160;
      };
      t.prototype.setMap = function (t) {
        var e, n, o;
        var r =
          (o =
            (n =
              (e = a.default.conf.dungeon) === null || e === void 0
                ? void 0
                : e[t]) === null || n === void 0
              ? void 0
              : n.bg) !== null && o !== void 0
            ? o
            : this.imgBlack.skin;
        var i = [
          { url: this.imgBox.skin, type: c.default.IMAGE },
          { url: this.imgLeft.skin, type: c.default.IMAGE },
        ];
        this.imgBg.skin = r;
        i.push({ url: this.imgBg.skin, type: c.default.IMAGE });
        f.default.checkLoaded(i, true, this.onLoaded, this);
      };
      t.prototype.onProgress = function (t, e, n) {
        this.labProgress.text = Math.floor(t * 100) + "%";
      };
      t.prototype.onComplete = function () {
        var t = this;
        this.labProgress.text = "";
        function e() {
          t.gPanel.visible = false;
          h.default
            .get(t.imgBlack)
            .call(t.openView, t)
            .to({ alpha: 0 }, 400)
            .call(t.close, t)
            .remove();
        }
        if (XOF.now() - this.now < t.time) {
          s.default.timerMgr.delay(
            t.time - (XOF.now() - this.now),
            1,
            function () {
              return e();
            }
          );
        } else {
          e();
        }
      };
      t.prototype.openView = function () {
        if (this.callback) {
          this.callback.apply(this.thisObj);
        }
      };
      return t;
    })(r.default);
    e.default = y;
  });
  t(tf);
  var ef = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o($);
    var a = o(q);
    var s = o(R);
    var u = o(W);
    var l = o(k);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        u.default.initSkin("ui/RoleMenu/CdkExchange", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClick, this);
        this.labCode.on(XOF.TouchEvent.TAP, this.onEdit, this);
        this.labLink.on(XOF.TouchEvent.TAP, this.onSetBoradText, this);
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClick, this);
        this.labCode.off(XOF.TouchEvent.TAP, this.onEdit, this);
        this.labLink.off(XOF.TouchEvent.TAP, this.onSetBoradText, this);
      };
      t.prototype.onClick = function () {
        var e = this;
        var t = (this.code + "").length;
        if (t == 32) {
          a.default.userData.home.cdkExchange(this.code).then(function (t) {
            e.code = "";
            e.close();
          });
        } else if (t == 0) {
          a.default.eventMgr.event(1055, [r.default.tr(172)]);
        } else {
          a.default.eventMgr.event(1055, [r.default.tr(171)]);
        }
      };
      t.prototype.onEdit = function () {
        a.default.platform.input(r.default.tr(172), "", {
          confirmCallback: this.onInputComplete,
          confirmThisObj: this,
        });
      };
      t.prototype.onSetBoradText = function () {
        a.default.platform.setBoradText(i.default.exchangeLink);
        a.default.comm.tip("复制成功");
      };
      t.prototype.onInputComplete = function (t) {
        this.code = l.default.replace(
          l.default.replace(t + "", "\n", ""),
          " ",
          ""
        );
        this.updateView();
      };
      t.prototype.updateView = function () {
        if (this.code) {
          this.labCode.text = this.code;
        } else {
          this.labCode.text = r.default.tr(172);
        }
        this.labLink.text = r.default.tr(277, i.default.exchangeLink);
      };
      return t;
    })(s.default);
    e.default = f;
  });
  t(ef);
  var nf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var p = o(dt);
    var r = o(R);
    var i = o(W);
    var a = o(T);
    var d = o(xl);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = a.default.MAIN_UI2;
        i.default.initSkin("ui/HeroProfile/HeroProfileAttribute", t, t);
        return t;
      }
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.attribute = t;
        if (!this.attribute) {
          XOF.log("错误的属性对象");
          return;
        }
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        delete this.attribute;
      };
      t.prototype.updateView = function () {
        var t = p.default.conf.role.attribute;
        var e = [
          [ht.AttributeKeys.HP, ht.AttributeKeys.MP],
          [
            ht.AttributeKeys.STR_FINAL,
            ht.AttributeKeys.INT_FINAL,
            ht.AttributeKeys.CON_FINAL,
            ht.AttributeKeys.DEX,
            ht.AttributeKeys.MND,
          ],
          [
            ht.AttributeKeys.ATK,
            ht.AttributeKeys.PHY_DEF,
            ht.AttributeKeys.MGK,
            ht.AttributeKeys.MAG_DEF,
            ht.AttributeKeys.ATK_CRIT_RATIO,
            ht.AttributeKeys.MGK_CRIT_RATIO,
          ],
          [
            ht.AttributeKeys.ATK_SPD,
            ht.AttributeKeys.SKL_SPD,
            ht.AttributeKeys.MOV_SPD,
          ],
          [
            ht.AttributeKeys.FIRE_STRENGTH,
            ht.AttributeKeys.FIRE_DEF,
            ht.AttributeKeys.WATER_STRENGTH,
            ht.AttributeKeys.WATER_DEF,
            ht.AttributeKeys.LIGHT_STRENGTH,
            ht.AttributeKeys.LIGHT_DEF,
            ht.AttributeKeys.DARK_STRENGTH,
            ht.AttributeKeys.DARK_DEF,
            ht.AttributeKeys.ELEMENT_STRENGTH,
            ht.AttributeKeys.ELEMENT_DEF,
          ],
        ];
        var n = 0;
        var o = [this.lab1, this.lab2];
        this.lab1.text = this.lab2.text = "";
        var r = this.attribute;
        for (var i in e) {
          var a = e[i];
          for (var s in a) {
            var u = a[s];
            if (t[u].show) {
              var l = o[n % 2];
              l.text +=
                d.default.attr2str([{ k: u, v: r.attributes[u] }]) + "\n";
              n++;
            }
          }
          var f = 2 + (n % 2);
          for (var c = 0; c < f; c++) {
            var l = o[n % 2];
            l.text += "\n";
            n++;
          }
        }
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(nf);
  var of = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(R);
    var a = o(x);
    var s = o(W);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/home/RoleRename", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClick, this);
        this.labName.on(XOF.TouchEvent.TAP, this.onClickInput, this);
        this.newname = "";
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClick, this);
        this.labName.off(XOF.TouchEvent.TAP, this.onClickInput, this);
      };
      t.prototype.updateView = function () {
        this.labName.text = this.newname;
      };
      t.prototype.onClickInput = function () {
        var e = this;
        r.default.platform.input("输入新名称", "", {
          confirmCallback: function (t) {
            e.newname = (t + "").slice(0, 7);
            e.updateView();
          },
          confirmThisObj: this,
        });
      };
      t.prototype.onClick = function () {
        var e = this;
        if (this.newname) {
          r.default.comm.netloading(1e3);
          r.default.userData.hero.rename(this.newname).then(function (t) {
            r.default.comm.netloading(0);
            if (t) {
              e.event(a.default.CONFIRM);
              e.close();
            }
          });
        } else {
          r.default.comm.tip("请输入正确的内容");
        }
      };
      return t;
    })(i.default);
    e.default = u;
  });
  t(of);
  var rf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var f = o(q);
    var r = o(R);
    var c = o(x);
    var p = o(I);
    var i = o(W);
    var a = o(T);
    var d = o(at);
    var h = o(st);
    var v = o(it);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = a.default.TIPS;
        i.default.initSkin("ui/Equipment/EquipmentUpgradeBook", t, t);
        return t;
      }
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        this.itemId = t;
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.itemBox.on(XOF.TouchEvent.TAP, this.onClickSelect, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClick, this);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.itemBox.off(XOF.TouchEvent.TAP, this.onClickSelect, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClick, this);
      };
      t.prototype.onClickSelect = function () {
        var r = this;
        var i = [];
        var t = [].concat(f.default.userData.equip.equips);
        for (var e = 0; e < t.length; e++) {
          var n = t[e];
          if (n && n.count && n.itemID) {
            var o = n.itemID;
            var a = h.default.getItemData(o);
            var s = false;
            if (a.type == v.default.EQUIP) {
              s = a.class != d.default.TITLE;
            }
            if (s) {
              var u = {
                id: n.id,
                data: {
                  itemData: a,
                  object: n,
                  extra: n,
                  isBag: true,
                  tap: false,
                  count: n.count,
                },
              };
              i.push(u);
            }
          }
        }
        i = i.sort(function (t, e) {
          return e.data.itemData.quality - t.data.itemData.quality;
        });
        f.default.viewMgr.open(p.default.BagPackageList, [i]);
        var l = f.default.viewMgr.getOpenView(p.default.BagPackageList);
        if (l) {
          l.once(c.default.CONFIRM, function (t) {
            if (t > 0) {
              r.selectId = t;
              for (var e = 0, n = i; e < n.length; e++) {
                var o = n[e];
                if (o.id == t) {
                  r.itemBox.data = o.data;
                  break;
                }
              }
            }
          });
        }
      };
      t.prototype.onClick = function () {
        var e = this;
        if (this.itemId && this.selectId > 0) {
          f.default.userData.equip
            .useUpgrade(this.selectId, this.itemId + "")
            .then(function (t) {
              e.close();
            });
        } else {
          f.default.comm.tip("请先选择需要处理的装备");
        }
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(rf);
  var af = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(R);
    var s = o(W);
    var u = o(rl);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/Home/SystemSetting", t, t);
        t.imgCheckSound.visible = false;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickSave, this);
        this.imgCheckMusic.on(XOF.TouchEvent.TAP, this.onClickMusic, this);
        this.imgCheckSound.on(XOF.TouchEvent.TAP, this.onClickSound, this);
        this.imgCheckCityRole.on(XOF.TouchEvent.TAP, this.onClickRole, this);
        this.imgCheckSkin.on(XOF.TouchEvent.TAP, this.onClickSkin, this);
        this.music =
          u.default.getValue(u.default.system_setting_music, "1") == "1";
        this.sound =
          u.default.getValue(u.default.system_setting_sound, "1") == "1";
        this.showrole = u.default.getBoolValue(
          u.default.system_setting_showcityrole
        );
        this.showskin = u.default.getBoolValue(
          u.default.system_setting_showskin
        );
        this.btnRestart.on(XOF.TouchEvent.TAP, this.onClickRestart, this);
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickSave, this);
        this.imgCheckCityRole.off(XOF.TouchEvent.TAP, this.onClickRole, this);
        this.imgCheckSkin.off(XOF.TouchEvent.TAP, this.onClickSkin, this);
        this.imgCheckMusic.off(XOF.TouchEvent.TAP, this.onClickMusic, this);
        this.imgCheckSound.off(XOF.TouchEvent.TAP, this.onClickSound, this);
        this.btnRestart.off(XOF.TouchEvent.TAP, this.onClickRestart, this);
      };
      t.prototype.onClickSkin = function () {
        this.showskin = !this.showskin;
        this.updateView();
      };
      t.prototype.onClickRole = function () {
        this.showrole = !this.showrole;
        this.updateView();
      };
      t.prototype.onClickMusic = function () {
        this.music = !this.music;
        this.updateView();
      };
      t.prototype.onClickSound = function () {
        this.sound = !this.sound;
        this.updateView();
      };
      t.prototype.updateView = function () {
        var t = "ui_interface_m/ui_atlas_common/M5UI_Common_RadioBtnon_00.png";
        var e = "ui_interface_m/ui_atlas_common/M5UI_Common_RadioBtnoff_00.png";
        this.imgCheckMusic.skin = this.music ? t : e;
        this.imgCheckSound.skin = this.sound ? t : e;
        this.imgCheckSkin.skin = this.showskin ? t : e;
        this.imgCheckCityRole.skin = this.showrole ? t : e;
      };
      t.prototype.onClickSave = function () {
        u.default.setValue(
          u.default.system_setting_music,
          (this.music ? 1 : 0) + ""
        );
        u.default.setValue(
          u.default.system_setting_sound,
          (this.sound ? 1 : 0) + ""
        );
        u.default.setValue(
          u.default.system_setting_showskin,
          (this.showskin ? 1 : 0) + ""
        );
        u.default.setValue(
          u.default.system_setting_showcityrole,
          (this.showrole ? 1 : 0) + ""
        );
        i.default.sound.mute = !this.music;
        if (i.default.sound.mute) {
          i.default.sound.pause();
        } else {
          i.default.sound.resume();
        }
        i.default.eventMgr.event(1036);
        this.close();
      };
      t.prototype.onClickRestart = function () {
        i.default.comm.msgBox({
          text: r.default.tr(272),
          confirm: {
            callback: function () {
              return i.default.platform.restart();
            },
          },
          cancel: { close: true },
        });
      };
      return t;
    })(a.default);
    e.default = l;
  });
  t(af);
  var sf = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["CANT_GET"] = 0)] = "CANT_GET";
      t[(t["CAN_GET"] = 1)] = "CAN_GET";
      t[(t["GOT"] = 2)] = "GOT";
    })(n || (n = {}));
    e.default = n;
  });
  t(sf);
  var uf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(vl);
    var s = o(W);
    var u = o(sf);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/TotalRecharge/TotalRechargeItem", t, t);
        t.btnOk.on(XOF.TouchEvent.TAP, t.onClick, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        e.prototype.dataChanged_.call(this);
        var t = this.data;
        if (t) {
          this.labTitle.text = t.title;
          this.labDesc.text = t.desc;
          this.itemBox.data = t.itemData;
          this.btnOk.disabled = false;
          if (t.state == u.default.CAN_GET) {
            this.btnOk.label = r.default.tr(219);
          } else if (t.state == u.default.GOT) {
            this.btnOk.disabled = true;
            this.btnOk.label = r.default.tr(218);
          } else if (t.state == u.default.CANT_GET) {
            this.btnOk.label = r.default.tr(220);
          }
        }
      };
      t.prototype.onClick = function () {
        if (this.data.state == u.default.CAN_GET) {
          i.default.userData.totalRecharge.get(this.data.money);
        } else if (this.data.state == u.default.CANT_GET) {
          i.default.comm.mtr(223);
        }
      };
      return t;
    })(a.default);
    e.default = l;
  });
  t(uf);
  var lf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var u = o(V);
    var l = o(dt);
    var f = o(q);
    var r = o(R);
    var i = o(W);
    var c = o(sf);
    var p = o(st);
    var a = o(uf);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/TotalRecharge/TotalRecharge", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.list.itemRenderer = a.default;
        this.updateView();
        f.default.eventMgr.on(1068, this.updateView, this);
        this.labTips.text = u.default.tr(221);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.list.dataProvider = [];
        f.default.eventMgr.off(1068, this.updateView, this);
        this.list.itemRenderer = undefined;
      };
      t.prototype.updateView = function () {
        var t = [];
        var e = f.default.userData.totalRecharge.cumulativeInvest * 100;
        this.labCur.text = u.default.tr(214, e);
        for (var n in l.default.conf.rechargeGift) {
          var o = l.default.conf.rechargeGift[n];
          var r = f.default.userData.totalRecharge.getItem(o.money);
          var i = c.default.CANT_GET;
          if ((r === null || r === void 0 ? void 0 : r.count) > 0) {
            i = c.default.CAN_GET;
          } else if ((r === null || r === void 0 ? void 0 : r.count) == 0) {
            i = c.default.GOT;
          }
          var a = e;
          if (o.repeat) {
            if (e > o.amout) {
              var s = e % o.amout;
              if (s == 0) {
                a = o.amout;
              } else {
                a = s;
              }
            }
          }
          t.push({
            money: o.money,
            title: u.default.tr(o.repeat ? 247 : 216, o.amout),
            desc: u.default.tr(217, Math.min(o.amout, a), o.amout),
            state: i,
            itemData: { itemData: p.default.getItemData(o.itemid), count: 1 },
          });
        }
        this.list.dataProvider = t;
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(lf);
  var ff = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(R);
    var a = o(h);
    var s = o(x);
    var u = o(W);
    var l = o(lf);
    var f = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        u.default.initSkin("ui/activity/Activity", t, t);
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        o.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(s.default.CLOSE, this.close, this);
        this.views = [{ label: r.default.tr(215), view: l.default }];
        var t = this.views;
        var e = 0;
        for (; e < t.length; e++) {
          var n = this.btnList.getChildAt(e);
          if (!n) break;
          n.label = t[e].label;
        }
        for (; e < this.btnList.numChild; e++) {
          this.btnList.getChildAt(e).visible = false;
        }
        this.btnList.on(s.default.RADIOGROUP_CHANGED, this.onSelectIndex, this);
        this.btnList.selectIndex = 0;
        this.updateView();
      };
      t.prototype.updateView = function () {};
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.bg.onClose();
        this.closeCurView();
      };
      t.prototype.onOpenView = function (t) {};
      t.prototype.closeCurView = function () {
        if (this.curView) {
          var t = this.curView;
          t.event(a.default.onClose);
          this.curView.removeSelf();
          this.curView = undefined;
        }
      };
      t.prototype.onSelectIndex = function () {
        var t = this.btnList.selectIndex;
        var e = this.views[t];
        if (e) {
          this.closeCurView();
          this.curView = undefined;
          if (e.view) {
            var n = new e.view();
            n.event(a.default.onOpen);
            n.event(a.default.onOpened);
            this.curView = n;
            this.addChild(this.curView);
            this.onOpenView(t);
          }
        }
      };
      return t;
    })(i.default);
    e.default = f;
  });
  t(ff);
  var cf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o($);
    var a = o(q);
    var s = o(R);
    var u = o(I);
    var l = o(W);
    var f = o(k);
    var c = o(me);
    var p = o(Jl);
    var d = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.touchThrough = true;
        l.default.initSkin("ui/M_Controler/CityUI", t, t);
        t.bgCoin.grid = t.bgGold.grid = [7, 8, 5, 5];
        t.size(i.default.width, i.default.height);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.cityHead.open();
        this.chat.onOpen();
        this.btnGoldAdd.on(XOF.TouchEvent.TAP, this.onClickGoldAdd, this);
        this.btnCoinAdd.on(XOF.TouchEvent.TAP, this.onClickCoinAdd, this);
        this.btnSetting.on(XOF.TouchEvent.TAP, this.onClickSetting, this);
        a.default.eventMgr.on(1032, this.updateView, this);
        this.updateView();
        this.updateTopIcon();
        this.updateBottomIcon();
        this.joystick.onOpen();
      };
      t.prototype.updateTopIcon = function () {
        for (var t in r.default.conf.uiicons.top) {
          var e = r.default.conf.uiicons.top[t];
          if (e.city) {
            var n = new p.default();
            n.size(this.topIcon.gridWidth, this.topIcon.gridHeight);
            n.data = { data: e, red: 0 };
            n.on(XOF.TouchEvent.TAP, this.onClickIcon, this, [e.link]);
            this.topIcon.addChild(n);
          }
        }
        this.topIcon.reorder();
      };
      t.prototype.updateBottomIcon = function () {
        for (var t in r.default.conf.uiicons.bottom) {
          var e = r.default.conf.uiicons.bottom[t];
          if (e.show) {
            var n = new p.default();
            n.size(this.bottomIcon.gridWidth, this.bottomIcon.gridHeight);
            n.data = { data: e, red: 0 };
            n.on(XOF.TouchEvent.TAP, this.onClickIcon, this, [e.link]);
            this.bottomIcon.addChild(n);
          }
        }
        this.bottomIcon.reorder();
      };
      t.prototype.updateView = function () {
        this.labCoin.text = f.default.formatMoney(a.default.userData.bag.coin);
        this.labGold.text = f.default.formatMoney(a.default.userData.bag.gold);
        this.cityHead.updateHead();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.cityHead.close();
        this.chat.onClose();
        this.btnGoldAdd.off(XOF.TouchEvent.TAP, this.onClickGoldAdd, this);
        this.btnCoinAdd.off(XOF.TouchEvent.TAP, this.onClickCoinAdd, this);
        this.btnSetting.off(XOF.TouchEvent.TAP, this.onClickSetting, this);
        a.default.eventMgr.off(1032, this.updateView, this);
        this.joystick.onClose();
      };
      t.prototype.onClickIcon = function (t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        c.default.openView(t, e);
      };
      t.prototype.onClickBag = function () {
        a.default.viewMgr.open(u.default.RoleMenu);
      };
      t.prototype.onClickGoldAdd = function () {
        a.default.comm.msgBox("可以通过兑换获取点券");
      };
      t.prototype.onClickCoinAdd = function () {
        a.default.comm.msgBox("可以在商城中使用点券兑换金币");
      };
      t.prototype.onClickSetting = function () {
        a.default.viewMgr.open(u.default.SystemSetting);
      };
      return t;
    })(s.default);
    e.default = d;
  });
  t(cf);
  var pf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(vl);
    var s = o(W);
    var u = o(sf);
    var l = o(_l);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/dailyTask/dailyTaskItem", t, t);
        t.btnOk.on(XOF.TouchEvent.TAP, t.onClick, t);
        t.itemList.itemRenderer = l.default;
        return t;
      }
      t.prototype.dataChanged_ = function () {
        e.prototype.dataChanged_.call(this);
        var t = this.data;
        if (t) {
          this.labTitle.text = t.title;
          this.labDesc.text = t.desc;
          this.itemList.dataProvider = t.items;
          this.itemList.x = 570 - this.itemList.width / 2;
          this.btnOk.label = r.default.tr(219);
          this.btnOk.disabled = false;
          if (t.state == u.default.GOT) {
            this.btnOk.disabled = true;
            this.btnOk.label = r.default.tr(218);
          } else if (t.state == u.default.CANT_GET) {
            this.btnOk.label = r.default.tr(232);
          }
        }
      };
      t.prototype.onClick = function () {
        if (this.data.state == u.default.CAN_GET) {
          i.default.userData.dailyTask.get(this.data.id);
        } else if (this.data.state == u.default.CANT_GET) {
          i.default.comm.mtr(231);
        }
      };
      return t;
    })(a.default);
    e.default = f;
  });
  t(pf);
  var df = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var u = o(dt);
    var l = o(q);
    var r = o(R);
    var i = o(W);
    var f = o(k);
    var c = o(st);
    var a = o(pf);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/DailyTask/DailyTask", t, t);
        t.list.itemRenderer = a.default;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        l.default.eventMgr.on(1069, this.updateView, this);
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        l.default.eventMgr.off(1069, this.updateView, this);
        this.list.dataProvider = [];
      };
      t.prototype.updateView = function () {
        var t = [];
        for (var e in l.default.userData.dailyTask.list) {
          var n = l.default.userData.dailyTask.list[e];
          var o = n.id;
          var r = u.default.conf.dailyTask[o];
          var i = n.state;
          var a = [];
          for (var s in r.item)
            a.push({ itemData: c.default.getItemData(s), count: r.item[s] });
          t.push({
            id: n.id,
            title: r.title,
            desc: f.default.format(r.remark, n.done, r.condition),
            state: i,
            items: a,
            sort: r.sort,
          });
        }
        this.list.dataProvider = t.sort(function (t, e) {
          return t.sort - e.sort;
        });
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(df);
  var hf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(sf);
    var a = o(pf);
    var s = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onClick = function () {
        if (this.data.state == i.default.CAN_GET) {
          r.default.userData.levelTask.get(this.data.id);
        } else if (this.data.state == i.default.CANT_GET) {
          r.default.comm.mtr(231);
        }
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(hf);
  var vf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = o(dt);
    var u = o(q);
    var r = o(R);
    var i = o(W);
    var l = o(k);
    var f = o(sf);
    var c = o(st);
    var a = o(hf);
    var p = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/DailyTask/DailyTask", t, t);
        t.list.itemRenderer = a.default;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        u.default.eventMgr.on(1070, this.updateView, this);
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        u.default.eventMgr.off(1070, this.updateView, this);
        this.list.dataProvider = [];
      };
      t.prototype.updateView = function () {
        var t = [];
        for (var e in s.default.conf.levelTask) {
          var n = s.default.conf.levelTask[e];
          var o = u.default.userData.levelTask.getData(n.id);
          var r = f.default.CANT_GET;
          if (o) {
            r = o.state;
          } else if (u.default.userData.hero.lv >= n.id) {
            r = f.default.CAN_GET;
          }
          var i = [];
          for (var a in n.item)
            i.push({ itemData: c.default.getItemData(a), count: n.item[a] });
          t.push({
            id: n.id,
            title: n.title,
            desc: l.default.format(n.remark, n.id),
            state: r,
            items: i,
            sort: n.sort,
          });
        }
        this.list.dataProvider = t.sort(function (t, e) {
          return t.sort - e.sort;
        });
      };
      return t;
    })(r.default);
    e.default = p;
  });
  t(vf);
  var yf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(R);
    var s = o(h);
    var u = o(x);
    var l = o(W);
    var f = o(df);
    var c = o(vf);
    var p = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        l.default.initSkin("ui/activity/Activity", t, t);
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        o.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(u.default.CLOSE, this.close, this);
        this.views = [
          { label: r.default.tr(230), view: f.default },
          { label: r.default.tr(251), view: c.default },
        ];
        var t = this.views;
        var e = 0;
        for (; e < t.length; e++) {
          var n = this.btnList.getChildAt(e);
          if (!n) break;
          n.label = t[e].label;
        }
        for (; e < this.btnList.numChild; e++) {
          this.btnList.getChildAt(e).visible = false;
        }
        this.btnList.on(u.default.RADIOGROUP_CHANGED, this.onSelectIndex, this);
        this.btnList.selectIndex = 0;
        this.updateView();
      };
      t.prototype.updateView = function () {};
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.bg.onClose();
        this.closeCurView();
      };
      t.prototype.onOpenView = function (t) {
        if (t == 0) {
          i.default.userData.dailyTask.load();
        } else if (t == 1) {
          i.default.userData.levelTask.load();
        }
      };
      t.prototype.closeCurView = function () {
        if (this.curView) {
          var t = this.curView;
          t.event(s.default.onClose);
          this.curView.removeSelf();
          this.curView = undefined;
        }
      };
      t.prototype.onSelectIndex = function () {
        var t = this.btnList.selectIndex;
        var e = this.views[t];
        if (e) {
          this.closeCurView();
          this.curView = undefined;
          if (e.view) {
            var n = new e.view();
            n.event(s.default.onOpen);
            n.event(s.default.onOpened);
            this.curView = n;
            this.addChild(this.curView);
            this.onOpenView(t);
          }
        }
      };
      return t;
    })(a.default);
    e.default = p;
  });
  t(yf);
  var _f = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(_l);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.imgLight.skin =
          "ui_interface_m/ui_atlas_common/UI_Common_IconCheck.png";
        t.imgLight.alpha = 1;
        t.imgLight.height = t.imgLight.width = undefined;
        t.imgLight.scale(0.8, 0.8);
        t.imgLight.pos(8, 8 + 3);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        var t;
        e.prototype.dataChanged_.call(this);
        if (
          (t = this === null || this === void 0 ? void 0 : this.data) ===
            null || t === void 0
            ? void 0
            : t.light
        ) {
          this.imgIcon.alpha = 1;
        } else {
          this.imgIcon.alpha = 0.6;
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(_f);
  var mf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(vl);
    var a = o(W);
    var s = o(_f);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/Collect/SkinCollectItem", t, t);
        t.list.itemRenderer = s.default;
        t.btnOk.on(XOF.TouchEvent.TAP, t.onClick, t);
        t.btnCancel.on(XOF.TouchEvent.TAP, t.onClickCancel, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        this.labTitle.text = this.data.title;
        this.labAttr.text = this.data.desc;
        this.list.dataProvider = this.data.items;
      };
      t.prototype.onClick = function () {
        r.default.userData.skinCollct.wear(this.data.id);
      };
      t.prototype.onClickCancel = function () {
        r.default.userData.skinCollct.take(this.data.id);
      };
      return t;
    })(i.default);
    e.default = u;
  });
  t(mf);
  var gf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var d = o(V);
    var r = o(dt);
    var i = o(q);
    var a = o(R);
    var s = o(W);
    var h = o(k);
    var v = o(st);
    var y = o(xl);
    var u = o(mf);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/Collect/SkinCollect", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.list.itemRenderer = this.getListItemRenderer();
        this.updateView();
        i.default.eventMgr.on(1071, this.updateView, this);
      };
      t.prototype.getListItemRenderer = function () {
        return u.default;
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.list.dataProvider = [];
        this.list.itemRenderer = undefined;
        i.default.eventMgr.off(1071, this.updateView, this);
      };
      t.prototype.getDatas = function () {
        return r.default.conf.collect.skinCollect;
      };
      t.prototype.getModel = function () {
        return i.default.userData.skinCollct;
      };
      t.prototype.updateView = function () {
        var t = [];
        var e = this.getDatas();
        var n = this.getModel();
        for (var o in e) {
          var r = e[o];
          var i = [];
          var a = n.getWearList(r.id);
          for (var s in r.list) {
            i.push({
              itemData: v.default.getItemData(r.list[s]),
              light: a.indexOf(r.list[s]) >= 0,
            });
          }
          var u = a.length;
          var l = u >= i.length;
          var f = y.default.attr2str(h.default.kvmap2arr(r.attr), "\n", {
            template: "{0} {2}{1}",
            percentTemplate: "{0} {2}{1}%",
            color: false,
            sort: true,
            percentLength: 2,
          });
          var c = d.default.tr(l ? 256 : 255, r.name, u, i.length);
          var p = "<0>{0}</0>";
          if (l) {
            p = "<10>{0}</10>";
          } else if (u > 0) {
            p = "<1>{0}</1>";
          }
          t.push({
            id: r.id,
            title: h.default.format(p, c),
            sort: r.sort,
            desc: h.default.format(l ? "<10>{0}</10>" : "<0>{0}</0>", f),
            items: i,
          });
        }
        this.list.dataProvider = t.sort(function (t, e) {
          return t.sort - e.sort;
        });
      };
      return t;
    })(a.default);
    e.default = l;
  });
  t(gf);
  var bf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(mf);
    var a = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.onClick = function () {
        r.default.userData.equipCollct.wear(this.data.id);
      };
      e.prototype.onClickCancel = function () {
        r.default.userData.equipCollct.take(this.data.id);
      };
      return e;
    })(i.default);
    e.default = a;
  });
  t(bf);
  var Of = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var i = o(q);
    var a = o(gf);
    var s = o(bf);
    var u = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.getDatas = function () {
        return r.default.conf.collect.equipCollect;
      };
      e.prototype.getModel = function () {
        return i.default.userData.equipCollct;
      };
      e.prototype.getListItemRenderer = function () {
        return s.default;
      };
      return e;
    })(a.default);
    e.default = u;
  });
  t(Of);
  var wf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(R);
    var a = o(h);
    var s = o(x);
    var u = o(W);
    var l = o(Of);
    var f = o(gf);
    var c = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        u.default.initSkin("ui/activity/Activity", t, t);
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        o.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(s.default.CLOSE, this.close, this);
        this.views = [
          { label: r.default.tr(253), view: l.default },
          { label: r.default.tr(254), view: f.default },
        ];
        var t = this.views;
        var e = 0;
        for (; e < t.length; e++) {
          var n = this.btnList.getChildAt(e);
          if (!n) break;
          n.label = t[e].label;
        }
        for (; e < this.btnList.numChild; e++) {
          this.btnList.getChildAt(e).visible = false;
        }
        this.btnList.on(s.default.RADIOGROUP_CHANGED, this.onSelectIndex, this);
        this.btnList.selectIndex = 0;
        this.updateView();
      };
      t.prototype.updateView = function () {};
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.bg.onClose();
        this.closeCurView();
      };
      t.prototype.onOpenView = function (t) {};
      t.prototype.closeCurView = function () {
        if (this.curView) {
          var t = this.curView;
          t.event(a.default.onClose);
          this.curView.removeSelf();
          this.curView = undefined;
        }
      };
      t.prototype.onSelectIndex = function () {
        var t = this.btnList.selectIndex;
        var e = this.views[t];
        if (e) {
          this.closeCurView();
          this.curView = undefined;
          if (e.view) {
            var n = new e.view();
            n.event(a.default.onOpen);
            n.event(a.default.onOpened);
            this.curView = n;
            this.addChild(this.curView);
            this.onOpenView(t);
          }
        }
      };
      return t;
    })(i.default);
    e.default = c;
  });
  t(wf);
  var Af = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = o(V);
    var u = o(dt);
    var c = o(q);
    var r = o(R);
    var i = o(x);
    var a = o(W);
    var p = o(st);
    var d = o(it);
    var l = o(_l);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/Equipment/EmblemMerger", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.selectIds = [];
        this.selectId = undefined;
        this.listEquip.on(i.default.ITEM_TAP, this.onClickItem, this);
        this.listSelected.on(i.default.ITEM_TAP, this.onClickTake, this);
        this.btnUp.on(XOF.TouchEvent.TAP, this.onClickMerger, this);
        c.default.eventMgr.on(1075, this.onCompose, this);
        this.listEquip.itemRenderer = l.default;
        this.listSelected.itemRenderer = l.default;
        this.labTips.text = s.default.tr(281);
        this.updateSelected();
        this.updateItems();
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.listEquip.off(i.default.ITEM_TAP, this.onClickItem, this);
        this.listSelected.off(i.default.ITEM_TAP, this.onClickTake, this);
        this.btnUp.off(XOF.TouchEvent.TAP, this.onClickMerger, this);
        c.default.eventMgr.off(1075, this.onCompose, this);
        this.listSelected.dataProvider =
          this.listSelected.itemRenderer =
          this.listEquip.dataProvider =
          this.listEquip.itemRenderer =
            undefined;
      };
      t.prototype.updateView = function () {
        var t, e, n, o;
        if (this.selectId) {
          var r = { itemData: p.default.getItemData(this.selectId) };
          this.itemBox.data = r;
          this.labName.textColor = p.default.getQualityColor(
            r.itemData.quality
          );
          this.labName.text = r.itemData.name;
        } else {
          this.labName.text = "";
        }
        var i = this.getWearCount();
        var a =
          (o =
            (n =
              (e =
                (t = u.default.conf.rule) === null || t === void 0
                  ? void 0
                  : t.badge) === null || e === void 0
                ? void 0
                : e[i]) === null || n === void 0
              ? void 0
              : n.rate) !== null && o !== void 0
            ? o
            : 0;
        if (a > 0) {
          this.labRate.text = s.default.tr(286, a);
        } else {
          this.labRate.text = "";
        }
      };
      t.prototype.getWearCount = function () {
        var t = 0;
        for (var e = 0; e < 5; e++) {
          if (this.selectIds[e]) {
            t += 1;
          }
        }
        return t;
      };
      t.prototype.getQuality = function () {
        for (var t = 0; t < 5; t++) {
          if (this.selectIds[t]) {
            var e = p.default.getItemData(this.selectIds[t]).quality;
            return e;
          }
        }
      };
      t.prototype.updateItems = function () {
        var t = c.default.userData.bag;
        var e = [];
        var n = Math.ceil(c.default.userData.equip.getGridCount() / 5) * 5;
        var o = [].concat(c.default.userData.bag.items);
        for (var r = 0; r < n; r++) {
          e.push({ showBg: true });
        }
        for (var r = 0, i = 0; r < o.length; r++) {
          var a = { showBg: true };
          var s = o[r];
          if (s && s.count && s.itemID) {
            var u = s.itemID;
            var l = p.default.getItemData(u);
            var f = false;
            if (l.type == d.default.EMBLEM) {
              f = true;
            }
            if (f) {
              a.object = s;
              a.extra = s;
              a.isBag = true;
              a.tap = false;
              a.itemData = l;
              a.count = s.count;
              a.light = false;
              a.cd = t.getItemCountdown(u);
              e[i] = a;
              i++;
            }
          }
        }
        this.listEquip.dataProvider = e;
      };
      t.prototype.updateSelected = function () {
        var t;
        var e = [];
        for (var n = 0; n < 5; n++) {
          var o =
            (t = this === null || this === void 0 ? void 0 : this.selectIds) ===
              null || t === void 0
              ? void 0
              : t[n];
          if (o) {
            var r = { showBg: true };
            var i = p.default.getItemData(o);
            var a = false;
            if (i.type == d.default.EMBLEM) {
              a = true;
            }
            if (a) {
              r.isBag = true;
              r.tap = false;
              r.itemData = i;
              r.light = false;
              e.push(r);
            }
          } else {
            e.push({ showBg: true });
          }
        }
        this.listSelected.dataProvider = e;
      };
      t.prototype.getItemWearCount = function (t) {
        var e = 0;
        for (var n in this.selectIds) {
          if (this.selectIds[n] == t) {
            e += 1;
          }
        }
        return e;
      };
      t.prototype.onClickItem = function (t) {
        var e;
        var n =
          (e = t === null || t === void 0 ? void 0 : t.itemData) === null ||
          e === void 0
            ? void 0
            : e.id;
        if (n) {
          var o = this.getQuality();
          if (o != undefined && o != t.itemData.quality) {
            c.default.comm.mtr(288);
            return;
          }
          var r = this.getItemWearCount(n);
          if (r >= c.default.userData.bag.getItemCount(n)) {
            return;
          }
          for (var i = 0; i < 5; i++) {
            if (!this.selectIds[i]) {
              this.selectIds[i] = n;
              break;
            }
          }
          this.resetItemBox();
          this.updateSelected();
          this.updateView();
        }
      };
      t.prototype.onClickTake = function (t, e) {
        this.selectIds[e.itemIndex] = null;
        this.updateSelected();
        this.updateView();
      };
      t.prototype.onClickMerger = function () {
        var a = this;
        var t, e, n, o;
        if (this.getWearCount() >= 3) {
          var r = this.getWearCount();
          var i =
            (o =
              (n =
                (e =
                  (t = u.default.conf.rule) === null || t === void 0
                    ? void 0
                    : t.badge) === null || e === void 0
                  ? void 0
                  : e[r]) === null || n === void 0
                ? void 0
                : n.rate) !== null && o !== void 0
              ? o
              : 0;
          c.default.comm.msgBox({
            text: s.default.tr(292, i),
            confirm: {
              close: true,
              callback: function () {
                var t = a.selectIds,
                  e = t[0],
                  n = t[1],
                  o = t[2],
                  r = t[3],
                  i = t[4];
                c.default.userData.bag.emblumCompose(e, n, o, r, i);
              },
            },
            cancel: { close: true },
          });
        } else {
          c.default.comm.mtr(287);
        }
      };
      t.prototype.resetItemBox = function () {
        this.selectId = undefined;
        this.itemBox.data = { showBg: true };
      };
      t.prototype.onCompose = function (t) {
        this.selectId = t;
        this.selectIds = [];
        this.updateSelected();
        this.updateItems();
        this.updateView();
      };
      return t;
    })(r.default);
    e.default = f;
  });
  t(Af);
  var Ef = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var h = o(V);
    var v = o(q);
    var r = o(R);
    var y = o(x);
    var _ = o(I);
    var i = o(W);
    var f = o(k);
    var c = o(at);
    var m = o(st);
    var g = o(it);
    var b = o(yl);
    var p = o(xl);
    var a = o(_l);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/Equipment/EmblemWear", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.listEquip.itemRenderer = a.default;
        v.default.eventMgr.on(1032, this.updateView, this);
        v.default.eventMgr.on(1036, this.updateView, this);
        this.listEquip.on(y.default.ITEM_TAP, this.onClickItem, this);
        this.btnUp.on(XOF.TouchEvent.TAP, this.onClickWear, this, [1]);
        this.btnUp2.on(XOF.TouchEvent.TAP, this.onClickWear, this, [2]);
        this.updateEquips();
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        v.default.eventMgr.off(1032, this.updateView, this);
        v.default.eventMgr.off(1036, this.updateView, this);
        this.listEquip.off(y.default.ITEM_TAP, this.onClickItem, this);
        this.btnUp.off(XOF.TouchEvent.TAP, this.onClickWear, this);
        this.btnUp2.off(XOF.TouchEvent.TAP, this.onClickWear, this);
        this.listEquip.itemRenderer = this.listEquip.dataProvider = undefined;
      };
      t.prototype.getItemData = function (t) {
        var e = v.default.userData.equip.get(t);
        return {
          tap: false,
          itemData: m.default.getItemData(e.itemID),
          isBag: false,
          object: e,
          extra: e,
        };
      };
      t.prototype.updateView = function () {
        var t;
        if (this.selectId) {
          this.btnUp.visible = this.btnUp2.visible = true;
          t = this.getItemData(this.selectId);
          t.tap = true;
          var e = t.itemData;
          t.itemData.class;
          if (t) {
            var n = t.extra;
            this.itemBox.data = t;
            this.labName.text = t.itemData.name;
            this.labName.textColor = m.default.getQualityColor(
              t.itemData.quality
            );
            if (n.leftBadge) {
              var o = n.leftBadge;
              var r = m.default.getItemData(o);
              this.itemEmleum.data = { itemData: r };
              var i = f.default.copy(r.attr);
              var a = f.default.kvmap2arr(i);
              var s = p.default.attr2str(a, undefined, {
                template: "{0} {2}{1}",
                percentTemplate: "{0} {2}{1}%",
                color: true,
                sort: true,
              });
              var u = b.default.getEquipClassEmblmeSlotColor(e.class);
              var l = b.default.getEquipClassEmblmeSlotName(e.class);
              this.labAttr1.text =
                "<" +
                u +
                ">[" +
                l +
                "]</" +
                u +
                ">\n<" +
                r.quality +
                ">" +
                r.name +
                "</" +
                r.quality +
                ">\n" +
                s;
              this.btnUp.label = h.default.tr(297);
            } else {
              this.btnUp.label = h.default.tr(307);
              this.itemEmleum.data = {};
              var u = b.default.getEquipClassEmblmeSlotColor(e.class);
              var l = b.default.getEquipClassEmblmeSlotName(e.class);
              this.labAttr1.text =
                "<" +
                u +
                ">[" +
                l +
                "]</" +
                u +
                ">\n<0>" +
                h.default.tr(296) +
                "</0>";
            }
            if (n.rightBadge) {
              var o = n.rightBadge;
              var r = m.default.getItemData(o);
              this.itemEmleum2.data = { itemData: r };
              var i = f.default.copy(r.attr);
              var a = f.default.kvmap2arr(i);
              var s = p.default.attr2str(a, undefined, {
                template: "{0} {2}{1}",
                percentTemplate: "{0} {2}{1}%",
                color: true,
                sort: true,
              });
              var u = b.default.getEquipClassEmblmeSlotColor(e.class);
              var l = b.default.getEquipClassEmblmeSlotName(e.class);
              this.labAttr2.text =
                "<" +
                u +
                ">[" +
                l +
                "]</" +
                u +
                ">\n<" +
                r.quality +
                ">" +
                r.name +
                "</" +
                r.quality +
                ">\n" +
                s;
              this.btnUp2.label = h.default.tr(297);
            } else {
              this.btnUp2.label = h.default.tr(307);
              this.itemEmleum2.data = {};
              var u = b.default.getEquipClassEmblmeSlotColor(e.class);
              var l = b.default.getEquipClassEmblmeSlotName(e.class);
              this.labAttr2.text =
                "<" +
                u +
                ">[" +
                l +
                "]</" +
                u +
                ">\n<0>" +
                h.default.tr(296) +
                "</0>";
            }
          }
        }
        if (!t) {
          this.itemBox.data = {};
          this.labName.text = "";
          this.labAttr1.text = this.labAttr2.text =
            "<0>" + h.default.tr(296) + "</0>";
          this.btnUp.visible = this.btnUp2.visible = false;
          this.itemEmleum2.data = {};
          this.itemEmleum.data = {};
        }
      };
      t.prototype.updateEquips = function () {
        var t = [];
        var e = Math.ceil(v.default.userData.equip.getGridCount() / 5) * 5;
        var n = [].concat(v.default.userData.equip.equips);
        for (var o = 0; o < e; o++) {
          t.push({ showBg: true });
        }
        for (var o = 0, r = 0; o < n.length; o++) {
          var i = { showBg: true };
          var a = n[o];
          if (a && a.count && a.itemID) {
            var s = a.itemID;
            var u = m.default.getItemData(s);
            var l = false;
            if (u.type == g.default.EQUIP) {
              if (u.class == c.default.TITLE);
              else if (u.class == c.default.WEAPON) {
                l = false;
              } else {
                l = true;
              }
            }
            if (l) {
              i.object = a;
              i.extra = a;
              i.isBag = true;
              i.tap = false;
              i.itemData = u;
              i.count = a.count;
              i.light = this.selectId == a.id;
              t[r] = i;
              r++;
            }
          }
        }
        this.listEquip.dataProvider = t;
      };
      t.prototype.onClickItem = function (t) {
        var e;
        if (
          (e = t === null || t === void 0 ? void 0 : t.extra) === null ||
          e === void 0
            ? void 0
            : e.id
        ) {
          this.selectId = t.extra.id;
          this.updateView();
          this.updateEquips();
        }
        this.updateEquips();
      };
      t.prototype.onClickWear = function (l) {
        var t, e, n, o, r, i;
        var f = this.getItemData(this.selectId);
        var c =
          (e =
            (t = f === null || f === void 0 ? void 0 : f.extra) === null ||
            t === void 0
              ? void 0
              : t.leftBadge) !== null && e !== void 0
            ? e
            : null;
        var p =
          (o =
            (n = f === null || f === void 0 ? void 0 : f.extra) === null ||
            n === void 0
              ? void 0
              : n.rightBadge) !== null && o !== void 0
            ? o
            : null;
        var d = this.selectId;
        function a() {
          var t;
          var e = [];
          var n = b.default.getEquipClassEmblmeSlotColors(
            (t = f === null || f === void 0 ? void 0 : f.itemData) === null ||
              t === void 0
              ? void 0
              : t.class
          );
          for (var o = 0, r = v.default.userData.bag.items; o < r.length; o++) {
            var i = r[o];
            var a = m.default.getItemData(i.itemID);
            if (a.type == g.default.EMBLEM) {
              if (n.indexOf(a.class) >= 0) {
                var s = m.default.getItemData(i.itemID);
                if (s) {
                  e.push({
                    id: s.id,
                    data: { itemData: s, count: i.count, tap: false },
                  });
                }
              }
            }
          }
          v.default.viewMgr.open(_.default.BagPackageList, [e]);
          var u = v.default.viewMgr.getOpenView(_.default.BagPackageList);
          if (u) {
            u.once(y.default.CONFIRM, function (t) {
              if (t > 0) {
                if (l == 1) {
                  v.default.userData.bag.emblumWear(d, t, p);
                } else {
                  v.default.userData.bag.emblumWear(d, c, t);
                }
              }
            });
          }
        }
        function s() {
          v.default.comm.msgBox({
            text: h.default.tr(306),
            confirm: {
              callback: function () {
                if (l == 1) {
                  v.default.userData.bag.emblumWear(d, null, p);
                } else {
                  v.default.userData.bag.emblumWear(d, c, null);
                }
              },
              close: true,
            },
            cancel: {},
          });
        }
        if (l == 1) {
          if (
            (r = f === null || f === void 0 ? void 0 : f.extra) === null ||
            r === void 0
              ? void 0
              : r.leftBadge
          ) {
            s();
          } else {
            a();
          }
        } else if (l == 2) {
          if (
            (i = f === null || f === void 0 ? void 0 : f.extra) === null ||
            i === void 0
              ? void 0
              : i.rightBadge
          ) {
            s();
          } else {
            a();
          }
        }
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Ef);
  var Tf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.MenuSkillUpgradeCostView = void 0;
    var r = o(q);
    var i = o(vl);
    var a = o(W);
    var s = o(st);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/RoleMenu/MenuSkillUpgradeCost", t, t);
        t.imgPrice.on(XOF.TouchEvent.TAP, t.onClick, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        e.prototype.dataChanged_.call(this);
        this.imgPrice.skin = s.default.getItemIcon(this.data.id);
        this.labPrice.text = this.data.count + "";
        if (this.data.color) {
          this.labPrice.textColor = this.data.color;
        }
      };
      t.prototype.onClick = function () {
        var t;
        if (
          (t = this === null || this === void 0 ? void 0 : this.data) ===
            null || t === void 0
            ? void 0
            : t.id
        ) {
          r.default.eventMgr.event(1033, [s.default.getItemData(this.data.id)]);
        }
      };
      return t;
    })(i.default);
    e.MenuSkillUpgradeCostView = u;
  });
  t(Tf);
  Tf.MenuSkillUpgradeCostView;
  var Cf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var p = o(q);
    var r = o(R);
    var i = o(x);
    var a = o(W);
    var c = o(st);
    var s = o(_l);
    var u = o(je);
    var d = o(k);
    var h = o(xl);
    var v = o(V);
    var y = o(it);
    var _ = o(at);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/Equipment/EquipmentUpgrade", t, t);
        t.listCost.itemRenderer = Tf.MenuSkillUpgradeCostView;
        t.listEquip.itemRenderer = s.default;
        t.upgradProtect = t.uppowerProtect = false;
        t.fullview = true;
        return t;
      }
      Object.defineProperty(t.prototype, "upgradeType", {
        get: function () {
          return 0;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        p.default.eventMgr.on(1032, this.updateView, this);
        p.default.eventMgr.on(1032, this.updateEquips, this);
        this.listEquip.on(i.default.ITEM_TAP, this.onClickItem, this);
        this.btnUp.on(XOF.TouchEvent.TAP, this.onClickUp, this);
        this.imgCheck.on(XOF.TouchEvent.TAP, this.onUseProtect, this);
        this.updateEquips();
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnUp.off(XOF.TouchEvent.TAP, this.onClickUp, this);
        p.default.eventMgr.off(1032, this.updateView, this);
        p.default.eventMgr.off(1032, this.updateEquips, this);
        this.listEquip.off(i.default.ITEM_TAP, this.onClickItem, this);
        this.imgCheck.off(XOF.TouchEvent.TAP, this.onUseProtect, this);
      };
      t.prototype.updateEquips = function () {
        var t = p.default.userData.bag;
        var e = [];
        var n = Math.ceil(p.default.userData.equip.getGridCount() / 5) * 5;
        var o = [].concat(
          p.default.userData.equip.equips,
          p.default.userData.equip.skins
        );
        for (var r = 0; r < n; r++) {
          e.push({ showBg: true });
        }
        for (var r = 0, i = 0; r < o.length; r++) {
          var a = { showBg: true };
          var s = o[r];
          if (s && s.count && s.itemID) {
            var u = s.itemID;
            var l = c.default.getItemData(u);
            var f = false;
            if (l.type == y.default.EQUIP) {
              f = l.class != _.default.TITLE;
            }
            if (f) {
              a.object = s;
              a.extra = s;
              a.isBag = true;
              a.tap = false;
              a.itemData = l;
              a.count = s.count;
              a.light = this.seleceId == s.id;
              a.cd = t.getItemCountdown(u);
              e[i] = a;
              i++;
            }
          }
        }
        this.listEquip.dataProvider = e;
      };
      t.prototype.getItemData = function (t) {
        var e = p.default.userData.equip.get(t);
        return {
          tap: false,
          itemData: c.default.getItemData(e.itemID),
          isBag: false,
          object: e,
          extra: e,
        };
      };
      t.prototype.updateView = function () {
        var t;
        if (this.seleceId) {
          t = this.getItemData(this.seleceId);
          var e = t.itemData;
          var n = t.itemData.class;
          if (t) {
            t.extra;
            var o = this.getLv();
            this.itemBox.data = t;
            var r = this.upgradeType == 0 ? 2 : 4;
            this.labName.text =
              (o > 0 ? "<" + r + ">+" + o + " </" + r + ">" : "") +
              ("<" +
                t.itemData.quality +
                ">" +
                t.itemData.name +
                "</" +
                t.itemData.quality +
                ">");
            var i, a;
            var s = this.getUpMax();
            var u = void 0;
            if (o == 0) {
              var l = this.getUpData(1);
              u = l.cost;
              i = this.getAttribute(1, n, e.level);
              a = d.default.copy(i);
              for (var f in a) {
                a[f] = 0;
              }
            } else if (o == s) {
              i = this.getAttribute(o, n, e.level);
              i = this.getAttribute(o, n, e.level);
            } else {
              var l = this.getUpData(o + 1);
              u = l.cost;
              i = this.getAttribute(o + 1, n, e.level);
              a = this.getAttribute(o, n, e.level);
            }
            if (u) {
              var c = [];
              for (var f in u) {
                c.push({
                  id: f,
                  count: u[f],
                  color:
                    p.default.userData.bag.getItemCount(f) >= u[f]
                      ? "#ffffff"
                      : "#ff0000",
                });
              }
              this.listCost.dataProvider = c;
              this.listCost.x = 535 - this.listCost.width / 2;
              this.listCost.visible = true;
            } else {
              this.listCost.visible = false;
            }
            this.labAttr1.text =
              v.default.tr(this.upgradeType == 0 ? 179 : 181) +
              "\n" +
              h.default.attr2str(
                Object.keys(a).map(function (t) {
                  return { k: parseInt(t), v: a[t] };
                }),
                undefined,
                { template: "{0}+{1}", percentTemplate: "{0}+{1}%" }
              );
            this.labAttr2.text =
              v.default.tr(this.upgradeType == 0 ? 180 : 182) +
              "\n" +
              h.default.attr2str(
                Object.keys(i).map(function (t) {
                  return { k: parseInt(t), v: i[t] };
                }),
                undefined,
                { template: "{0}+{1}", percentTemplate: "{0}+{1}%" }
              );
          }
        }
        if (!t) {
          this.itemBox.data = {};
          this.labName.text = this.labAttr1.text = this.labAttr2.text = "";
          this.listCost.visible = false;
        }
        this.labProtect.visible = this.imgCheck.visible = !!t;
        this.updateProtect();
      };
      t.prototype.updateProtect = function () {
        var t = this.upgradeType;
        var e = "";
        if (t == 0) {
          this.imgCheck.skin = this.upgradProtect
            ? "ui_interface_m/ui_atlas_common/M5UI_Common_RadioBtnon_00.png"
            : "ui_interface_m/ui_atlas_common/M5UI_Common_RadioBtnoff_00.png";
          e = c.default.getItemName(c.default.resourceIds.upgradeProtect);
        } else {
          this.imgCheck.skin = this.uppowerProtect
            ? "ui_interface_m/ui_atlas_common/M5UI_Common_RadioBtnon_00.png"
            : "ui_interface_m/ui_atlas_common/M5UI_Common_RadioBtnoff_00.png";
          e = c.default.getItemName(c.default.resourceIds.uppowerProtect);
        }
        this.labProtect.text = "使用" + e;
      };
      t.prototype.onClickItem = function (t) {
        var e;
        if (
          (e = t === null || t === void 0 ? void 0 : t.extra) === null ||
          e === void 0
            ? void 0
            : e.id
        ) {
          this.seleceId = t.extra.id;
          this.updateView();
          this.updateEquips();
        }
        this.updateEquips();
      };
      t.prototype.getUpData = function (t) {
        var e = this.upgradeType;
        if (e == 0) {
          return u.default.getIntensifyLevelData(t);
        } else if (e == 1) {
          return u.default.getGrowthLevelData(t);
        }
      };
      t.prototype.getAttribute = function (t, e, n) {
        if (n === void 0) {
          n = 1;
        }
        var o = this.upgradeType;
        if (o == 0) {
          return u.default.getIntensifyLevelAttribute(t, e, n);
        } else if (o == 1) {
          return u.default.getGrowthLevelAttribute(t, e, n);
        }
        return {};
      };
      t.prototype.getUpMax = function () {
        var t = this.upgradeType;
        if (t == 0) {
          return u.default.getIntensifyLevelMax();
        } else if (t == 1) {
          return u.default.getGrowthLevelMax();
        }
      };
      t.prototype.getLv = function () {
        var t = this.upgradeType;
        var e = p.default.userData.equip.get(this.seleceId);
        if (t == 0) {
          return e.intensifyLevel;
        } else if (t == 1) {
          return e.growthLevel;
        }
      };
      t.prototype.onChangePage = function () {
        this.updateView();
        this.updateEquips();
      };
      t.prototype.onUseProtect = function () {
        var t;
        if (this.upgradeType == 0) {
          t = this.upgradProtect = !this.upgradProtect;
        } else {
          t = this.uppowerProtect = !this.uppowerProtect;
        }
        if (t == true) {
          p.default.comm.msgBox(
            "选择使用保护卷之后，\n无论成功或是失败保护卷都会被消耗！"
          );
        }
        this.updateProtect();
      };
      t.prototype.onClickUp = function () {
        var e = this.upgradeType;
        var n = this.seleceId;
        if (!n) {
          p.default.comm.mtr(276);
          return;
        }
        this.getLv();
        var t =
          e == 0
            ? c.default.resourceIds.upgradeProtect
            : c.default.resourceIds.uppowerProtect;
        var o = c.default.getItemData(t);
        var r = p.default.userData.bag.getItemCount(o.id);
        var i = e == 0 ? this.upgradProtect : this.uppowerProtect;
        var a = this;
        function s(t) {
          if (e == 0) {
            p.default.userData.equip.upgrade(n, t ? 1 : 0);
          } else if (e == 1) {
            p.default.userData.equip.uppower(n, t ? 1 : 0);
          }
          a.btnUp.disabledTap = true;
          p.default.timerMgr.delay(300, 1, function () {
            return (a.btnUp.disabledTap = false);
          });
        }
        if (r > 0) {
          if (i) {
            s(true);
          } else {
            s(false);
          }
        } else {
          if (i) {
            p.default.comm.msgBox(o.name + "不足");
          } else {
            s(false);
          }
        }
      };
      return t;
    })(r.default);
    e.default = l;
  });
  t(Cf);
  var Pf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Cf);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      Object.defineProperty(e.prototype, "upgradeType", {
        get: function () {
          return 1;
        },
        enumerable: false,
        configurable: true,
      });
      return e;
    })(r.default);
    e.default = i;
  });
  t(Pf);
  var jf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(R);
    var a = o(h);
    var s = o(x);
    var u = o(W);
    var l = o(Af);
    var f = o(Ef);
    var c = o(Pf);
    var p = o(Cf);
    var d = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        u.default.initSkin("ui/activity/Activity", t, t);
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        o.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(s.default.CLOSE, this.close, this);
        this.views = [
          { label: r.default.tr(274), view: p.default },
          { label: r.default.tr(275), view: c.default },
          { label: r.default.tr(278), view: l.default },
          { label: r.default.tr(295), view: f.default },
        ];
        var t = this.views;
        var e = 0;
        for (; e < t.length; e++) {
          var n = this.btnList.getChildAt(e);
          if (!n) break;
          n.label = t[e].label;
        }
        for (; e < this.btnList.numChild; e++) {
          this.btnList.getChildAt(e).visible = false;
        }
        this.btnList.on(s.default.RADIOGROUP_CHANGED, this.onSelectIndex, this);
        this.btnList.selectIndex = 0;
        this.updateView();
      };
      t.prototype.updateView = function () {};
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.bg.onClose();
        this.closeCurView();
      };
      t.prototype.onOpenView = function (t) {};
      t.prototype.closeCurView = function () {
        if (this.curView) {
          var t = this.curView;
          t.event(a.default.onClose);
          this.curView.removeSelf();
          this.curView = undefined;
        }
      };
      t.prototype.onSelectIndex = function () {
        var t = this.btnList.selectIndex;
        var e = this.views[t];
        if (e) {
          this.closeCurView();
          this.curView = undefined;
          if (e.view) {
            var n = new e.view();
            n.event(a.default.onOpen);
            n.event(a.default.onOpened);
            this.curView = n;
            this.addChild(this.curView);
            this.onOpenView(t);
          }
        }
      };
      return t;
    })(i.default);
    e.default = d;
  });
  t(jf);
  var Sf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(D);
    var i = o(q);
    var a = o(I);
    var s = o(Tl);
    var u = o(Ll);
    var l = o(Fl);
    var f = o(Bl);
    var c = o(Nl);
    var p = o(Ul);
    var d = o(dt);
    var h = o(Hl);
    var v = o(Gl);
    var y = o(ql);
    var _ = o(Kl);
    var m = o(zl);
    var g = o(Zl);
    var b = o(tf);
    var O = o(ef);
    var w = o(nf);
    var A = o(Wl);
    var E = o(of);
    var T = o(rf);
    var C = o(af);
    var P = o(ff);
    var j = o(cf);
    var S = o(yf);
    var M = o(wf);
    var k = o(jf);
    var x = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.viewMgr.register(a.default.Home, s.default);
        i.default.viewMgr.register(a.default.Bottom, u.default);
        i.default.viewMgr.register(a.default.MonsterHp, l.default);
        i.default.viewMgr.register(a.default.TextPopup, f.default);
        i.default.viewMgr.register(a.default.NpcOption, c.default);
        i.default.viewMgr.register(a.default.NpcDialog, p.default);
        i.default.viewMgr.register(a.default.EquipSuitDetails, h.default);
        i.default.viewMgr.register(a.default.RoleMenu, _.default);
        i.default.viewMgr.register(a.default.MenuProfile, m.default);
        i.default.viewMgr.register(a.default.FightUI, y.default);
        i.default.viewMgr.register(a.default.HomeUI, g.default);
        i.default.viewMgr.register(a.default.mHome, v.default);
        i.default.viewMgr.register(a.default.CityUI, j.default);
        i.default.viewMgr.register(a.default.MapLoading, b.default);
        i.default.viewMgr.register(a.default.CDK, O.default);
        i.default.viewMgr.register(a.default.EquipmentUpgrade, k.default);
        i.default.viewMgr.register(a.default.HeroProfileAttribute, w.default);
        i.default.viewMgr.register(a.default.ItemAutoSell, A.default);
        i.default.viewMgr.register(a.default.RoleRename, E.default);
        i.default.viewMgr.register(a.default.EquipmentUpgradeBook, T.default);
        i.default.viewMgr.register(a.default.SystemSetting, C.default);
        i.default.viewMgr.register(a.default.Activity, P.default);
        i.default.viewMgr.register(a.default.TaskMain, S.default);
        i.default.viewMgr.register(a.default.ItemCollect, M.default);
        i.default.eventMgr.on(1011, t.setEnemy, t);
        i.default.eventMgr.on(1057, t.serverTips, t);
        i.default.eventMgr.on(1061, t.npcDialog, t);
        return t;
      }
      t.prototype.onStart = function () {
        i.default.viewMgr.open(a.default.Home);
        i.default.userData.home.record();
      };
      t.prototype.npcDialog = function (t) {
        i.default.viewMgr.close(a.default.NpcDialog);
        i.default.viewMgr.open(a.default.NpcDialog);
        var e = i.default.viewMgr.getOpenView(a.default.NpcDialog);
        e.dialog(t);
      };
      t.prototype.setEnemy = function (t) {
        i.default.viewMgr.open(a.default.MonsterHp);
        var e = i.default.viewMgr.getOpenView(a.default.MonsterHp);
        if (e) {
          e.setObject(t);
          if (!e.target) {
            i.default.viewMgr.close(a.default.MonsterHp);
          }
        }
      };
      t.prototype.serverTips = function (t) {
        i.default.viewMgr.open(a.default.MsgBox, [d.default.tr(t)]);
      };
      return t;
    })(r.default);
    e.default = x;
  });
  t(Sf);
  var Mf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var c = o(Pl);
    var p = o(be);
    var i = o(q);
    var a = o(T);
    var s = o($);
    var u = (function (f) {
      n(t, f);
      function t() {
        var t = f.call(this) || this;
        t.touchThrough = false;
        var e = (t.bg = new p.default("interface/window/{0}.png", 97));
        e.pos(0, 10);
        t.addChild(e);
        var n = (t.$imgWindowLeft = new XOF.Image());
        n.skin = "interface/window/1.png";
        n.size(100, 26);
        t.addChild(n);
        var o = (t.$imgWindowCenter = new XOF.Image());
        o.size(12, 26);
        o.skin = "interface/window/2.png";
        t.addChild(o);
        var r = (t.$imgWindowRight = new XOF.Image());
        r.size(66, 26);
        r.skin = "interface/window/3.png";
        t.addChild(r);
        var i = (t.$imgWindowLightLeft = new XOF.Image());
        i.skin = "interface/window/4.png";
        i.blendMode = "add";
        i.size(64, 22);
        i.pos(1, 1);
        t.addChild(i);
        var a = (t.$imgWindowLightCenter = new XOF.Image());
        a.skin = "interface/window/5.png";
        a.blendMode = "add";
        a.size(12, 22);
        a.pos(0, 1);
        t.addChild(a);
        var s = (t.$imgWindowLightRight = new XOF.Image());
        s.skin = "interface/window/6.png";
        s.blendMode = "add";
        s.size(64, 22);
        s.pos(0, 1);
        t.addChild(s);
        var u = (t.labTitle = new XOF.Label());
        u.y = 6;
        u.stroke = 1;
        u.strokeColor = "#000000";
        u.text = "Window";
        u.textAlign = "center";
        t.addChild(u);
        var l = (t.btnClose = new c.default());
        l.setImages(
          "interface/window/276.png",
          "interface/window/277.png",
          "interface/window/278.png",
          "interface/window/279.png"
        );
        l.addTo(t).y = 3;
        t.moveRect = new XOF.Box();
        t.moveRect.addTo(t);
        t.px = t.py = 0;
        t.move = false;
        t.content = new XOF.Box();
        t.content.pos(3, 25);
        t.content.addTo(t);
        t.size(178, 180);
        t.setHot(false);
        return t;
      }
      t.prototype.onTouchBegin = function () {
        this.px = i.default.viewMgr.mouseX - this.x;
        this.py = i.default.viewMgr.mouseY - this.y;
        this.move = true;
        XOF.stage.on(XOF.TouchEvent.TOUCH_MOVE, this.onTouchMove, this);
        this.moveRect.on(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.moveRect.on(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
        XOF.stage.on(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        XOF.stage.on(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
      };
      t.prototype.onTouchMove = function () {
        if (this.move) {
          this.pos(
            i.default.viewMgr.mouseX - this.px,
            i.default.viewMgr.mouseY - this.py
          );
        }
      };
      t.prototype.onTouchEnd = function () {
        this.px = this.py = 0;
        this.move = false;
        XOF.stage.off(XOF.TouchEvent.TOUCH_MOVE, this.onTouchMove, this);
        this.moveRect.off(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.moveRect.off(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
        XOF.stage.off(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        XOF.stage.off(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
      };
      t.prototype.onTouch = function () {
        if (
          i.default.viewMgr.hot
            ? i.default.viewMgr.hot.orderIndex != a.default.NORUMAL
            : false
        )
          return;
        this.timestamp = XOF.hashCode();
        i.default.viewMgr.popupTop(this);
        i.default.viewMgr.setHot(this);
      };
      Object.defineProperty(t.prototype, "title", {
        get: function () {
          return this.labTitle.text;
        },
        set: function (t) {
          this.labTitle.text = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setHot = function (t) {
        this.$imgWindowLightCenter.visible =
          this.$imgWindowLightLeft.visible =
          this.$imgWindowLightRight.visible =
            t;
      };
      t.prototype.cneterBy = function (t, e) {
        this.pos(
          (s.default.width - this.width) / 2 + t,
          (s.default.height - this.height) / 2 + e
        );
        return this;
      };
      t.prototype.contentSize = function () {
        this.size(this.content.width + 6, this.content.height + 20);
      };
      t.prototype.size = function (t, e) {
        if (t < 178) {
          t = 178;
        }
        if (e < 100) {
          e = 100;
        }
        f.prototype.size.call(this, t, e);
        this.content.size(t - 6, e - 28);
        this.bg.size(t - 1, e - 10);
        this.moveRect.size(t - 25, 25);
        this.$imgWindowRight.x = t - this.$imgWindowRight.width;
        this.$imgWindowCenter.x = this.$imgWindowLeft.width;
        this.$imgWindowCenter.width =
          t - this.$imgWindowLeft.width - this.$imgWindowRight.width;
        this.btnClose.x = t - 25;
        var n = t - 3;
        this.$imgWindowLightRight.x = n - this.$imgWindowLightRight.width;
        this.$imgWindowLightCenter.x =
          this.$imgWindowLightLeft.width + this.$imgWindowLightLeft.x;
        this.$imgWindowLightCenter.width =
          n -
          this.$imgWindowLightLeft.width -
          this.$imgWindowLightLeft.x -
          this.$imgWindowLightRight.width;
        this.labTitle.x = (t - 20) / 2;
        return this;
      };
      t.prototype.onOpen = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        f.prototype.onOpen.apply(this, t);
        this.on(XOF.TouchEvent.TOUCH_BEGIN, this.onTouch, this);
        this.on(XOF.TouchEvent.RMOUSE_BEGIN, this.onTouch, this);
        this.btnClose.on(XOF.TouchEvent.TAP, this.close, this);
        this.moveRect.on(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBegin, this);
        this.onTouch();
      };
      t.prototype.onClose = function () {
        f.prototype.onClose.call(this);
        this.off(XOF.TouchEvent.TOUCH_BEGIN, this.onTouch, this);
        this.off(XOF.TouchEvent.RMOUSE_BEGIN, this.onTouch, this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.close, this);
        this.moveRect.off(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBegin, this);
        this.onTouchEnd();
        i.default.viewMgr.setHot(undefined);
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(Mf);
  var kf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mf);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      return e;
    })(r.default);
    e.default = i;
  });
  t(kf);
  var xf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(D);
    var i = o(q);
    var a = o(I);
    var s = o(kf);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.viewMgr.register(a.default.HeroProfile, s.default);
        return t;
      }
      return t;
    })(r.default);
    e.default = u;
  });
  t(xf);
  var Df = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.Login_Error = e.LoginConst = void 0;
    var n = (function () {
      function t() {}
      return t;
    })();
    e.LoginConst = n;
    (function (t) {
      t[(t["NOSERVER"] = 1)] = "NOSERVER";
      t[(t["NOROLES"] = 2)] = "NOROLES";
      t[(t["NOROLE"] = 3)] = "NOROLE";
      t[(t["ROLE_SELECT_ERROR"] = 4)] = "ROLE_SELECT_ERROR";
    })(e.Login_Error || (e.Login_Error = {}));
  });
  t(Df);
  Df.Login_Error;
  Df.LoginConst;
  var If = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Ce);
    var i = o(R);
    var a = o(Q);
    var s = o(T);
    var u = o(Se);
    var l = o(W);
    var f = o($);
    var c = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.orderIndex = s.default.LOADING;
        l.default.initSkin("ui/loading/loading", t, t);
        t.touchEnabled = true;
        t.touchThrough = false;
        t.size(f.default.width, f.default.height);
        t.imgBlack.size(f.default.width, f.default.height);
        return t;
      }
      t.prototype.onOpen = function (t, e, n) {
        o.prototype.onOpen.call(this);
        this.callback = e;
        this.thisObj = n;
        this.max = this.count = 0;
        a.default
          .get(this.imgLight, { loop: true })
          .set({ rotate: 0 })
          .to({ rotate: 360 }, 1e3);
        this.files = u.default.filterLoadedImages(t);
        this.max = this.files.length;
        this.index = 0;
        a.default.get(this).wait(1e3).call(this.loads, this).remove();
        this.updateLabel();
      };
      t.prototype.loads = function () {
        var t = this.files;
        if (t.length) {
          for (
            var e = this.index, n = 0;
            e < t.length;
            e++, this.index++, n++
          ) {
            var o = t[e];
            this.load(o.url, o.type);
          }
        } else {
          this.onLoaded();
        }
      };
      t.prototype.load = function (t, e) {
        if (e == r.default.IMAGE) {
          XOF.loader.loadImage(t, undefined, undefined, this.onLoaded, this);
        } else {
          return false;
        }
        return true;
      };
      t.prototype.updateLabel = function () {
        this.labProgress.text = this.max
          ? Math.floor((this.count / this.max) * 100) + "%"
          : "";
      };
      t.prototype.onLoaded = function () {
        this.count += 1;
        if (this.count >= this.max) {
          this.onComplete();
        }
        this.updateLabel();
      };
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        a.default.removeTweens(this.imgLight);
        a.default.removeTweens(this.imgBg);
        this.files =
          this.callback =
          this.thisObj =
          this.count =
          this.max =
            undefined;
      };
      t.prototype.onComplete = function () {
        a.default.removeTweens(this.imgBg);
        a.default
          .get(this.imgBg)
          .wait(1200)
          .call(this.openView, this)
          .wait(400)
          .to({ alpha: 0 }, 600)
          .call(this.close, this);
      };
      t.prototype.openView = function () {
        if (this.callback) {
          this.callback.apply(this.thisObj);
        }
      };
      return t;
    })(i.default);
    e.default = c;
  });
  t(If);
  var Rf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var i = o(q);
    var a = o(W);
    var s = o(I);
    var u = o(Q);
    var l = o(V);
    var f = o($);
    var c = o(T);
    var p = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = c.default.LOGIN;
        a.default.initSkin("ui/Login/Login", t, t);
        t.size(f.default.width, f.default.height);
        t.imgBlack.size(t.width, t.height);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnNotice.on(XOF.TouchEvent.TAP, this.onClickNotice, this);
        this.btnStart.on(XOF.TouchEvent.TAP, this.onClickStart, this);
        this.labAccounts.on(XOF.TouchEvent.TAP, this.onClickAccounts, this);
        this.labPassword.on(XOF.TouchEvent.TAP, this.onClickPassword, this);
        this.btnOpenReg.on(XOF.TouchEvent.TAP, this.onClickOpenReg, this);
        this.btnPwd.on(XOF.TouchEvent.TAP, this.onClickPwd, this);
        i.default.eventMgr.on(1066, this.onNoticeLoad, this);
        this.strAccounts = this.strPassword = "";
        this.initAccounts();
        this.updateView();
        function t() {
          i.default.userData.login
            .loadNotice()
            .then(function (t) {
              i.default.viewMgr.close(s.default.NetLoading);
            })
            .catch(function (t) {
              i.default.viewMgr.close(s.default.NetLoading);
              i.default.eventMgr.event(1054, [
                {
                  text: l.default.tr(162),
                  confirm: {
                    callback: function () {
                      i.default.platform.restart();
                    },
                  },
                  close: { hide: true },
                },
              ]);
            });
        }
        i.default.viewMgr.open(s.default.NetLoading, [-1]);
        if (i.default.platform.platformType == "HBuilder") {
          this.imgBlack.alpha = 1;
          u.default
            .get(this.imgBlack)
            .wait(200)
            .to({ alpha: 0 }, 1e3)
            .wait(100)
            .call(function () {
              return t();
            })
            .remove();
        } else {
          this.imgBlack.alpha = 0;
          t();
        }
        if (i.default.isAutoLogin);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnNotice.off(XOF.TouchEvent.TAP, this.onClickNotice, this);
        this.btnStart.off(XOF.TouchEvent.TAP, this.onClickStart, this);
        this.labAccounts.off(XOF.TouchEvent.TAP, this.onClickAccounts, this);
        this.labPassword.off(XOF.TouchEvent.TAP, this.onClickPassword, this);
        this.btnOpenReg.off(XOF.TouchEvent.TAP, this.onClickOpenReg, this);
        this.btnPwd.off(XOF.TouchEvent.TAP, this.onClickPwd, this);
        i.default.eventMgr.off(1066, this.onNoticeLoad, this);
      };
      t.prototype.onClickAccounts = function () {
        i.default.platform.input("输入账户", "", {
          confirmCallback: this.onInputAccounts,
          confirmThisObj: this,
        });
      };
      t.prototype.onClickPassword = function () {
        i.default.platform.input("输入密码", "", {
          confirmCallback: this.onInputPassword,
          confirmThisObj: this,
        });
      };
      t.prototype.updateView = function () {
        if (!!this.strAccounts) {
          this.labAccounts.text = this.strAccounts;
        } else {
          this.labAccounts.text = "点击输入账户";
        }
        if (!!this.strPassword) {
          this.labPassword.fontSize = 14;
          this.labPassword.text = new Array(this.strPassword.length)
            .fill("●")
            .join("");
        } else {
          this.labPassword.fontSize = this.labAccounts.fontSize;
          this.labPassword.text = "点击输入密码";
        }
      };
      t.prototype.savAccounts = function (t, e) {
        i.default.platform.setItem("accounts", t.slice(0, 16));
        i.default.platform.setItem("password", e.slice(0, 16));
      };
      t.prototype.initAccounts = function () {
        this.strAccounts = i.default.platform.getItem("accounts", "");
        this.strPassword = i.default.platform.getItem("password", "");
      };
      t.prototype.onInputAccounts = function (t) {
        this.strAccounts = t;
        this.updateView();
      };
      t.prototype.onInputPassword = function (t) {
        this.strPassword = t;
        this.updateView();
      };
      t.prototype.onClickOpenReg = function () {
        i.default.viewMgr.open(s.default.LoginRegister);
      };
      t.prototype.onClickPwd = function () {
        i.default.viewMgr.open(s.default.LoginResetPassword);
      };
      t.prototype.onClickNotice = function () {
        i.default.viewMgr.open(s.default.LoginNotice);
      };
      t.prototype.onClickStart = function () {
        var e = this;
        if (!!this.strAccounts == false || !!this.strPassword == false) {
          i.default.eventMgr.event(1055, ["账户或者密码格式不正确"]);
        } else {
          if (XOF.now() > i.default.userData.login.loginClickTime) {
            i.default.viewMgr.open(s.default.NetLoading, [3e4]);
            i.default.userData.login
              .loginGame(this.strAccounts, this.strPassword)
              .then(function (t) {
                if (t) {
                  e.savAccounts(e.strAccounts, e.strPassword);
                } else {
                  i.default.viewMgr.close(s.default.NetLoading);
                }
              });
          } else {
            i.default.comm.mtr(315);
          }
        }
      };
      t.prototype.onNoticeLoad = function () {
        var t;
        if (
          (t = i.default.userData.login.notice) === null || t === void 0
            ? void 0
            : t.notice
        ) {
          i.default.viewMgr.open(s.default.LoginNotice);
        }
      };
      return t;
    })(r.default);
    e.default = p;
  });
  t(Rf);
  var Lf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var i = o(Q);
    var a = o(T);
    var s = o(W);
    var u = o(Se);
    var l = o($);
    var f = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        s.default.initSkin("ui/loading/loading2", t, t);
        t.orderIndex = a.default.LOADING;
        t.touchEnabled = true;
        t.touchThrough = false;
        t.size(l.default.width, l.default.height);
        t.imgBlack.size(t.width, t.height);
        t.imgLoad.x = t.width - t.imgLoad.width;
        t.labProgress.x = t.imgLoad.x + 64;
        return t;
      }
      t.prototype.onOpen = function (t, e, n) {
        o.prototype.onOpen.call(this);
        this.alpha = 1;
        this.callback = e;
        this.thisObj = n;
        u.default.loadImages(t, this.onComplete, this, this.updateLabel, this);
        this.updateLabel(0);
      };
      t.prototype.updateLabel = function (t) {
        this.labProgress.text = Math.floor(t * 100) + "%";
      };
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        i.default.removeTweens(this);
        this.callback = this.thisObj = undefined;
      };
      t.prototype.onComplete = function () {
        i.default.removeTweens(this);
        i.default
          .get(this)
          .call(this.openView, this)
          .to({ alpha: 0 }, 400)
          .call(this.close, this);
      };
      t.prototype.openView = function () {
        if (this.callback) {
          this.callback.apply(this.thisObj);
        }
      };
      return t;
    })(r.default);
    e.default = f;
  });
  t(Lf);
  var Ff = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Ce);
    var i = o(R);
    var a = o(Q);
    var s = o(T);
    var u = o(Se);
    var l = o(W);
    var f = o($);
    var c = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.orderIndex = s.default.TIPS;
        l.default.initSkin("ui/loading/loading2", t, t);
        t.size(f.default.width, f.default.height);
        t.imgBlack.size(t.width, t.height);
        t.touchThrough = false;
        t.touchEnabled = true;
        t.imgBlack.visible = false;
        t.imgLoad.x = t.width - t.imgLoad.width;
        t.labProgress.x = t.imgLoad.x + 64;
        return t;
      }
      t.prototype.onOpen = function (t, e, n) {
        o.prototype.onOpen.call(this);
        a.default.removeTweens(this);
        this.callback = e;
        this.thisObj = n;
        this.max = this.count = 0;
        this.resList = [];
        this.alpha = 1;
        this.push(t);
        this.updateLabel();
      };
      t.prototype.push = function (t) {
        if (u.default.filterLoadedImages(t).length) {
          a.default.removeTweens(this);
          this.alpha = 1;
          this.resList.push(t);
        }
        this.loadNext();
      };
      t.prototype.load = function (t, e) {
        if (e == r.default.IMAGE) {
          XOF.loader.loadImage(t, undefined, undefined, this.onLoaded, this);
        } else {
          return false;
        }
        return true;
      };
      t.prototype.updateLabel = function () {
        this.labProgress.text = "";
      };
      t.prototype.loadNext = function () {
        if (this.count >= this.max) {
          this.max = this.count = 0;
          var t = true;
          if (this.resList.length) {
            var e = u.default.filterLoadedImages(this.resList.shift());
            var n = e;
            if (n === null || n === void 0 ? void 0 : n.length) {
              t = false;
              this.max = n.length;
              for (var o = 0, r = n; o < r.length; o++) {
                var i = r[o];
                this.load(i.url, i.type);
              }
            }
          }
          if (t) this.onLoaded();
        }
      };
      t.prototype.onLoaded = function () {
        this.count += 1;
        if (this.count >= this.max) {
          if (this.resList.length) {
            this.loadNext();
          } else {
            this.onComplete();
          }
        }
        this.updateLabel();
      };
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        a.default.removeTweens(this);
        if (this.callback) this.callback.apply(this.thisObj);
        this.callback = this.thisObj = this.count = this.max = undefined;
        delete this.resList;
      };
      t.prototype.onComplete = function () {
        a.default.removeTweens(this);
        a.default.get(this).to({ alpha: 0 }, 400).call(this.close, this);
      };
      return t;
    })(i.default);
    e.default = c;
  });
  t(Ff);
  var Bf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(W);
    var i = o(Q);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.initSkin("ui/home/CharacterCreateItem", t, t);
        t.pressScale = 1.1;
        t.releaseScale = 1;
        t.on(XOF.TouchEvent.TOUCH_BEGIN, t.onTouchBegin, t);
        t.on(XOF.TouchEvent.TOUCH_END, t.onTouchEnd, t);
        t.on(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, t.onTouchEnd, t);
        return t;
      }
      Object.defineProperty(t.prototype, "label", {
        get: function () {
          return this.lab.text;
        },
        set: function (t) {
          this.lab.text = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onTouchBegin = function () {
        i.default.removeTweens(this.lab);
        i.default
          .get(this.lab)
          .to({ scaleX: this.pressScale, scaleY: this.pressScale }, 100)
          .remove();
      };
      t.prototype.onTouchEnd = function () {
        i.default.removeTweens(this.lab);
        i.default
          .get(this.lab)
          .to({ scaleX: this.releaseScale, scaleY: this.releaseScale }, 100)
          .remove();
      };
      return t;
    })(XOF.Sprite);
    e.default = a;
  });
  t(Bf);
  var Nf = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = n(dt);
    var i = n(q);
    var r = n(R);
    var s = n(K);
    var u = n(W);
    var l = n(Se);
    var f = n(Q);
    var c = n(T);
    var p = n(Bf);
    var d = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.orderIndex = c.default.LOGIN;
        t.touchThrough = false;
        u.default.initSkin("ui/home/CharacterCreate", t, t);
        return t;
      }
      t.prototype.onOpen = function (t) {
        var e = this;
        if (t === void 0) {
          t = false;
        }
        n.prototype.onOpen.call(this);
        this.roleJob = "swordman";
        this.imgBlack.alpha = 0;
        this.list.removeChildren();
        this.labTitle.alpha = 0;
        this.btnBack.visible = false;
        f.default
          .get(this.imgBlack)
          .to({ alpha: 1 }, 1200)
          .call(function () {
            e.questionId = 1;
            e.setQuestion();
            if (t) {
              e.btnBack.touchEnabled = false;
              e.btnBack.alpha = 0;
              e.btnBack.visible = !!t;
            }
          });
        i.default.eventMgr.on(1048, this.onCreated, this);
        this.btnBack.on(XOF.TouchEvent.TAP, this.onBack, this);
      };
      t.prototype.onOpened = function () {
        n.prototype.onOpened.call(this);
        l.default.loadSimple(l.default.getCharacterCreateRes());
        l.default.loadSimple(l.default.getCityUIRes());
        l.default.loadSimple(l.default.getJobDefaultRes());
      };
      t.prototype.onClose = function () {
        n.prototype.onClose.call(this);
        i.default.eventMgr.off(1048, this.onCreated, this);
        this.btnBack.off(XOF.TouchEvent.TAP, this.onBack, this);
      };
      t.prototype.setQuestion = function () {
        var r = this;
        var t = this.questionId;
        this.list.removeChildren();
        var i = a.default.conf.charactercreate[t];
        this.labTitle.text = i.question;
        this.labTitle.alpha = 0;
        f.default.removeTweens(this.labTitle);
        var e = f.default.get(this.labTitle);
        e.wait(100).to({ alpha: 1 }, 600);
        var n = 0;
        ["a", "b", "c", "d", "e", "f"].forEach(function (t) {
          return (n += i[t] ? 1 : 0);
        });
        e.call(function () {
          if (i) {
            ["a", "b", "c", "d", "e", "f"].forEach(function (t, e) {
              var n = i[t];
              if (n) {
                var o = new p.default();
                o.alpha = 0;
                o.name = t;
                o.pos(0, e * 60);
                r.list.addChild(o);
                o.label = n;
                o.on(XOF.TouchEvent.TAP, r.onClick, r, [e]);
                f.default
                  .get(o)
                  .wait(e * 300)
                  .to({ alpha: 1 }, 1e3)
                  .remove();
              }
            });
            r.list.touchEnabled = false;
          } else {
            XOF.log("问题不存在" + t);
          }
        })
          .wait(n * 300)
          .call(function () {
            r.list.touchEnabled = true;
            if (r.btnBack.visible) {
              f.default
                .get(r.btnBack)
                .to({ alpha: 1 }, 1e3)
                .call(function () {
                  return (r.btnBack.touchEnabled = true);
                })
                .remove();
            }
          });
        e.remove();
      };
      t.prototype.dealSpeical = function (t) {
        var e = this;
        this.list.touchEnabled = false;
        f.default.get(this.labTitle).to({ alpha: 0 }, 600).remove();
        for (var n = 0; n < this.list.numChild; n++) {
          var o = this.list.getChildAt(n);
          f.default.removeTweens(o);
          if (n == t) {
            f.default
              .get(o)
              .wait(600)
              .to({ alpha: 0 }, 600)
              .call(function () {
                e.onComplete();
              })
              .remove();
          } else {
            f.default.get(o).to({ alpha: 0 }, 600).remove();
          }
        }
      };
      t.prototype.onCreated = function () {
        this.dealSpeical(1);
      };
      t.prototype.onBack = function () {
        var t = this;
        this.btnBack.touchEnabled = false;
        this.dealSpeical(-1);
        f.default
          .get(this.btnBack)
          .to({ alpha: 0 }, 800)
          .wait(400)
          .call(function () {
            return (t.btnBack.touchEnabled = true);
          })
          .call(this.onComplete, this)
          .remove();
      };
      t.prototype.onClick = function (e) {
        var n = this;
        var t;
        var o = a.default.conf.charactercreate[this.questionId];
        var r = ["a", "b", "c", "d", "e", "f"][e] + "link";
        if (o.id % 1e4 == 0) {
          this.roleJob =
            (t = o === null || o === void 0 ? void 0 : o.params) === null ||
            t === void 0
              ? void 0
              : t[e];
        }
        if (o[r] == -1) {
          XOF.log("未开放");
        } else if (o[r] == -2) {
          if (this.questionId == 1e3) {
            if (this.roleName) {
              i.default.eventMgr.event(s.default.CHARACTER_CREATE_COMPLETE, [
                this.roleName,
                this.roleJob,
              ]);
            } else {
              i.default.comm.tip("请输入名字");
            }
            return;
          }
          this.dealSpeical(e);
        } else if (o[r] == -3) {
          i.default.platform.input("请输入名字", undefined, {
            confirmCallback: this.onInputName,
            confirmThisObj: this,
          });
        } else if (o[r] >= 0) {
          this.list.touchEnabled = false;
          i.default.timerMgr.delay(250, 1, function () {
            n.questionId = o[r];
            f.default.get(n.labTitle).to({ alpha: 0 }, 600).remove();
            for (var t = 0; t < n.list.numChild; t++) {
              if (t == e) {
                f.default
                  .get(n.list.getChildAt(t))
                  .wait(600)
                  .to({ alpha: 0 }, 600)
                  .call(function () {
                    n.setQuestion();
                    n.list.touchEnabled = true;
                  })
                  .remove();
              } else {
                f.default
                  .get(n.list.getChildAt(t))
                  .to({ alpha: 0 }, 600)
                  .remove();
              }
            }
          });
        }
      };
      t.prototype.onInputName = function (t) {
        var e;
        this.roleName = t;
        var n = "a";
        var o = this.list.getChildByName(n);
        if ((e = this.roleName) === null || e === void 0 ? void 0 : e.length) {
          o.label = this.roleName;
        } else {
          var r = a.default.conf.charactercreate[this.questionId];
          o.label = r[n];
        }
      };
      t.prototype.onComplete = function () {
        this.close();
      };
      return t;
    })(r.default);
    e.default = d;
  });
  t(Nf);
  var Xf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o($);
    var i = o(R);
    var a = o(x);
    var s = o(W);
    var u = o(Q);
    var l = o(T);
    var f = o(Pe);
    var c = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/Loading/LoadingSimple", t, t);
        t.orderIndex = l.default.LOADING_SIMPLE;
        t.touchThrough = true;
        t.touchEnabled = false;
        t.resLoader = new f.default();
        t.size(r.default.width, r.default.height);
        t.resLoader.on(a.default.PROGRESS, t.onProgress, t);
        return t;
      }
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        u.default
          .get(this.imgLight, { loop: true })
          .set({ rotate: 0 })
          .to({ rotate: 360 }, 1e3);
        this.isOpen = true;
        this.push(t);
      };
      t.prototype.push = function (t) {
        this.resLoader.push(t);
        if (this.isOpen) this.imgLight.alpha = 0;
        this.isOpen = false;
        if (this.resLoader.hasLoad()) {
          this.show();
        } else {
          this.hide();
        }
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.resLoader.destroy();
        u.default.removeTweens(this.imgLight);
        this.tweenShow = this.tweenHide = undefined;
      };
      t.prototype.onProgress = function (t) {
        if (t >= 1) {
          this.hide();
        }
        this.updateState();
      };
      t.prototype.show = function (t) {
        if (t === void 0) {
          t = 1e3;
        }
        if (this.tweenHide) {
          u.default.removeTween(this.tweenHide);
          this.tweenHide = undefined;
        }
        if (!this.tweenShow) {
          this.tweenShow = u.default
            .get(this.imgLight)
            .to({ alpha: 1 }, (1 - this.imgLight.alpha) * t);
        }
      };
      t.prototype.hide = function (t) {
        if (t === void 0) {
          t = 1e3;
        }
        if (this.tweenShow) {
          u.default.removeTween(this.tweenShow);
          this.tweenShow = undefined;
        }
        if (!this.tweenHide) {
          this.tweenHide = u.default
            .get(this.imgLight)
            .to({ alpha: 0 }, this.imgLight.alpha * t)
            .call(this.close, this);
        }
      };
      t.prototype.updateState = function () {
        if (this.resLoader.hasLoad()) {
          this.show();
        } else {
          this.hide();
        }
      };
      return t;
    })(i.default);
    e.default = c;
  });
  t(Xf);
  var Uf = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n($);
    var i = n(q);
    var a = n(R);
    var s = n(W);
    var u = n(T);
    var l = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        s.default.initSkin("ui/Login/LoginNotice", t, t);
        t.touchThrough = false;
        t.size(r.default.width, r.default.height);
        t.imgBlack.size(r.default.width, r.default.height);
        t.orderIndex = u.default.LOGIN;
        return t;
      }
      t.prototype.onOpen = function () {
        var t, e;
        n.prototype.onOpen.call(this);
        this.btnOk.textLightColor = this.btnOk.textNormalColor;
        this.btnClose.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.close, this);
        this.imgBlack.on(XOF.TouchEvent.TAP, this.close, this);
        this.setText(
          ((e =
            (t = i.default.userData.login) === null || t === void 0
              ? void 0
              : t.notice) === null || e === void 0
            ? void 0
            : e.notice) || ""
        );
      };
      t.prototype.onClose = function () {
        n.prototype.onClose.call(this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.close, this);
        this.imgBlack.off(XOF.TouchEvent.TAP, this.close, this);
      };
      t.prototype.setText = function (t) {
        this.labText.text = t;
      };
      return t;
    })(a.default);
    e.default = l;
  });
  t(Uf);
  var Hf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o($);
    var i = o(q);
    var a = o(R);
    var s = o(W);
    var u = o(T);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/Login/LoginRegister", t, t);
        t.touchThrough = false;
        t.viewCache = true;
        t.size(r.default.width, r.default.height);
        t.imgBlack.size(r.default.width, r.default.height);
        t.labAccounts.text =
          t.labPassword.text =
          t.labPassword2.text =
          t.labSuperPassword.text =
            "";
        t.orderIndex = u.default.LOGIN;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnOk.textLightColor = this.btnOk.textNormalColor;
        this.btnClose.on(XOF.TouchEvent.TAP, this.close, this);
        this.imgBlack.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickRegister, this);
        this.labAccounts.on(XOF.TouchEvent.TAP, this.onClickRegAccounts, this);
        this.labPassword.on(XOF.TouchEvent.TAP, this.onClickRegPassword, this);
        this.labPassword2.on(
          XOF.TouchEvent.TAP,
          this.onClickRegPassword2,
          this
        );
        this.labSuperPassword.on(
          XOF.TouchEvent.TAP,
          this.onClickRegPhone,
          this
        );
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.close, this);
        this.imgBlack.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickRegister, this);
        this.labAccounts.off(XOF.TouchEvent.TAP, this.onClickRegAccounts, this);
        this.labPassword.off(XOF.TouchEvent.TAP, this.onClickRegPassword, this);
        this.labPassword2.off(
          XOF.TouchEvent.TAP,
          this.onClickRegPassword2,
          this
        );
        this.labSuperPassword.off(
          XOF.TouchEvent.TAP,
          this.onClickRegPhone,
          this
        );
      };
      t.prototype.updateView = function () {
        if (!!this.labAccounts.name) {
          this.labAccounts.text = this.labAccounts.name;
        } else {
          this.labAccounts.text = "";
        }
        if (!!this.labPassword.name) {
          this.labPassword.text = "●".repeat(
            (this.labPassword.name + "").length
          );
        } else {
          this.labPassword.text = "";
        }
        if (!!this.labPassword2.name) {
          this.labPassword2.text = "●".repeat(
            (this.labPassword2.name + "").length
          );
        } else {
          this.labPassword2.text = "";
        }
        if (!!this.labSuperPassword.name) {
          this.labSuperPassword.text = this.labSuperPassword.name;
        } else {
          this.labSuperPassword.text = "";
        }
      };
      t.prototype.onClickRegAccounts = function () {
        var e = this;
        i.default.platform.input("输入账户", "", {
          confirmCallback: function (t) {
            e.labAccounts.name = t;
            e.updateView();
          },
          confirmThisObj: this,
        });
      };
      t.prototype.onClickRegPassword = function () {
        var e = this;
        i.default.platform.input("输入密码", "", {
          confirmCallback: function (t) {
            e.labPassword.name = t;
            e.updateView();
          },
          confirmThisObj: this,
        });
      };
      t.prototype.onClickRegPassword2 = function () {
        var e = this;
        i.default.platform.input("确认密码", "", {
          confirmCallback: function (t) {
            e.labPassword2.name = t;
            e.updateView();
          },
          confirmThisObj: this,
        });
      };
      t.prototype.onClickRegPhone = function () {
        var e = this;
        i.default.platform.input("输入手机", "", {
          confirmCallback: function (t) {
            e.labSuperPassword.name = t;
            e.updateView();
          },
          confirmThisObj: this,
        });
      };
      t.prototype.onClickRegister = function () {
        var e = this;
        if (
          !!this.labAccounts.name == false ||
          !!this.labPassword.name == false ||
          !!this.labSuperPassword.name == false
        ) {
          i.default.eventMgr.event(1055, ["请输入完整的注册资料"]);
        } else if (this.labPassword.name != this.labPassword2.name) {
          i.default.eventMgr.event(1055, ["两次输入的密码不一致"]);
        } else {
          this.btnOk.disabled = true;
          i.default.timerMgr.delay(2e3, 1, function () {
            return (e.btnOk.disabled = false);
          });
          i.default.userData.login
            .register(
              this.labAccounts.name,
              this.labPassword.name,
              this.labSuperPassword.name
            )
            .then(function (t) {
              if (t) {
                e.close();
              }
            });
        }
      };
      return t;
    })(a.default);
    e.default = l;
  });
  t(Hf);
  var Gf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o($);
    var i = o(q);
    var a = o(R);
    var s = o(W);
    var u = o(T);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/Login/LoginResetPassword", t, t);
        t.touchThrough = false;
        t.orderIndex = u.default.LOGIN;
        t.viewCache = true;
        t.size(r.default.width, r.default.height);
        t.imgBlack.size(r.default.width, r.default.height);
        t.resetView();
        return t;
      }
      t.prototype.resetView = function () {
        this.labAccounts.text =
          this.labPassword.text =
          this.labNewPassword.text =
            "";
      };
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnOk.textLightColor = this.btnOk.textNormalColor;
        this.btnClose.on(XOF.TouchEvent.TAP, this.close, this);
        this.imgBlack.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClick, this);
        this.labAccounts.on(XOF.TouchEvent.TAP, this.onClickRegAccounts, this);
        this.labPassword.on(XOF.TouchEvent.TAP, this.onClickRegPassword, this);
        this.labNewPassword.on(XOF.TouchEvent.TAP, this.onClickRegPhone, this);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.close, this);
        this.imgBlack.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClick, this);
        this.labAccounts.off(XOF.TouchEvent.TAP, this.onClickRegAccounts, this);
        this.labPassword.off(XOF.TouchEvent.TAP, this.onClickRegPassword, this);
        this.labNewPassword.off(XOF.TouchEvent.TAP, this.onClickRegPhone, this);
      };
      t.prototype.updateView = function () {
        if (!!this.labAccounts.name) {
          this.labAccounts.text = this.labAccounts.name;
        } else {
          this.labAccounts.text = "";
        }
        if (!!this.labPassword.name) {
          this.labPassword.text = "●".repeat(
            (this.labPassword.name + "").length
          );
        } else {
          this.labPassword.text = "";
        }
        if (!!this.labNewPassword.name) {
          this.labNewPassword.text = "●".repeat(
            (this.labNewPassword.name + "").length
          );
        } else {
          this.labNewPassword.text = "";
        }
      };
      t.prototype.onClickRegAccounts = function () {
        var e = this;
        i.default.platform.input("输入账户", "", {
          confirmCallback: function (t) {
            e.labAccounts.name = t;
            e.updateView();
          },
          confirmThisObj: this,
        });
      };
      t.prototype.onClickRegPassword = function () {
        var e = this;
        i.default.platform.input("输入旧密码", "", {
          confirmCallback: function (t) {
            e.labPassword.name = t;
            e.updateView();
          },
          confirmThisObj: this,
        });
      };
      t.prototype.onClickRegPhone = function () {
        var e = this;
        i.default.platform.input("输入新密码", "", {
          confirmCallback: function (t) {
            e.labNewPassword.name = t;
            e.updateView();
          },
          confirmThisObj: this,
        });
      };
      t.prototype.onClick = function () {
        var e = this;
        if (
          !!this.labAccounts.name == false ||
          !!this.labPassword.name == false ||
          !!this.labNewPassword.name == false
        ) {
          i.default.eventMgr.event(1055, ["请输入完整"]);
        } else {
          this.btnOk.disabled = true;
          i.default.timerMgr.delay(2e3, 1, function () {
            return (e.btnOk.disabled = false);
          });
          i.default.userData.login
            .resetPassword(
              this.labAccounts.name,
              this.labPassword.name,
              this.labNewPassword.name
            )
            .then(function (t) {
              if (t) {
                e.close();
                e.resetView();
              }
            });
        }
      };
      return t;
    })(a.default);
    e.default = l;
  });
  t(Gf);
  var Vf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(W);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.$POOL_TYPE = "TipsItemView";
        r.default.initSkin("ui/M_Controler/TipItem", t, t);
        return t;
      }
      Object.defineProperty(t.prototype, "text", {
        get: function () {
          return this.labText.text;
        },
        set: function (t) {
          this.labText.text = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "fontSize", {
        get: function () {
          return this.labText.fontSize;
        },
        set: function (t) {
          this.labText.fontSize = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "textColor", {
        get: function () {
          return this.labText.textColor;
        },
        set: function (t) {
          this.labText.textColor = t;
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(Vf);
  var $f = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = o(q);
    var r = o(R);
    var i = o(W);
    var u = o(yt);
    var l = o(Q);
    var a = o(T);
    var f = o(Vf);
    var c = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.fontSize = 20;
        t.itemHeight = 40;
        t.startY = 320;
        t.lines = 4;
        t.orderIndex = a.default.TIPS2;
        t.stay = true;
        t.items = [];
        t.stays = [];
        i.default.initSkin("ui/M_Controler/Tips", t, t);
        t.touchEnabled = false;
        t.touchThrough = true;
        return t;
      }
      t.prototype.addTips = function (t) {
        this.stays.push(t);
        this.add();
      };
      t.prototype.add = function () {
        var t = this;
        if (this.stay && this.stays.length) {
          this.stay = false;
          var e = this.stays.shift();
          var n = u.default.pop("TipsItemView", f.default);
          this.items.push(n);
          this.addChild(n);
          n.alpha = 0;
          n.pos((this.width - 745) / 2, this.startY);
          n.text = e;
          l.default
            .get(n)
            .to({ alpha: 1 }, 200)
            .wait(3e3)
            .to({ alpha: 0 }, 1e3)
            .call(this.removeItem, this, [n])
            .remove();
          for (var o = 0, r = this.items.length; o < r; o++) {
            var i = this.items[o];
            if (o < r - this.lines) {
              l.default.removeTweens(i);
              l.default
                .get(i)
                .to({ alpha: 0 }, 200)
                .call(this.removeItem, this, [i])
                .remove();
            }
            var a = l.default.get(i).to({ y: i.y - this.itemHeight }, 200);
            if (o == r - 1)
              a.call(function () {
                t.stay = true;
                s.default.timerMgr.callLater(t.add, t);
              }, this);
            a.remove();
          }
        }
      };
      t.prototype.removeItem = function (t) {
        this.items.splice(this.items.indexOf(t), 1);
        u.default.push(t.removeSelf());
      };
      return t;
    })(r.default);
    e.default = c;
  });
  t($f);
  var qf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o($);
    var a = o(R);
    var s = o(x);
    var u = o(W);
    var l = o(k);
    var f = o(T);
    var c = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = f.default.TIPS;
        u.default.initSkin("ui/Home/MsgBox", t, t);
        t.size(i.default.width, i.default.height);
        t.imgBlack.size(i.default.width, i.default.height);
        return t;
      }
      t.prototype.reset = function () {
        l.default.removeAllEvents(this, "_ok_");
        l.default.removeAllEvents(this, "_cancel_");
        l.default.removeAllEvents(this, "_close_");
        this.btnClose.visible = true;
        this.btnOk.visible = true;
        this.btnCancel.visible = false;
        this.labTitle.text = r.default.tr(44);
      };
      t.prototype.setParams = function (t) {
        var e, n, o, r, i, a, s, u, l;
        this.reset();
        this.labText.text = t.text;
        if (t.title) {
          this.labText.text = t.title;
        }
        if (
          (e = t === null || t === void 0 ? void 0 : t.confirm) === null ||
          e === void 0
            ? void 0
            : e.label
        ) {
          this.btnOk.label = t.confirm.label;
        }
        if (
          (n = t === null || t === void 0 ? void 0 : t.confirm) === null ||
          n === void 0
            ? void 0
            : n.callback
        ) {
          this.on("_ok_", t.confirm.callback, t.confirm.thisObj);
        } else {
          this.on("_ok_", this.defaultOk, this);
        }
        if (
          (o = t === null || t === void 0 ? void 0 : t.confirm) === null ||
          o === void 0
            ? void 0
            : o.close
        ) {
          this.on("_ok_", this.onClickClose, this);
        }
        if (t.cancel) {
          this.btnCancel.visible = true;
        }
        if (
          (r = t === null || t === void 0 ? void 0 : t.cancel) === null ||
          r === void 0
            ? void 0
            : r.label
        ) {
          this.btnCancel.label = t.cancel.label;
        }
        if (
          (i = t === null || t === void 0 ? void 0 : t.cancel) === null ||
          i === void 0
            ? void 0
            : i.callback
        ) {
          this.on("_cancel_", t.cancel.callback, t.cancel.thisObj);
        } else {
          this.on("_cancel_", this.defaultCancel, this);
        }
        if (
          (a = t === null || t === void 0 ? void 0 : t.cancel) === null ||
          a === void 0
            ? void 0
            : a.close
        ) {
          this.on("_cancel_", this.onClickClose, this);
        }
        this.btnClose.visible = !((u =
          (s = t === null || t === void 0 ? void 0 : t.close) === null ||
          s === void 0
            ? void 0
            : s.hide) !== null && u !== void 0
          ? u
          : false);
        if (
          (l = t === null || t === void 0 ? void 0 : t.close) === null ||
          l === void 0
            ? void 0
            : l.callback
        ) {
          this.on("_close_", t.close.callback, t.close.thisObj);
        } else {
          this.on("_close_", this.defaultClose, this);
        }
        this.updateButton();
      };
      t.prototype.updateButton = function () {
        var t = 50;
        var e = [this.btnOk];
        if (this.btnCancel.visible) {
          e.push(this.btnCancel);
        }
        var n = this.btnOk.width + t;
        var o = e.length * n - t;
        var r = (this.box.width - o) / 2;
        for (var i = 0; i < e.length; i++) {
          e[i].x = r;
          r += n;
        }
      };
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.onClickCancel, this);
        this.btnClose.on(XOF.TouchEvent.TAP, this.onClickClose, this);
        if (typeof t == "string") {
          this.setParams({ text: t });
        } else {
          this.setParams(t);
        }
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.onClickCancel, this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.onClickClose, this);
        this.reset();
      };
      t.prototype.onClickOk = function () {
        this.event("_ok_", [this]);
      };
      t.prototype.onClickCancel = function () {
        this.event("_cancel_", [this]);
      };
      t.prototype.onClickClose = function () {
        this.event("_close_", [this]);
      };
      t.prototype.defaultOk = function () {
        this.event(s.default.CONFIRM);
        this.close();
      };
      t.prototype.defaultCancel = function () {
        this.close();
      };
      t.prototype.defaultClose = function () {
        this.close();
      };
      return t;
    })(a.default);
    e.default = c;
  });
  t(qf);
  var Kf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(R);
    var s = o(x);
    var u = o(W);
    var l = o(k);
    var f = o(T);
    var c = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = f.default.TIPS;
        u.default.initSkin("ui/Home/MsgBox", t, t);
        return t;
      }
      t.prototype.reset = function () {
        l.default.removeAllEvents(this, "_ok_");
        l.default.removeAllEvents(this, "_cancel_");
        l.default.removeAllEvents(this, "_close_");
        this.btnClose.visible = true;
        this.btnOk.visible = true;
        this.btnCancel.visible = false;
        this.labTitle.text = r.default.tr(44);
      };
      t.prototype.setParams = function (t) {
        var e, n, o, r, i, a, s, u, l;
        this.reset();
        this.labText.text = t.text;
        if (t.title) {
          this.labText.text = t.title;
        }
        if (
          (e = t === null || t === void 0 ? void 0 : t.confirm) === null ||
          e === void 0
            ? void 0
            : e.label
        ) {
          this.btnOk.label = t.confirm.label;
        }
        if (
          (n = t === null || t === void 0 ? void 0 : t.confirm) === null ||
          n === void 0
            ? void 0
            : n.callback
        ) {
          this.on("_ok_", t.confirm.callback, t.confirm.thisObj);
        } else {
          this.on("_ok_", this.defaultOk, this);
        }
        if (
          (o = t === null || t === void 0 ? void 0 : t.confirm) === null ||
          o === void 0
            ? void 0
            : o.close
        ) {
          this.on("_ok_", this.onClickClose, this);
        }
        if (t.cancel) {
          this.btnCancel.visible = true;
        }
        if (
          (r = t === null || t === void 0 ? void 0 : t.cancel) === null ||
          r === void 0
            ? void 0
            : r.label
        ) {
          this.btnCancel.label = t.cancel.label;
        }
        if (
          (i = t === null || t === void 0 ? void 0 : t.cancel) === null ||
          i === void 0
            ? void 0
            : i.callback
        ) {
          this.on("_cancel_", t.cancel.callback, t.cancel.thisObj);
        } else {
          this.on("_cancel_", this.defaultCancel, this);
        }
        if (
          (a = t === null || t === void 0 ? void 0 : t.cancel) === null ||
          a === void 0
            ? void 0
            : a.close
        ) {
          this.on("_cancel_", this.onClickClose, this);
        }
        this.btnClose.visible = !((u =
          (s = t === null || t === void 0 ? void 0 : t.close) === null ||
          s === void 0
            ? void 0
            : s.hide) !== null && u !== void 0
          ? u
          : false);
        if (
          (l = t === null || t === void 0 ? void 0 : t.close) === null ||
          l === void 0
            ? void 0
            : l.callback
        ) {
          this.on("_close_", t.close.callback, t.close.thisObj);
        } else {
          this.on("_close_", this.defaultClose, this);
        }
        this.updateButton();
      };
      t.prototype.updateButton = function () {
        var t = 50;
        var e = [this.btnOk];
        if (this.btnCancel.visible) {
          e.push(this.btnCancel);
        }
        var n = this.btnOk.width + t;
        var o = e.length * n - t;
        var r = (this.box.width - o) / 2;
        for (var i = 0; i < e.length; i++) {
          e[i].x = r;
          r += n;
        }
      };
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.onClickCancel, this);
        this.btnClose.on(XOF.TouchEvent.TAP, this.onClickClose, this);
        this.setParams({
          text: "是否退出游戏",
          confirm: {
            callback: function () {
              i.default.platform.quit();
            },
          },
          cancel: {},
          close: { hide: true },
        });
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.onClickCancel, this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.onClickClose, this);
        this.reset();
      };
      t.prototype.onClickOk = function () {
        this.event("_ok_", [this]);
      };
      t.prototype.onClickCancel = function () {
        this.event("_cancel_", [this]);
      };
      t.prototype.onClickClose = function () {
        this.event("_close_", [this]);
      };
      t.prototype.defaultOk = function () {
        this.event(s.default.CONFIRM);
        this.close();
      };
      t.prototype.defaultCancel = function () {
        this.close();
      };
      t.prototype.defaultClose = function () {
        this.close();
      };
      return t;
    })(a.default);
    e.default = c;
  });
  t(Kf);
  var Yf = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n($);
    var i = n(q);
    var a = n(R);
    var s = n(W);
    var u = n(Q);
    var l = n(T);
    var f = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        s.default.initSkin("ui/Loading/NetLoading", t, t);
        t.orderIndex = l.default.FINGER;
        t.size(r.default.width, r.default.height);
        t.imgBlack.size(r.default.width, r.default.height);
        return t;
      }
      t.prototype.onOpen = function (t) {
        var e = this;
        n.prototype.onOpen.call(this);
        this.imgBlack.alpha = 0;
        u.default
          .get(this.imgBlack)
          .to({ alpha: 0.1 }, 400)
          .call(function () {
            u.default
              .get(e.imgBlack, { loop: true })
              .to({ alpha: 0.4 }, 2e3)
              .to({ alpha: 0.1 }, 2e3);
          })
          .remove();
        u.default
          .get(this.imgLight, { loop: true })
          .set({ rotate: 0 })
          .to({ rotate: 360 }, 1e3);
        if (t > 0) i.default.timerMgr.delay(t, 1, this.close, this);
      };
      t.prototype.onClose = function () {
        n.prototype.onClose.call(this);
        u.default.removeTweens(this.imgBlack);
        u.default.removeTweens(this.imgLight);
      };
      return t;
    })(a.default);
    e.default = f;
  });
  t(Yf);
  var Wf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var p = o(dt);
    var i = o(q);
    var a = o(R);
    var s = o(K);
    var u = o(I);
    var l = o(W);
    var d = o(at);
    var h = o(st);
    var v = o(je);
    var f = o(T);
    var y = o(Se);
    var c = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        l.default.initSkin("ui/Login/LoginCharacterSelect", t, t);
        t.touchThrough = false;
        t.orderIndex = f.default.LOGIN;
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function (t) {
        o.prototype.onOpen.call(this);
        this.roleList = t;
        this.loadRoleRes();
        i.default.eventMgr.on(1073, this.updateList, this);
        this.btnStart.on(XOF.TouchEvent.TAP, this.onClickStart, this);
        this.btnCreate.on(XOF.TouchEvent.TAP, this.onClickCreate, this);
        this.btnDelete.on(XOF.TouchEvent.TAP, this.onClickDelete, this);
        for (var e = 0; e < this.gRoles.numChild; e++) {
          var n = this.gRoles.getChildAt(e);
          n.itemIndex = e;
          n.on(XOF.TouchEvent.TAP, this.onClickSelected, this, [e]);
        }
        this.onClickSelected(0);
        i.default.sound.playBGM("M_CHARACTER_SELECT");
      };
      t.prototype.onClose = function () {
        i.default.eventMgr.off(1073, this.updateList, this);
        i.default.eventMgr.off(
          s.default.CHARACTER_CREATE_COMPLETE,
          this.onCreated,
          this
        );
        this.btnStart.off(XOF.TouchEvent.TAP, this.onClickStart, this);
        this.btnCreate.off(XOF.TouchEvent.TAP, this.onClickCreate, this);
        this.btnDelete.on(XOF.TouchEvent.TAP, this.onClickDelete, this);
        for (var t = 0; t < this.gRoles.numChild; t++) {
          var e = this.gRoles.getChildAt(t);
          e.data = undefined;
          e.off(XOF.TouchEvent.TAP, this.onClickSelected, this);
        }
        i.default.sound.stopBgm("M_CHARACTER_SELECT");
      };
      t.prototype.updateList = function (t) {
        this.roleList = t;
        if (this.selectIndex >= this.roleList.length) {
          this.selectIndex = this.roleList.length - 1;
        }
        this.updateView();
        this.loadRoleRes();
      };
      t.prototype.loadRoleRes = function () {
        var t, e;
        var n = y.default.getCharacterSelectRes();
        var o = [];
        for (var r in this.roleList) {
          var i = this.roleList[r];
          var a = [];
          var s = i.job;
          var u = p.default.conf.character[s];
          if (u.bodyEquipmentId) a.push(u.bodyEquipmentId);
          if (u.weaponEquipmentId) a.push(u.weaponEquipmentId);
          if (u.skinEquipmentId) a.push.apply(a, u.skinEquipmentId);
          if (i.wears) {
            var l = i.wears[d.default.WEAPON];
            if (l === null || l === void 0 ? void 0 : l.itemID)
              a.push(h.default.getItemData(l.itemID).equ);
          }
          if (i.skins) {
            var f = i.skins;
            for (var c in f) {
              var l = h.default.getItemData(
                (t = f === null || f === void 0 ? void 0 : f[c]) === null ||
                  t === void 0
                  ? void 0
                  : t.itemID
              );
              if (l === null || l === void 0 ? void 0 : l.equ) {
                a.push(l.equ);
              }
              if (
                (e = l === null || l === void 0 ? void 0 : l.equs) === null ||
                e === void 0
                  ? void 0
                  : e.length
              ) {
                a.push.apply(a, l.equs);
              }
            }
          }
          o.push.apply(o, v.default.sortEqusByType(a));
        }
        for (var r in o) {
          n.push.apply(
            n,
            y.default.getEquipmentImages(o[r], [ht.RoleAction.REST])
          );
        }
        y.default.checkLoaded(n, true);
      };
      t.prototype.setRole = function (t, e) {
        if (t) {
          t.data = e;
          t.selectd_ = t.itemIndex == this.selectIndex;
        }
      };
      t.prototype.updateView = function () {
        var t = this.roleList;
        for (var e = 0; e < this.gRoles.numChild; e++) {
          var n = this.gRoles.getChildAt(e);
          this.setRole(n, t[e]);
        }
      };
      t.prototype.onClickSelected = function (t) {
        if (this.roleList[t]) {
          this.selectIndex = t;
          if (this.selectIndex != undefined) {
            i.default.sound.play(
              "CLICK_BUTTON4",
              { completeDestroy: true, overload: true },
              this.hashCode
            );
            this.updateView();
          }
        }
      };
      t.prototype.onClickStart = function () {
        var t = this.roleList[this.selectIndex];
        if (t) {
          i.default.eventMgr.event(s.default.CHARACTER_SELECT_COMPLETE, [
            t.roleKey,
          ]);
        }
      };
      t.prototype.onClickDelete = function () {
        var t = this.roleList[this.selectIndex];
        if (t) {
          i.default.comm.msgBox({
            text: r.default.tr(246, t.name),
            confirm: {
              callback: function () {
                i.default.comm.netloading(1e4);
                i.default.userData.login
                  .roleDelect(t.roleKey)
                  .then(function () {
                    i.default.userData.login
                      .rolesLoad(i.default.userData.login.serverId)
                      .then(function () {
                        i.default.comm.netloading(0);
                      });
                  });
              },
              close: true,
            },
          });
        }
      };
      t.prototype.onClickCreate = function () {
        i.default.eventMgr.on(
          s.default.CHARACTER_CREATE_COMPLETE,
          this.onCreated,
          this
        );
        i.default.viewMgr.open(u.default.CharacterCreate, [true]);
      };
      t.prototype.onCreated = function (t, e, n) {
        var o = this;
        i.default.comm.netloading(1e4);
        i.default.userData.login
          .roleCreate(t, i.default.userData.login.serverId, e)
          .then(function (t) {
            i.default.comm.netloading(0);
            if (t == 1) {
              i.default.userData.login.registerRole = true;
              i.default.eventMgr.event(1048);
              i.default.timerMgr.delay(
                1e3,
                1,
                function () {
                  i.default.userData.login.rolesLoad(
                    i.default.userData.login.serverId
                  );
                },
                o
              );
            } else if (t > 0) {
              i.default.comm.msr(t);
            } else {
              i.default.comm.msgBox({
                text: r.default.tr(154),
                confirm: {
                  callback: function () {
                    i.default.timerMgr.delay(
                      50,
                      1,
                      function () {
                        i.default.viewMgr.close(u.default.CharacterCreate);
                      },
                      o
                    );
                  },
                  close: true,
                },
              });
            }
          });
      };
      return t;
    })(a.default);
    e.default = c;
  });
  t(Wf);
  var zf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(D);
    var s = o(q);
    var a = o(K);
    var u = o(I);
    var i = o(If);
    var l = o(Rf);
    var f = o(Se);
    var c = o(Lf);
    var p = o(Ff);
    var d = o(Nf);
    var h = o(Xf);
    var v = o(Uf);
    var y = o(Hf);
    var _ = o(Gf);
    var m = o($f);
    var g = o(qf);
    var b = o(V);
    var O = o(Kf);
    var w = o(Yf);
    var A = o(k);
    var E = o($);
    var T = o(Wf);
    var C = o(dt);
    var P = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.viewMgr.register(u.default.Login, l.default);
        s.default.viewMgr.register(u.default.LoginNotice, v.default);
        s.default.viewMgr.register(u.default.LoginRegister, y.default);
        s.default.viewMgr.register(u.default.Loading, i.default);
        s.default.viewMgr.register(u.default.Loading2, c.default);
        s.default.viewMgr.register(u.default.Loading3, p.default);
        s.default.viewMgr.register(u.default.LoadingSimple, h.default);
        s.default.viewMgr.register(u.default.NetLoading, w.default);
        s.default.viewMgr.register(u.default.CharacterCreate, d.default);
        s.default.viewMgr.register(u.default.CharacterSelect, T.default);
        s.default.viewMgr.register(u.default.LoginResetPassword, _.default);
        s.default.viewMgr.register(u.default.Tips, m.default);
        s.default.viewMgr.register(u.default.MsgBox, g.default);
        s.default.viewMgr.register(u.default.GameQuit, O.default);
        s.default.eventMgr.on(1054, t.msgBox, t);
        s.default.eventMgr.on(a.default.STEP1_LOGIN_ACCOUNTS, t.onLogin, t);
        s.default.eventMgr.on(a.default.GAME_OFFLINE, t.onGameOffline, t);
        s.default.eventMgr.on(
          a.default.LOGIN_ANOTHER_OFFLINE,
          t.onLoginAnotherOffline,
          t
        );
        s.default.eventMgr.on(1055, t.tips, t);
        s.default.eventMgr.on(
          a.default.STEP2_LOGIN_SERVER_ROLE,
          t.onServerLoad,
          t
        );
        s.default.eventMgr.on(a.default.BACKHOME, t.onBackHome, t);
        s.default.eventMgr.on(a.default.SOCKET_DISCONNECT, t.onDisConnect, t);
        return t;
      }
      t.prototype.tips = function (e) {
        s.default.timerMgr.callLater(function () {
          var t = s.default.viewMgr.getOpenView(u.default.Tips);
          if (t) {
            t.addTips(e);
          } else {
            XOF.log("Tips不存在:" + e);
          }
        });
      };
      t.prototype.msgBox = function (t) {
        s.default.viewMgr.open(u.default.MsgBox, [t]);
      };
      t.prototype.onLogin = function () {
        s.default.viewMgr.open(u.default.Login);
        s.default.viewMgr.open(u.default.Tips);
      };
      t.prototype.onLoginComplete = function () {
        var t = [];
        if (s.default.userData.setting.preload) {
          t = f.default.loginLoad();
        }
        s.default.viewMgr.open(u.default.Loading, [t, function () {}]);
      };
      t.prototype.onGameOffline = function (t) {
        s.default.eventMgr.off(
          a.default.SOCKET_DISCONNECT,
          this.onDisConnect,
          this
        );
        s.default.proxy.close(false);
        s.default.eventMgr.event(1054, [
          {
            text: b.default.sr(t),
            confirm: {
              callback: function () {
                s.default.platform.restart();
              },
            },
            close: { hide: true },
          },
        ]);
      };
      t.prototype.onBackHome = function () {
        s.default.viewMgr.open(u.default.GameQuit);
      };
      t.prototype.onDisConnect = function () {
        s.default.viewMgr.close(u.default.MsgBox);
        s.default.eventMgr.event(1054, [
          {
            text: b.default.tr(156),
            confirm: {
              callback: function () {
                s.default.platform.restart();
              },
            },
            close: { hide: true },
          },
        ]);
      };
      t.prototype.onLoginAnotherOffline = function () {
        s.default.viewMgr.close(u.default.MsgBox);
        s.default.eventMgr.event(1054, [
          {
            text: b.default.tr(155),
            confirm: {
              callback: function () {
                s.default.viewMgr.open(u.default.NetLoading, [12e3]);
                s.default.userData.login.offlineOhter().then(function (t) {
                  if (!t) {
                    s.default.viewMgr.close(u.default.NetLoading);
                  }
                });
              },
              close: true,
            },
            cancel: {},
            close: { hide: true },
          },
        ]);
      };
      t.prototype.onLoginEnterCity = function () {
        var t, e;
        var n = C.default.conf.role.base.city.value;
        var o =
            (e =
              (t = C.default.conf.map.map[n]) === null || t === void 0
                ? void 0
                : t.start) !== null && e !== void 0
              ? e
              : [150, 250],
          r = o[0],
          i = o[1],
          a = o[2];
        return s.default.userData.map.enterMap(n, r, i, a);
      };
      t.prototype.onServerLoad = function () {
        var n = this;
        var o;
        function r(t, e) {
          s.default.comm.msgBox({
            text: t,
            confirm: { callback: e, close: true },
            close: { hide: true },
          });
        }
        function e(o) {
          s.default.viewMgr.open(u.default.CharacterCreate);
          s.default.eventMgr.on(
            a.default.CHARACTER_CREATE_COMPLETE,
            function (t, e, n) {
              return o(t, e, n);
            }
          );
        }
        function i(n) {
          return new Promise(function (e, t) {
            s.default.viewMgr.open(u.default.CharacterSelect, [n]);
            s.default.eventMgr.on(
              a.default.CHARACTER_SELECT_COMPLETE,
              function (t) {
                return e(t);
              }
            );
          });
        }
        s.default.userData.login
          .serversLoad()
          .then(function (t) {
            o = t[0].id;
            return s.default.userData.login.rolesLoad(o);
          })
          .then(function (t) {
            s.default.comm.netloading(0);
            return i(t);
          })
          .then(function (t) {
            s.default.comm.netloading(1e4);
            return s.default.userData.login.roleSelect(t);
          })
          .then(function (e) {
            return new Promise(function (t) {
              s.default.eventMgr.on(a.default.GAME_LOGIN, function () {
                return t(undefined);
              });
              s.default.eventMgr.event(a.default.STEP3_ROLE_SELECT, [e]);
            });
          })
          .then(function () {
            return new Promise(function (t) {
              s.default.eventMgr.on(a.default.GAME_START, function () {
                return t(undefined);
              });
              s.default.eventMgr.event(a.default.STEP6_START_BEFORE);
            });
          })
          .then(function () {
            return n.onLoginEnterCity();
          })
          .then(function () {
            n.onLoginComplete();
            s.default.viewMgr.close(u.default.Login);
            s.default.viewMgr.close(u.default.NetLoading);
            s.default.viewMgr.close(u.default.CharacterSelect);
            s.default.viewMgr.close(u.default.CharacterCreate);
          })
          .catch(function (t) {
            if (t == Df.Login_Error.NOSERVER) {
              r(b.default.tr(152), function () {
                s.default.timerMgr.delay(50, 1, n.onServerLoad, n);
              });
            } else if (t == Df.Login_Error.NOROLES) {
              r(b.default.tr(153), function () {
                s.default.timerMgr.delay(50, 1, n.onServerLoad, n);
              });
            } else if (t == Df.Login_Error.NOROLE) {
              s.default.viewMgr.close(u.default.NetLoading);
              s.default.userData.login.registerRole = false;
              e(function (t, e) {
                s.default.viewMgr.open(u.default.NetLoading);
                s.default.userData.login.roleCreate(t, o, e).then(function (t) {
                  s.default.viewMgr.close(u.default.NetLoading);
                  if (t == 1) {
                    s.default.userData.login.registerRole = true;
                    s.default.eventMgr.event(1048);
                    s.default.timerMgr.delay(
                      1e3,
                      1,
                      function () {
                        n.onServerLoad();
                      },
                      n
                    );
                  } else if (t > 0) {
                    s.default.comm.msr(t);
                  } else {
                    r(b.default.tr(154), function () {
                      s.default.timerMgr.delay(
                        50,
                        1,
                        function () {
                          s.default.viewMgr.close(u.default.CharacterCreate);
                          n.onServerLoad();
                        },
                        n
                      );
                    });
                  }
                });
              });
            }
          });
      };
      t.prototype.resetGame = function () {
        s.default.timerMgr.cleanAll();
        s.default.viewMgr.closeAll();
      };
      t.prototype.onNoticeLoaded = function () {
        var t = A.default.compareVersion(
          E.default.gameVersion,
          s.default.userData.login.notice.version
        );
        if (t <= 0) {
          if (t < 0) {
            s.default.comm.msgBox({
              text: b.default.tr(195),
              confirm: {
                callback: function () {
                  return s.default.platform.restart();
                },
                close: true,
              },
              close: { hide: true },
            });
          } else {
            s.default.eventMgr.event(1066);
          }
        } else {
          s.default.comm.mtr(194);
        }
      };
      return t;
    })(r.default);
    e.default = P;
  });
  t(zf);
  var Qf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var z = i(it);
    var s = a(R);
    var l = a(wl);
    var Q = a(V);
    var J = a(st);
    var Z = a(xl);
    var tt = a(k);
    var et = a(q);
    var u = a(T);
    var nt = a(at);
    var _ = a(I);
    var f = a($);
    var m = a(x);
    var j = a(we);
    var c = a(w);
    var p = a(W);
    var S = a(dt);
    var ot = a(je);
    var rt = a(yl);
    var d = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        t.orderIndex = u.default.TIPS;
        t.viewCache = true;
        p.default.initSkin("ui/RoleMenu/ItemDetails", t, t);
        t.touchThrough = false;
        t.touchEnabled = true;
        t.lineHeight = 24;
        t.lineSpacing = 4;
        t.scrollMinHeight = 200;
        t.scrollMaxHeight = 440;
        t.content = new XOF.Sprite();
        t.content.size(t.sc.width, 100);
        t.content.name = "content";
        t.sc.addChild(t.content);
        t.lab = new j.default();
        t.lab.lineSpacing = t.lineSpacing;
        t.lab.width = t.content.width;
        t.lab.fontSize = t.lineHeight;
        return t;
      }
      t.prototype.onOpen = function (t, e, n) {
        i.prototype.onOpen.call(this);
        this.setData(t, e, n);
        this.isBag = false;
        this.sc.scrollV = 0;
        this.imgBlack.on(XOF.TouchEvent.TAP, this.close, this);
        et.default.eventMgr.on(
          m.default.CLOSE_ITEM_DETAILS,
          this.onEventClose,
          this
        );
        et.default.eventMgr.on(m.default.ITEM_SLOT_UPDATE, this.setData, this);
        this.btnWear.on(XOF.TouchEvent.TAP, this.onClickWear, this);
        this.btnSell.on(XOF.TouchEvent.TAP, this.onClickSell, this);
        this.btnDestroy.on(XOF.TouchEvent.TAP, this.onClickDestroy, this);
        this.btnStar.on(XOF.TouchEvent.TAP, this.onClickStart, this);
        this.btnRepair.on(XOF.TouchEvent.TAP, this.onClickRepair, this);
      };
      t.prototype.onClose = function () {
        i.prototype.onClose.call(this);
        delete this.itemData;
        delete this.void;
        delete this.extra;
        delete this.slot;
        delete this.data;
        this.content.removeChildren();
        this.imgBlack.off(XOF.TouchEvent.TAP, this.close, this);
        et.default.eventMgr.off(
          m.default.CLOSE_ITEM_DETAILS,
          this.onEventClose,
          this
        );
        et.default.eventMgr.off(m.default.ITEM_SLOT_UPDATE, this.setData, this);
        this.btnWear.off(XOF.TouchEvent.TAP, this.onClickWear, this);
        this.btnSell.off(XOF.TouchEvent.TAP, this.onClickSell, this);
        this.btnDestroy.off(XOF.TouchEvent.TAP, this.onClickDestroy, this);
        this.btnStar.off(XOF.TouchEvent.TAP, this.onClickStart, this);
        this.btnRepair.off(XOF.TouchEvent.TAP, this.onClickRepair, this);
        et.default.viewMgr.close(_.default.EquipSuitDetails);
      };
      t.prototype.setData = function (t, e, n) {
        if (this.slot ? this.slot == n : true) {
          this.reset();
          et.default.viewMgr.close(_.default.EquipSuitDetails);
          if (t) {
            this.isBag = e;
            this.data = n;
            this.itemData = t;
            this.updateView();
          } else {
            et.default.viewMgr.closeView(this);
          }
        }
      };
      t.prototype.pos = function (t, e) {
        i.prototype.pos.call(this, t, e);
        var n = et.default.viewMgr.getOpenView(_.default.EquipSuitDetails);
        if (n) {
          var o = 0,
            r = this.y;
          if (this.x > et.default.viewMgr.layer.mouseX) {
            o = this.x + this.width + 1;
          } else {
            o = this.x - this.width - 1;
          }
          if (n.height + r > f.default.height) r = f.default.height - n.height;
          if (r < 0) r = 0;
          n.pos(o, r);
        }
        return this;
      };
      t.prototype.reset = function () {
        this.content.removeChildren();
        this.content.addChild(this.lab);
        delete this.extra;
        delete this.slot;
        delete this.data;
        delete this.itemData;
        this.lab.text = this.labItemName.text = this.labItemSuit.text = "";
        this.void = false;
      };
      t.prototype.onEventClose = function (t) {
        if (this.slot == t) {
          this.close();
        }
      };
      t.prototype.updateItem = function () {
        var t, e, n, o, r, i, a, s, u;
        var l = this.itemData;
        this.icon.data = { itemData: this.itemData, extra: this.data };
        var f = l.type == z.default.EQUIP;
        var c = l.name;
        var p =
          (t = l === null || l === void 0 ? void 0 : l.level) !== null &&
          t !== void 0
            ? t
            : 1;
        var d = this.data;
        if (f && d) {
          c = "";
          if (d.intensifyLevel > 0) {
            c += "<2>+" + d.intensifyLevel + "</2>";
          }
          if (d.growthLevel > 0) {
            c += "<4>+" + d.growthLevel + "</4>";
          }
          c +=
            (c.length ? " " : "") +
            ("<" + l.quality + ">" + l.name + "</" + l.quality + ">");
        } else {
          c = "<" + l.quality + ">" + l.name + "</" + l.quality + ">";
        }
        this.labItemName.text = c;
        if (l.price)
          this.addText(
            Q.default.tr(9, tt.default.formatMoney(Math.floor(l.price))),
            undefined,
            "right",
            true
          );
        if (f) {
          var h = [];
          switch (l.class) {
            case nt.default.SHOULDER:
              h.push(
                Q.default.tr([, 30, 31, 29, 28, 32][l.group]),
                Q.default.tr(63)
              );
              break;
            case nt.default.COAT:
              h.push(
                Q.default.tr([, 30, 31, 29, 28, 32][l.group]),
                Q.default.tr(64)
              );
              break;
            case nt.default.PANTS:
              h.push(
                Q.default.tr([, 30, 31, 29, 28, 32][l.group]),
                Q.default.tr(65)
              );
              break;
            case nt.default.BELT:
              h.push(
                Q.default.tr([, 30, 31, 29, 28, 32][l.group]),
                Q.default.tr(67)
              );
              break;
            case nt.default.SHOES:
              h.push(
                Q.default.tr([, 30, 31, 29, 28, 32][l.group]),
                Q.default.tr(66)
              );
              break;
            case nt.default.WEAPON:
              h.push(
                Q.default.tr(79),
                Q.default.tr([, 23, 25, 24, 27, 26][l.group])
              );
              break;
            case nt.default.RING:
              h.push(Q.default.tr(76), Q.default.tr(71));
              break;
            case nt.default.AMULET:
              h.push(Q.default.tr(76), Q.default.tr(69));
              break;
            case nt.default.WRIST:
              h.push(Q.default.tr(76), Q.default.tr(70));
              break;
            case nt.default.TITLE:
              h.push(Q.default.tr(72));
              break;
          }
          this.addText(h.join("-"));
        } else {
          this.addText(J.default.getTypeText(l.type, l.class));
        }
        if (l.cd)
          this.addText(Q.default.tr(7, l.cd / 1e3), undefined, "right", true);
        var v = 1;
        if (f) {
          v =
            (e = d === null || d === void 0 ? void 0 : d.rank) !== null &&
            e !== void 0
              ? e
              : 1;
          if (v >= 0) {
            if (l.class != nt.default.TITLE) {
              var y = 229;
              var _ = "6";
              if (v < 0.2) {
                y = 225;
                _ = "0";
              } else if (v < 0.4) {
                y = 226;
                _ = "0";
              } else if (v < 0.6) {
                y = 227;
                _ = "2";
              } else if (v < 0.8) {
                y = 228;
              }
              this.addText(
                Q.default.tr(
                  224,
                  "<" +
                    _ +
                    ">" +
                    Q.default.tr(y) +
                    "(" +
                    Math.floor(v * 100) +
                    "%)</" +
                    _ +
                    ">"
                )
              );
            }
          }
        }
        var m = p;
        if (f && l.grow > 0) {
          m = Math.min(
            Math.max(Math.floor(et.default.userData.hero.lv / 5) * 5, p),
            l.grow
          );
          this.addText(
            Q.default.tr(211, m, l.grow),
            et.default.userData.hero.lv < p ? "40" : "1"
          );
        } else if (l.type == z.default.EMBLEM);
        else {
          this.addText(
            Q.default.tr(8, p),
            et.default.userData.hero.lv < p ? "40" : "1"
          );
        }
        if (f) {
          var g =
            (n = d === null || d === void 0 ? void 0 : d.durability) !== null &&
            n !== void 0
              ? n
              : 100;
          if (l.durability) {
            var b = Math.min(g, l.durability);
            this.addText(
              Q.default.tr(82, b, l.durability),
              b == 0 ? "40" : "1"
            );
          }
        }
        if (l.reuse) {
          var O =
            l.reuse -
            ((r =
              (o = this === null || this === void 0 ? void 0 : this.extra) ===
                null || o === void 0
                ? void 0
                : o.use) !== null && r !== void 0
              ? r
              : 0);
          this.addText(Q.default.tr(21, O, l.reuse), O <= 0 ? "40" : "1");
        }
        if (f) {
          if (
            (d === null || d === void 0 ? void 0 : d.leftBadge) ||
            (d === null || d === void 0 ? void 0 : d.rightBadge)
          ) {
            this.addVoid();
            if (d === null || d === void 0 ? void 0 : d.leftBadge) {
              var w = J.default.getItemData(d.leftBadge);
              var _ = rt.default.getEquipClassEmblmeSlotColor(l.class);
              var A = rt.default.getEquipClassEmblmeSlotName(l.class);
              this.addText("<" + _ + ">[" + A + "]</" + _ + ">");
              var E = tt.default.copy(w.attr);
              var T = tt.default.kvmap2arr(E);
              var C = Z.default.attr2str(T, undefined, {
                template: "{0} {2}{1}",
                percentTemplate: "{0} {2}{1}%",
                color: true,
                sort: true,
              });
              this.addText("  " + C);
            }
            if (d === null || d === void 0 ? void 0 : d.rightBadge) {
              var P = J.default.getItemData(d.rightBadge);
              var _ = rt.default.getEquipClassEmblmeSlotColor(l.class);
              var A = rt.default.getEquipClassEmblmeSlotName(l.class);
              this.addText("<" + _ + ">[" + A + "]</" + _ + ">");
              var E = tt.default.copy(P.attr);
              var T = tt.default.kvmap2arr(E);
              var C = Z.default.attr2str(T, undefined, {
                template: "{0} {2}{1}",
                percentTemplate: "{0} {2}{1}%",
                color: true,
                sort: true,
              });
              this.addText("  " + C);
            }
          }
          if (l.attr || l.grow > 0) {
            this.addVoid();
            var j = l.class == nt.default.TITLE;
            var S = ot.default.getGrowWeaponAttribute(
              l.id,
              et.default.userData.hero.lv
            );
            var E = tt.default.copy(tt.default.kvMarge(l.attr, S));
            E = ot.default.getRankAttribute(E, j ? 1 : v);
            var T = tt.default.kvmap2arr(E);
            var C = Z.default.attr2str(T, undefined, {
              template: "{0} {2}{1}",
              percentTemplate: "{0} {2}{1}%",
              color: true,
              sort: true,
            });
            this.addText(C);
          }
          if (d === null || d === void 0 ? void 0 : d.intensifyLevel) {
            var M = " 强化 +" + d.intensifyLevel + ": ";
            var T = tt.default.kvmap2arr(
              ot.default.getIntensifyLevelAttribute(
                d.intensifyLevel,
                l.class,
                m
              )
            );
            var C = Z.default.attr2str(T, undefined, {
              template: "<2>" + M + "{0} {2}{1}</2>",
              percentTemplate: "<2>" + M + "{0} {2}{1}%</2>",
              color: true,
              sort: true,
            });
            this.addText(C);
          }
          if (d === null || d === void 0 ? void 0 : d.growthLevel) {
            var M = " 增幅 +" + d.growthLevel + ": ";
            var T = tt.default.kvmap2arr(
              ot.default.getGrowthLevelAttribute(d.growthLevel, l.class, m)
            );
            var C = Z.default.attr2str(T, undefined, {
              template: "<4>" + M + "{0} {2}{1}</4>",
              percentTemplate: "<4>" + M + "{0} {2}{1}%</4>",
              color: true,
              sort: true,
            });
            this.addText(C);
          }
        } else if (l.type == z.default.SKIN) {
          if (l.attr) {
            this.addVoid();
            var T = tt.default.kvmap2arr(l.attr);
            var C = Z.default.attr2str(T, undefined, {
              template: "{0} {2}{1}",
              percentTemplate: "{0} {2}{1}%",
              color: true,
              sort: true,
            });
            this.addText(C);
          }
        } else if (l.type == z.default.EMBLEM) {
          if (l.attr) {
            this.addVoid();
            this.addText("<2>『" + Q.default.tr(293) + "』</2>");
            var E = tt.default.copy(l.attr);
            var T = tt.default.kvmap2arr(E);
            var C = Z.default.attr2str(T, undefined, {
              template: "{0} {2}{1}",
              percentTemplate: "{0} {2}{1}%",
              color: true,
              sort: true,
            });
            this.addText(C);
          }
        } else if (l.type == z.default.CARD) {
          if (l.attr) {
            this.addVoid();
            this.addText("<2>『" + Q.default.tr(314) + "』</2>");
            var E = tt.default.copy(l.attr);
            var T = tt.default.kvmap2arr(E);
            var C = Z.default.attr2str(T, undefined, {
              template: "{0} {2}{1}",
              percentTemplate: "{0} {2}{1}%",
              color: true,
              sort: true,
            });
            this.addText(C);
          }
        }
        if (l.type == z.default.ITEM) {
          if (l.class == z.ItemClass.PACKAGE_SELECT) {
            if (l.package) {
              this.addVoid();
              this.addText("<2>『自选礼包物品列表』</2>");
              var k = Object.keys(l.package).sort(function (t, e) {
                return parseInt(t) - parseInt(e);
              });
              for (var x = 0, D = k; x < D.length; x++) {
                var I = D[x];
                var R = J.default.getItemData(I);
                if (R) {
                  this.addText("<2>[" + R.name + "]" + l.package[I] + "个</2>");
                }
              }
            }
          } else if (l.class == z.ItemClass.PACKAGE) {
            if (l.package) {
              this.addVoid();
              this.addText("<2>『礼包内物品列表』</2>");
              var k = Object.keys(l.package).sort(function (t, e) {
                return parseInt(t) - parseInt(e);
              });
              for (var L = 0, F = k; L < F.length; L++) {
                var I = F[L];
                var R = J.default.getItemData(I);
                if (R) {
                  this.addText("<2>[" + R.name + "]" + l.package[I] + "个</2>");
                }
              }
            }
          } else if (l.class == z.ItemClass.BOX) {
            if (l.package) {
              this.addVoid();
              this.addText("<2>『本期特殊道具列表』</2>");
              var k = Object.keys(l.package).sort(function (t, e) {
                return parseInt(t) - parseInt(e);
              });
              for (var B = 0, N = k; B < N.length; B++) {
                var I = N[B];
                var R = J.default.getItemData(I);
                if (R) {
                  this.addText(
                    "<2>[<" +
                      R.quality +
                      ">" +
                      R.name +
                      "</" +
                      R.quality +
                      ">]</2>"
                  );
                }
              }
            }
          } else if (l.class == z.ItemClass.BOX_RANDOM) {
            if (l.package) {
              this.addVoid();
              this.addText("<2>『随机道具列表』</2>");
              var k = Object.keys(l.package).sort(function (t, e) {
                return parseInt(t) - parseInt(e);
              });
              for (var X = 0, U = k; X < U.length; X++) {
                var I = U[X];
                var R = J.default.getItemData(I);
                if (R) {
                  this.addText(
                    "<2>[<" +
                      R.quality +
                      ">" +
                      R.name +
                      "</" +
                      R.quality +
                      ">]" +
                      l.package[I] +
                      "个</2>"
                  );
                }
              }
            }
          }
        }
        var H = false;
        if ((i = l.recovery) === null || i === void 0 ? void 0 : i.length) {
          H = true;
          this.addVoid();
          this.addText("<2>" + Q.default.tr(203) + "</2>");
          for (var G = 0, V = l.recovery; G < V.length; G++) {
            var $ = V[G];
            var C = "",
              q = "";
            if ($[1] == "%") {
              C = Q.default.tr(201);
            } else if ($[1] == "+") {
              C = Q.default.tr(202);
            }
            if ($[0] == "hp") {
              q = Q.default.tr(199);
            } else if ($[0] == "mp") {
              q = Q.default.tr(200);
            }
            this.addText("<2>" + tt.default.format(C, q, $[2]) + "</2>");
          }
        }
        var K =
          ((s = (a = l.effect) === null || a === void 0 ? void 0 : a.length) !==
            null && s !== void 0
            ? s
            : 0) > 0;
        if (
          l.type == z.default.ITEM &&
          ((u = l.effect) === null || u === void 0 ? void 0 : u.length)
        ) {
          if (!H) {
            this.addVoid();
            this.addText("<2>" + Q.default.tr(203) + "</2>");
            for (var Y = 0, W = l.effect; Y < W.length; Y++) {
              var $ = W[Y];
              switch ($[0]) {
                case "intensify":
                  this.addText("<2>" + Q.default.tr(250, $[3], $[2]) + "</2>");
                  break;
                case "Increase":
                  this.addText("<2>" + Q.default.tr(249, $[3], $[2]) + "</2>");
                  break;
                case "package":
                  this.addText("<2>" + Q.default.tr(248, $[2]) + "</2>");
                  break;
              }
            }
          }
        }
        if (l.effectDesc) {
          if (!K) {
            this.addVoid();
          }
          this.addText(l.effectDesc, f ? "2" : "1");
        }
        if (l.desc) {
          this.addLine();
          this.addText(l.desc, "0");
        }
      };
      t.prototype.updateSkill = function () {
        var t;
        var e = this.itemData;
        this.addText(e.name, "54");
        this.addLine();
        if (e.cd)
          this.addText(
            Q.default.tr(122, c.default.toFixed(e.cd / 1e3, 2)),
            undefined,
            "right",
            true
          );
        this.addText(e.mp ? Q.default.tr(117, e.mp) : "");
        if (e.cost) {
          for (var n in e.cost) {
            var o = J.default.getItemData(parseInt(n));
            this.addText(Q.default.tr(111, e.cost[n], o.name), o.quality);
          }
        }
        this.addText(
          Q.default.tr(
            118,
            Q.default.tr(
              e.costTime > 0 ? 120 : 119,
              c.default.toFixed(
                ((t = e === null || e === void 0 ? void 0 : e.costTime) !==
                  null && t !== void 0
                  ? t
                  : 0) / 1e3,
                2
              )
            )
          )
        );
        this.addText(
          Q.default.tr(121, e.command ? "AFKJALKJ" : Q.default.tr(123))
        );
        if (e.force) {
          this.addText(Q.default.tr(127), "55");
        }
        if (e.levelProperty) {
          this.addLine();
        }
        if (e.desc || e.basicDesc) {
          var r = e.basicDesc || e.desc;
          this.addLine();
          this.addText(r, j.default.registerColors[0]);
        }
        this.addLine();
      };
      t.prototype.updateView = function () {
        var t, e;
        if (
          ((t = this === null || this === void 0 ? void 0 : this.extra) ===
            null || t === void 0
            ? void 0
            : t.slotType) == "skill"
        ) {
          this.updateSkill();
        } else {
          this.updateItem();
          if (this.itemData.suit) {
            this.addLine();
            this.AddSuitAttribute();
          }
        }
        this.content.height = Math.round(
          this.lines * (this.lineSpacing + this.lineHeight) - this.lineSpacing
        );
        var n = 600;
        if (this.content.height >= this.scrollMaxHeight) {
          this.sc.height = this.scrollMaxHeight;
          this.bg.height = this.box.height = n;
        } else if (this.content.height <= this.scrollMinHeight) {
          this.sc.height = this.scrollMinHeight;
          this.bg.height = this.box.height =
            n - this.scrollMaxHeight + this.scrollMinHeight;
        } else {
          this.sc.height = this.content.height;
          this.bg.height = this.box.height =
            n - this.scrollMaxHeight + this.content.height;
        }
        this.box.y = (720 - this.bg.height) / 2;
        this.btnStar.x =
          this.btnRepair.x =
          this.btnDestroy.x =
          this.btnSell.x =
          this.btnWear.x =
            this.box.x + this.box.width;
        this.btnStar.visible =
          this.btnRepair.visible =
          this.btnDestroy.visible =
          this.btnSell.visible =
          this.btnWear.visible =
            false;
        if (this.isBag) {
          var o = this.itemData;
          var r =
            (e = this === null || this === void 0 ? void 0 : this.data) ===
              null || e === void 0
              ? void 0
              : e.id;
          this.btnDestroy.visible = this.btnSell.visible = true;
          this.btnDestroy.label = Q.default.tr(165);
          if (r) {
            this.btnWear.visible = true;
            if (o.type == z.default.EQUIP) {
              this.btnDestroy.label = Q.default.tr(197);
              if (o.id == 2007039 || o.id == 2007040) {
                this.btnWear.visible = false;
              }
              var i = o.durability - this.data.durability;
              if (i > 0) {
                this.btnRepair.visible = true;
              }
              if (et.default.userData.equip.isEquipWear(r)) {
                this.btnWear.label = Q.default.tr(147);
                this.btnDestroy.visible = this.btnSell.visible = false;
              } else {
                this.btnStar.label = this.data.sign
                  ? Q.default.tr(308)
                  : Q.default.tr(309);
                this.btnStar.visible = true;
                this.btnWear.label = Q.default.tr(146);
              }
            } else if (o.type == z.default.SKIN) {
              if (et.default.userData.equip.isSkinWear(r)) {
                this.btnWear.label = Q.default.tr(147);
                this.btnDestroy.visible = this.btnSell.visible = false;
              } else {
                this.btnWear.label = Q.default.tr(146);
                this.btnDestroy.label = Q.default.tr(197);
                this.btnSell.visible = false;
              }
            }
          } else if (o.type == z.default.ITEM) {
            if (
              o.class == z.ItemClass.PACKAGE ||
              o.class == z.ItemClass.CITY_ITEM ||
              o.class == z.ItemClass.BOX_QUALITY ||
              o.class == z.ItemClass.BOX ||
              o.class == z.ItemClass.PACKAGE_SELECT ||
              o.class == z.ItemClass.RENAME ||
              o.class == z.ItemClass.EQUIP_UPGRADE ||
              o.class == z.ItemClass.BOX_RANDOM
            ) {
              this.btnWear.visible = true;
              this.btnWear.label = Q.default.tr(159);
            } else {
              this.btnWear.visible = false;
            }
          } else if (o.type == z.default.EMBLEM) {
            if (o.quality > 1) {
              this.btnDestroy.visible = true;
              this.btnDestroy.label = Q.default.tr(197);
            } else {
              this.btnDestroy.visible = false;
            }
          } else {
            this.btnWear.visible = false;
          }
          this.btnWear.y = this.box.y + 5;
          this.btnRepair.y = this.btnWear.y + 64 + 5;
          this.btnDestroy.y = this.box.height + this.box.y - 64 - 5;
          this.btnSell.y = this.btnDestroy.y - 5 - 64;
          this.btnStar.y = this.btnSell.y - 5 - 64;
        }
      };
      t.prototype.AddSuitAttribute = function () {
        var t, e, n, o, r, i, a, s;
        var u = this.itemData;
        var l = S.default.conf.suit[u.suit];
        this.labItemSuit.text = Q.default.tr(80, l.name);
        this.labItemSuit.textColor = j.default.registerColors[10];
        var f;
        var c = {};
        if (u.type == z.default.SKIN) {
          f = et.default.userData.hero.isSkinWear(
            (e =
              (t = this === null || this === void 0 ? void 0 : this.data) ===
                null || t === void 0
                ? void 0
                : t.id) !== null && e !== void 0
              ? e
              : -1
          );
          if (f) {
            for (var p in et.default.userData.hero.skins) {
              c[p] =
                (o =
                  (n = et.default.userData.hero.skins) === null || n === void 0
                    ? void 0
                    : n[p]) === null || o === void 0
                  ? void 0
                  : o.itemID;
            }
          } else {
            c[u.class] = u.id + "";
          }
        } else if (u.type == z.default.EQUIP) {
          f = et.default.userData.hero.isEquipWear(
            (i =
              (r = this === null || this === void 0 ? void 0 : this.data) ===
                null || r === void 0
                ? void 0
                : r.id) !== null && i !== void 0
              ? i
              : -1
          );
          if (f) {
            for (var p in et.default.userData.hero.wears) {
              c[p] =
                (s =
                  (a = et.default.userData.hero.wears) === null || a === void 0
                    ? void 0
                    : a[p]) === null || s === void 0
                  ? void 0
                  : s.itemID;
            }
          } else {
            c[u.class] = u.id + "";
          }
        } else {
          return;
        }
        var d = 0;
        if (l === null || l === void 0 ? void 0 : l.class) {
          for (var h in l.class) {
            var v = l.class[h];
            var y = c === null || c === void 0 ? void 0 : c[h];
            var _ = void 0;
            if (y && l.parts.indexOf(y) >= 0) {
              var m = J.default.getItemData(y).suit;
              _ = m == u.suit;
            }
            if (_) {
              this.addText(v, "10");
              d += _ ? 1 : 0;
            } else {
              this.addText(v, "0");
            }
          }
        } else {
          for (var g = 0, b = l.parts; g < b.length; g++) {
            var O = b[g];
            var m = J.default.getItemData(O);
            var _ = c[m.class] == O;
            if (O == u.id || _) {
              this.addText(m.name, "10");
            } else {
              this.addText(m.name, "0");
            }
            if (_) {
              d += 1;
            }
          }
        }
        this.addLine();
        for (var w = 2, A = true; w <= 8; w++) {
          var E = l["attr" + w] || l["buff" + w];
          if (E) {
            if (A) {
              A = false;
            } else {
              this.addVoid();
            }
            var T = d >= w;
            this.addText(Q.default.tr(81, w), (T ? 10 : 0) + "");
            if (l["attr" + w]) {
              var C = tt.default.kvmap2arr(l["attr" + w]);
              var P = Z.default.attr2str(C, undefined, {
                template: "{0} {2}{1}",
                percentTemplate: "{0} {2}{1}%",
                color: T,
                sort: true,
              });
              this.addText(P, (T ? 1 : 0) + "");
              if (l["desc" + w]) {
                this.addText(l["desc" + w], (T ? 2 : 0) + "");
              }
            }
          }
        }
        if (l.desc) {
          this.addLine();
          this.addText(l.desc, "0");
        }
      };
      t.prototype.addVoid = function (t) {
        if (!t && this.void) return;
        this.void = true;
        this.lab.text += "\n";
      };
      t.prototype.addText = function (t, e, n, o) {
        if (t === void 0) {
          t = "";
        }
        if (e === void 0) {
          e = "1";
        }
        this.void = false;
        var r = 0;
        var i = this.content.width;
        if (t) {
          var a = l.default.textSplite(t, i, this.lab);
          var s = a.join("\n");
          if (n == "right") {
            var u = new XOF.Label();
            r = i;
            u.textAlign = "right";
            if (e) u.textColor = j.default.registerColors[e] || "#ffffff";
            u.lineSpacing = this.lineSpacing;
            u.fontSize = this.lineHeight;
            u.text = s;
            u.pos(r, this.lines * (this.lineSpacing + this.lineHeight));
            this.content.addChild(u);
          } else {
            this.lab.text += "<" + e + ">" + t + "</" + e + ">\n";
          }
        }
      };
      t.prototype.addLine = function () {
        this.void = false;
        var t = new XOF.Image();
        t.skin = "ui_interface_m/ui_atlas_common/M5UI_Common_LayoutLine01.png";
        t.grid = [11, 3, 3, 5];
        var e = this.lineSpacing + this.lineHeight;
        t.pos(0, this.lines * e + e / 2 - this.lineSpacing / 2 - 5);
        t.width = this.content.width;
        this.content.addChild(t);
        this.lab.text += "\n";
      };
      Object.defineProperty(t.prototype, "lines", {
        get: function () {
          return this.lab.lineNum;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onClickWear = function () {
        var t, e, n, o;
        var r = this;
        if (this.itemData.type == z.default.EQUIP) {
          if (this.data) {
            var i = et.default.userData.equip.isEquipWear(this.data.id);
            if (i) {
              et.default.userData.equip
                .equipTake(this.data.id)
                .then(function (t) {
                  if (t) {
                    et.default.eventMgr.event(1055, [Q.default.tr(161)]);
                    r.close();
                  }
                });
            } else {
              et.default.userData.equip
                .equipWear(this.data.id)
                .then(function (t) {
                  if (t) {
                    et.default.eventMgr.event(1055, [Q.default.tr(160)]);
                    r.close();
                  }
                });
            }
          }
        } else if (this.itemData.type == z.default.SKIN) {
          if (this.data) {
            var i = et.default.userData.equip.isSkinWear(this.data.id);
            if (i) {
              et.default.userData.equip
                .skinTake(this.data.id)
                .then(function (t) {
                  if (t) {
                    et.default.eventMgr.event(1055, [Q.default.tr(161)]);
                    r.close();
                  }
                });
            } else {
              et.default.userData.equip
                .skinWear(this.data.id)
                .then(function (t) {
                  if (t) {
                    et.default.eventMgr.event(1055, [Q.default.tr(160)]);
                    r.close();
                  }
                });
            }
          }
        } else if (this.itemData.type == z.default.ITEM) {
          if (this.itemData.class == z.ItemClass.PACKAGE) {
            var a = et.default.userData.bag.getItemCount(this.itemData.id);
            var s = { itemData: this.itemData };
            et.default.viewMgr.open(_.default.ShopCount, [
              s,
              ((t = {}), (t[J.default.resourceIds.coin] = 0), t),
              a || 1,
            ]);
            var u = et.default.viewMgr.getOpenView(_.default.ShopCount);
            if (u) {
              u.labTitle.text = Q.default.tr(159);
              u.showPriceGroup(false);
              var l = this.itemData.id;
              u.once(m.default.CONFIRM, function (t) {
                et.default.userData.bag.itemOpenPackage(l, t);
              });
            }
            this.close();
          } else if (this.itemData.class == z.ItemClass.CITY_ITEM) {
            var a = 1;
            var s = { itemData: this.itemData };
            et.default.viewMgr.open(_.default.ShopCount, [
              s,
              ((e = {}), (e[J.default.resourceIds.coin] = 0), e),
              a || 1,
            ]);
            var u = et.default.viewMgr.getOpenView(_.default.ShopCount);
            if (u) {
              u.labTitle.text = Q.default.tr(159);
              u.showPriceGroup(false);
              var f = this.itemData.id;
              u.once(m.default.CONFIRM, function (t) {
                et.default.userData.bag.itemCityUse(f, t);
              });
            }
            this.close();
          } else if (this.itemData.class == z.ItemClass.PACKAGE_SELECT) {
            var s = J.default.getItemData(this.itemData.id);
            var c = [];
            if (s.class == z.ItemClass.PACKAGE_SELECT) {
              for (var p in s.package) {
                var d = J.default.getItemData(p);
                if (d) {
                  c.push({
                    id: d.id,
                    data: { itemData: d, count: s.package[p], tap: false },
                  });
                }
              }
            }
            et.default.viewMgr.open(_.default.BagPackageList, [c]);
            var u = et.default.viewMgr.getOpenView(_.default.BagPackageList);
            if (u) {
              var h = this.itemData.id;
              u.once(m.default.CONFIRM, function (t) {
                if (t > 0) {
                  et.default.userData.bag.itemOpenSelectPackage(h, t);
                  r.close();
                }
              });
            }
          } else if (this.itemData.class == z.ItemClass.RENAME) {
            et.default.viewMgr.open(_.default.RoleRename);
            this.close();
          } else if (this.itemData.class == z.ItemClass.EQUIP_UPGRADE) {
            et.default.viewMgr.open(_.default.EquipmentUpgradeBook, [
              this.itemData.id,
            ]);
            this.close();
          } else if (this.itemData.class == z.ItemClass.BOX) {
            var a = Math.min(
              et.default.userData.bag.getItemCount(this.itemData.id),
              10
            );
            var s = { itemData: this.itemData };
            et.default.viewMgr.open(_.default.ShopCount, [
              s,
              ((n = {}), (n[J.default.resourceIds.coin] = 0), n),
              a || 1,
            ]);
            var u = et.default.viewMgr.getOpenView(_.default.ShopCount);
            if (u) {
              u.labTitle.text = Q.default.tr(159);
              u.showPriceGroup(false);
              var v = this.itemData.id;
              u.once(m.default.CONFIRM, function (t) {
                et.default.userData.bag.itemOpenRandomPackage(v, t);
              });
            }
            this.close();
          } else if (this.itemData.class == z.ItemClass.BOX_QUALITY) {
            et.default.viewMgr.open(_.default.EquipmentQualityAdjust, [
              this.itemData.id,
            ]);
            this.close();
          } else if (this.itemData.class == z.ItemClass.BOX_RANDOM) {
            var a = et.default.userData.bag.getItemCount(this.itemData.id);
            var s = { itemData: this.itemData };
            et.default.viewMgr.open(_.default.ShopCount, [
              s,
              ((o = {}), (o[J.default.resourceIds.coin] = 0), o),
              a || 1,
            ]);
            var u = et.default.viewMgr.getOpenView(_.default.ShopCount);
            if (u) {
              u.labTitle.text = Q.default.tr(159);
              u.showPriceGroup(false);
              var y = this.itemData.id;
              u.once(m.default.CONFIRM, function (t) {
                et.default.userData.bag.itemOpenSimpleRandomPackage(y, t);
              });
            }
            this.close();
          }
        }
      };
      t.prototype.onClickSell = function () {
        var t, e;
        var n;
        if (this.itemData.type == z.default.EQUIP) {
          if (
            (n = this === null || this === void 0 ? void 0 : this.data) ===
              null || n === void 0
              ? void 0
              : n.id
          ) {
            var o = 1;
            var r = this.itemData.price || 0;
            var i = { itemData: this.itemData };
            et.default.viewMgr.open(_.default.ShopCount, [
              i,
              ((t = {}), (t[J.default.resourceIds.coin] = r), t),
              o || 1,
            ]);
            var a = et.default.viewMgr.getOpenView(_.default.ShopCount);
            if (a) {
              a.labTitle.text = Q.default.tr(164);
              var s = this.data.id;
              a.once(m.default.CONFIRM, function (t) {
                et.default.userData.equip.equipSell(s);
              });
            }
            this.close();
          }
        } else if (this.itemData.type == z.default.SKIN);
        else {
          var o = et.default.userData.bag.getItemCount(this.itemData.id);
          var r = this.itemData.price || 0;
          var i = { itemData: this.itemData };
          et.default.viewMgr.open(_.default.ShopCount, [
            i,
            ((e = {}), (e[J.default.resourceIds.coin] = r), e),
            o || 1,
          ]);
          var a = et.default.viewMgr.getOpenView(_.default.ShopCount);
          if (a) {
            a.labTitle.text = Q.default.tr(164);
            var u = this.itemData.id;
            a.once(m.default.CONFIRM, function (t) {
              et.default.userData.bag.itemSell(u, t);
            });
          }
          this.close();
        }
      };
      t.prototype.onClickDestroy = function () {
        var t, e;
        if (this.itemData.type == z.default.EQUIP) {
          var n = 1;
          var o = 0;
          var r = { itemData: this.itemData };
          et.default.viewMgr.open(_.default.ShopCount, [
            r,
            ((t = {}), (t[J.default.resourceIds.coin] = o), t),
            n || 1,
          ]);
          var i = et.default.viewMgr.getOpenView(_.default.ShopCount);
          if (i) {
            i.labTitle.text = Q.default.tr(165);
            var a = this.data.id;
            i.once(m.default.CONFIRM, function (t) {
              et.default.userData.equip.equipDestroy(a);
            });
          }
          this.close();
        } else if (this.itemData.type == z.default.SKIN) {
          var n = 1;
          var r = { itemData: this.itemData };
          et.default.viewMgr.open(_.default.ShopCount, [
            r,
            S.default.conf.skinDecompose[this.itemData.quality].item,
            n || 1,
          ]);
          var i = et.default.viewMgr.getOpenView(_.default.ShopCount);
          if (i) {
            i.labTitle.text = Q.default.tr(197);
            var s = this.data.id;
            i.once(m.default.CONFIRM, function (t) {
              et.default.userData.equip.skinDestroy(s);
            });
          }
          this.close();
        } else if (this.itemData.type == z.default.EMBLEM) {
          var u = this.itemData.id;
          et.default.comm.msgBox({
            text: Q.default.tr(310),
            confirm: {
              callback: function () {
                et.default.userData.bag.emblumUnCompose(u);
              },
              close: true,
            },
            cancel: {},
          });
          this.close();
        } else {
          var n = et.default.userData.bag.getItemCount(this.itemData.id);
          var o = 0;
          var r = { itemData: this.itemData };
          et.default.viewMgr.open(_.default.ShopCount, [
            r,
            ((e = {}), (e[J.default.resourceIds.coin] = o), e),
            n || 1,
          ]);
          var i = et.default.viewMgr.getOpenView(_.default.ShopCount);
          if (i) {
            i.labTitle.text = Q.default.tr(165);
            var l = this.itemData.id;
            i.once(m.default.CONFIRM, function (t) {
              et.default.userData.bag.itemDestroy(l, t);
            });
          }
          this.close();
        }
      };
      t.prototype.onClickStart = function () {
        var t;
        if (this.itemData.type == z.default.EQUIP) {
          var e =
            (t = this === null || this === void 0 ? void 0 : this.data) ===
              null || t === void 0
              ? void 0
              : t.id;
          if (e) {
            et.default.userData.equip.equipStar(e);
            this.close();
          }
        }
      };
      t.prototype.onClickRepair = function () {
        var e = this;
        var t;
        if (this.itemData.type == z.default.EQUIP) {
          var n = this.itemData;
          var o =
            (t = this === null || this === void 0 ? void 0 : this.data) ===
              null || t === void 0
              ? void 0
              : t.id;
          if (o) {
            var r = n.durability - this.data.durability;
            if (r > 0) {
              var i = ot.default.getEquipRepair(r, n);
              et.default.comm.msgBox({
                text: Q.default.tr(234, n.name, tt.default.formatMoney(i)),
                confirm: {
                  callback: function () {
                    return et.default.userData.equip
                      .equipRepair(o)
                      .then(function (t) {
                        if (t) {
                          et.default.comm.mtr(236);
                          e.close();
                        }
                      });
                  },
                  close: true,
                },
                cancel: {},
              });
            } else {
              et.default.comm.mtr(233);
            }
          }
        }
      };
      return t;
    })(s.default);
    e.default = d;
  });
  t(Qf);
  var Jf = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = o(dt);
    var f = o(q);
    var r = o(W);
    var i = o(Mf);
    var a = o(Se);
    var s = o(k);
    var c = o(st);
    var p = o(kl);
    var d = o(Yl);
    var u = (function (u) {
      n(t, u);
      function t() {
        var t = u.call(this) || this;
        r.default.initSkin("ui/changeroom/changeroom", t, t.content);
        t.contentSize();
        t.initUI();
        return t;
      }
      t.prototype.initUI = function () {
        for (var t = 0; t < 11; t++) {
          for (var e = 0; e < 10; e++) {
            var n = new p.default();
            n.pos(e * 30, t * 30);
            n.data = { showBg: true };
            n.on(XOF.TouchEvent.TAP, this.onSelect, this, [n]);
            this.gItems.addChild(n);
          }
        }
        this.body = new d.default();
        this.gRole.addChild(this.body);
        this.viewEquips = [];
        this.viewEquips.push(new p.default());
        for (var t = 0; t < 3; t++) {
          for (var e = 1; e <= 3; e++) {
            var n = new p.default();
            n.pos(e * 33, t * 34);
            this.viewEquips.push(n);
          }
        }
        var o = [
          "weapon",
          "hair",
          "cap",
          "face",
          "neck",
          "coat",
          "body",
          "belt",
          "pants",
          "shoes",
        ];
        for (var r = 0, i = this.viewEquips; r < i.length; r++) {
          var n = i[r];
          n.on(XOF.TouchEvent.RMOUSE_TAP, this.onUnSelect, this, [n]);
          n.data = {};
          n.name = o.shift();
          this.gEquips.addChild(n);
        }
        this.title = "换衣间";
        this.btnSave.label = "保存";
      };
      t.prototype.load = function () {
        this.equipIds = [];
        var t = 1100001;
        while (c.default.getItemData(t)) {
          this.equipIds.push(t);
          t += 1;
        }
      };
      t.prototype.updateList = function () {
        var t = this.index * this.max;
        var e = Math.min(this.equipIds.length, t + this.max);
        for (var n = t, o = 0; n < e; n++, o++) {
          var r = this.equipIds[n];
          var i = this.gItems.getChildAt(o);
          i.data.itemData = c.default.getItemData(r);
          i.data = i.data;
        }
      };
      t.prototype.updateSelectEquips = function () {
        for (var t in this.equips) {
          var e = this.gEquips.getChildByName(t);
          if (this.equips[t]) {
            e.data.itemData = c.default.getItemData(this.equips[t]);
          } else {
            e.data.itemData = undefined;
          }
          e.data = e.data;
        }
      };
      t.prototype.updateBody = function () {
        var t;
        var e = l.default.conf.character[this.role];
        s.default.copy(this.equips);
        var n = [];
        if (e.bodyEquipmentId) n.push(e.bodyEquipmentId);
        if (e.weaponEquipmentId) n.push(e.weaponEquipmentId);
        if (e.skinEquipmentId) n.push.apply(n, e.skinEquipmentId);
        (t = this.body).setEquipments.apply(t, n);
      };
      t.prototype.onSelect = function (t) {
        var e;
        var n =
          (e = t === null || t === void 0 ? void 0 : t.data) === null ||
          e === void 0
            ? void 0
            : e.itemData;
        if (n) {
          this.equips[l.default.conf.equipment[n.equ].type] = n.id;
          a.default.loadImages2(a.default.getEquipmentImages(n.equ));
          this.updateBody();
          this.updateSelectEquips();
        }
      };
      t.prototype.onUnSelect = function (t) {
        var e;
        var n =
          (e = t === null || t === void 0 ? void 0 : t.data) === null ||
          e === void 0
            ? void 0
            : e.itemData;
        if (n) {
          this.equips[l.default.conf.equipment[n.equ].type] = 0;
        }
        this.updateBody();
        this.updateSelectEquips();
      };
      t.prototype.onOpen = function () {
        var t;
        u.prototype.onOpen.call(this);
        this.cneterBy(0, 0);
        this.role = "swordman";
        this.equips = {};
        this.index = 0;
        this.max = 10 * 11;
        this.btnSave.on(XOF.TouchEvent.TAP, this.onClickSave, this);
        var e = f.default.userData.hero.skins;
        var n = {};
        for (var o in e) {
          var r = c.default.getItemData(e[o].itemID);
          if (r === null || r === void 0 ? void 0 : r.equ) {
            n[l.default.conf.equipment[r.equ].type] = r.id;
          }
          if (
            (t = r === null || r === void 0 ? void 0 : r.equs) === null ||
            t === void 0
              ? void 0
              : t.length
          ) {
            for (var i = 0, a = r.equs; i < a.length; i++) {
              var s = a[i];
              n[l.default.conf.equipment[s].type] = r.id;
            }
          }
        }
        this.equips = n;
        this.load();
        this.updateBody();
        this.updateList();
        this.updateSelectEquips();
      };
      t.prototype.onClose = function () {
        var e = this;
        u.prototype.onClose.call(this);
        this.body.destory();
        this.gItems.children_.forEach(function (t) {
          return t.off(XOF.TouchEvent.TAP, e.onSelect, e);
        });
        this.gEquips.children_.forEach(function (t) {
          return t.off(XOF.TouchEvent.RMOUSE_TAP, e.onUnSelect, e);
        });
        this.btnSave.off(XOF.TouchEvent.TAP, this.onClickSave, this);
      };
      t.prototype.onClickSave = function () {
        for (var t in this.equips) {
          if (this.equips[t]) {
            this.equips[t];
          }
        }
      };
      return t;
    })(i.default);
    e.default = u;
  });
  t(Jf);
  var Zf = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var f = n(q);
    var r = n(R);
    var i = n(x);
    var a = n(W);
    var c = n(st);
    var s = n(_l);
    var u = n(it);
    var l = n(V);
    var p = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        a.default.initSkin("ui/RoleMenu/MenuBag", t, t);
        t.fullview = true;
        t.boxList.itemRenderer = s.default;
        t.sc.addChild(t.boxList);
        return t;
      }
      t.prototype.onOpen = function () {
        n.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(i.default.CLOSE, this.close, this);
        this.btnList.on(i.default.RADIOGROUP_CHANGED, this.onSelectIndex, this);
        f.default.eventMgr.on(1032, this.updateItems, this);
        var t = [
          l.default.tr(157),
          l.default.tr(4),
          l.default.tr(5),
          l.default.tr(282),
          l.default.tr(283),
          l.default.tr(3),
          l.default.tr(128),
          l.default.tr(158),
        ];
        for (var e = 0; e < t.length; e++) {
          this.btnList.getChildAt(e).label = t[e];
        }
        this.btnList.selectIndex = 1;
        this.updateItems();
      };
      t.prototype.updateItems = function () {
        var t = f.default.userData.bag;
        var e = [];
        var n = Math.ceil(f.default.userData.bag.getBagAmountMax() / 6) * 6;
        var o = []
          .concat(f.default.userData.equip.equips)
          .concat(f.default.userData.equip.skins)
          .concat(t.items);
        for (var r = 0; r < n; r++) {
          e.push({ showBg: true });
        }
        for (var r = 0, i = 0; r < o.length; r++) {
          var a = { showBg: true };
          var s = o[r];
          if (s && s.count && s.itemID) {
            var u = s.itemID;
            var l = c.default.getItemData(u);
            if (
              this.type
                ? (l === null || l === void 0 ? void 0 : l.type) == this.type
                : true
            ) {
              a.object = s;
              a.extra = s;
              a.isBag = true;
              a.itemData = l;
              a.count = s.count;
              a.cd = t.getItemCountdown(u);
              e[i] = a;
              i++;
            }
          }
        }
        this.boxList.dataProvider = e.sort(function (t, e) {
          if (t.itemData && e.itemData) {
            if (t.itemData.quality != e.itemData.quality) {
              return e.itemData.quality - t.itemData.quality;
            } else {
              return t.itemData.id - e.itemData.id;
            }
          } else if (t.itemData) {
            return -1;
          } else if (e.itemData) {
            return 1;
          }
          return 1;
        });
      };
      t.prototype.onClose = function () {
        n.prototype.onClose.call(this);
        this.bg.onClose();
        f.default.eventMgr.off(1032, this.updateItems, this);
        this.btnList.off(
          i.default.RADIOGROUP_CHANGED,
          this.onSelectIndex,
          this
        );
      };
      t.prototype.onSelectIndex = function () {
        var t = [
          ,
          u.default.ITEM,
          u.default.RAW,
          u.default.EMBLEM,
          u.default.CARD,
          u.default.EQUIP,
          u.default.SKIN,
          u.default.TASK,
        ];
        this.type = t[this.btnList.selectIndex];
        this.updateItems();
        this.sc.stopAnimation();
        this.sc.scrollV = 0;
      };
      return t;
    })(r.default);
    e.default = p;
  });
  t(Zf);
  var tc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(vl);
    var i = o(W);
    var a = o(st);
    var s = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        i.default.initSkin("ui/bag/BagPackageListItem", t, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        o.prototype.dataChanged_.call(this);
        var t = this.data;
        this.itemBox.data = t.data;
        var e = t.data.itemData;
        this.labTitle.text =
          (t === null || t === void 0 ? void 0 : t.name) || e.name;
        this.labTitle.textColor = a.default.getQualityColor(e.quality);
        var n =
          (t === null || t === void 0 ? void 0 : t.desc) ||
          (e === null || e === void 0 ? void 0 : e.desc) ||
          "";
        this.labDesc.text = n.length > 18 ? n.slice(0, 18) + ".." : n;
        this.imgLight.visible = t.selected;
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(tc);
  var ec = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(R);
    var a = o(x);
    var s = o(W);
    var u = o(tc);
    var l = o(T);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = l.default.TIPS;
        s.default.initSkin("ui/bag/BagPackageList", t, t);
        t.listItem.itemRenderer = u.default;
        return t;
      }
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        this.list = t;
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.listItem.on(a.default.ITEM_TAP, this.onClickItem, this);
        this.selectId = undefined;
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.listItem.off(a.default.ITEM_TAP, this.onClickItem, this);
        this.listItem.dataProvider = undefined;
        delete this.selectId;
        delete this.list;
      };
      t.prototype.updateView = function () {
        var i = this;
        var t = this.list.map(function (t) {
          var e = t.id,
            n = t.data,
            o = t.title,
            r = t.desc;
          return {
            id: e,
            data: n,
            selected: i.selectId == e,
            title: o,
            desc: r,
          };
        });
        this.listItem.dataProvider = t;
      };
      t.prototype.onClickOk = function () {
        if (this.selectId) {
          this.event(a.default.CONFIRM, [this.selectId || 0]);
          this.close();
        } else {
          r.default.comm.mtr(239);
        }
      };
      t.prototype.onClickItem = function (t) {
        this.selectId = t === null || t === void 0 ? void 0 : t.id;
        this.updateView();
      };
      return t;
    })(i.default);
    e.default = f;
  });
  t(ec);
  var nc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var d = o(q);
    var r = o(R);
    var h = o(x);
    var v = o(I);
    var i = o(W);
    var a = o(T);
    var y = o(at);
    var _ = o(st);
    var m = o(it);
    var s = o(V);
    var g = o(je);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.orderIndex = a.default.TIPS;
        i.default.initSkin("ui/Equipment/EquipmentQualityAdjust", t, t);
        return t;
      }
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        this.itemId = t;
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.itemBox.on(XOF.TouchEvent.TAP, this.onClickSelect, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClick, this);
        d.default.eventMgr.on(1036, this.updateView, this);
        d.default.eventMgr.on(1032, this.updateView, this);
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.itemBox.off(XOF.TouchEvent.TAP, this.onClickSelect, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClick, this);
        d.default.eventMgr.off(1036, this.updateView, this);
        d.default.eventMgr.off(1032, this.updateView, this);
      };
      t.prototype.onClickSelect = function () {
        var r = this;
        var i = [];
        var t = [].concat(d.default.userData.equip.equips);
        for (var e = 0; e < t.length; e++) {
          var n = t[e];
          if (n && n.count && n.itemID) {
            var o = n.itemID;
            var a = _.default.getItemData(o);
            var s = false;
            if (a.type == m.default.EQUIP) {
              s = a.class != y.default.TITLE;
            }
            var u = g.default.getRankStr(n.rank),
              l = u[0],
              f = u[1];
            if (s) {
              var c = {
                id: n.id,
                data: {
                  itemData: a,
                  object: n,
                  extra: n,
                  isBag: true,
                  tap: false,
                  count: n.count,
                },
                title: "<" + a.quality + ">" + a.name + "</" + a.quality + ">",
                desc:
                  "<" +
                  f +
                  ">" +
                  l +
                  "(" +
                  Math.floor(n.rank * 100) +
                  "%)</" +
                  f +
                  ">",
              };
              i.push(c);
            }
          }
        }
        i = i.sort(function (t, e) {
          return e.data.itemData.quality - t.data.itemData.quality;
        });
        d.default.viewMgr.open(v.default.BagPackageList, [i]);
        var p = d.default.viewMgr.getOpenView(v.default.BagPackageList);
        if (p) {
          p.once(h.default.CONFIRM, function (t) {
            if (t > 0) {
              r.selectId = t;
              r.updateView();
              for (var e = 0, n = i; e < n.length; e++) {
                var o = n[e];
                if (o.id == t) {
                  r.itemBox.data = o.data;
                  break;
                }
              }
            }
          });
        }
      };
      t.prototype.onClick = function () {
        var e = this;
        if (this.itemId && this.selectId > 0) {
          d.default.userData.equip
            .useRankAdjust(this.selectId, this.itemId + "")
            .then(function (t) {
              e.updateView();
              if (d.default.userData.bag.getItemCount(e.itemId) <= 0) {
                e.close();
              }
            });
        } else {
          d.default.comm.mtr(237);
        }
      };
      t.prototype.updateView = function () {
        if (this.selectId) {
          this.labQuality.visible = true;
          var t = d.default.userData.equip.get(this.selectId);
          var e = g.default.getRankStr(t.rank),
            n = e[0],
            o = e[1];
          this.labQuality.text = s.default.tr(
            238,
            "<" +
              o +
              ">" +
              n +
              "(" +
              Math.floor(t.rank * 100) +
              "%)</" +
              o +
              ">"
          );
        } else {
          this.labQuality.visible = false;
        }
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(nc);
  var oc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(D);
    var i = o(q);
    var a = o(I);
    var s = o(Qf);
    var u = o(Jf);
    var l = o(Zf);
    var f = o(ec);
    var c = o(nc);
    var p = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.viewMgr.register(a.default.Bag, l.default);
        i.default.viewMgr.register(a.default.ItemDetails, s.default);
        i.default.viewMgr.register(a.default.ChangeRoom, u.default);
        i.default.viewMgr.register(a.default.BagPackageList, f.default);
        i.default.viewMgr.register(a.default.EquipmentQualityAdjust, c.default);
        i.default.eventMgr.on(1033, t.onItemDetails, t);
        return t;
      }
      t.prototype.onItemDetails = function (t, e, n) {
        i.default.viewMgr.open(a.default.ItemDetails, [t, e, n]);
      };
      return t;
    })(r.default);
    e.default = p;
  });
  t(oc);
  var rc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var i = o(T);
    var a = o(_e);
    var s = o(Q);
    var u = o(q);
    var l = (function (o) {
      n(t, o);
      function t() {
        var t;
        var e = o.call(this) || this;
        e.touchThrough = true;
        e.touchEnabled = false;
        e.orderIndex = i.default.FINGER;
        var n = (e.image = new XOF.Image());
        n.skin = "interface/cur/0.png";
        n.pos(-100, 0);
        e.addChild(n);
        e.selectIcon = new XOF.Image();
        e.selectIcon.pivot(14, 14);
        e.selectIcon.pos(0, 0);
        e.addChildAt(e.selectIcon, 0);
        e.selectIcon.visible = false;
        XOF.stage.on(XOF.TouchEvent.TOUCH_MOVE, e.onMouseMove, e);
        XOF.stage.on(XOF.TouchEvent.TOUCH_BEGIN, e.onTouchBegin, e);
        XOF.stage.on(XOF.TouchEvent.TOUCH_END, e.onTouchEnd, e);
        XOF.stage.on(XOF.TouchEvent.RMOUSE_TAP, e.onRMouseTap, e);
        e.stateAnimations =
          ((t = {}),
          (t[a.default.NORMAL] = [0, 0]),
          (t[a.default.PRESS] = [1, 1]),
          (t[a.default.CONFIRM] = [0, 0]),
          (t[a.default.CONFIRM_PRESS] = [1, 1]),
          (t[a.default.BUY] = [2, 5]),
          (t[a.default.SELL] = [10, 13]),
          (t[a.default.FIXED] = [14, 14]),
          (t[a.default.TALK] = [120, 123]),
          t);
        e.setState(a.default.NORMAL);
        e.hide();
        return e;
      }
      t.prototype.onRMouseTap = function () {
        this.setState(a.default.NORMAL);
      };
      t.prototype.onTouchBegin = function () {
        if (this.state == a.default.NORMAL) this.setState(a.default.PRESS);
        if (this.state == a.default.CONFIRM)
          this.setState(a.default.CONFIRM_PRESS);
      };
      t.prototype.onTouchEnd = function () {
        if (this.state == a.default.PRESS) this.setState(a.default.NORMAL);
        if (this.state == a.default.CONFIRM_PRESS)
          this.setState(a.default.CONFIRM);
      };
      t.prototype.setIcon = function (t) {
        this.selectIcon.skin = t;
        this.selectIcon.visible = t ? true : false;
      };
      t.prototype.setState = function (t) {
        var e = this.stateAnimations[t];
        s.default.removeTweens(this.image);
        this.image.skin = "interface/cur/" + e[0] + ".png";
        var n = s.default.get(this.image, { loop: true });
        for (var o = e[0]; o <= e[1]; o++) {
          n.wait(150).set({ skin: "interface/cur/" + o + ".png" });
        }
        this.state = t;
        this.updateFinger();
      };
      t.prototype.onMouseMove = function () {
        var t = u.default.viewMgr.mouseX;
        var e = u.default.viewMgr.mouseY;
        this.selectIcon.pos(t, e);
        this.image.pos(t, e);
        if (this.lastMouseX != t || this.lastMouseY != e) {
          this.updateFinger();
        }
        this.lastMouseX = t;
        this.lastMouseY = e;
      };
      t.prototype.updateFinger = function () {
        this.image.alpha = 1;
        s.default.removeTweens(this);
        if (this.state == a.default.NORMAL) {
          s.default.get(this).wait(3e3).call(this.hide, this).remove();
        }
      };
      t.prototype.hide = function () {
        this.image.alpha = 0;
      };
      return t;
    })(r.default);
    e.default = l;
  });
  t(rc);
  var ic = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(D);
    var i = o(q);
    var a = o(K);
    var s = o(I);
    var u = o(rc);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.viewMgr.register(s.default.Finger, u.default);
        i.default.eventMgr.on(a.default.STEP1_LOGIN_ACCOUNTS, t.onLogin, t);
        return t;
      }
      t.prototype.onLogin = function () {
        i.default.viewMgr.open(s.default.Finger);
      };
      return t;
    })(r.default);
    e.default = l;
  });
  t(ic);
  var ac = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mf);
    var i = o($);
    var a = o(be);
    var s = o(V);
    var u = o(q);
    var l = o(W);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        l.default.initSkin("ui/Setting/Option", t, t.content);
        t.size(300, 360);
        t.box_ = new a.default("interface/popup/9/{0}.png", 1);
        t.box_.pos(5, 5);
        t.box_.size(t.content.width - 10, t.content.height - 90);
        t.box_.addTo(t.content);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.title = s.default.tr(41);
        this.pos(
          i.default.width / 2 - this.width / 2,
          i.default.height / 2 - this.height / 2 + 20
        );
        this.btnQuit.on(XOF.TouchEvent.TAP, this.onClickQuit, this);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnQuit.off(XOF.TouchEvent.TAP, this.onClickQuit, this);
      };
      t.prototype.onClickQuit = function () {
        var t = JSON.stringify(u.default.userData.save());
        window.prompt(s.default.tr(126), t);
      };
      return t;
    })(r.default);
    e.default = f;
  });
  t(ac);
  var sc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(D);
    var i = o(q);
    var a = o(I);
    var s = o(ac);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.viewMgr.register(a.default.Setting, s.default);
        return t;
      }
      return t;
    })(r.default);
    e.default = u;
  });
  t(sc);
  var uc = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.prototype.save = function (t) {};
      return t;
    })();
    e.default = n;
  });
  t(uc);
  var lc = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.ProtoType = void 0;
    (function (t) {
      t[(t["GAME_LOGIN"] = 1002)] = "GAME_LOGIN";
      t[(t["GAME_OFFLINE"] = 1003)] = "GAME_OFFLINE";
      t[(t["LOAD_SERVERS"] = 1004)] = "LOAD_SERVERS";
      t[(t["LOAD_ROLES"] = 1005)] = "LOAD_ROLES";
      t[(t["ROLE_CREATE"] = 1006)] = "ROLE_CREATE";
      t[(t["ROLE_SELECT"] = 1007)] = "ROLE_SELECT";
      t[(t["BAG_LOAD"] = 1010)] = "BAG_LOAD";
      t[(t["BAG_DESTROY"] = 1011)] = "BAG_DESTROY";
      t[(t["BAG_SELL"] = 1012)] = "BAG_SELL";
      t[(t["SHOP_BUY"] = 1013)] = "SHOP_BUY";
      t[(t["MAIL_GET"] = 1014)] = "MAIL_GET";
      t[(t["CHAT_SEND"] = 1015)] = "CHAT_SEND";
      t[(t["HERO_EQUIP_LOAD"] = 1016)] = "HERO_EQUIP_LOAD";
      t[(t["EQUIP_WEAR"] = 1017)] = "EQUIP_WEAR";
      t[(t["EQUIP_TAKE"] = 1018)] = "EQUIP_TAKE";
      t[(t["EQUIP_LOAD"] = 1019)] = "EQUIP_LOAD";
      t[(t["EQUIP_SELL"] = 1020)] = "EQUIP_SELL";
      t[(t["EQUIP_REPAIR"] = 1021)] = "EQUIP_REPAIR";
      t[(t["ITEM_UPDATE_PUSH"] = 1023)] = "ITEM_UPDATE_PUSH";
      t[(t["EQUIP_UPDATE_PUSH"] = 1024)] = "EQUIP_UPDATE_PUSH";
      t[(t["RESOURCE_UPDATE_PUSH"] = 1025)] = "RESOURCE_UPDATE_PUSH";
      t[(t["BAG_OPEN_PACKAGE"] = 1026)] = "BAG_OPEN_PACKAGE";
      t[(t["EQUIP_DESTROY"] = 1027)] = "EQUIP_DESTROY";
      t[(t["SKIN_UPDATE_PUSH"] = 1028)] = "SKIN_UPDATE_PUSH";
      t[(t["SKIN_LOAD"] = 1029)] = "SKIN_LOAD";
      t[(t["SKIN_DESTROY"] = 1030)] = "SKIN_DESTROY";
      t[(t["HERO_SKIN_LOAD"] = 1031)] = "HERO_SKIN_LOAD";
      t[(t["SKIN_WEAR"] = 1032)] = "SKIN_WEAR";
      t[(t["SKIN_TAKE"] = 1033)] = "SKIN_TAKE";
      t[(t["CDK_EXCHANGE"] = 1034)] = "CDK_EXCHANGE";
      t[(t["MAIL_LOAD"] = 1035)] = "MAIL_LOAD";
      t[(t["MAIL_PUSH"] = 1036)] = "MAIL_PUSH";
      t[(t["MAIL_GET_ALL"] = 1037)] = "MAIL_GET_ALL";
      t[(t["SKILL_LOAD"] = 1038)] = "SKILL_LOAD";
      t[(t["SKILL_UP"] = 1039)] = "SKILL_UP";
      t[(t["DUNGEON_ENTER"] = 1040)] = "DUNGEON_ENTER";
      t[(t["DUNGEON_KILL_MONSTER"] = 1041)] = "DUNGEON_KILL_MONSTER";
      t[(t["DUNGEON_PASS"] = 1042)] = "DUNGEON_PASS";
      t[(t["DUNGEON_PASS_REWARD"] = 1043)] = "DUNGEON_PASS_REWARD";
      t[(t["DUNGEON_RETURN"] = 1045)] = "DUNGEON_RETURN";
      t[(t["DUNGEON_NEXT_ROUND"] = 1046)] = "DUNGEON_NEXT_ROUND";
      t[(t["EQUIP_UPGRADE"] = 1047)] = "EQUIP_UPGRADE";
      t[(t["EQUIP_UPPOWER"] = 1048)] = "EQUIP_UPPOWER";
      t[(t["DUNGEON_ITEM_PUSH"] = 1049)] = "DUNGEON_ITEM_PUSH";
      t[(t["DUNGEON_ITEM_SET_LOAD"] = 1050)] = "DUNGEON_ITEM_SET_LOAD";
      t[(t["DUNGEON_ITEM_SET_UPDATE"] = 1052)] = "DUNGEON_ITEM_SET_UPDATE";
      t[(t["DUNGEON_USE_ITEM"] = 1053)] = "DUNGEON_USE_ITEM";
      t[(t["CHAT_NOTIFY"] = 1054)] = "CHAT_NOTIFY";
      t[(t["DUNGEON_USE_SKILL"] = 1055)] = "DUNGEON_USE_SKILL";
      t[(t["VIP_GET_MONTH_GIFT"] = 1056)] = "VIP_GET_MONTH_GIFT";
      t[(t["BAG_USE_ITEM4"] = 1057)] = "BAG_USE_ITEM4";
      t[(t["EQUIP_STAR"] = 1058)] = "EQUIP_STAR";
      t[(t["EQUIP_AUTO_DECOMPOSE"] = 1059)] = "EQUIP_AUTO_DECOMPOSE";
      t[(t["EQUIP_AUTO_SELL"] = 1060)] = "EQUIP_AUTO_SELL";
      t[(t["DUNGEON_HELL_DEATH"] = 1061)] = "DUNGEON_HELL_DEATH";
      t[(t["EQUIP_USE_UPGRADE"] = 1062)] = "EQUIP_USE_UPGRADE";
      t[(t["BAG_OPEN_SELECT_PACKAGE"] = 1063)] = "BAG_OPEN_SELECT_PACKAGE";
      t[(t["BAG_OPEN_RANDOM_PACKAGE"] = 1064)] = "BAG_OPEN_RANDOM_PACKAGE";
      t[(t["ROLE_RENAME"] = 1065)] = "ROLE_RENAME";
      t[(t["TOTAL_REACHARGE_LOAD"] = 1067)] = "TOTAL_REACHARGE_LOAD";
      t[(t["TOTAL_REACHARGE_GET"] = 1068)] = "TOTAL_REACHARGE_GET";
      t[(t["TOTAL_REACHARGE_PUSH"] = 1069)] = "TOTAL_REACHARGE_PUSH";
      t[(t["TOWN_ENTER"] = 1070)] = "TOWN_ENTER";
      t[(t["TOWN_ROLE_QUIT_PUSH"] = 1071)] = "TOWN_ROLE_QUIT_PUSH";
      t[(t["TOWN_ROLE_UPDATE_SKIN_PUSH"] = 1072)] =
        "TOWN_ROLE_UPDATE_SKIN_PUSH";
      t[(t["TOWN_ROLE_UPDATE_EQUIP_PUSH"] = 1073)] =
        "TOWN_ROLE_UPDATE_EQUIP_PUSH";
      t[(t["TOWN_LOAD_ROLES"] = 1074)] = "TOWN_LOAD_ROLES";
      t[(t["TOWN_QUIT"] = 1075)] = "TOWN_QUIT";
      t[(t["TOWN_NEWROLE_PUSH"] = 1076)] = "TOWN_NEWROLE_PUSH";
      t[(t["TOWN_ROLE_KEY_STATE_PUSH"] = 1077)] = "TOWN_ROLE_KEY_STATE_PUSH";
      t[(t["TOWN_ROLE_KEY_STATE"] = 1078)] = "TOWN_ROLE_KEY_STATE";
      t[(t["DAILY_TASK_LOAD"] = 1079)] = "DAILY_TASK_LOAD";
      t[(t["DAILY_TASK_GET"] = 1080)] = "DAILY_TASK_GET";
      t[(t["EQUIP_RANK_ADJUST"] = 1081)] = "EQUIP_RANK_ADJUST";
      t[(t["HERO_EQUIP_UPDATE"] = 1082)] = "HERO_EQUIP_UPDATE";
      t[(t["EQUIP_REPAIR_ALL"] = 1083)] = "EQUIP_REPAIR_ALL";
      t[(t["HELL_ENTER"] = 1084)] = "HELL_ENTER";
      t[(t["HELL_PASS"] = 1085)] = "HELL_PASS";
      t[(t["DUNGEON_TEST_ENTER"] = 1086)] = "DUNGEON_TEST_ENTER";
      t[(t["DUNGEON_TOWER_OF_UNLIMIT_ENTER"] = 1087)] =
        "DUNGEON_TOWER_OF_UNLIMIT_ENTER";
      t[(t["DUNGEON_LINE_ENTER"] = 1089)] = "DUNGEON_LINE_ENTER";
      t[(t["BAG_OPEN_SIMPLE_RANDOMPACKAGE"] = 1090)] =
        "BAG_OPEN_SIMPLE_RANDOMPACKAGE";
      t[(t["ROLE_DELETE"] = 1092)] = "ROLE_DELETE";
      t[(t["CHAT_PUSH"] = 1093)] = "CHAT_PUSH";
      t[(t["LEVEL_TASK_LOAD"] = 1095)] = "LEVEL_TASK_LOAD";
      t[(t["LEVEL_TASK_GET"] = 1096)] = "LEVEL_TASK_GET";
      t[(t["EQUIP_COLLET_LOAD"] = 1097)] = "EQUIP_COLLET_LOAD";
      t[(t["EQUIP_COLLET_TAKE"] = 1099)] = "EQUIP_COLLET_TAKE";
      t[(t["EQUIP_COLLET_WEAR"] = 1098)] = "EQUIP_COLLET_WEAR";
      t[(t["SKIN_COLLET_LOAD"] = 1100)] = "SKIN_COLLET_LOAD";
      t[(t["SKIN_COLLET_TAKE"] = 1102)] = "SKIN_COLLET_TAKE";
      t[(t["SKIN_COLLET_WEAR"] = 1101)] = "SKIN_COLLET_WEAR";
      t[(t["SHOP_LOAD"] = 1103)] = "SHOP_LOAD";
      t[(t["SHOP_PUSH"] = 1104)] = "SHOP_PUSH";
      t[(t["SKILL_PUSH"] = 1105)] = "SKILL_PUSH";
      t[(t["STORAGE_LOAD"] = 1107)] = "STORAGE_LOAD";
      t[(t["STORAGE_PUT"] = 1108)] = "STORAGE_PUT";
      t[(t["STORAGE_GET"] = 1109)] = "STORAGE_GET";
      t[(t["STORAGE_PUT_ALL"] = 1110)] = "STORAGE_PUT_ALL";
      t[(t["EMBLEM_COMPOSE"] = 1111)] = "EMBLEM_COMPOSE";
      t[(t["EMBLEM_UNCOMPOSE"] = 1112)] = "EMBLEM_UNCOMPOSE";
      t[(t["EMBLEM_WAER"] = 1113)] = "EMBLEM_WAER";
      t[(t["RANK_VIP_LOAD"] = 1115)] = "RANK_VIP_LOAD";
      t[(t["BAG_SWAP"] = 1e5)] = "BAG_SWAP";
      t[(t["BAG_ADD_EQUIP"] = 100001)] = "BAG_ADD_EQUIP";
      t[(t["DUNGEON_PATHGATE"] = 100002)] = "DUNGEON_PATHGATE";
    })(e.ProtoType || (e.ProtoType = {}));
  });
  t(lc);
  lc.ProtoType;
  var fc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var c = a(q);
    var s = a(uc);
    var p = a(st);
    var u = a(St);
    var d = a(_t);
    var h = a(it);
    var v = i(Zu);
    var l = a(tl);
    var f = a(el);
    var y = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.level = t.round = 0;
        t.inDungeon = false;
        return t;
      }
      t.prototype.isCity = function () {
        return this.currentScreen() == 1;
      };
      t.prototype.currentScreen = function () {
        if (this.inDungeon || this.monsterCount > 0) {
          return 2;
        } else if (this.id) {
          return 1;
        }
        return 0;
      };
      Object.defineProperty(t.prototype, "monsterCount", {
        get: function () {
          var t, e;
          return (e =
            (t = this.monsterList) === null || t === void 0
              ? void 0
              : t.length) !== null && e !== void 0
            ? e
            : 0;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.unitDeath = function (t) {
        var f = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_KILL_MONSTER,
            function (t, e, n) {
              var o = t.monsterRealID,
                r = t.list,
                i = t.exp;
              if (e == 200 && o) {
                if (!f.hasMonster(o)) {
                  XOF.log("移除不存在的怪物:" + o);
                  return;
                }
                f.delMonster(o);
                c.default.eventMgr.event(1013, [o]);
                if (i > 0) {
                  c.default.userData.home.text("获得" + i + "经验");
                }
                if (r && r.length) {
                  for (var a in r) {
                    var s = p.default.getItemData(r[a].itemID);
                    if (s) {
                      var u = s.name;
                      var l = s.quality;
                      c.default.userData.home.text(
                        "获得物品<" + l + ">" + u + "</" + l + ">x" + r[a].count
                      );
                      if (s.type == h.default.EQUIP) {
                        if (s.quality == 4 || s.quality == 6) {
                          c.default.eventMgr.event(1027, [s.quality]);
                        }
                      }
                    }
                  }
                }
                if (f.isBoss()) {
                  if (f.isPassedLevel()) {
                    if (f.dungeonId == v.default.Tower) {
                      f.cleanLevel();
                    } else if (
                      d.default.getDungeonTypeByDungeonId(f.dungeonId) ==
                      v.DungeonType.Hell
                    ) {
                      c.default.eventMgr.event(1029);
                    } else if (f.dungeonId == v.default.TowerOfUltimate) {
                      f.cleanHell();
                    } else {
                      f.cleanHell();
                    }
                  }
                } else {
                  if (
                    f.dungeonId == v.default.Tower ||
                    c.default.userData.map.dungeonId ==
                      v.default.TowerOfUltimate
                  ) {
                    if (c.default.userData.map.monsterCount <= 0) {
                      c.default.userData.map.nextRound();
                    }
                  }
                }
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_KILL_MONSTER, {
            monsterRealID: parseInt(t),
          });
      };
      t.prototype.updateTower = function (t) {
        if (t === void 0) {
          t = false;
        }
        var e = this.level;
        var n = this.round;
        var o;
        if (this.dungeonId == v.default.Tower) {
          o = d.default.getTowerData(e, n);
        } else if (
          d.default.getDungeonTypeByDungeonId(this.dungeonId) ==
          v.DungeonType.Hell
        ) {
          o = l.default.getTowerData(e, n);
        } else if (this.dungeonId == v.default.Test) {
          o = 1;
        } else if (this.dungeonId == v.default.TowerOfUltimate) {
          o = f.default.getTowerData(e, n);
        } else if (this.id) {
          o = d.default.getMapByCityandTown(this.dungeonId, this.round);
        }
        if (o) {
          this.inDungeon = true;
          if (t) {
            c.default.eventMgr.event(1017);
          } else {
            c.default.eventMgr.event(1025);
          }
        } else {
          XOF.log("异常的地图层数" + e + " " + n);
        }
      };
      t.prototype.enterMap = function (t, e, n, o) {
        var l = this;
        return new Promise(function (s, u) {
          c.default.userData.city.setRegisterCityPush(true);
          c.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.TOWN_ENTER,
              function (t, e, n) {
                var o = t.id,
                  r = t.x,
                  i = t.y,
                  a = t.direction;
                if (e == 200) {
                  if (o) {
                    if (l.id == o) return;
                    l.id = o;
                    c.default.userData.city.removeRoles();
                    c.default.eventMgr.event(1018, [o, r, i, a]);
                    c.default.userData.city.loadRoles();
                    s(undefined);
                  }
                } else if (e == 360);
                else {
                  c.default.comm.msr(e);
                  u();
                }
              }
            )
            .send(lc.ProtoType.TOWN_ENTER, {
              id: t,
              x: e,
              y: n,
              direction: o,
              frame: 0,
            });
        });
      };
      t.prototype.cityReturn = function () {
        var o = this;
        c.default.proxy
          .registerReceiveEventOnce(lc.ProtoType.TOWN_QUIT, function (t, e, n) {
            if (e == 200) {
              c.default.userData.city.setRegisterCityPush(false);
              if (o.isCity()) {
                c.default.userData.city.removeRoles();
                o.dungeonId = o.id = undefined;
                c.default.eventMgr.event(1014);
              }
            } else {
              c.default.comm.msr(e);
            }
          })
          .send(lc.ProtoType.TOWN_QUIT, {});
      };
      t.prototype.enterTower = function (t) {
        var u = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_ENTER,
            function (t, e, n) {
              var o = t.level,
                r = t.round,
                i = t.type,
                a = t.list,
                s = t.object;
              if (e == 200) {
                if (o >= u.level) {
                  u.level = o;
                  u.round = r;
                  u.monsterList = a;
                  u.rewardList = undefined;
                  u.itemSlots = s;
                  u.id = u.dungeonId = i;
                  u.updateTower(true);
                }
              } else {
                c.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_ENTER, {
            level: t,
            type: v.default.Tower,
          });
      };
      t.prototype.enterTest = function () {
        var i = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_TEST_ENTER,
            function (t, e, n) {
              var o = t.type,
                r = t.object;
              if (e == 200) {
                i.rewardList = undefined;
                i.id = i.dungeonId = o;
                i.level = i.round = 1;
                i.itemSlots = r;
                i.updateTower(true);
              } else {
                c.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_TEST_ENTER, { type: v.default.Test });
      };
      t.prototype.enterTowerOfUnlimited = function () {
        var u = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_TOWER_OF_UNLIMIT_ENTER,
            function (t, e, n) {
              var o = t.type,
                r = t.object,
                i = t.list,
                a = t.level,
                s = t.round;
              if (e == 200) {
                u.rewardList = undefined;
                u.id = u.dungeonId = o;
                u.monsterList = i;
                u.level = a;
                u.round = s;
                u.itemSlots = r;
                u.updateTower(true);
              } else {
                c.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_TOWER_OF_UNLIMIT_ENTER, {
            type: v.default.TowerOfUltimate,
          });
      };
      t.prototype.enterDungeonLine = function (t) {
        var f = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_LINE_ENTER,
            function (t, e, n) {
              var o = t.type,
                r = t.object,
                i = t.startmap,
                a = t.bossmap,
                s = t.level,
                u = t.round,
                l = t.list;
              if (e == 200) {
                f.rewardList = undefined;
                f.id = f.dungeonId = o;
                f.level = s;
                f.round = u;
                f.itemSlots = r;
                f.dungeonStart = i;
                f.dungeonCurPos = i;
                f.dungeonBoss = a;
                f.monsterList = l;
                f.dungeonEntered = [f.dungeonCurPos[0], f.dungeonCurPos[1], u];
                f.lineIndexs = [u];
                f.updateTower(true);
              } else {
                c.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_LINE_ENTER, { id: t });
      };
      t.prototype.nextRound = function () {
        var a = this;
        if (this.monsterCount > 0) {
          XOF.log("怪物数量异常" + this.monsterCount);
          return;
        }
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_NEXT_ROUND,
            function (t, e, n) {
              var o = t.level,
                r = t.round,
                i = t.list;
              if (e == 200) {
                if (r >= a.round ? o >= a.level : o > a.level) {
                  a.level = o;
                  a.round = r;
                  a.monsterList = i;
                  a.updateTower(false);
                }
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_NEXT_ROUND, {});
      };
      t.prototype.dungeonLineNextRound = function (l) {
        var f = this;
        if (this.monsterCount > 0) {
          XOF.log("怪物数量异常" + this.monsterCount);
          return;
        }
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_NEXT_ROUND,
            function (t, e, n) {
              var o = t.level,
                r = t.round,
                i = t.list;
              if (e == 200) {
                if (r >= f.round ? o >= f.level : o > f.level) {
                  f.level = o;
                  f.lineIndexs.push(r);
                  f.round = r;
                  f.monsterList = i;
                  f.direction = l;
                  f.lastId = f.id;
                  var a = d.default.dungeonPathgateBy(
                      f.dungeonCurPos[0],
                      f.dungeonCurPos[1],
                      l
                    ),
                    s = a[0],
                    u = a[1];
                  f.dungeonCurPos = [s, u];
                  f.dungeonEntered.push(s, u, r);
                  f.updateTower(false);
                }
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_NEXT_ROUND, {});
      };
      t.prototype.hasMonster = function (t) {
        for (var e = 0; e < this.monsterList.length; e++) {
          var n = this.monsterList[e];
          if (n.monsterRealID == t) {
            return true;
          }
        }
        return false;
      };
      t.prototype.delMonster = function (t) {
        for (var e = 0; e < this.monsterList.length; e++) {
          var n = this.monsterList[e];
          if (n.monsterRealID == t) {
            this.monsterList.splice(e, 1);
            break;
          }
        }
      };
      t.prototype.reward = function () {
        var r = this;
        return new Promise(function (o) {
          c.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.DUNGEON_PASS_REWARD,
              function (t, e, n) {
                if (e == 200) {
                  r.rewardList = t.list;
                  o(true);
                } else {
                  c.default.comm.msr(e);
                  o(false);
                }
              }
            )
            .send(lc.ProtoType.DUNGEON_PASS_REWARD, {});
        });
      };
      t.prototype.cleanLevel = function () {
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_PASS,
            function (t, e, n) {
              if (e == 200) {
                c.default.eventMgr.event(1015);
              } else {
                c.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_PASS, {});
      };
      t.prototype.cleanHell = function () {
        c.default.proxy
          .registerReceiveEventOnce(lc.ProtoType.HELL_PASS, function (t, e, n) {
            if (e == 200) {
              c.default.eventMgr.event(1015);
            } else {
              c.default.comm.msr(e);
            }
          })
          .send(lc.ProtoType.HELL_PASS, {});
      };
      t.prototype.isBoss = function () {
        var t;
        if (this.dungeonId == v.default.Tower) {
          return d.default.getTowerRoundCount(this.level) == this.round;
        } else if (
          d.default.getDungeonTypeByDungeonId(this.dungeonId) ==
          v.DungeonType.Hell
        ) {
          return l.default.getTowerRoundCount(this.level) == this.round;
        } else if (this.dungeonId == v.default.TowerOfUltimate) {
          return f.default.getTowerRoundCount(this.level) == this.round;
        } else if (
          (t =
            this === null || this === void 0 ? void 0 : this.dungeonCurPos) ===
            null || t === void 0
            ? void 0
            : t.length
        ) {
          return (
            this.dungeonCurPos[0] == this.dungeonBoss[0] &&
            this.dungeonCurPos[1] == this.dungeonBoss[1]
          );
        } else {
          return false;
        }
      };
      t.prototype.isPassedLevel = function () {
        if (
          this.dungeonId == v.default.Tower ||
          this.dungeonId == v.default.TowerOfUltimate
        ) {
          if (this.monsterCount == 0 && this.isBoss()) {
            return true;
          }
        } else if (
          d.default.getDungeonTypeByDungeonId(this.dungeonId) ==
          v.DungeonType.Hell
        ) {
          if (this.monsterCount == 0 && this.isBoss()) {
            return true;
          }
        } else {
          if (this.monsterCount == 0 && this.isBoss()) {
            return true;
          }
        }
        return false;
      };
      t.prototype.getBossCount = function () {
        var t = 0;
        for (var e = 0, n = this.monsterList; e < n.length; e++) {
          var o = n[e];
          if (o.class == u.default.BOSS) {
            t++;
          }
        }
        return t;
      };
      t.prototype.enterHell = function (t, s) {
        var u = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.HELL_ENTER,
            function (t, e, n) {
              var o = t.list,
                r = t.type,
                i = t.round,
                a = t.object;
              if (e == 200) {
                u.level = s;
                u.round = i;
                u.monsterList = o;
                u.rewardList = undefined;
                u.itemSlots = a;
                u.id = u.dungeonId = r;
                u.inDungeon = true;
                c.default.eventMgr.event(1017);
              } else {
                c.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.HELL_ENTER, { type: t, level: s });
      };
      t.prototype.dungeonReturn = function () {
        var s = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_RETURN,
            function (t, e, n) {
              if (e == 200) {
                delete s.monsterList;
                delete s.rewardList;
                delete s.dungeonId;
                delete s.id;
                delete s.dungeonCurPos;
                delete s.dungeonEntered;
                delete s.dungeonMaps;
                delete s.dungeonBoss;
                delete s.lastId;
                delete s.direction;
                delete s.lineIndexs;
                s.inDungeon = false;
                s.level = s.round = 0;
                var o = t.id,
                  r = t.direction,
                  i = t.x,
                  a = t.y;
                if (o) {
                  s.id = o;
                }
                c.default.eventMgr.event(1014, [o, i, a, r]);
              } else {
                c.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_RETURN, {});
      };
      t.prototype.hellDeath = function () {
        var u = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_HELL_DEATH,
            function (t, e, n) {
              var o = t.list;
              if (e == 200) {
                if (o && o.length) {
                  for (var r in o) {
                    var i = p.default.getItemData(o[r].itemID);
                    if (i) {
                      var a = i.name;
                      var s = i.quality;
                      c.default.userData.home.text(
                        "获得物品<" + s + ">" + a + "</" + s + ">x" + o[r].count
                      );
                      if (i.type == h.default.EQUIP) {
                        if (i.quality == 4 || i.quality == 6) {
                          c.default.eventMgr.event(1027, [i.quality]);
                        }
                      }
                    }
                  }
                }
                u.cleanHell();
              } else {
                c.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_HELL_DEATH, {});
      };
      t.prototype.pathgateTo = function (t) {
        var e = d.default.dungeonPathgateBy(
            this.dungeonCurPos[0],
            this.dungeonCurPos[1],
            t
          ),
          n = e[0],
          o = e[1];
        if (this.isEnteredDungeon(n, o)) {
          this.lastId = this.id;
          this.direction = t;
          this.dungeonCurPos = [n, o];
          this.updateTower(false);
        } else {
          this.dungeonLineNextRound(t);
        }
      };
      t.prototype.isEnteredDungeon = function (t, e) {
        var n = this.dungeonEntered;
        for (var o = 0, r = 3; o < n.length - (r - 1); o += r) {
          if (t == n[o] && e == n[o + 1]) return true;
        }
        return false;
      };
      t.prototype.getDungeonLineRoundByXY = function (t, e) {
        var n = this.dungeonEntered;
        for (var o = 0, r = 3; o < n.length - (r - 1); o += r) {
          if (t == n[o] && e == n[o + 1]) return n[o + 2];
        }
      };
      return t;
    })(s.default);
    e.default = y;
  });
  t(fc);
  var cc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(uc);
    var i = o(dt);
    var s = o(q);
    var u = o(at);
    var a = (function (t) {
      n(e, t);
      function e() {
        var e = t.call(this) || this;
        e.lv = 1;
        e.exp = 0;
        e.job = "swordman";
        e.vitality = 0;
        e.wears = {};
        e.skins = {};
        s.default.proxy.registerReceiveEvent(
          lc.ProtoType.HERO_EQUIP_UPDATE,
          function (t) {
            e.updateWearEquips(t.object, true);
          }
        );
        return e;
      }
      e.prototype.setData = function (t) {
        console.log("加载角色数据", t);
        this.lv = t.level;
        this.exp = t.experience;
        this.name = t.name;
        this.bloodTower = t.bloodTower;
        this.vitality = t.vitality;
        this.equipCapacity = t.equipCapacity;
        if (t.job != undefined) this.job = t.job;
        s.default.userData.bag.coin = t.coin;
        s.default.userData.bag.gold = t.money;
      };
      e.prototype.updateWearEquips = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        var n = [
          "shoulder",
          "jacket",
          "trousers",
          "belt",
          "shoes",
          "arms",
          "ring",
          "necklace",
          "bracelet",
          "designation",
        ];
        var o = [
          u.default.SHOULDER,
          u.default.COAT,
          u.default.PANTS,
          u.default.BELT,
          u.default.SHOES,
          u.default.WEAPON,
          u.default.RING,
          u.default.AMULET,
          u.default.WRIST,
          u.default.TITLE,
        ];
        for (var r = 0; r < n.length; r++) {
          var i = n[r];
          var a = t[i];
          if (a) {
            this.wears[o[r]] = a;
          } else if (a === null) {
            delete this.wears[o[r]];
          }
        }
        if (e) s.default.eventMgr.dispatch(1036, 1037);
      };
      e.prototype.get = function (t) {
        for (var e in this.wears) {
          if (this.wears[e].id == t) {
            return this.wears[e];
          }
        }
      };
      e.prototype.loadEquips = function () {
        var r = this;
        return new Promise(function (n, o) {
          s.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.HERO_EQUIP_LOAD,
              function (t, e) {
                if (e == 200) {
                  r.updateWearEquips(t.object);
                  console.log("加载穿戴装备数据", t);
                  n(undefined);
                } else {
                  o();
                }
              }
            )
            .send(lc.ProtoType.HERO_EQUIP_LOAD, {});
        });
      };
      e.prototype.updateWearSkins = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        var n = [
          "hat",
          "jacket",
          "trousers",
          "belt",
          "shoes",
          "arms",
          "hair",
          "face",
          "chest",
          "skin",
          "aura",
        ];
        var o = [
          at.SkinClass.HAT,
          at.SkinClass.COAT,
          at.SkinClass.PANTS,
          at.SkinClass.BELT,
          at.SkinClass.SHOES,
          at.SkinClass.WEAPON,
          at.SkinClass.HAIR,
          at.SkinClass.FACE,
          at.SkinClass.CHEST,
          at.SkinClass.BODY,
          at.SkinClass.AURA,
        ];
        for (var r = 0; r < n.length; r++) {
          var i = n[r];
          var a = t[i];
          if (a) {
            this.skins[o[r]] = a;
          } else if (a === null) {
            delete this.skins[o[r]];
          }
        }
        if (e) s.default.eventMgr.dispatch(1036, 1037);
      };
      e.prototype.loadSkins = function () {
        var r = this;
        return new Promise(function (n, o) {
          s.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.HERO_SKIN_LOAD,
              function (t, e) {
                if (e == 200) {
                  r.updateWearSkins(t.object);
                  console.log("加载穿戴装扮数据", t);
                  n(undefined);
                } else {
                  o();
                }
              }
            )
            .send(lc.ProtoType.HERO_SKIN_LOAD, {});
        });
      };
      Object.defineProperty(e.prototype, "hp", {
        get: function () {
          return this.data.hp;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(e.prototype, "mp", {
        get: function () {
          return this.data.mp;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(e.prototype, "maxExp", {
        get: function () {
          if (!i.default.conf.role.level.swordman[this.lv + 1]) {
            return -1;
          }
          return i.default.conf.role.level.swordman[this.lv].exp;
        },
        enumerable: false,
        configurable: true,
      });
      e.prototype.getEquipByEquipClass = function (t) {
        return this.wears[t];
      };
      e.prototype.getSkinBySkinClass = function (t) {
        return this.skins[t];
      };
      e.prototype.isEquipWear = function (t) {
        for (var e in this.wears) {
          if (this.wears[e].id == t) {
            return true;
          }
        }
        return false;
      };
      e.prototype.isSkinWear = function (t) {
        for (var e in this.skins) {
          if (this.skins[e].id == t) {
            return true;
          }
        }
        return false;
      };
      e.prototype.getEquipCount = function () {
        var t = 0;
        for (var e in this.wears) {
          if (this.wears[e]) t += 1;
        }
        return t;
      };
      e.prototype.rename = function (t) {
        return new Promise(function (n) {
          s.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.ROLE_RENAME,
              function (t, e) {
                if (e == 200) {
                  s.default.comm.tip("修改成功");
                  n(true);
                } else {
                  s.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.ROLE_RENAME, { name: t });
        });
      };
      return e;
    })(r.default);
    e.default = a;
  });
  t(cc);
  var pc = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(uc);
    var i = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.preload = true;
        return e;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(pc);
  var dc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(uc);
    var s = o(q);
    var u = o(st);
    var l = o(V);
    var i = (function (t) {
      n(e, t);
      function e() {
        var r = t.call(this) || this;
        r.items = [];
        r.coin = 0;
        r.gold = 0;
        r.cd = {};
        s.default.proxy.registerReceiveEvent(
          lc.ProtoType.ITEM_UPDATE_PUSH,
          function (t, e) {
            for (var n = 0; n < t.list.length; n++) {
              var o = t.list[n];
              r.updateItem(o, n == t.list.length - 1);
            }
          }
        );
        s.default.proxy.registerReceiveEvent(
          lc.ProtoType.RESOURCE_UPDATE_PUSH,
          function (t, e) {
            var n;
            var o = t.object;
            s.default.userData.bag.coin = o.coin;
            s.default.userData.bag.gold = o.money;
            s.default.userData.hero.exp = o.experience;
            s.default.userData.hero.lv = o.level;
            s.default.userData.hero.vitality = o.vitality;
            s.default.userData.hero.bloodTower = o.bloodTower;
            if (o.equipCapacity != undefined)
              s.default.userData.hero.equipCapacity = o.equipCapacity;
            s.default.userData.hero.name =
              (n = o === null || o === void 0 ? void 0 : o.name) !== null &&
              n !== void 0
                ? n
                : s.default.userData.hero.name;
            s.default.eventMgr.event(1032);
          }
        );
        return r;
      }
      e.prototype.load = function () {
        var a = this;
        return new Promise(function (r, i) {
          s.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.BAG_LOAD, function (t, e) {
              if (e == 200) {
                console.log("加载背包数据", t);
                for (var n = 0; n < t.list.length; n++) {
                  var o = t.list[n];
                  a.updateItem(o, false);
                }
                r(undefined);
              } else {
                i();
              }
            })
            .send(lc.ProtoType.BAG_LOAD, {});
        });
      };
      e.prototype.itemOpenPackage = function (t, e) {
        if (e === void 0) {
          e = 1;
        }
        s.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.BAG_OPEN_PACKAGE,
            function (t, e) {
              if (e == 200) {
                s.default.comm.tip("开启礼包成功");
              } else {
                s.default.eventMgr.event(1055, [l.default.sr(e)]);
              }
            }
          )
          .send(lc.ProtoType.BAG_OPEN_PACKAGE, { itemID: t + "", count: e });
      };
      e.prototype.itemOpenSimpleRandomPackage = function (t, e) {
        if (e === void 0) {
          e = 1;
        }
        s.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.BAG_OPEN_SIMPLE_RANDOMPACKAGE,
            function (t, e) {
              if (e == 200) {
                s.default.comm.tip("开启礼包成功");
              } else {
                s.default.eventMgr.event(1055, [l.default.sr(e)]);
              }
            }
          )
          .send(lc.ProtoType.BAG_OPEN_SIMPLE_RANDOMPACKAGE, {
            itemID: t + "",
            count: e,
          });
      };
      e.prototype.itemOpenRandomPackage = function (t, e) {
        if (e === void 0) {
          e = 1;
        }
        s.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.BAG_OPEN_RANDOM_PACKAGE,
            function (t, e) {
              if (e == 200) {
                var n = t.list;
                for (var o in n) {
                  var r = u.default.getItemData(n[o].itemID);
                  if (r) {
                    var i = r.name;
                    var a = r.quality;
                    s.default.comm.tip(
                      "获得物品<" + a + ">" + i + "</" + a + ">x" + n[o].count
                    );
                  }
                }
                s.default.comm.tip("开启礼包成功");
              } else {
                s.default.eventMgr.event(1055, [l.default.sr(e)]);
              }
            }
          )
          .send(lc.ProtoType.BAG_OPEN_RANDOM_PACKAGE, {
            itemID: t + "",
            count: e,
          });
      };
      e.prototype.itemCityUse = function (t, e) {
        if (e === void 0) {
          e = 1;
        }
        s.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.BAG_USE_ITEM4,
            function (t, e) {
              if (e == 200) {
                s.default.comm.tip("使用成功");
              } else {
                s.default.eventMgr.event(1055, [l.default.sr(e)]);
              }
            }
          )
          .send(lc.ProtoType.BAG_USE_ITEM4, { itemID: t + "", count: e });
      };
      e.prototype.itemSell = function (e, o) {
        return new Promise(function (n, t) {
          s.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.BAG_SELL, function (t, e) {
              if (e == 200) {
                s.default.eventMgr.event(1055, [l.default.tr(167)]);
                n(true);
              } else {
                s.default.eventMgr.event(1055, [l.default.sr(e)]);
                n(false);
              }
            })
            .send(lc.ProtoType.BAG_SELL, { itemID: e, count: o });
        });
      };
      e.prototype.itemDestroy = function (e, o) {
        return new Promise(function (n, t) {
          s.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.BAG_DESTROY,
              function (t, e) {
                if (e == 200) {
                  n(true);
                  s.default.eventMgr.event(1055, [l.default.tr(169)]);
                } else {
                  s.default.eventMgr.event(1055, [l.default.sr(e)]);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.BAG_DESTROY, { itemID: e, count: o });
        });
      };
      e.prototype.itemOpenSelectPackage = function (t, e, n) {
        if (n === void 0) {
          n = 1;
        }
        s.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.BAG_OPEN_SELECT_PACKAGE,
            function (t, e) {
              if (e == 200) {
                s.default.comm.tip("开启礼包成功");
              } else {
                s.default.eventMgr.event(1055, [l.default.sr(e)]);
              }
            }
          )
          .send(lc.ProtoType.BAG_OPEN_SELECT_PACKAGE, {
            itemID: t + "",
            count: n,
            choiceItemID: e + "",
          });
      };
      e.prototype.updateItem = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        var n = t.itemID,
          o = t.count;
        var r = false;
        for (var i in this.items) {
          var a = this.items[i];
          if (a.itemID == n) {
            r = true;
            a.count = o;
            if (a.count <= 0) {
              this.items.splice(parseInt(i), 1);
              break;
            }
          }
        }
        if (!r) {
          this.items.push({ itemID: n, count: o });
        }
        if (e) s.default.eventMgr.event(1032);
      };
      e.prototype.isFull = function (t, e) {
        return true;
      };
      e.prototype.getBagAmount = function () {
        var t = 0;
        for (var e = 0; e < this.getBagAmountMax(); e++) {
          var n = this.items[1 + e];
          if (n && n.itemID && n.count) {
            t += 1;
          }
        }
        return t;
      };
      e.prototype.getBagAmountMax = function () {
        return s.default.userData.hero.equipCapacity;
      };
      e.prototype.getItemCount = function (t) {
        var e = 0;
        if (t == u.default.resourceIds.coin) {
          e = this.coin;
        } else if (t == u.default.resourceIds.gold) {
          e = this.gold;
        } else {
          for (var n in this.items) {
            var o = this.items[n];
            if (o.itemID == t) e += o.count;
          }
        }
        return e;
      };
      e.prototype.getItemCountdown = function (t) {
        var e = this.cd[t];
        if (e) {
          var n = u.default.getItemData(t);
          if (n.cd > 0) {
            var o = s.default.userData.home.now() - e;
            return Math.max(n.cd - o, 0);
          }
        }
        return 0;
      };
      e.prototype.canConsume = function (t) {
        for (var e in t) {
          if (t[e] > this.getItemCount(parseInt(e))) {
            return false;
          }
        }
        return true;
      };
      e.prototype.emblumCompose = function (t, e, n, o, r) {
        s.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.EMBLEM_COMPOSE,
            function (t, e) {
              var n;
              s.default.eventMgr.event(1075, [
                (n = t === null || t === void 0 ? void 0 : t.object) === null ||
                n === void 0
                  ? void 0
                  : n.itemID,
              ]);
              if (e == 200) {
                s.default.comm.mtr(289);
              } else {
                s.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.EMBLEM_COMPOSE, {
            item1: t,
            item2: e,
            item3: n,
            item4: o,
            item5: r,
          });
      };
      e.prototype.emblumUnCompose = function (t) {
        s.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.EMBLEM_UNCOMPOSE,
            function (t, e) {
              if (e == 200) {
                s.default.comm.mtr(291);
              } else {
                s.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.EMBLEM_UNCOMPOSE, { itemID: t });
      };
      e.prototype.emblumWear = function (t, e, n) {
        s.default.proxy
          .registerReceiveEventOnce(lc.ProtoType.EMBLEM_WAER, function (t, e) {
            if (e == 200) {
              s.default.userData.equip.updateEquip(t.object, true);
              s.default.comm.mtr(305);
            } else {
              s.default.comm.msr(e);
            }
          })
          .send(lc.ProtoType.EMBLEM_WAER, {
            id: t,
            leftBadge: e,
            rightBadge: n,
          });
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(dc);
  var hc = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(uc);
    var i = n(q);
    var a = n(V);
    var s = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.bornTime = t.home.bornTime;
        e.onlineTime = t.home.onlineTime;
        e.wordTime = t.home.wordTime;
        e.flags = t.home.flags;
        return e;
      }
      t.prototype.notify = function (t) {
        i.default.eventMgr.event(1038);
      };
      t.prototype.tips = function (t) {
        i.default.eventMgr.event(1054, [t]);
      };
      t.prototype.text = function (t) {
        i.default.eventMgr.event(1056, [t]);
      };
      t.prototype.getFlag = function (t) {
        return this.flags[t];
      };
      t.prototype.setFlag = function (t) {
        return this.flags[t];
      };
      t.prototype.record = function () {
        this.startTime = XOF.now();
        this.online = true;
      };
      t.prototype.now = function () {
        if (this.online) {
          return this.wordTime + this.timestamp;
        }
        return -1;
      };
      Object.defineProperty(t.prototype, "timestamp", {
        get: function () {
          return XOF.now() - this.startTime;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.cdkExchange = function (t) {
        return new Promise(function (n) {
          i.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.CDK_EXCHANGE,
              function (t, e) {
                if (e == 200) {
                  i.default.comm.mtr(196);
                  n(true);
                } else {
                  i.default.eventMgr.event(1055, [a.default.sr(e)]);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.CDK_EXCHANGE, { code: t });
        });
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(hc);
  var vc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(uc);
    var s = o(q);
    var i = o(V);
    var a = (function (t) {
      n(e, t);
      function e() {
        var r = t.call(this) || this;
        r.buys = {};
        s.default.proxy.registerReceiveEvent(
          lc.ProtoType.SHOP_BUY,
          function (t, e) {
            if (e == 200) {
              s.default.eventMgr.event(1055, [i.default.tr(168)]);
              s.default.eventMgr.event(1032);
            } else {
              s.default.eventMgr.event(1055, [i.default.sr(e)]);
            }
          }
        );
        s.default.proxy.registerReceiveEvent(
          lc.ProtoType.SHOP_PUSH,
          function (t, e) {
            for (var n in t.list) {
              var o = t.list[n];
              r.buys[o.shopID] = o.count;
            }
            s.default.eventMgr.event(1053);
          }
        );
        return r;
      }
      e.prototype.load = function () {
        var a = this;
        return new Promise(function (r, i) {
          s.default.proxy
            .registerReceiveEvent(lc.ProtoType.SHOP_LOAD, function (t, e) {
              if (e == 200) {
                XOF.log("加载商店数据");
                for (var n in t.list) {
                  var o = t.list[n];
                  a.buys[o.shopID] = o.count;
                }
                r(undefined);
              } else {
                i(e);
              }
            })
            .send(lc.ProtoType.SHOP_LOAD, {});
        });
      };
      e.prototype.buy = function (t, e) {
        if (e === void 0) {
          e = 1;
        }
        s.default.proxy.send(lc.ProtoType.SHOP_BUY, { id: t, count: e });
      };
      e.prototype.getBuyCount = function (t, e) {
        var n, o;
        return (o =
          (n = this.buys) === null || n === void 0 ? void 0 : n[e]) !== null &&
          o !== void 0
          ? o
          : 0;
      };
      return e;
    })(r.default);
    e.default = a;
  });
  t(vc);
  var yc = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(uc);
    var i = (function (n) {
      o(t, n);
      function t(t) {
        var e = n.call(this) || this;
        e.list = t.quest.list;
        e.finish = t.quest.finish;
        return e;
      }
      t.prototype.isFinish = function (t) {
        return this.finish.indexOf(t) >= 0;
      };
      t.prototype.isComplete = function (t) {
        return false;
      };
      t.prototype.getProgress = function (t) {
        if (this.isFinish(t) || !this.list[t]) {
          return -1;
        }
        if (this.isComplete(t)) {
          return 1;
        }
        return 0;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(yc);
  var _c = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(uc);
    var i = o(q);
    var a = o(V);
    var s = o(dt);
    var u = (function (t) {
      n(e, t);
      function e() {
        var e = t.call(this) || this;
        e.skills = [];
        e.locks = [];
        e.slots = {};
        i.default.proxy.registerReceiveEvent(
          lc.ProtoType.SKILL_PUSH,
          function (t) {
            e.skills = t.list;
            e.initSlots();
          }
        );
        return e;
      }
      e.prototype.initSlots = function () {
        var t = s.default.conf.skills.slots[i.default.userData.hero.job];
        for (var e in t) {
          if (e == "id") continue;
          this.slots[e] = { id: t[e] };
        }
      };
      e.prototype.load = function () {
        var r = this;
        return new Promise(function (n, o) {
          i.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.SKILL_LOAD, function (t, e) {
              if (e == 200) {
                console.log("加载技能数据", t);
                r.skills = t.list;
                r.initSlots();
                n(undefined);
              } else {
                o();
              }
            })
            .send(lc.ProtoType.SKILL_LOAD, {});
        });
      };
      e.prototype.upgrade = function (t) {
        var r = this;
        i.default.proxy
          .registerReceiveEventOnce(lc.ProtoType.SKILL_UP, function (t, e) {
            if (e == 200) {
              var n = t.level,
                o = t.skillsID;
              r.updateSkill(o, n);
              i.default.eventMgr.event(1035);
              i.default.eventMgr.event(1055, [a.default.tr(178)]);
            } else {
              i.default.eventMgr.event(1055, [a.default.sr(e)]);
            }
          })
          .send(lc.ProtoType.SKILL_UP, { skillsID: t });
      };
      e.prototype.lock = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        var n = this.isLock(t);
        if (e) {
          if (!n) this.locks.push(t);
        } else {
          if (n) {
            var o = this.locks.indexOf(t);
            if (o >= 0) this.locks.splice(o, 1);
          }
        }
        i.default.eventMgr.event(1034);
      };
      e.prototype.isLock = function (t) {
        return this.locks.indexOf(t) >= 0;
      };
      e.prototype.getSkillLv = function (t) {
        for (var e = 0, n = this.skills; e < n.length; e++) {
          var o = n[e];
          if (o.skillsID == t) {
            return o.level;
          }
        }
        return 0;
      };
      e.prototype.isLearnSkill = function (t) {
        return true;
      };
      e.prototype.updateSkill = function (t, e) {
        var n = false;
        for (var o = 0, r = this.skills; o < r.length; o++) {
          var i = r[o];
          if (i.skillsID == t) {
            i.level = e;
            n = true;
            break;
          }
        }
        if (!n) {
          this.skills.push({ skillsID: t, level: e });
        }
      };
      return e;
    })(r.default);
    e.default = u;
  });
  t(_c);
  var mc = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.getToken = "user/getToken.do";
      t.logout = "user/logout.do";
      t.login = "user/login.do";
      t.create = "user/create.do";
      t.updatePassword = "user/updatePassword.do";
      t.load = "game/load.do";
      t.getIDEntity = "user/getIDEntity.do";
      return t;
    })();
    e.default = n;
  });
  t(mc);
  var gc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var r =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var i =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              o(e, t, n);
        r(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var u = a(V);
    var h = a(q);
    var s = a(uc);
    var l = a(K);
    var f = a(mc);
    var c = a(Y);
    var v = a(k);
    var y = i(at);
    var p = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.loginClickTime = 0;
        h.default.proxy.registerReceiveEvent(
          lc.ProtoType.GAME_OFFLINE,
          t.onGameOffLine,
          t
        );
        return t;
      }
      t.prototype.onGameOffLine = function (t, e) {
        h.default.eventMgr.event(l.default.GAME_OFFLINE, [e]);
      };
      t.prototype.getToken = function (t) {
        return new Promise(function (n, o) {
          h.default.proxy
            .registerReceiveEventOnce(f.default.getToken, function (t, e) {
              if (e == 200) {
                n(t.token);
              } else {
                o(e);
              }
            })
            .get(f.default.getToken, { userName: t });
        });
      };
      t.prototype.login = function (i, a) {
        var t = this;
        return new Promise(function (o, r) {
          t.getToken(i)
            .then(function (t) {
              var e = new JSEncrypt();
              e.setPublicKey(t);
              var n = e.encrypt(a);
              h.default.proxy
                .registerReceiveEventOnce(f.default.login, function (t, e) {
                  if (e == 200) {
                    o(t.loginGameKey);
                  } else {
                    r(e);
                  }
                })
                .post(f.default.login, { userName: i, passWord: n });
            })
            .catch(function (t) {
              r(t);
            });
        });
      };
      t.prototype.loginGame = function (t, n) {
        var o = this;
        return new Promise(function (e) {
          o.login(t, n)
            .then(function (t) {
              o.connect(t).then(function (t) {
                return e(t);
              });
            })
            .catch(function (t) {
              e(false);
              if (t == 109) {
                h.default.eventMgr.event(l.default.LOGIN_ANOTHER_OFFLINE);
              } else if (t == 226) {
                o.loginClickTime = XOF.now() + 5e3;
                h.default.comm.mtr(315);
                h.default.eventMgr.event(1077);
              } else {
                h.default.eventMgr.event(1055, [u.default.sr(t)]);
              }
            });
        });
      };
      t.prototype.connect = function (t) {
        return new Promise(function (n) {
          h.default.proxy.connect();
          h.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.GAME_LOGIN, function (t, e) {
              if (e == 200) {
                n(true);
                h.default.eventMgr.event(l.default.STEP2_LOGIN_SERVER_ROLE);
              } else {
                h.default.eventMgr.event(1055, [u.default.sr(e)]);
                n(false);
              }
            })
            .send(lc.ProtoType.GAME_LOGIN, { loginGameKey: t });
        });
      };
      t.prototype.serversLoad = function () {
        return new Promise(function (o, r) {
          h.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.LOAD_SERVERS,
              function (t, e) {
                var n;
                if (
                  e == 200 &&
                  ((n = t === null || t === void 0 ? void 0 : t.list) ===
                    null || n === void 0
                    ? void 0
                    : n.length)
                ) {
                  o(t.list);
                } else {
                  r(Df.Login_Error.NOSERVER);
                }
              }
            )
            .send(lc.ProtoType.LOAD_SERVERS, {});
        });
      };
      t.prototype.rolesLoad = function (t) {
        var d = this;
        return new Promise(function (c, p) {
          h.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.LOAD_ROLES, function (t, e) {
              var n;
              if (e == 200) {
                if (
                  (n = t.roleList) === null || n === void 0 ? void 0 : n.length
                ) {
                  d.serverId = t.regionID;
                  var o = [
                    "shoulder",
                    "jacket",
                    "trousers",
                    "belt",
                    "shoes",
                    "arms",
                    "ring",
                    "necklace",
                    "bracelet",
                    "designation",
                  ];
                  var r = [
                    y.default.SHOULDER,
                    y.default.COAT,
                    y.default.PANTS,
                    y.default.BELT,
                    y.default.SHOES,
                    y.default.WEAPON,
                    y.default.RING,
                    y.default.AMULET,
                    y.default.WRIST,
                    y.default.TITLE,
                  ];
                  var i = [
                    "hat",
                    "jacket",
                    "trousers",
                    "belt",
                    "shoes",
                    "arms",
                    "hair",
                    "face",
                    "chest",
                    "skin",
                    "aura",
                  ];
                  var a = [
                    y.SkinClass.HAT,
                    y.SkinClass.COAT,
                    y.SkinClass.PANTS,
                    y.SkinClass.BELT,
                    y.SkinClass.SHOES,
                    y.SkinClass.WEAPON,
                    y.SkinClass.HAIR,
                    y.SkinClass.FACE,
                    y.SkinClass.CHEST,
                    y.SkinClass.BODY,
                    y.SkinClass.AURA,
                  ];
                  var s = [];
                  for (var u = 0; u < t.roleList.length; u++) {
                    var l = v.default.clone(t.roleList[u]);
                    l.wears = {};
                    for (var f in o) {
                      l.wears[r[f]] = t.wearList[u][o[f]];
                    }
                    l.skins = {};
                    for (var f in o) {
                      l.skins[a[f]] = t.wearSkinList[u][i[f]];
                    }
                    s.push(l);
                  }
                  h.default.eventMgr.event(1073, [s]);
                  c(s);
                } else {
                  p(Df.Login_Error.NOROLE);
                }
              } else {
                p(Df.Login_Error.NOROLES);
              }
            })
            .send(lc.ProtoType.LOAD_ROLES, { regionID: t });
        });
      };
      t.prototype.roleDelect = function (e) {
        return new Promise(function (n, t) {
          h.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.ROLE_DELETE,
              function (t, e) {
                if (e == 200) {
                  n(t.object);
                } else {
                  h.default.comm.msr(e);
                }
              }
            )
            .send(lc.ProtoType.ROLE_DELETE, { roleKey: e });
        });
      };
      t.prototype.roleSelect = function (t) {
        return new Promise(function (n, o) {
          h.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.ROLE_SELECT,
              function (t, e) {
                if (e == 200) {
                  n(t.object);
                } else {
                  o(Df.Login_Error.NOROLES);
                }
              }
            )
            .send(lc.ProtoType.ROLE_SELECT, { roleKey: t });
        });
      };
      t.prototype.roleCreate = function (e, o, r) {
        return new Promise(function (n, t) {
          h.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.ROLE_CREATE,
              function (t, e) {
                if (e == 200) {
                  n(1);
                } else {
                  if (e == 218 || e == 331) {
                    n(e);
                  } else {
                    n(0);
                  }
                }
              }
            )
            .send(lc.ProtoType.ROLE_CREATE, { name: e, regionID: o, job: r });
        });
      };
      t.prototype.offlineOhter = function () {
        var r = this;
        return new Promise(function (o) {
          h.default.proxy
            .registerReceiveEventOnce(f.default.logout, function (t, e) {
              if (e == 200) {
                var n = t.loginGameKey;
                r.connect(n);
                o(true);
              } else {
                h.default.eventMgr.event(1055, [u.default.sr(e)]);
                o(false);
              }
            })
            .get(f.default.logout);
        });
      };
      t.prototype.register = function (r, i, a) {
        var t = this;
        return new Promise(function (o) {
          t.getToken(r)
            .then(function (t) {
              var e = new JSEncrypt();
              e.setPublicKey(t);
              var n = e.encrypt(i);
              h.default.proxy
                .registerReceiveEventOnce(f.default.create, function (t, e) {
                  if (e == 200) {
                    h.default.eventMgr.event(1055, ["注册成功"]);
                    o(true);
                  } else {
                    h.default.eventMgr.event(1055, [u.default.sr(e)]);
                    o(false);
                  }
                })
                .post(f.default.create, { userName: r, passWord: n, phone: a });
            })
            .catch(function (t) {
              h.default.eventMgr.event(1055, [u.default.sr(t)]);
            });
        });
      };
      t.prototype.resetPassword = function (i, a, s) {
        var t = this;
        return new Promise(function (r) {
          t.getToken(i)
            .then(function (t) {
              var e = new JSEncrypt();
              e.setPublicKey(t);
              var n = e.encrypt(a);
              var o = e.encrypt(s);
              h.default.proxy
                .registerReceiveEventOnce(
                  f.default.updatePassword,
                  function (t, e) {
                    if (e == 200) {
                      h.default.eventMgr.event(1055, ["修改密码成功"]);
                      r(true);
                    } else {
                      h.default.eventMgr.event(1055, [u.default.sr(e)]);
                      r(false);
                    }
                  }
                )
                .post(f.default.updatePassword, {
                  userName: i,
                  passWord: n,
                  newPassWord: o,
                });
            })
            .catch(function (t) {
              h.default.eventMgr.event(1055, [u.default.sr(t)]);
            });
        });
      };
      t.prototype.loadNotice = function () {
        var r = this;
        return new Promise(function (n, o) {
          r.getIDEntity()
            .then(function () {
              h.default.proxy
                .registerReceiveEventOnce(f.default.load, function (t, e) {
                  if (e == 200) {
                    r.notice = t;
                    h.default.ctrlMgr.getCtrl(c.default.Login).onNoticeLoaded();
                    n(true);
                  } else {
                    h.default.eventMgr.event(1055, [u.default.sr(e)]);
                    o();
                  }
                })
                .get(f.default.load);
            })
            .catch(function () {
              o();
            });
        });
      };
      t.prototype.getIDEntity = function () {
        return new Promise(function (o, r) {
          h.default.proxy
            .registerReceiveEventOnce(f.default.getIDEntity, function (t, e) {
              if (e == 200) {
                var n = t.idEntity;
                h.default.proxy.setToken(n);
                o(n);
              } else {
                r();
              }
            })
            .get(f.default.getIDEntity, undefined, false);
        });
      };
      return t;
    })(s.default);
    e.default = p;
  });
  t(gc);
  var bc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(uc);
    var s = (function (t) {
      n(e, t);
      function e() {
        var n = t.call(this) || this;
        n.text = [];
        n.addText("<7>" + r.default.tr(11) + "</7>");
        i.default.proxy.registerReceiveEvent(
          lc.ProtoType.CHAT_NOTIFY,
          function (t, e) {
            i.default.comm.tip(t.content);
            n.addText("<7>[系统]:" + t.content + "</7>", true);
          }
        );
        i.default.proxy.registerReceiveEvent(
          lc.ProtoType.CHAT_PUSH,
          function (t, e) {
            n.addText("<2>[" + t.name + "]</2>:<1>" + t.content + "</1>", true);
          }
        );
        return n;
      }
      e.prototype.addText = function (t, e) {
        if (this.text.length > 80) {
          this.text.splice(0, Math.floor(this.text.length / 3));
        }
        this.text.push(t);
        e && i.default.eventMgr.event(1074);
      };
      e.prototype.send = function (t) {
        i.default.proxy
          .registerReceiveEventOnce(lc.ProtoType.CHAT_SEND, function (t, e) {
            if (e == 200);
            else {
              i.default.comm.msr(e);
            }
          })
          .send(lc.ProtoType.CHAT_SEND, { content: t });
      };
      return e;
    })(a.default);
    e.default = s;
  });
  t(bc);
  var Oc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = o(q);
    var r = o(uc);
    var f = o(V);
    var i = (function (t) {
      n(e, t);
      function e() {
        var r = t.call(this) || this;
        r.equips = [];
        r.skins = [];
        l.default.proxy.registerReceiveEvent(
          lc.ProtoType.EQUIP_UPDATE_PUSH,
          function (t, e) {
            for (var n = 0; n < t.list.length; n++) {
              var o = t.list[n];
              r.updateEquip(o, n == t.list.length - 1);
            }
          }
        );
        l.default.proxy.registerReceiveEvent(
          lc.ProtoType.SKIN_UPDATE_PUSH,
          function (t, e) {
            for (var n = 0; n < t.list.length; n++) {
              var o = t.list[n];
              r.updateSkin(o, n == t.list.length - 1);
            }
          }
        );
        return r;
      }
      e.prototype.loadEquips = function () {
        var a = this;
        return new Promise(function (r, i) {
          l.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.EQUIP_LOAD, function (t, e) {
              if (e == 200) {
                for (var n = 0; n < t.list.length; n++) {
                  var o = t.list[n];
                  a.updateEquip(o, false);
                }
                XOF.log("加载装备数据", t);
                r(undefined);
              } else {
                i();
              }
            })
            .send(lc.ProtoType.EQUIP_LOAD, {});
        });
      };
      e.prototype.updateEquip = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        if (t.count) {
          var n = false;
          for (var o in this.equips) {
            if (this.equips[o].id == t.id) {
              n = true;
              this.equips[o] = t;
              break;
            }
          }
          if (!n) this.equips.push(t);
        } else {
          for (var o in this.equips) {
            if (this.equips[o].id == t.id) {
              this.equips.splice(parseInt(o), 1);
              break;
            }
          }
        }
        if (e) l.default.eventMgr.event(1032);
      };
      e.prototype.get = function (t, e) {
        for (var n in this.equips) {
          if (this.equips[n].id == t) {
            return this.equips[n];
          }
        }
        if (e) {
          return l.default.userData.hero.get(t);
        }
      };
      e.prototype.isLock = function (t) {
        return this.get(t, true).sign > 0;
      };
      e.prototype.getFixPrice = function (t) {
        var e = 0;
        return e;
      };
      e.prototype.isEquipWear = function (t) {
        return l.default.userData.hero.isEquipWear(t);
      };
      e.prototype.equipTake = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.EQUIP_TAKE, function (t, e) {
              if (e == 200) {
                if (t.object) {
                  l.default.userData.hero.updateWearEquips(t.object);
                }
                n(true);
              } else {
                l.default.eventMgr.event(1055, [f.default.sr(e)]);
                n(false);
              }
            })
            .send(lc.ProtoType.EQUIP_TAKE, { onlyID: e });
        });
      };
      e.prototype.equipWear = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.EQUIP_WEAR, function (t, e) {
              if (e == 200) {
                if (t.object) {
                  l.default.userData.hero.updateWearEquips(t.object);
                }
                n(true);
              } else {
                l.default.eventMgr.event(1055, [f.default.sr(e)]);
                n(false);
              }
            })
            .send(lc.ProtoType.EQUIP_WEAR, { onlyID: e });
        });
      };
      e.prototype.equipSell = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.EQUIP_SELL, function (t, e) {
              if (e == 200) {
                l.default.comm.mtr(167);
                n(true);
              } else {
                l.default.comm.msr(e);
                n(false);
              }
            })
            .send(lc.ProtoType.EQUIP_SELL, { id: e });
        });
      };
      e.prototype.equipDestroy = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_DESTROY,
              function (t, e) {
                if (e == 200) {
                  l.default.comm.mtr(212);
                  n(true);
                } else {
                  l.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_DESTROY, { id: e });
        });
      };
      e.prototype.equipRepair = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_REPAIR,
              function (t, e) {
                if (e == 200) {
                  n(true);
                } else {
                  l.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_REPAIR, { id: e });
        });
      };
      e.prototype.equipRepairAll = function () {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_REPAIR_ALL,
              function (t, e) {
                if (e == 200) {
                  n(true);
                } else {
                  l.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_REPAIR_ALL, {});
        });
      };
      e.prototype.getGridCount = function () {
        return l.default.userData.hero.equipCapacity;
      };
      e.prototype.loadSkins = function () {
        var a = this;
        return new Promise(function (r, i) {
          l.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.SKIN_LOAD, function (t, e) {
              if (e == 200) {
                for (var n = 0; n < t.list.length; n++) {
                  var o = t.list[n];
                  a.updateSkin(o, false);
                }
                XOF.log("加载装扮数据", t);
                r(undefined);
              } else {
                i();
              }
            })
            .send(lc.ProtoType.SKIN_LOAD, {});
        });
      };
      e.prototype.isSkinWear = function (t) {
        return l.default.userData.hero.isSkinWear(t);
      };
      e.prototype.skinWear = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.SKIN_WEAR, function (t, e) {
              if (e == 200) {
                if (t.object) {
                  l.default.userData.hero.updateWearSkins(t.object);
                }
                n(true);
              } else {
                l.default.eventMgr.event(1055, [f.default.sr(e)]);
                n(false);
              }
            })
            .send(lc.ProtoType.SKIN_WEAR, { onlyID: e });
        });
      };
      e.prototype.skinTake = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.SKIN_TAKE, function (t, e) {
              if (e == 200) {
                if (t.object) {
                  l.default.userData.hero.updateWearSkins(t.object);
                }
                n(true);
              } else {
                l.default.eventMgr.event(1055, [f.default.sr(e)]);
                n(false);
              }
            })
            .send(lc.ProtoType.SKIN_TAKE, { onlyID: e });
        });
      };
      e.prototype.skinDestroy = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.SKIN_DESTROY,
              function (t, e) {
                if (e == 200) {
                  l.default.comm.mtr(198);
                  n(true);
                } else {
                  l.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.SKIN_DESTROY, { id: e });
        });
      };
      e.prototype.updateSkin = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        if (t.count) {
          var n = false;
          for (var o in this.skins) {
            if (this.skins[o].id == t.id) {
              n = true;
              this.skins[o] = t;
              break;
            }
          }
          if (!n) this.skins.push(t);
        } else {
          for (var o in this.skins) {
            if (this.skins[o].id == t.id) {
              this.skins.splice(parseInt(o), 1);
              break;
            }
          }
        }
        if (e) l.default.eventMgr.event(1032);
      };
      e.prototype.equipStar = function (e) {
        var u = this;
        return new Promise(function (s, t) {
          l.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.EQUIP_STAR, function (t, e) {
              if (e == 200) {
                var n = t.id,
                  o = t.sign;
                for (var r = 0, i = u.equips; r < i.length; r++) {
                  var a = i[r];
                  if (a.id == n) {
                    a.sign = o;
                    l.default.eventMgr.event(1032);
                  }
                }
                s(true);
              } else {
                l.default.eventMgr.event(1055, [f.default.sr(e)]);
                s(false);
              }
            })
            .send(lc.ProtoType.EQUIP_STAR, { id: e });
        });
      };
      e.prototype.equipAutoSell = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_AUTO_SELL,
              function (t, e) {
                if (e == 200) {
                  l.default.comm.mtr(167);
                  n(true);
                } else {
                  l.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_AUTO_SELL, { quality: e });
        });
      };
      e.prototype.equipAutoDecompose = function (e) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_AUTO_DECOMPOSE,
              function (t, e) {
                if (e == 200) {
                  l.default.comm.mtr(212);
                  n(true);
                } else {
                  l.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_AUTO_DECOMPOSE, { quality: e });
        });
      };
      e.prototype.upgrade = function (e, o) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_UPGRADE,
              function (t, e) {
                if (e == 200) {
                  l.default.eventMgr.event(1055, [f.default.tr(183)]);
                  n(true);
                } else {
                  l.default.eventMgr.event(1055, [f.default.sr(e)]);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_UPGRADE, { id: e, isProtected: o });
        });
      };
      e.prototype.uppower = function (e, o) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_UPPOWER,
              function (t, e) {
                if (e == 200) {
                  l.default.eventMgr.event(1055, [f.default.tr(184)]);
                  n(true);
                } else {
                  l.default.eventMgr.event(1055, [f.default.sr(e)]);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_UPPOWER, { id: e, isProtected: o });
        });
      };
      e.prototype.useUpgrade = function (e, o) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_USE_UPGRADE,
              function (t, e) {
                if (e == 200) {
                  l.default.comm.mtr(213);
                  n(true);
                } else {
                  l.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_USE_UPGRADE, {
              id: e,
              count: 1,
              itemID: o + "",
            });
        });
      };
      e.prototype.useRankAdjust = function (e, o) {
        return new Promise(function (n, t) {
          l.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.EQUIP_RANK_ADJUST,
              function (t, e) {
                if (e == 200) {
                  l.default.comm.mtr(240);
                  n(true);
                } else {
                  l.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.EQUIP_RANK_ADJUST, { id: e, itemID: o + "" });
        });
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Oc);
  var wc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(uc);
    var i = o(q);
    var a = (function (t) {
      n(e, t);
      function e() {
        var e = t.call(this) || this;
        e.list = [];
        i.default.proxy.registerReceiveEvent(
          lc.ProtoType.MAIL_PUSH,
          function (t) {
            e.list.unshift(t.object);
            while (e.list.length > 10) {
              e.list.pop();
            }
            i.default.eventMgr.event(1067);
          }
        );
        return e;
      }
      e.prototype.load = function () {
        var r = this;
        return new Promise(function (n, o) {
          i.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.MAIL_LOAD, function (t, e) {
              if (e == 200) {
                XOF.log("加载背邮件数据", t);
                r.list = t.list;
                i.default.eventMgr.event(1067);
                n(undefined);
              } else {
                o();
              }
            })
            .send(lc.ProtoType.MAIL_LOAD, { page: 0, limit: 10 });
        });
      };
      e.prototype.get = function (e) {
        var o = this;
        return new Promise(function (n, t) {
          i.default.proxy
            .registerReceiveEventOnce(lc.ProtoType.MAIL_GET, function (t, e) {
              if (e == 200) {
                n(true);
                i.default.comm.mtr(173);
                o.load();
              } else {
                i.default.comm.msr(e);
                n(false);
              }
            })
            .send(lc.ProtoType.MAIL_GET, { id: e });
        });
      };
      e.prototype.getAll = function () {
        var o = this;
        return new Promise(function (n, t) {
          i.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.MAIL_GET_ALL,
              function (t, e) {
                if (e == 200) {
                  n(true);
                  i.default.comm.mtr(173);
                  o.load();
                } else {
                  if (e == 336) {
                    o.load();
                  }
                  i.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.MAIL_GET_ALL, { page: 0, limit: 10 });
        });
      };
      return e;
    })(r.default);
    e.default = a;
  });
  t(wc);
  var Ac = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(uc);
    var u = o(q);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.itemSlots = {};
        u.default.proxy.registerReceiveEvent(
          lc.ProtoType.DUNGEON_ITEM_PUSH,
          function (t, e) {
            var n = t.object,
              o = n.itemID,
              r = n.count;
            for (var i in u.default.userData.map.itemSlots) {
              if (u.default.userData.map.itemSlots[i].itemID == o) {
                u.default.userData.map.itemSlots[i].count = r;
                u.default.eventMgr.event(1046);
                break;
              }
            }
          }
        );
        return t;
      }
      t.prototype.loadItemSet = function () {
        var r = this;
        return new Promise(function (n, o) {
          u.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.DUNGEON_ITEM_SET_LOAD,
              function (t, e) {
                if (e == 200) {
                  r.updateItemSlot(t.object);
                  console.log("加载战斗物品数据", t);
                  n(undefined);
                } else {
                  o();
                }
              }
            )
            .send(lc.ProtoType.DUNGEON_ITEM_SET_LOAD, {});
        });
      };
      t.prototype.updateItemSet = function (t, e, n, o) {
        return this.updateItemSet2(t, e, n, o, true);
      };
      t.prototype.updateItemSet2 = function (e, o, r, i, a) {
        var s = this;
        if (a === void 0) {
          a = false;
        }
        return new Promise(function (n, t) {
          u.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.DUNGEON_ITEM_SET_UPDATE,
              function (t, e) {
                if (e == 200) {
                  s.updateItemSlot(t.object);
                  n(true);
                  if (a) u.default.comm.mtr(189);
                } else {
                  if (a) u.default.comm.msr(e);
                  n(false);
                }
              }
            )
            .send(lc.ProtoType.DUNGEON_ITEM_SET_UPDATE, {
              slot1: (e || "0") + "",
              slot2: (o || "0") + "",
              slot3: (r || "0") + "",
              slot4: (i || "0") + "",
            });
        });
      };
      t.prototype.updateItemSlot = function (t) {
        var e = ["slot1", "slot2", "slot3", "slot4"];
        for (var n in e) {
          var o = e[n];
          this.itemSlots[parseInt(n) + 1] = t[o];
        }
      };
      t.prototype.useSkill = function (t) {
        u.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_USE_SKILL,
            function (t, e) {
              if (e == 200);
              else {
                u.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_USE_SKILL, { id: t });
      };
      t.prototype.useItem = function (t) {
        for (var e in u.default.userData.map.itemSlots) {
          if (u.default.userData.map.itemSlots[e].itemID == t) {
            if (u.default.userData.map.itemSlots[e].count <= 0) return;
            u.default.userData.map.itemSlots[e].count--;
            u.default.eventMgr.event(1046);
            break;
          }
        }
        u.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DUNGEON_USE_ITEM,
            function (t, e) {
              if (e == 200) {
                var n = t.object,
                  o = n.itemID,
                  r = n.count;
                for (var i in u.default.userData.map.itemSlots) {
                  if (u.default.userData.map.itemSlots[i].itemID == o) {
                    if (r < u.default.userData.map.itemSlots[i].count) {
                      u.default.userData.map.itemSlots[i].count = r;
                    }
                  }
                }
              } else {
                u.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DUNGEON_USE_ITEM, { itemID: t });
      };
      t.prototype.getItemCount = function (t) {
        for (var e in u.default.userData.map.itemSlots) {
          if (u.default.userData.map.itemSlots[e].itemID == t) {
            return u.default.userData.map.itemSlots[e].count;
          }
        }
        return 0;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Ac);
  var Ec = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(uc);
    var a = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      e.prototype.getMonth = function () {
        r.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.VIP_GET_MONTH_GIFT,
            function (t, e) {
              if (e == 200) {
                r.default.comm.tip("领取成功");
              } else {
                r.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.VIP_GET_MONTH_GIFT, {});
      };
      return e;
    })(i.default);
    e.default = a;
  });
  t(Ec);
  var Tc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(q);
    var r = o(uc);
    var i = (function (t) {
      n(e, t);
      function e() {
        var o = t.call(this) || this;
        o.cumulativeInvest = 0;
        o.total = [];
        a.default.proxy.registerReceiveEvent(
          lc.ProtoType.TOTAL_REACHARGE_PUSH,
          function (t, e) {
            for (var n = 0; n < t.list.length; n++) {
              o.updateItem(t.list[n]);
            }
            o.cumulativeInvest = t.cumulativeInvest;
            a.default.eventMgr.event(1068);
          }
        );
        return o;
      }
      e.prototype.load = function () {
        var i = this;
        return new Promise(function (o, r) {
          a.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.TOTAL_REACHARGE_LOAD,
              function (t, e) {
                if (e == 200) {
                  XOF.log("加载累充数据", t);
                  i.cumulativeInvest = t.cumulativeInvest;
                  for (var n = 0; n < t.list.length; n++) {
                    i.updateItem(t.list[n]);
                  }
                  o(undefined);
                } else {
                  r();
                }
              }
            )
            .send(lc.ProtoType.TOTAL_REACHARGE_LOAD, {});
        });
      };
      e.prototype.get = function (t) {
        a.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.TOTAL_REACHARGE_GET,
            function (t, e) {
              if (e == 200) {
                a.default.comm.mtr(222);
              } else {
                a.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.TOTAL_REACHARGE_GET, { money: t });
      };
      e.prototype.updateItem = function (t) {
        var e = false;
        for (var n in this.total) {
          if (t.money == this.total[n].money) {
            this.total[n] = t;
            e = true;
            break;
          }
        }
        if (!e) {
          this.total.push(t);
        }
      };
      e.prototype.getItem = function (t) {
        for (var e in this.total) {
          if (t == this.total[e].money) {
            return this.total[e];
          }
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Tc);
  var Cc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(V);
    var c = o(q);
    var r = o(uc);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.cityRoles = {};
        return t;
      }
      t.prototype.loadRoles = function () {
        var i = this;
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.TOWN_LOAD_ROLES,
            function (t, e, n) {
              if (e == 200) {
                var o = t.list;
                for (var r in o) {
                  if (i.isMy(o[r])) continue;
                  i.updateRole(o[r]);
                }
              } else {
                XOF.log(
                  "协议:" + lc.ProtoType.TOWN_LOAD_ROLES,
                  a.default.sr(e)
                );
              }
            }
          )
          .send(lc.ProtoType.TOWN_LOAD_ROLES, {});
      };
      t.prototype.setRegisterCityPush = function (t) {
        if (t) {
          c.default.proxy.registerReceiveEvent(
            lc.ProtoType.TOWN_NEWROLE_PUSH,
            this.townUpdate,
            this
          );
          c.default.proxy.registerReceiveEvent(
            lc.ProtoType.TOWN_ROLE_QUIT_PUSH,
            this.townUpdate,
            this
          );
          c.default.proxy.registerReceiveEvent(
            lc.ProtoType.TOWN_ROLE_UPDATE_SKIN_PUSH,
            this.townUpdate,
            this
          );
          c.default.proxy.registerReceiveEvent(
            lc.ProtoType.TOWN_ROLE_UPDATE_EQUIP_PUSH,
            this.townUpdate,
            this
          );
          c.default.proxy.registerReceiveEvent(
            lc.ProtoType.TOWN_ROLE_KEY_STATE_PUSH,
            this.roleKey,
            this
          );
        } else {
          c.default.proxy.unregisterReceiveEvent(
            lc.ProtoType.TOWN_NEWROLE_PUSH,
            this.townUpdate,
            this
          );
          c.default.proxy.unregisterReceiveEvent(
            lc.ProtoType.TOWN_ROLE_QUIT_PUSH,
            this.townUpdate,
            this
          );
          c.default.proxy.unregisterReceiveEvent(
            lc.ProtoType.TOWN_ROLE_UPDATE_SKIN_PUSH,
            this.townUpdate,
            this
          );
          c.default.proxy.unregisterReceiveEvent(
            lc.ProtoType.TOWN_ROLE_UPDATE_EQUIP_PUSH,
            this.townUpdate,
            this
          );
          c.default.proxy.unregisterReceiveEvent(
            lc.ProtoType.TOWN_ROLE_KEY_STATE_PUSH,
            this.roleKey,
            this
          );
        }
      };
      t.prototype.removeRoles = function () {
        var t = Object.keys(this.cityRoles);
        while (t.length) {
          var e = t.pop();
          this.removeRole(this.cityRoles[e]);
        }
      };
      t.prototype.isMy = function (t) {
        return t.name == c.default.userData.hero.name;
      };
      t.prototype.roleKey = function (t, e, n) {
        var o = this;
        if (this.isMy(t)) return;
        var r = t.name,
          i = t.key,
          a = t.state,
          s = t.x,
          u = t.y,
          l = t.id,
          f = t.frame;
        if (!this.cityRoles[r]) return;
        if (c.default.userData.map.id != l) return;
        c.default.timerMgr.delay(200, 1, function () {
          if (!o.cityRoles[r]) return;
          if (c.default.userData.map.id != l) return;
          c.default.eventMgr.event(1022, [r, i, a, f, s, u]);
        });
      };
      t.prototype.sendKeyState = function (t, e, n, o, r, i) {
        c.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.TOWN_ROLE_KEY_STATE,
            function () {}
          )
          .send(lc.ProtoType.TOWN_ROLE_KEY_STATE, {
            key: t,
            state: e,
            x: n,
            y: o,
            direction: r,
            id: c.default.userData.map.id,
            frame: i,
          });
      };
      t.prototype.townUpdate = function (t, e, n) {
        if (this.isMy(t)) return;
        if (n.protoType == lc.ProtoType.TOWN_ROLE_QUIT_PUSH) {
          this.removeRole(t);
        } else {
          this.updateRole(t);
        }
      };
      t.prototype.updateRole = function (t) {
        var e = t.name;
        if (this.cityRoles[e]) {
          for (var n in t) {
            this.cityRoles[e][n] = t[n];
          }
          c.default.eventMgr.event(1019, [e]);
        } else {
          this.cityRoles[e] = t;
          c.default.eventMgr.event(1021, [e]);
        }
      };
      t.prototype.removeRole = function (t) {
        var e = t.name;
        if (e) {
          c.default.eventMgr.event(1020, [e]);
          delete this.cityRoles[e];
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Cc);
  var Pc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(q);
    var r = o(uc);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      e.prototype.load = function () {
        var r = this;
        return new Promise(function (n, o) {
          a.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.DAILY_TASK_LOAD,
              function (t, e) {
                if (e == 200) {
                  XOF.log("加载每日任务数据", t);
                  r.list = t.list;
                  a.default.eventMgr.event(1069);
                  n(undefined);
                } else {
                  o();
                }
              }
            )
            .send(lc.ProtoType.DAILY_TASK_LOAD, {});
        });
      };
      e.prototype.get = function (t) {
        var i = this;
        a.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.DAILY_TASK_GET,
            function (t, e) {
              if (e == 200) {
                var n = t.state,
                  o = t.id;
                for (var r in i.list) {
                  if (i.list[r].id == o) {
                    i.list[r].state = n;
                  }
                }
                a.default.eventMgr.event(1069);
                a.default.comm.tip("领取成功");
              } else {
                a.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.DAILY_TASK_GET, { id: t });
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(Pc);
  var jc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(q);
    var r = o(uc);
    var i = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      e.prototype.load = function () {
        var n = this;
        a.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.LEVEL_TASK_LOAD,
            function (t, e) {
              if (e == 200) {
                XOF.log("加载等级任务数据", t);
                n.list = t.list;
                a.default.eventMgr.event(1070);
              } else {
                a.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.LEVEL_TASK_LOAD, {});
      };
      e.prototype.get = function (t) {
        var i = this;
        a.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.LEVEL_TASK_GET,
            function (t, e) {
              if (e == 200) {
                var n = t.state,
                  o = t.id;
                for (var r in i.list) {
                  if (i.list[r].id == o) {
                    i.list[r].state = n;
                  }
                }
                a.default.eventMgr.event(1070);
                a.default.comm.tip("领取成功");
              } else {
                a.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.LEVEL_TASK_GET, { id: t });
      };
      e.prototype.getData = function (t) {
        for (var e in this.list) {
          if (this.list[e].id == t) {
            return this.list[e];
          }
        }
      };
      return e;
    })(r.default);
    e.default = i;
  });
  t(jc);
  var Sc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(dt);
    var a = o(q);
    var r = o(uc);
    var s = lc.ProtoType.SKIN_COLLET_LOAD;
    var u = lc.ProtoType.SKIN_COLLET_WEAR;
    var l = lc.ProtoType.SKIN_COLLET_TAKE;
    var f = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      e.prototype.load = function () {
        var r = this;
        return new Promise(function (n, o) {
          a.default.proxy
            .registerReceiveEventOnce(s, function (t, e) {
              if (e == 200) {
                r.list = t.list;
                XOF.log("加载装扮图鉴数据", t);
                n(undefined);
              } else {
                o();
              }
            })
            .send(s, {});
        });
      };
      e.prototype.take = function (t) {
        var o = this;
        a.default.proxy
          .registerReceiveEventOnce(l, function (t, e) {
            if (e == 200) {
              var n = t.id;
              if (n) {
                o.takeAt(n);
                a.default.eventMgr.event(1036);
                a.default.eventMgr.event(1071);
              }
            } else {
              a.default.comm.msr(e);
            }
          })
          .send(l, { id: t });
      };
      e.prototype.wear = function (t) {
        var n = this;
        a.default.proxy
          .registerReceiveEventOnce(u, function (t, e) {
            if (e == 200) {
              if (t.object) {
                n.wearAt(t.object.id, t.object);
                if (n.getActiveList().indexOf(t.object.id) >= 0) {
                  a.default.comm.mtr(257);
                }
                a.default.eventMgr.event(1036);
                a.default.eventMgr.event(1071);
              }
            } else {
              a.default.comm.msr(e);
            }
          })
          .send(u, { id: t });
      };
      e.prototype.getWearCount = function (t) {
        return this.getWearList(t).length;
      };
      e.prototype.indexOf = function (t) {
        for (var e = 0; e < this.list.length; e++) {
          if (this.list[e].id == t) {
            return e;
          }
        }
        return -1;
      };
      e.prototype.takeAt = function (t) {
        var e = this.indexOf(t);
        if (e >= 0) {
          this.list.splice(e, 1);
        }
      };
      e.prototype.wearAt = function (t, e) {
        var n = this.indexOf(t);
        if (n >= 0) {
          this.list[n] = e;
        } else {
          this.list.push(e);
        }
      };
      e.prototype.getActiveList = function () {
        var t = [];
        for (var e in this.list) {
          var n = this.list[e].id;
          var o = i.default.conf.collect.skinCollect[n];
          var r = this.getWearCount(n);
          if (r >= o.list.length) {
            t.push(n);
          }
        }
        return t;
      };
      e.prototype.getWearList = function (t) {
        var e = [];
        var n = this.indexOf(t);
        if (n >= 0) {
          for (var o in this.list[n].map) {
            e.push(this.list[n].map[o].itemID);
          }
        }
        return e;
      };
      return e;
    })(r.default);
    e.default = f;
  });
  t(Sc);
  var Mc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(dt);
    var a = o(q);
    var r = o(uc);
    var s = lc.ProtoType.EQUIP_COLLET_LOAD;
    var u = lc.ProtoType.EQUIP_COLLET_WEAR;
    var l = lc.ProtoType.EQUIP_COLLET_TAKE;
    var f = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      e.prototype.load = function () {
        var r = this;
        return new Promise(function (n, o) {
          a.default.proxy
            .registerReceiveEventOnce(s, function (t, e) {
              if (e == 200) {
                r.list = t.list;
                XOF.log("加载装备图鉴数据", t);
                n(undefined);
              } else {
                o(e);
              }
            })
            .send(s, {});
        });
      };
      e.prototype.take = function (t) {
        var o = this;
        a.default.proxy
          .registerReceiveEventOnce(l, function (t, e) {
            if (e == 200) {
              var n = t.id;
              if (n) {
                o.takeAt(n);
                a.default.eventMgr.event(1036);
                a.default.eventMgr.event(1071);
              }
            } else {
              a.default.comm.msr(e);
            }
          })
          .send(l, { id: t });
      };
      e.prototype.wear = function (t) {
        var n = this;
        a.default.proxy
          .registerReceiveEventOnce(u, function (t, e) {
            if (e == 200) {
              if (t.object) {
                n.wearAt(t.object.id, t.object);
                a.default.eventMgr.event(1036);
                if (n.getActiveList().indexOf(t.object.id) >= 0) {
                  a.default.comm.mtr(257);
                }
                a.default.eventMgr.event(1071);
              }
            } else {
              a.default.comm.msr(e);
            }
          })
          .send(u, { id: t });
      };
      e.prototype.getWearCount = function (t) {
        return this.getWearList(t).length;
      };
      e.prototype.indexOf = function (t) {
        for (var e = 0; e < this.list.length; e++) {
          if (this.list[e].id == t) {
            return e;
          }
        }
        return -1;
      };
      e.prototype.takeAt = function (t) {
        var e = this.indexOf(t);
        if (e >= 0) {
          this.list.splice(e, 1);
        }
      };
      e.prototype.wearAt = function (t, e) {
        var n = this.indexOf(t);
        if (n >= 0) {
          this.list[n] = e;
        } else {
          this.list.push(e);
        }
      };
      e.prototype.getActiveList = function () {
        var t = [];
        for (var e in this.list) {
          var n = this.list[e].id;
          var o = i.default.conf.collect.equipCollect[n];
          var r = this.getWearCount(n);
          if (r >= o.list.length) {
            t.push(n);
          }
        }
        return t;
      };
      e.prototype.getWearList = function (t) {
        var e = [];
        var n = this.indexOf(t);
        if (n >= 0) {
          for (var o in this.list[n].map) {
            e.push(this.list[n].map[o].itemID);
          }
        }
        return e;
      };
      return e;
    })(r.default);
    e.default = f;
  });
  t(Mc);
  var kc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(q);
    var r = o(uc);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.list = [];
        t.coin = t.count = 0;
        return t;
      }
      t.prototype.update = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        this.count = t.count;
        this.list = [].concat(t.itemList, t.equipList);
        this.coin = t.coinCount;
        if (e) {
          i.default.eventMgr.event(1072);
        }
      };
      t.prototype.load = function () {
        var o = this;
        return new Promise(function (n, t) {
          i.default.proxy
            .registerReceiveEventOnce(
              lc.ProtoType.STORAGE_LOAD,
              function (t, e) {
                if (e == 200) {
                  XOF.log("加载仓库数据", t);
                  o.update(t.object, true);
                  n(undefined);
                } else {
                  i.default.comm.msr(e);
                }
              }
            )
            .send(lc.ProtoType.STORAGE_LOAD, {});
        });
      };
      t.prototype.put = function (t, e, n) {
        var o = this;
        if (n === void 0) {
          n = 1;
        }
        var r = { count: n };
        if (t) {
          r.itemID = t;
          r.count = n;
        } else {
          r.equipID = e;
        }
        i.default.proxy
          .registerReceiveEventOnce(lc.ProtoType.STORAGE_PUT, function (t, e) {
            if (e == 200) {
              o.update(t.object);
            } else {
              i.default.comm.msr(e);
            }
          })
          .send(lc.ProtoType.STORAGE_PUT, r);
      };
      t.prototype.get = function (t, e, n) {
        var o = this;
        var r = { count: n };
        if (t) {
          r.itemID = t;
          r.count = n;
        } else {
          r.equipID = e;
        }
        i.default.proxy
          .registerReceiveEventOnce(lc.ProtoType.STORAGE_GET, function (t, e) {
            if (e == 200) {
              o.update(t.object);
            } else {
              i.default.comm.msr(e);
            }
          })
          .send(lc.ProtoType.STORAGE_GET, r);
      };
      t.prototype.putAll = function () {
        var n = this;
        i.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.STORAGE_PUT_ALL,
            function (t, e) {
              if (e == 200) {
                n.update(t.object);
              } else {
                i.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.STORAGE_PUT_ALL, {});
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(kc);
  var xc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(uc);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.vipList = [];
        return t;
      }
      t.prototype.loadVipList = function () {
        var o = this;
        r.default.proxy
          .registerReceiveEventOnce(
            lc.ProtoType.RANK_VIP_LOAD,
            function (t, e, n) {
              if (e == 200) {
                o.vipList = t.list;
                r.default.eventMgr.event(1076);
              } else {
                r.default.comm.msr(e);
              }
            }
          )
          .send(lc.ProtoType.RANK_VIP_LOAD, {});
      };
      return t;
    })(i.default);
    e.default = a;
  });
  t(xc);
  var Dc = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(fc);
    var r = n(cc);
    var i = n(k);
    var a = n(pc);
    var s = n(dc);
    var u = n(hc);
    var l = n(vc);
    var f = n(yc);
    var c = n(_c);
    var p = n(gc);
    var d = n(bc);
    var h = n(Oc);
    var v = n(wc);
    var y = n(Ac);
    var _ = n(Ec);
    var m = n(Tc);
    var g = n(Cc);
    var b = n(Pc);
    var O = n(jc);
    var w = n(Sc);
    var A = n(Mc);
    var E = n(kc);
    var T = n(xc);
    var C = (function () {
      function t() {
        this.login = new p.default();
      }
      t.prototype.init = function () {
        this.bag = new s.default();
        this.hero = new r.default();
        this.shop = new l.default();
        this.chat = new d.default();
        this.equip = new h.default();
        this.mail = new v.default();
        this.skill = new c.default();
        this.dungeon = new y.default();
        this.map = new o.default();
        this.vip = new _.default();
        this.totalRecharge = new m.default();
        this.city = new g.default();
        this.dailyTask = new b.default();
        this.levelTask = new O.default();
        this.skinCollct = new w.default();
        this.equipCollct = new A.default();
        this.storage = new E.default();
        this.rank = new T.default();
      };
      t.prototype.reset = function (t) {
        this.savedata = t;
        var e = t.content;
        this.setting = new a.default(e);
        this.home = new u.default(e);
        this.quest = new f.default(e);
      };
      t.prototype.save = function () {
        var t = i.default.copy(this.savedata);
        var e = (t.content = {});
        this.hero.save(e);
        this.map.save(e);
        this.setting.save(e);
        this.bag.save(e);
        this.shop.save(e);
        this.quest.save(e);
        return t;
      };
      return t;
    })();
    e.default = C;
  });
  t(Dc);
  var Ic = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.dispatch = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        for (var n = 0, o = t; n < o.length; n++) {
          var r = o[n];
          this.event(r);
        }
      };
      e.prototype.register = function (t, e) {
        var n = [];
        for (var o = 2; o < arguments.length; o++) {
          n[o - 2] = arguments[o];
        }
        for (var r = 0, i = n; r < i.length; r++) {
          var a = i[r];
          this.on(a, t, e);
        }
      };
      e.prototype.unregister = function (t, e) {
        for (var n in this.events_) {
          var o = this.events_[n];
          for (var r = 0, i = o; r < i.length; r++) {
            var a = i[r];
            if (a.thisObj == e && a.func == t) {
              this.off(n, a.func, a.thisObj);
            }
          }
        }
      };
      return e;
    })(XOF.EventDispatcher);
    e.default = o;
  });
  t(Ic);
  var Rc = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(V);
    var o = n(dt);
    var i = (function () {
      function n() {}
      Object.defineProperty(n, "shops", {
        get: function () {
          return o.default.conf.shop;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(n, "shopInit", {
        get: function () {
          return o.default.conf.shop.init;
        },
        enumerable: false,
        configurable: true,
      });
      n.getShopIdByIndex = function (t) {
        for (var e in n.shops) {
          if (n.shops[e][t]) {
            return e;
          }
        }
      };
      n.getShopItemByIndex = function (t) {
        var e = n.getShopIdByIndex(t);
        if (e) {
          return n.shops[e][t];
        }
      };
      n.getShopLimitTypeString = function (t, e, n) {
        var o;
        if (n > 0) {
          switch (t) {
            case 1:
              o = 259;
              break;
            case 2:
              o = 260;
              break;
            case 3:
              o = 261;
              break;
            case 4:
              o = 258;
              break;
          }
        }
        if (o) return r.default.tr(o, e, n);
        return "";
      };
      return n;
    })();
    e.default = i;
  });
  t(Rc);
  var Lc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(kl);
    var i = o(k);
    var a = o(st);
    var s = o(me);
    var u = o(q);
    var l = o(_e);
    var f = o(W);
    var c = o(x);
    var p = o(Rc);
    var d = o(we);
    var h = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.size(165, 57);
        f.default.initSkin("ui/Shop/ShopItem", t, t);
        t.imgLight.visible = false;
        t.itemBox.data = { showBg: false, drag: false, receive: false };
        return t;
      }
      Object.defineProperty(t.prototype, "id", {
        get: function () {
          return this.itemBox.id;
        },
        set: function (t) {
          this.itemBox.id = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onClick = function (t) {
        if (
          this.data.id &&
          s.default.fingerIsState(
            l.default.NORMAL,
            l.default.PRESS,
            l.default.BUY
          )
        ) {
          if (this.itemBox.contains(t.target));
          else {
            u.default.eventMgr.event(c.default.SHOP_ITEM_TAP, [this]);
            u.default.eventMgr.event(1052, [this.data.shopId, this.data.id]);
          }
        }
      };
      t.prototype.onOpen = function () {
        this.on(XOF.TouchEvent.TOUCH_ENTER, this.onEnter, this);
        this.on(XOF.TouchEvent.TOUCH_OUT, this.onOut, this);
        this.on(XOF.TouchEvent.TAP, this.onClick, this);
        this.on(XOF.TouchEvent.TOUCH_END, this.onEnd, this);
      };
      t.prototype.onClose = function () {
        this.off(XOF.TouchEvent.TOUCH_ENTER, this.onEnter, this);
        this.off(XOF.TouchEvent.TOUCH_OUT, this.onOut, this);
        this.off(XOF.TouchEvent.TAP, this.onClick, this);
        this.off(XOF.TouchEvent.TOUCH_END, this.onEnd, this);
      };
      t.prototype.onEnd = function (t) {
        if (t.currentTarget != XOF.stage) {
          if (r.default.selectItem) {
            s.default.stageStopPropagation(t);
          }
        }
        r.default.stopSelectItem();
        this.stop();
      };
      t.prototype.stop = function () {
        XOF.stage.off(XOF.TouchEvent.TOUCH_END, this.onEnd, this);
      };
      Object.defineProperty(t.prototype, "data", {
        get: function () {
          return this.data_;
        },
        set: function (t) {
          this.data_ = t;
          this.labCount.visible =
            this.labName.visible =
            this.gPrice.visible =
              false;
          this.itemBox.data.itemData = undefined;
          if (
            !i.default.isVoidObject(
              t === null || t === void 0 ? void 0 : t.data
            )
          ) {
            this.labCount.visible =
              this.labName.visible =
              this.gPrice.visible =
                true;
            var e = t.data;
            for (var n in e.item) {
              var o = a.default.getItemData(n);
              if (o) {
                this.itemBox.data.count = e.item[n];
                this.itemBox.data.itemData = o;
                this.labName.text = o.name;
                var r = t.buyCount;
                this.labName.textColor = a.default.getQualityColor(o.quality);
                this.labCount.textColor =
                  e.limitType == -1
                    ? this.labName.textColor
                    : r >= e.limitCount
                    ? d.default.registerColors[9]
                    : this.labName.textColor;
                this.labCount.text = p.default.getShopLimitTypeString(
                  e.limitType,
                  r,
                  e.limitCount
                );
              } else {
                XOF.log("错误的商店物品配置:" + n);
              }
            }
            for (var n in e.cost) {
              this.imgPrice.skin = a.default.getItemIcon(n);
              this.labPrice.text = i.default.formatMoney(e.cost[n]);
            }
            this.labPrice.textColor = u.default.userData.bag.canConsume(e.cost)
              ? "#ffffff"
              : "rgb(255,50,50)";
          }
          this.itemBox.data = this.itemBox.data;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onEnter = function () {};
      t.prototype.onOut = function () {};
      Object.defineProperty(t.prototype, "selected", {
        get: function () {
          return this.imgLight.visible;
        },
        set: function (t) {
          this.imgLight.visible = t;
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(XOF.Sprite);
    e.default = h;
  });
  t(Lc);
  var Fc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(Lc);
    var d = o(Rc);
    var h = o(dt);
    var v = o(st);
    var r = o(w);
    var y = o(q);
    var _ = o(I);
    var m = o(x);
    var s = o(me);
    var u = o(_e);
    var l = o(k);
    var f = o(W);
    var i = o(R);
    var c = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        t.group = 0;
        f.default.initSkin("ui/Shop/Shop", t, t);
        t.shopItems = [];
        for (var e = 0, n = 0; e < 4; e++) {
          for (var o = 0; o < 4; o++, n++) {
            var r = new a.default();
            r.id = 1001 + n;
            r.pos(o * (r.width + 10), e * (r.height + 5));
            r.addTo(t.imgBg);
            t.shopItems.push(r);
          }
        }
        t.pageSize = t.shopItems.length;
        t.fullview = true;
        return t;
      }
      t.prototype.updateTypeBtn = function () {
        var o = this;
        var r = Object.keys(h.default.conf.shop.init).sort(function (t, e) {
          return (
            h.default.conf.shop.init[t].sort - h.default.conf.shop.init[e].sort
          );
        });
        this.btnList.children_.forEach(function (t, e) {
          var n = r[e];
          if (n) {
            t.visible = true;
            t.label = h.default.conf.shop.init[n].name;
            t.on(XOF.TouchEvent.TAP, o.onChange, o, [n]);
          } else {
            t.visible = false;
          }
        });
        this.btnList.selectIndex = 0;
      };
      t.prototype.setShop = function (t) {
        if (t === void 0) {
          t = 1;
        }
        var e = [];
        this.shopId = t;
        var n = d.default.shops[t];
        var o = [];
        for (var r in n) {
          var i = n[r];
          if (e.indexOf(i.group) < 0) {
            e.push(i.group);
          }
          if (this.group == undefined) this.group = i.group;
          if (this.group == 0 ? true : this.group == i.group) {
            o.push(i);
          }
        }
        this.max = Math.ceil(o.length / this.pageSize);
        this.imgBtnBg.visible = this.max > 1;
      };
      t.prototype.updateShop = function () {
        var r = this;
        var t = d.default.shops[this.shopId];
        var i = [];
        for (var e in t) {
          var n = t[e];
          if (this.group == 0 ? true : this.group == n.group) {
            i.push(n);
          }
        }
        i.sort(function (t, e) {
          return t.sort - e.sort;
        });
        var a = (this.page - 1) * this.pageSize;
        this.shopItems.forEach(function (t, e) {
          var n = a + e;
          var o = i[n];
          if (o) {
            t.data = {
              shopId: r.shopId,
              id: o.id,
              data: o,
              buyCount: y.default.userData.shop.getBuyCount(r.shopId, o.id),
            };
            t.visible = true;
          } else {
            t.data = {};
            t.visible = false;
          }
        });
        this.labPage.text = this.page + "/" + this.max;
      };
      t.prototype.updateButton = function () {
        this.btnUp.disabled = this.page == 1;
        this.btnNext.disabled = this.page == this.max;
      };
      t.prototype.onOpen = function (t) {
        i.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.on(m.default.CLOSE, this.close, this);
        this.btnUp.on(XOF.TouchEvent.TAP, this.onClickUp, this);
        this.btnNext.on(XOF.TouchEvent.TAP, this.onClickNext, this);
        y.default.eventMgr.on(1052, this.onBuy, this);
        y.default.eventMgr.on(1053, this.updateShop, this);
        y.default.eventMgr.on(1032, this.updateShop, this);
        y.default.eventMgr.on(m.default.SHOP_ITEM_TAP, this.onItemTap, this);
        this.shopItems.forEach(function (t) {
          return t.onOpen();
        });
        this.page = 1;
        this.updateTypeBtn();
        this.setShop(t);
        this.updateShop();
        this.updateButton();
        this.onItemTap(undefined);
      };
      t.prototype.onClose = function () {
        i.prototype.onClose.call(this);
        this.bg.onClose();
        this.bg.off(m.default.CLOSE, this.close, this);
        this.shopItems.forEach(function (t) {
          return t.onClose();
        });
        this.btnUp.off(XOF.TouchEvent.TAP, this.onClickUp, this);
        this.btnNext.off(XOF.TouchEvent.TAP, this.onClickNext, this);
        y.default.eventMgr.off(1052, this.onBuy, this);
        y.default.eventMgr.off(1032, this.updateShop, this);
        y.default.eventMgr.off(1053, this.updateShop, this);
        y.default.eventMgr.off(m.default.SHOP_ITEM_TAP, this.onItemTap, this);
        y.default.viewMgr.close(_.default.ShopCount);
        y.default.viewMgr.close(_.default.ShopTips);
        this.group = undefined;
        this.event(m.default.CLOSE);
        if (
          [
            u.default.FIXED,
            u.default.BUY,
            u.default.SELL,
            u.default.CONFIRM,
            u.default.CONFIRM_PRESS,
          ].indexOf(s.default.getFingerState()) >= 0
        )
          s.default.setFingerState(u.default.NORMAL);
        l.default.removeAllEvents(this, m.default.CLOSE);
      };
      t.prototype.onItemTap = function (t) {
        for (var e in this.shopItems) {
          this.shopItems[e].selected = t == this.shopItems[e];
        }
      };
      t.prototype.onChange = function (t) {
        this.page = 1;
        this.setShop(t);
        this.updateShop();
        this.updateButton();
        this.onItemTap(undefined);
      };
      t.prototype.onClickUp = function () {
        var t = this.page - 1;
        if (r.default.isRange(t, 1, this.max)) {
          this.page = t;
          this.updateShop();
          this.updateButton();
          this.onItemTap(undefined);
        }
      };
      t.prototype.onClickNext = function () {
        var t = this.page + 1;
        if (r.default.isRange(t, 1, this.max)) {
          this.page = t;
          this.updateShop();
          this.updateButton();
          this.onItemTap(undefined);
        }
      };
      t.prototype.onBuy = function (t, i) {
        var e;
        y.default.viewMgr.close(_.default.ShopTips);
        y.default.viewMgr.close(_.default.ShopCount);
        var a = d.default.shops[t][i];
        if (!y.default.userData.bag.canConsume(a.cost)) {
          var n = {},
            o = void 0,
            r = void 0;
          for (var s in a.cost) {
            n[s] = a.cost[s] * 1;
            o = parseInt(s);
            r = n[s];
          }
          y.default.eventMgr.event(1054, [
            h.default.tr(
              o == v.default.resourceIds.coin ? 54 : 55,
              v.default.getItemName(o),
              r - y.default.userData.bag.getItemCount(o)
            ),
          ]);
          return;
        }
        var u, l;
        for (var s in a.item) {
          u = v.default.getItemData(s);
          l = a.item[s];
          break;
        }
        var f = function (t) {
          var e = {},
            n,
            o;
          for (var r in a.cost) {
            e[r] = a.cost[r] * t;
            n = parseInt(r);
            o = e[r];
          }
          y.default.eventMgr.event(1054, [
            {
              text: h.default.tr(
                n != v.default.resourceIds.coin ? 51 : t > 1 ? 50 : 46,
                u.name,
                o,
                v.default.getItemName(n),
                t
              ),
              confirm: {
                callback: function () {
                  if (y.default.userData.bag.canConsume(e)) {
                    y.default.userData.shop.buy(i, t);
                  } else {
                    y.default.viewMgr.close(_.default.MsgBox);
                    y.default.eventMgr.event(1054, [
                      h.default.tr(
                        n == v.default.resourceIds.coin ? 54 : 55,
                        v.default.getItemName(n),
                        o - y.default.userData.bag.getItemCount(n)
                      ),
                    ]);
                  }
                },
                close: true,
              },
              cancel: {},
              close: { hide: true },
            },
          ]);
        };
        var c = { itemData: u, count: l };
        y.default.viewMgr.open(_.default.ShopCount, [
          c,
          a.cost,
          (e = a === null || a === void 0 ? void 0 : a.count) !== null &&
          e !== void 0
            ? e
            : 1,
        ]);
        var p = y.default.viewMgr.getOpenView(_.default.ShopCount);
        p.on(m.default.CONFIRM, function (t) {
          return f(t);
        });
      };
      return t;
    })(i.default);
    e.default = c;
  });
  t(Fc);
  var Bc = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n;
    (function (t) {
      t[(t["BUY"] = 0)] = "BUY";
      t[(t["SELL"] = 1)] = "SELL";
      t[(t["FIXED"] = 2)] = "FIXED";
      t[(t["FIXEDALL"] = 3)] = "FIXEDALL";
    })(n || (n = {}));
    e.default = n;
  });
  t(Bc);
  var Nc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Mf);
    var i = o(T);
    var l = o(dt);
    var a = o(q);
    var s = o(k);
    var f = o(st);
    var c = o(x);
    var p = o(Bc);
    var d = o(me);
    var h = o(_e);
    var v = o(W);
    var u = (function (u) {
      n(t, u);
      function t() {
        var t = u.call(this) || this;
        t.orderIndex = i.default.TIPS;
        t.size(178, 120);
        v.default.initSkin("ui/Shop/ShopTips", t, t.content);
        t.btnOk.label = l.default.tr(42);
        t.btnOk.textPressOffsetY = 1;
        t.btnCancel.label = l.default.tr(43);
        t.btnCancel.textPressOffsetY = 1;
        return t;
      }
      t.prototype.onOpen = function (t, e, n, o) {
        u.prototype.onOpen.call(this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.onClickCancel, this);
        this.title = l.default.tr(44);
        this.fingerState = d.default.getFingerState();
        d.default.setFingerState(h.default.CONFIRM);
        if (t == p.default.BUY) {
          var r = 0,
            i = 0;
          for (var a in n) {
            r = parseFloat(a);
            i = n[a];
          }
          this.labTips.text = l.default.tr(
            r != f.default.resourceIds.coin ? 51 : o > 1 ? 50 : 46,
            e.name,
            i * o,
            f.default.getItemName(r),
            o
          );
        } else if (t == p.default.SELL) {
          var s = e.price ? Math.ceil((o / 2) * e.price) : 0;
          this.labTips.text = l.default.tr(
            o > 1 ? 62 : 47,
            e.name,
            s,
            f.default.getItemName(f.default.resourceIds.coin),
            o
          );
        } else if (t == p.default.FIXED) {
          var r = 0,
            i = 0;
          for (var a in n) {
            r = parseFloat(a);
            i = n[a];
          }
          this.labTips.text = l.default.tr(
            48,
            e.name,
            i,
            f.default.getItemName(r)
          );
        } else if (t == p.default.FIXEDALL);
      };
      t.prototype.onClose = function () {
        u.prototype.onClose.call(this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.onClickCancel, this);
        if (
          d.default.fingerIsState(
            h.default.SELL,
            h.default.FIXED,
            h.default.BUY,
            h.default.CONFIRM,
            h.default.CONFIRM_PRESS
          )
        ) {
          d.default.setFingerState(h.default.NORMAL);
        }
        s.default.removeAllEvents(this);
      };
      t.prototype.onClickOk = function () {
        this.event(c.default.CONFIRM);
        d.default.setFingerState(this.fingerState);
        a.default.viewMgr.closeView(this);
      };
      t.prototype.close = function () {
        this.onClickCancel();
      };
      t.prototype.onClickCancel = function () {
        a.default.viewMgr.closeView(this);
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(Nc);
  var Xc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(R);
    var i = o(T);
    var a = o(q);
    var s = o(dt);
    var u = o(x);
    var l = o(k);
    var f = o(_e);
    var c = o(me);
    var p = o(W);
    var d = o(st);
    var h = o(V);
    var v = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.orderIndex = i.default.TIPS;
        p.default.initSkin("ui/Shop/ShopBuyCount", t, t);
        t.btnOk.label = s.default.tr(42);
        t.btnOk.textPressOffsetY = 1;
        return t;
      }
      t.prototype.onOpen = function (t, e, n) {
        if (n === void 0) {
          n = 99;
        }
        o.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.onClickClose, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnUp.on(XOF.TouchEvent.TAP, this.onClickChange, this, [1]);
        this.btnUp10.on(XOF.TouchEvent.TAP, this.onClickChange, this, [10]);
        this.btnDown.on(XOF.TouchEvent.TAP, this.onClickChange, this, [-1]);
        this.btnDown10.on(XOF.TouchEvent.TAP, this.onClickChange, this, [-10]);
        this.btnMax.on(XOF.TouchEvent.TAP, this.onClickMax, this);
        this.imgPrice.on(XOF.TouchEvent.TAP, this.onClickPrice, this);
        this.fingerState = c.default.getFingerState();
        this.itemBox.data = t;
        c.default.setFingerState(f.default.CONFIRM);
        this.labTitle.text = h.default.tr(163);
        this.showPriceGroup(true);
        this.value = 1;
        this.max = n;
        this.price = e;
        this.updateView();
        this.labName.text = t.itemData.name;
        this.btnUp.visible =
          this.btnDown.visible =
          this.btnMax.visible =
            this.max > 1;
        this.labName.textColor = d.default.getQualityColor(t.itemData.quality);
        this.btnDown10.visible = this.btnUp10.visible = false;
      };
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.onClickClose, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnUp.off(XOF.TouchEvent.TAP, this.onClickChange, this);
        this.btnUp10.off(XOF.TouchEvent.TAP, this.onClickChange, this);
        this.btnDown.off(XOF.TouchEvent.TAP, this.onClickChange, this);
        this.btnDown10.off(XOF.TouchEvent.TAP, this.onClickChange, this);
        this.imgPrice.off(XOF.TouchEvent.TAP, this.onClickPrice, this);
        this.btnMax.off(XOF.TouchEvent.TAP, this.onClickMax, this);
        l.default.removeAllEvents(this);
      };
      t.prototype.updateView = function () {
        this.labCount.text = this.value + "";
        for (var t in this.price) {
          this.imgPrice.skin = d.default.getItemData(t).icon;
          this.labPrice.text = l.default.formatMoney(
            this.value * this.price[t]
          );
          break;
        }
      };
      t.prototype.onClickOk = function () {
        this.event(u.default.CONFIRM, [this.value]);
        c.default.setFingerState(this.fingerState);
        a.default.viewMgr.closeView(this);
      };
      t.prototype.close = function () {
        this.onClickClose();
      };
      t.prototype.onClickClose = function () {
        a.default.viewMgr.closeView(this);
        if (
          c.default.fingerIsState(
            f.default.SELL,
            f.default.FIXED,
            f.default.BUY,
            f.default.CONFIRM,
            f.default.CONFIRM_PRESS
          )
        ) {
          c.default.setFingerState(f.default.NORMAL);
        }
      };
      t.prototype.onClickChange = function (t) {
        this.value += t;
        if (this.value < 1) this.value = 1;
        else if (this.value > this.max) this.value = this.max;
        this.updateView();
      };
      t.prototype.onClickPrice = function () {
        for (var t in this.price) {
          a.default.eventMgr.event(1033, [d.default.getItemData(t)]);
          break;
        }
      };
      t.prototype.onClickMax = function () {
        this.value = this.max;
        this.updateView();
      };
      t.prototype.showPriceGroup = function (t) {
        this.lab2.visible = this.gPrice.visible = t;
      };
      return t;
    })(r.default);
    e.default = v;
  });
  t(Xc);
  var Uc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Fc);
    var i = o(D);
    var a = o(q);
    var s = o(I);
    var u = o(Nc);
    var l = o(Xc);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.viewMgr.register(s.default.Shop, r.default);
        a.default.viewMgr.register(s.default.ShopTips, u.default);
        a.default.viewMgr.register(s.default.ShopCount, l.default);
        return t;
      }
      return t;
    })(i.default);
    e.default = f;
  });
  t(Uc);
  var Hc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Pl);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.textNormalColor = "rgb(221,197,147)";
        t.textLightColor = "rgb(255,255,184)";
        t.textPressOffsetY = 0;
        return t;
      }
      Object.defineProperty(t.prototype, "label", {
        get: function () {
          return this.textDisplay ? this.textDisplay.text : "";
        },
        set: function (t) {
          this.textDisplay.text = t;
          this.textDisplay.textAlign = "center";
          this.updateTex();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "textDisplay", {
        get: function () {
          if (!this.$textDisplay) {
            this.$textDisplay = new XOF.Label();
            this.addChild(this.textDisplay);
            this.on(XOF.Event.RESIZE, this.updateTex, this);
          }
          return this.$textDisplay;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "labelColor", {
        get: function () {
          return this.textDisplay.textColor;
        },
        set: function (t) {
          this.textDisplay.textColor = this.textNormalColor = t;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "labelFontSize", {
        get: function () {
          return this.textDisplay.fontSize;
        },
        set: function (t) {
          this.textDisplay.fontSize = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.$updateState = function () {
        e.prototype.$updateState.call(this);
        if (this.skin)
          XOF.loader.loadImage(
            this.skin,
            undefined,
            undefined,
            this.updateTex,
            this
          );
      };
      t.prototype.updateTex = function () {
        if (this.$textDisplay && XOF.loader.get(this.skin)) {
          var t = this.width,
            e = this.height;
          this.textDisplay.vAlign = "middle";
          this.textDisplay.textAlign = "center";
          this.textDisplay.size(t, e);
          if (this.disabled) {
            this.textDisplay.textColor = this.textNormalColor;
            this.textDisplay.pivotY = 0;
          } else if (this.$selected || this.$selected2) {
            this.textDisplay.textColor = this.textLightColor;
            this.textDisplay.pivotY = -this.textPressOffsetY;
          } else if (this.$hover) {
            this.textDisplay.textColor = this.textLightColor;
            this.textDisplay.pivotY = 0;
          } else {
            this.textDisplay.textColor = this.textNormalColor;
            this.textDisplay.pivotY = 0;
          }
        }
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(Hc);
  var Gc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Hc);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.buttons = [];
        t.imgLine = new XOF.Image();
        t.imgLine.skin = "interface/common/12.png";
        t.imgLine.size(3, 21).addTo(t);
        return t;
      }
      Object.defineProperty(t.prototype, "selectIndex", {
        get: function () {
          return this.buttons.length ? this.$selectIndex : -1;
        },
        set: function (t) {
          if (this.buttons.length) {
            this.$selectIndex = Math.min(t, this.buttons.length - 1);
            this.updateState();
          } else {
            this.$selectIndex = -1;
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.setGroups = function (t) {
        var i = this;
        this.groups = t;
        if (t) {
          while (t.length < this.buttons.length) {
            var e = this.buttons.pop();
            e.off(XOF.TouchEvent.TAP, this.onClick, this);
            e.removeSelf();
          }
          while (t.length > this.buttons.length) {
            var e = new r.default();
            e.on(XOF.TouchEvent.TAP, this.onClick, this, [e]);
            this.addChild(e);
            this.buttons.push(e);
          }
          this.addChildAt(this.imgLine, this.numChild);
          var a = [13, 4, 8, 0];
          t.forEach(function (t, e) {
            var n = i.buttons[e];
            n.textPressOffsetY = -1;
            var o = a[t.size || 0];
            n.label = t.title;
            n.textDisplay.textAlign = "center";
            n.textDisplay.y = 4;
            var r = "interface/common/" + o + ".png";
            n.on(XOF.Event.COMPLETE, i.reoreder, i);
            n.setImages(
              r,
              "interface/common/" + (o + 1) + ".png",
              "interface/common/" + (o + 2) + ".png"
            );
          });
          this.selectIndex = 0;
        } else {
          this.removeChildren();
        }
      };
      t.prototype.reoreder = function () {
        var e = 0;
        this.buttons.forEach(function (t) {
          t.pos(e, 0);
          e += t.width;
          if (t.textDisplay) {
            t.textDisplay.x = (t.width || 0) / 2;
          }
        });
        this.imgLine.x = e;
        this.imgLine.width = Math.max(0, this.width - e);
      };
      t.prototype.updateState = function () {
        var n = this;
        this.buttons.forEach(function (t, e) {
          if (e == n.$selectIndex) {
            t.selected = true;
          } else if (t.selected) {
            t.selected = false;
          }
        });
      };
      t.prototype.onClick = function (t) {
        var e = this.buttons.indexOf(t);
        if (e >= 0) {
          this.selectIndex = e;
          this.event("change");
        }
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(Gc);
  var Vc = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {
        this.reset();
      }
      t.prototype.reset = function () {
        this.childs = [];
      };
      t.prototype.add = function (t, e, n) {
        var o = this;
        if (n) {
          o = this.get(n);
        }
        if (o) {
          if (!o.childs) o.childs = [];
          o.childs.push({ id: t, data: e });
        } else {
          XOF.log("没有父节点..", t, n);
        }
      };
      t.prototype.rm = function (t) {};
      t.prototype.setOpen = function (t, e) {
        var n = this.get(t);
        if (n) n.opened = e;
        else XOF.log("不存在的节点..");
      };
      t.prototype.getOpen = function (t) {
        var e = this.get(t);
        if (e) return e.opened;
      };
      t.prototype.get = function (t) {
        return s(this.childs, t);
      };
      t.prototype.getList = function (r, i) {
        if (i === void 0) {
          i = 65536;
        }
        var a = [];
        var s = 0;
        function u(t) {
          for (var e = 0, n = t; e < n.length; e++) {
            var o = n[e];
            if (a.length >= i) return;
            s += 1;
            if (s > r) {
              a.push(o);
            }
            if (o.childs && o.opened) {
              u(o.childs);
            }
          }
        }
        u(this.childs);
        return a;
      };
      return t;
    })();
    e.default = n;
    function s(t, e) {
      var n;
      for (var o = 0, r = t; o < r.length; o++) {
        var i = r[o];
        if (i.id == e) {
          n = i;
          break;
        }
        if (i.childs) {
          var a = s(i.childs, e);
          if (a) {
            n = a;
            break;
          }
        }
      }
      return n;
    }
  });
  t(Vc);
  var $c = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(we);
    var i = o(W);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/Quest/QuestItem", t, t);
        t.on(XOF.TouchEvent.TOUCH_ENTER, t.onTouchEnter, t);
        t.on(XOF.TouchEvent.TOUCH_OUT, t.onTouchOut, t);
        t.imgGo.visible = t.imgGoBg.visible = false;
        return t;
      }
      t.prototype.onTouchEnter = function () {
        this.mouseIn = true;
        this.updateLight();
      };
      t.prototype.onTouchOut = function () {
        this.mouseIn = false;
        this.updateLight();
      };
      Object.defineProperty(t.prototype, "select", {
        get: function () {
          return this.$select;
        },
        set: function (t) {
          this.$select = t;
          this.updateLight();
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.updateLight = function () {
        var t, e;
        this.imgLight.alpha = this.select ? 1 : 0.7;
        if (this.mouseIn) {
          this.imgLight.visible = this.mouseIn;
        } else {
          this.imgLight.visible = (
            (e =
              (t = this === null || this === void 0 ? void 0 : this.data) ===
                null || t === void 0
                ? void 0
                : t.isChapter) !== null && e !== void 0
              ? e
              : false
          )
            ? false
            : this.select;
        }
      };
      t.prototype.setOpen = function (t) {
        var e;
        if (
          (e = this === null || this === void 0 ? void 0 : this.data) ===
            null || e === void 0
            ? void 0
            : e.isChapter
        ) {
          this.btn.skin = t
            ? "interface/windowcommon.img/193.png"
            : "interface/windowcommon.img/191.png";
        }
      };
      Object.defineProperty(t.prototype, "data", {
        get: function () {
          return this.$data;
        },
        set: function (t) {
          this.$data = t;
          if (t) {
            this.visible = true;
            this.imgType.visible =
              this.btn.visible =
              this.imgGo.visible =
              this.imgGoBg.visible =
                false;
            if (t.isChapter) {
              this.btn.visible = true;
              this.imgBg.skin = "interface/windowcommon.img/46.png";
              this.labTitle.x = 20;
              this.labTitle.textColor = "rgb(185,148,96)";
            } else {
              this.imgType.visible = true;
              this.imgType.skin =
                "interface/quest/quest_tag.img/" + this.data.tag + ".png";
              this.imgBg.skin = "interface/windowcommon.img/190.png";
              this.labTitle.x = 66;
              this.labTitle.textColor = r.default.registerColors[0];
              if (t.running) {
                this.imgGo.visible = this.imgGoBg.visible = true;
              }
            }
            this.labTitle.text = t.title;
          } else {
            this.visible = false;
          }
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(XOF.Sprite);
    e.default = a;
  });
  t($c);
  var qc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var c = o(V);
    var p = o(dt);
    var d = o(q);
    var i = o(x);
    var a = o(we);
    var s = o(W);
    var r = o(Mf);
    var u = o(Gc);
    var l = o(Vc);
    var f = o($c);
    var h = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        s.default.initSkin("ui/Quest/Quest", t, t.content);
        t.size(480, 280);
        var e = (t.checkList = new u.default());
        e.pos(2, 2)
          .size(t.content.width - 6, 21)
          .addTo(t.content);
        e.setGroups([
          { title: c.default.tr(91), value: 0 },
          { title: c.default.tr(92), size: 1, value: 1 },
        ]);
        t.items = [];
        for (var n = 0; n < 10; n++) {
          var o = new f.default();
          o.pos(0, 0 + n * 22);
          t.treeBox.addChild(o);
          t.items.push(o);
        }
        t.treeAll = new l.default();
        t.treeFinish = new l.default();
        t.listSize = 10;
        t.labName.textColor = a.default.registerColors[0];
        t.labText = new a.default();
        t.labText.lineSpacing = 1;
        t.labText.size(215, 300).pos(241, 52);
        t.labText.addTo(t.content);
        return t;
      }
      t.prototype.updateTree = function () {
        this.treeAll.reset();
        this.treeAll.add(-1, {
          id: -1,
          isChapter: true,
          title: c.default.tr(94),
        });
        this.treeAll.add(-2, {
          id: -2,
          isChapter: true,
          title: c.default.tr(95),
        });
        this.treeAll.setOpen(-1, true);
        this.treeAll.setOpen(-2, true);
        var t = [];
        for (var e in d.default.userData.quest.list) {
          var n = d.default.userData.quest.list[e];
          var o = p.default.conf.quest.quest[n.id];
          this.treeAll.add(
            n.id,
            {
              id: o.id,
              isChapter: false,
              title: o.name,
              running: true,
              tag: o.tag,
            },
            -1
          );
          t.push(n.id);
        }
        for (var e in p.default.conf.quest.quest) {
          if (t.indexOf(e) >= 0) continue;
          var o = p.default.conf.quest.quest[e];
          if (o.hide == true) continue;
          var r = true;
          if (o.preChapter) {
            for (var i = 0, a = o.preChapter; i < a.length; i++) {
              var s = a[i];
              var u = d.default.userData.home.getFlag(s);
              if (u != -1) {
                r = false;
                break;
              }
            }
          }
          if (o.preQuest) {
            for (var l = 0, f = o.preQuest; l < f.length; l++) {
              var s = f[l];
              var u = d.default.userData.home.getFlag(s);
              if (u != -1) {
                r = false;
                break;
              }
            }
          }
          if (!r) continue;
          this.treeAll.add(
            o.id,
            {
              id: o.id,
              isChapter: false,
              title: o.name,
              running: false,
              tag: o.tag,
            },
            -2
          );
        }
        this.updateBar();
      };
      t.prototype.updateBar = function () {
        this.bar.max = Math.max(
          0,
          this.treeAll.getList(0).length - this.listSize
        );
        if (this.bar.max < this.listSize) this.bar.value = 0;
      };
      t.prototype.updateList = function () {
        var o = this;
        if (this.groupIndex == 0) {
          var t = this.treeAll.getList(this.bar.value, this.listSize);
          var e = t.length;
          t.forEach(function (t, e) {
            var n;
            o.items[e].data = t.data;
            o.items[e].select =
              ((n = t === null || t === void 0 ? void 0 : t.data) === null ||
              n === void 0
                ? void 0
                : n.id) == o.selectId;
            o.items[e].setOpen(t.opened);
          });
          for (var n = e; n < this.listSize; n++) {
            this.items[n].data = undefined;
          }
        } else if (this.groupIndex == 1) {
          var t = this.treeFinish.getList(this.bar.value, this.listSize);
          var e = t.length;
          t.forEach(function (t, e) {
            var n;
            o.items[e].select =
              ((n = t === null || t === void 0 ? void 0 : t.data) === null ||
              n === void 0
                ? void 0
                : n.id) == o.selectId;
            o.items[e].data = t.data;
            o.items[e].setOpen(t.opened);
          });
          for (var n = e; n < this.listSize; n++) {
            this.items[n].data = undefined;
          }
        }
      };
      t.prototype.updateQuest = function () {
        if (this.selectId) {
          var t = d.default.userData.quest.getProgress(this.selectId);
          var e = p.default.conf.quest.quest[this.selectId];
          this.labName.text = e.name;
          if (t == -1) {
            this.labText.textColor = a.default.registerColors[0];
            this.labText.text = e.begin || "";
          } else {
            this.labText.text =
              "<30>林纳斯: 你好...</30>\n\n<30>林纳斯: 能帮我一个忙吗？</30>\n\n<31>雨: 抱歉……不感兴趣</31>";
          }
        } else {
          this.labName.text = this.labText.text = "";
        }
      };
      t.prototype.update = function () {
        this.updateTree();
        this.updateList();
        this.updateQuest();
      };
      t.prototype.onChange = function () {
        this.selectId = undefined;
        this.groupIndex =
          this.checkList.groups[this.checkList.selectIndex].value;
        this.updateList();
        this.updateQuest();
      };
      t.prototype.onScroll = function (t) {
        if (this.treeMouseIn) {
          this.bar.value += -t;
          this.updateList();
        }
      };
      t.prototype.onMoveMouse = function (t, e) {
        var n;
        if (e.type == XOF.TouchEvent.TOUCH_ENTER) n = true;
        else if (e.type == XOF.TouchEvent.TOUCH_OUT) n = false;
        if (n != undefined) {
          if (t == 1) {
            this.treeMouseIn = n;
          }
        }
      };
      t.prototype.onClickItem = function (t) {
        var e = t.data;
        var n = this.groupIndex == 0 ? this.treeAll : this.treeFinish;
        if (e.isChapter) {
          var o = n.getOpen(e.id);
          n.setOpen(e.id, !o);
          this.updateBar();
        } else {
          this.selectId = e.id;
        }
        this.updateList();
        this.updateQuest();
      };
      t.prototype.onOpen = function () {
        var e = this;
        r.prototype.onOpen.call(this);
        this.pos(180, 170);
        this.title = c.default.tr(93);
        this.groupIndex = 0;
        this.selectId = undefined;
        this.bar.value = 0;
        this.treeMouseIn = false;
        this.updateTree();
        this.updateList();
        this.updateQuest();
        this.checkList.on("change", this.onChange, this);
        this.treeBox.on(XOF.TouchEvent.TOUCH_ENTER, this.onMoveMouse, this, [
          1,
        ]);
        this.treeBox.on(XOF.TouchEvent.TOUCH_OUT, this.onMoveMouse, this, [1]);
        XOF.stage.on(XOF.TouchEvent.MOUSE_SCROLL, this.onScroll, this);
        d.default.eventMgr.on(1041, this.update, this);
        d.default.eventMgr.on(1059, this.update, this);
        d.default.eventMgr.on(1058, this.update, this);
        d.default.eventMgr.on(1060, this.update, this);
        this.items.forEach(function (t) {
          return t.on(XOF.TouchEvent.TAP, e.onClickItem, e, [t]);
        });
        this.bar.on(i.default.SCROLLBAR_CHANGE, this.updateList, this);
        this.bar.register();
      };
      t.prototype.onClose = function () {
        var e = this;
        r.prototype.onClose.call(this);
        delete this.openChapters;
        delete this.selectId;
        this.checkList.off("change", this.onChange, this);
        this.treeBox.off(XOF.TouchEvent.TOUCH_ENTER, this.onMoveMouse, this);
        this.treeBox.off(XOF.TouchEvent.TOUCH_OUT, this.onMoveMouse, this);
        XOF.stage.off(XOF.TouchEvent.MOUSE_SCROLL, this.onScroll, this);
        d.default.eventMgr.off(1041, this.update, this);
        d.default.eventMgr.off(1059, this.update, this);
        d.default.eventMgr.off(1058, this.update, this);
        d.default.eventMgr.off(1060, this.update, this);
        this.items.forEach(function (t) {
          return t.off(XOF.TouchEvent.TAP, e.onClickItem, e);
        });
        this.bar.off(i.default.SCROLLBAR_CHANGE, this.updateList, this);
        this.bar.unregister();
      };
      return t;
    })(r.default);
    e.default = h;
  });
  t(qc);
  var Kc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(D);
    var a = o(I);
    var s = o(qc);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.viewMgr.register(a.default.Quest, s.default);
        return t;
      }
      return t;
    })(i.default);
    e.default = u;
  });
  t(Kc);
  var Yc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var s =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var u = o(V);
    var l = o(q);
    var r = o(R);
    var i = o(W);
    var f = o(w);
    var a = o(T);
    var c = o($e);
    var p = o(dt);
    var d = o(k);
    var h = o(st);
    var v = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/RoleMenu/MenuSkillUpgrade", t, t);
        t.orderIndex = a.default.MAIN_UI2;
        t.listCost.itemRenderer = Tf.MenuSkillUpgradeCostView;
        return t;
      }
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClick, this);
        l.default.eventMgr.on(1035, this.updateView, this);
        this.id = t;
        this.updateView();
      };
      t.prototype.updateView = function () {
        var t = l.default.userData.skill;
        var e = this.id;
        var n = c.default.getData(e);
        var o = t.getSkillLv(e);
        this.labTitle.text = n.name;
        this.skillIcon.data = { id: e, lv: o, data: n, selected: false };
        this.labDesc.text = d.default.format.apply(
          d.default,
          s([n.desc], c.default.getSkillLevelProperty(e, o))
        );
        this.labCd.text = u.default.tr(108, f.default.toFixed(n.cd / 1e3, 1));
        this.labCost.text = u.default.tr(109, n.mp);
        this.labCost2.text =
          h.default.getItemName(h.default.commonIds.color) +
          ":" +
          (n.colourless || 0) +
          "个";
        var r = p.default.conf.skills.level[o];
        var i = [];
        for (var a in r.cost) {
          i.push({
            id: a,
            count: r.cost[a],
            color:
              l.default.userData.bag.getItemCount(a) > r.cost[a]
                ? "#ffffff"
                : "#ff0000",
          });
        }
        this.listCost.dataProvider = i;
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClick, this);
        l.default.eventMgr.off(1035, this.updateView, this);
      };
      t.prototype.onClick = function () {
        l.default.userData.skill.upgrade(this.id);
      };
      return t;
    })(r.default);
    e.default = v;
  });
  t(Yc);
  var Wc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(vl);
    var a = o(W);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/RoleMenu/MenuSkillIcon", t, t);
        t.imgLight.visible = t.imgEnabled.visible = t.imgWhite.visible = false;
        return t;
      }
      t.prototype.dataChanged_ = function () {
        e.prototype.dataChanged_.call(this);
        var t = this.data;
        this.imgIcon.skin = t.data.icon;
        this.imgLight.visible = t.selected;
        this.labLv.text = r.default.tr(104, t.lv);
      };
      return t;
    })(i.default);
    e.default = s;
  });
  t(Wc);
  var zc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = o(dt);
    var f = o(q);
    var r = o(R);
    var i = o(x);
    var a = o(I);
    var s = o(W);
    var c = o($e);
    var u = o(Wc);
    var p = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        s.default.initSkin("ui/RoleMenu/MenuSkill", t, t);
        t.listLow.itemRenderer = u.default;
        t.listHigh.itemRenderer = u.default;
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(i.default.CLOSE, this.close, this);
        this.listLow.on(i.default.ITEM_TAP, this.onSelected, this);
        this.listHigh.on(i.default.ITEM_TAP, this.onSelected, this);
        f.default.eventMgr.on(1035, this.updateView, this);
        this.btnList.selectIndex = 0;
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.bg.onClose();
        this.listLow.off(i.default.ITEM_TAP, this.onSelected, this);
        this.listHigh.off(i.default.ITEM_TAP, this.onSelected, this);
        f.default.eventMgr.off(1035, this.updateView, this);
      };
      t.prototype.updateView = function () {
        var t, e;
        var n = f.default.userData.skill;
        var o = [],
          r = [];
        var i = l.default.conf.skills.conf.lowSkills.skills;
        var a =
          (e =
            (t = l.default.conf.skills.conf) === null || t === void 0
              ? void 0
              : t[f.default.userData.hero.job]) === null || e === void 0
            ? void 0
            : e.skills;
        for (var s in a) {
          var u = a[s];
          if ([131, 133].indexOf(u) >= 0) continue;
          if (i.indexOf(u) >= 0) {
            o.push({
              id: u,
              lv: n.getSkillLv(u),
              data: c.default.getData(u),
              selected: this.selectedId == u,
            });
          } else {
            r.push({
              id: u,
              lv: n.getSkillLv(u),
              data: c.default.getData(u),
              selected: this.selectedId == u,
            });
          }
        }
        this.listLow.dataProvider = o;
        this.listHigh.dataProvider = r;
      };
      t.prototype.onSelected = function (t) {
        this.selectedId = t.id;
        this.updateView();
        f.default.viewMgr.open(a.default.SkillUpgrade, [this.selectedId]);
      };
      return t;
    })(r.default);
    e.default = p;
  });
  t(zc);
  var Qc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(D);
    var a = o(I);
    var s = o(Yc);
    var u = o(zc);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.viewMgr.register(a.default.Skill, u.default);
        r.default.viewMgr.register(a.default.SkillUpgrade, s.default);
        return t;
      }
      return t;
    })(i.default);
    e.default = l;
  });
  t(Qc);
  var Jc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.keys = [];
        r.default.eventMgr.on(1063, t.keyPress, t);
        r.default.eventMgr.on(1064, t.keyRelease, t);
        return t;
      }
      Object.defineProperty(t.prototype, "enabledKeyboard", {
        get: function () {
          return !!this.$enabledKeyboard;
        },
        set: function (t) {
          this.$enabledKeyboard = t;
          if (t) {
            XOF.stage.on(XOF.Event.KEY_DOWN, this.onKeyPress2, this);
            XOF.stage.on(XOF.Event.KEY_UP, this.onKeyRelease2, this);
          } else {
            XOF.stage.off(XOF.Event.KEY_DOWN, this.onKeyPress2, this);
            XOF.stage.off(XOF.Event.KEY_UP, this.onKeyRelease2, this);
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.isDown = function (t) {
        return this.keys.indexOf(t) >= 0;
      };
      t.prototype.keyPress = function (t, e) {
        if (e === void 0) {
          e = false;
        }
        if (!this.isDown(t)) {
          this.event(XOF.Event.KEY_DOWN, [t]);
          if (e) {
            this.keys.push(t);
          } else {
            this.event(XOF.Event.KEY_UP, [t]);
          }
        }
      };
      t.prototype.keyRelease = function (t) {
        var e = this.keys.indexOf(t);
        if (e >= 0) {
          this.keys.splice(e, 1);
          this.event(XOF.Event.KEY_UP, [t]);
        }
      };
      t.prototype.onKeyPress2 = function (t) {
        this.keyPress(t, true);
      };
      t.prototype.onKeyRelease2 = function (t) {
        this.keyRelease(t);
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = i;
  });
  t(Jc);
  var Zc = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.params[0];
        var e = this.get("self");
        if (e && e.fightTarget && this.last != t) {
          e.setAction(t, true);
        }
        if (e.action == "stay" && this.last == t) {
          this.last = undefined;
          return Co.BehaviorState.SUSCESS;
        }
        this.last = e.action;
        return Co.BehaviorState.RUNNING;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(Zc);
  var tp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.get("self");
        if (t && t.fightTarget) {
          t.direction = t.position.x < t.fightTarget.position.x ? 1 : -1;
        }
        return Co.BehaviorState.SUSCESS;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(tp);
  var ep = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.time = 0;
        return t;
      }
      t.prototype.excute = function () {
        var t = this.get("self");
        if (t) {
          this.time += this.root.dt;
          if (this.time > 3) {
            this.time = 0;
            return Co.BehaviorState.SUSCESS;
          }
        }
        return Co.BehaviorState.RUNNING;
      };
      return t;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(ep);
  var np = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var l = o(w);
    var r = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.enter = function () {
        var t = this.get("self");
        var e = this.params,
          n = e[0],
          o = e[1],
          r = e[2],
          i = e[3],
          a = e[4];
        var s = l.default.randomInt(n, o) * (a ? l.default.radom1d1() : 1);
        var u = l.default.randomInt(r, i) * (a ? l.default.radom1d1() : 1);
        this.posTargetX = s + t.position.x;
        this.posTargetY = u + t.position.y;
      };
      e.prototype.excute = function () {
        var t, e;
        var n = this.get("self");
        if (n) {
          var o = void 0,
            r = void 0;
          if (Math.abs(this.posTargetX - n.position.x) <= 3) {
            o = true;
          }
          if (Math.abs(this.posTargetY - n.position.y) <= 3) {
            r = true;
          }
          var i =
            (e =
              (t = n === null || n === void 0 ? void 0 : n.attribute) ===
                null || t === void 0
                ? void 0
                : t.speed) !== null && e !== void 0
              ? e
              : 100;
          if (n.fightTarget) {
            n.direction = n.position.x < n.fightTarget.position.x ? 1 : -1;
          }
          var a = n.position.x < this.posTargetX ? 1 : -1;
          if (o && r) {
            n.stay();
            this.posTargetY = this.posTargetX = undefined;
            return Co.BehaviorState.SUSCESS;
          } else {
            if (n.hasAction(ht.RoleAction.DASH)) {
              n.setAction(ht.RoleAction.DASH);
            } else if (
              n.direction != a &&
              n.hasAction(ht.RoleAction.MOVE_BACK)
            ) {
              n.setAction(ht.RoleAction.MOVE_BACK);
            } else {
              n.setAction(ht.RoleAction.MOVE);
            }
            if (!o) {
              n.moveBy((this.posTargetX > n.position.x ? 1 : -1) * i, 0);
            }
            if (!r) {
              n.moveBy(0, (this.posTargetY > n.position.y ? 1 : -1) * i * 0.7);
            }
          }
          if (this.lastX == n.position.x && this.lastY == n.position.y) {
            n.stay();
            this.lastX = this.lastY = undefined;
            this.posTargetY = this.posTargetX = undefined;
            return Co.BehaviorState.SUSCESS;
          }
          this.lastX = n.position.x;
          this.lastY = n.position.y;
        }
        return Co.BehaviorState.RUNNING;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = r;
  });
  t(np);
  var op = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.enter = function () {
        this.time = 0;
      };
      e.prototype.excute = function () {
        var t, e;
        var n = this.get("self");
        if (n && n.fightTarget) {
          var o = this.params,
            r = o[0],
            i = o[1],
            a = o[2];
          this.time += this.root.dt;
          if (
            this.time * 1e3 < r &&
            n.script.fightObjectIsValid(n.fightTarget)
          ) {
            this.posTargetX = n.fightTarget.position.x;
            this.posTargetY = n.fightTarget.position.y;
            var s =
              (e =
                (t = n === null || n === void 0 ? void 0 : n.attribute) ===
                  null || t === void 0
                  ? void 0
                  : t.speed) !== null && e !== void 0
                ? e
                : 100;
            var u = void 0,
              l = void 0;
            if (Math.abs(this.posTargetX - n.position.x) <= i) {
              u = true;
            }
            if (Math.abs(this.posTargetY - n.position.y) <= a) {
              l = true;
            }
            n.direction = n.position.x < n.fightTarget.position.x ? 1 : -1;
            var f = n.position.x < this.posTargetX ? 1 : -1;
            if (u && l) {
              n.stay();
              this.posTargetY = this.posTargetX = undefined;
              return Co.BehaviorState.SUSCESS;
            } else {
              if (n.hasAction(ht.RoleAction.DASH)) {
                n.setAction(ht.RoleAction.DASH);
              } else if (
                n.direction != f &&
                n.hasAction(ht.RoleAction.MOVE_BACK)
              ) {
                n.setAction(ht.RoleAction.MOVE_BACK);
              } else {
                n.setAction(ht.RoleAction.MOVE);
              }
              if (!u) {
                n.moveBy((this.posTargetX > n.position.x ? 1 : -1) * s, 0);
              }
              if (!l) {
                n.moveBy(
                  0,
                  (this.posTargetY > n.position.y ? 1 : -1) * s * 0.7
                );
              }
            }
            if (this.lastX == n.position.x && this.lastY == n.position.y) {
              n.stay();
              this.lastX = this.lastY = undefined;
              this.posTargetY = this.posTargetX = undefined;
              return Co.BehaviorState.SUSCESS;
            }
            this.lastX = n.position.x;
            this.lastY = n.position.y;
          } else {
            n.stay();
            this.lastX = this.lastY = undefined;
            this.posTargetY = this.posTargetX = undefined;
            return Co.BehaviorState.FAILD;
          }
        }
        return Co.BehaviorState.RUNNING;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(op);
  var rp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.time = 0;
        return t;
      }
      t.prototype.excute = function () {
        var t = this.get("self");
        var e = this.params[0];
        if (t) {
          this.time += this.root.dt;
          if (this.time >= e / 1e3) {
            this.time = 0;
            return Co.BehaviorState.SUSCESS;
          }
          if (t.fightTarget) {
            t.direction = t.position.x < t.fightTarget.position.x ? 1 : -1;
          }
        }
        return Co.BehaviorState.RUNNING;
      };
      return t;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(rp);
  var ip = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.isTrue = function () {
        var t = this.get("self");
        if (t) {
          if (t.isNormalAction()) {
            return true;
          }
        }
        return false;
      };
      return e;
    })(Co.BehaviorCondition);
    e.default = o;
  });
  t(ip);
  var ap = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.isTrue = function () {
        var t = this.get("self");
        var e = this.params,
          n = e[0],
          o = e[1];
        if (t && t.fightTarget) {
          if (
            Math.abs(t.fightTarget.position.x - t.position.x) <= n &&
            Math.abs(t.fightTarget.position.y - t.position.y) <= o
          ) {
            return true;
          }
        }
        return false;
      };
      return e;
    })(Co.BehaviorCondition);
    e.default = o;
  });
  t(ap);
  var sp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.isTrue = function () {
        var t = this.self;
        if (t && t.fightTarget) {
          return t.script.fightObjectIsValid(t.fightTarget);
        }
        return false;
      };
      return e;
    })(Co.BehaviorCondition);
    e.default = o;
  });
  t(sp);
  var up = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.enter = function () {
        var t = this.params,
          e = t[0],
          n = t[1];
        var o = this.get("self");
        this.posTargetX = e + o.position.x;
        this.posTargetY = n + o.position.y;
      };
      e.prototype.excute = function () {
        var t, e;
        var n = this.get("self");
        if (n) {
          var o = void 0,
            r = void 0;
          if (Math.abs(this.posTargetX - n.position.x) <= 3) {
            o = true;
          }
          if (Math.abs(this.posTargetY - n.position.y) <= 3) {
            r = true;
          }
          if (n.fightTarget) {
            n.direction = n.position.x < n.fightTarget.position.x ? 1 : -1;
          }
          var i = n.position.x < this.posTargetX ? 1 : -1;
          var a =
            (e =
              (t = n === null || n === void 0 ? void 0 : n.attribute) ===
                null || t === void 0
                ? void 0
                : t.speed) !== null && e !== void 0
              ? e
              : 100;
          if (o && r) {
            n.stay();
            this.posTargetY = this.posTargetX = undefined;
            return Co.BehaviorState.SUSCESS;
          } else {
            if (n.hasAction(ht.RoleAction.DASH)) {
              n.setAction(ht.RoleAction.DASH);
            } else if (
              n.direction != i &&
              n.hasAction(ht.RoleAction.MOVE_BACK)
            ) {
              n.setAction(ht.RoleAction.MOVE_BACK);
            } else {
              n.setAction(ht.RoleAction.MOVE);
            }
            if (!o) {
              n.moveBy((this.posTargetX > n.position.x ? 1 : -1) * a, 0);
            }
            if (!r) {
              n.moveBy(0, (this.posTargetY > n.position.y ? 1 : -1) * a * 0.7);
            }
          }
          if (this.lastX == n.position.x && this.lastY == n.position.y) {
            n.stay();
            this.lastX = this.lastY = undefined;
            this.posTargetY = this.posTargetX = undefined;
            return Co.BehaviorState.SUSCESS;
          }
          this.lastX = n.position.x;
          this.lastY = n.position.y;
        }
        return Co.BehaviorState.RUNNING;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(up);
  var lp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.isFirst = true;
        return t;
      }
      t.prototype.isTrue = function () {
        if (this.isFirst) {
          this.isFirst = false;
          return true;
        }
        return false;
      };
      return t;
    })(Co.BehaviorCondition);
    e.default = o;
  });
  t(lp);
  var fp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.isTrue = function () {
        var t = this.params,
          e = t[0],
          n = t[1];
        var o = this.get("self");
        if (o) {
          var r = o.map.getFightObjects(o.camp).length;
          if (r >= e && r <= n) {
            return true;
          }
        }
        return false;
      };
      return e;
    })(Co.BehaviorCondition);
    e.default = o;
  });
  t(fp);
  var cp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.self,
          e = this.params[0];
        if (
          (t === null || t === void 0 ? void 0 : t.fightTarget) &&
          !this.isRun
        ) {
          t.skill(e);
        }
        if (t.isStayState() && this.isRun) {
          this.isRun = undefined;
          return Co.BehaviorState.SUSCESS;
        }
        this.isRun = t.hasSkillState(e);
        return Co.BehaviorState.RUNNING;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(cp);
  var pp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.isTrue = function () {
        var t = this.self;
        if (t) {
          var e = t.script.findFightObject();
          if (e) {
            this.setOutput(0, e);
            return true;
          }
        }
        return false;
      };
      return e;
    })(Co.BehaviorCondition);
    e.default = o;
  });
  t(pp);
  var dp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.getInput(0);
        if (t) {
          this.self.fightTarget = t;
        }
        return Co.BehaviorState.SUSCESS;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(dp);
  var hp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(w);
    var i = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.isTrue = function () {
        var t = this.self;
        var e = t.getWarlike();
        var n = r.default.randomHit(e / 100);
        if (n) {
          return true;
        }
        return false;
      };
      return e;
    })(Co.BehaviorCondition);
    e.default = i;
  });
  t(hp);
  var vp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t = this.params[0];
        console.log(t);
        return Co.BehaviorState.SUSCESS;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(vp);
  var yp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.enter = function () {
        var t = this.params,
          e = t[0],
          n = t[1];
        var o = this.self;
        this.posTargetX = e + o.position.x;
        this.posTargetY = n + o.position.y;
        if (o === null || o === void 0 ? void 0 : o.fightTarget) {
          var r = o.position.x > o.fightTarget.position.x ? -1 : 1;
          var i = o.position.y > o.fightTarget.position.y ? -1 : 1;
          this.posTargetX = o.position.x + e * r;
          this.posTargetY = o.position.y + n * i;
        }
      };
      e.prototype.excute = function () {
        var t, e;
        var n = this.self;
        if (n) {
          var o = void 0,
            r = void 0;
          if (Math.abs(this.posTargetX - n.position.x) <= 3) {
            o = true;
          }
          if (Math.abs(this.posTargetY - n.position.y) <= 3) {
            r = true;
          }
          if (n.fightTarget) {
            n.direction = n.position.x < n.fightTarget.position.x ? 1 : -1;
          }
          var i = n.position.x < this.posTargetX ? 1 : -1;
          var a =
            (e =
              (t = n === null || n === void 0 ? void 0 : n.attribute) ===
                null || t === void 0
                ? void 0
                : t.speed) !== null && e !== void 0
              ? e
              : 100;
          if (o && r) {
            n.stay();
            this.posTargetY = this.posTargetX = undefined;
            return Co.BehaviorState.SUSCESS;
          } else {
            if (n.hasAction(ht.RoleAction.DASH)) {
              n.setAction(ht.RoleAction.DASH);
            } else if (
              n.direction != i &&
              n.hasAction(ht.RoleAction.MOVE_BACK)
            ) {
              n.setAction(ht.RoleAction.MOVE_BACK);
            } else {
              n.setAction(ht.RoleAction.MOVE);
            }
            if (!o) {
              n.moveBy((this.posTargetX > n.position.x ? 1 : -1) * a, 0);
            }
            if (!r) {
              n.moveBy(0, (this.posTargetY > n.position.y ? 1 : -1) * a * 0.7);
            }
          }
          if (this.lastX == n.position.x && this.lastY == n.position.y) {
            n.stay();
            this.lastX = this.lastY = undefined;
            this.posTargetY = this.posTargetX = undefined;
            return Co.BehaviorState.SUSCESS;
          }
          this.lastX = n.position.x;
          this.lastY = n.position.y;
        }
        return Co.BehaviorState.RUNNING;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(yp);
  var _p = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (t) {
      n(e, t);
      function e() {
        return (t !== null && t.apply(this, arguments)) || this;
      }
      e.prototype.excute = function () {
        var t;
        var e = this.params[0];
        var n = this.get("self");
        if (
          (t = n === null || n === void 0 ? void 0 : n.script) === null ||
          t === void 0
            ? void 0
            : t.playSound
        ) {
          n.script.playSound(e);
        }
        return Co.BehaviorState.SUSCESS;
      };
      return e;
    })(Co.BehaviorAction);
    e.default = o;
  });
  t(_p);
  var mp = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(Zc);
    var r = n(tp);
    var i = n(ep);
    var a = n(np);
    var s = n(op);
    var u = n(rp);
    var l = n(ip);
    var f = n(ap);
    var c = n(sp);
    var p = n(up);
    var d = n(lp);
    var h = n(fp);
    var v = n(cp);
    var y = n(pp);
    var _ = n(dp);
    var m = n(hp);
    var g = n(vp);
    var b = n(yp);
    var O = n(_p);
    var w = (function () {
      function t() {}
      t.init = function () {
        Co.BehaviorParser.registerFunc("ActionFaceTo", r.default, "class");
        Co.BehaviorParser.registerFunc("ActionIdle", i.default, "class");
        Co.BehaviorParser.registerFunc("ActionMove", a.default, "class");
        Co.BehaviorParser.registerFunc("ActionAttack", o.default, "class");
        Co.BehaviorParser.registerFunc("ActionStay", u.default, "class");
        Co.BehaviorParser.registerFunc(
          "ActionFollowTarget",
          s.default,
          "class"
        );
        Co.BehaviorParser.registerFunc("ActionMoveBy", p.default, "class");
        Co.BehaviorParser.registerFunc("ActionSkill", v.default, "class");
        Co.BehaviorParser.registerFunc("ActionSetEnemy", _.default, "class");
        Co.BehaviorParser.registerFunc("ActionLog", g.default, "class");
        Co.BehaviorParser.registerFunc("ActionMoveBack", b.default, "class");
        Co.BehaviorParser.registerFunc("ActionPlaySound", O.default, "class");
        Co.BehaviorParser.registerFunc("ConditionIsStay", l.default, "class");
        Co.BehaviorParser.registerFunc("ConditionInRange", f.default, "class");
        Co.BehaviorParser.registerFunc(
          "ConditionHasTarget",
          c.default,
          "class"
        );
        Co.BehaviorParser.registerFunc(
          "ConditionIsFirstEnter",
          d.default,
          "class"
        );
        Co.BehaviorParser.registerFunc("SelfCampUnitCount", h.default, "class");
        Co.BehaviorParser.registerFunc("ConditionFindRole", y.default, "class");
        Co.BehaviorParser.registerFunc("ConditionIsAttack", m.default, "class");
      };
      return t;
    })();
    e.default = w;
  });
  t(mp);
  var gp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o($);
    var i = o(K);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.cleanList();
        return t;
      }
      t.inst = function () {
        if (!this.$inst) {
          this.$inst = new t();
        }
        return this.$inst;
      };
      t.prototype.cleanList = function () {
        this.list = [];
      };
      t.prototype.doList = function () {
        while (this.list.length) {
          var t = this.list.shift();
          this.send(t.protoType, t.body);
        }
      };
      t.prototype.connect = function () {
        var n = this;
        this.cleanList();
        if (!this.socket) {
          var t = (this.socket = io(r.default.socket, {
            reconnectionAttempts: 5,
            reconnectionDelay: 1e3,
            timeout: 500,
          }));
          t.on("connect", function () {
            var t = [];
            for (var e = 0; e < arguments.length; e++) {
              t[e] = arguments[e];
            }
            return n.onConnect.apply(n, t);
          });
          t.on("disconnect", function () {
            var t = [];
            for (var e = 0; e < arguments.length; e++) {
              t[e] = arguments[e];
            }
            return n.onDisconnect.apply(n, t);
          });
          t.on("message", function (t) {
            return n.onMessage(t);
          });
          t.connect();
        }
      };
      t.prototype.close = function (t) {
        if (this.socket) {
          this.socket.close();
        }
        delete this.socket;
        this.isConnect = false;
        if (t) {
          this.event(i.default.SOCKET_DISCONNECT);
        }
      };
      t.prototype.onConnect = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        this.isConnect = true;
        this.event(i.default.SOCKET_CONNECT);
        this.doList();
      };
      t.prototype.onDisconnect = function () {
        var t = [];
        for (var e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }
        this.close(true);
      };
      t.prototype.onMessage = function (t) {
        this.onReceive(t);
      };
      t.prototype.onReceive = function (t) {
        var e;
        if (t) {
          try {
            e = JSON.parse(t);
          } catch (t) {
            this.event(i.default.SOCKET_ERROR, [-1]);
          }
          if (e) {
            this.event(i.default.SOCKET_RECEICE, [e]);
          }
        } else {
          this.event(i.default.SOCKET_ERROR, [-2]);
        }
      };
      t.prototype.send = function (t, e) {
        var n = this;
        if (this.isConnect) {
          this.socket.emit(
            "PUSH_GAME_DATA_EVENT",
            JSON.stringify({ protoType: t, body: e }),
            function (t) {
              return n.onReceive(t);
            }
          );
        } else {
          this.list.push({ protoType: t, body: e });
        }
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = a;
  });
  t(gp);
  var bp = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.callback = function (t, e, n) {
        if (t.readyState == 4) {
          if ((t.status >= 200 && t.status < 300) || t.status == 304) {
            var o = void 0,
              r = t.responseText;
            if (typeof r == "object") {
              o = r;
            } else if (r) {
              try {
                o = JSON.parse(r);
              } catch (t) {
                console.log("数据异常.", r);
              }
            } else {
              return;
            }
            if (o) {
              e(o);
            }
          } else {
            n({ state: t.status });
          }
        }
        return;
      };
      t.get = function (t, e, n, o, r) {
        var i = this;
        if (n) (e = e || {}).idEntity = n;
        var a =
          e &&
          Object.keys(e)
            .map(function (t) {
              return t + "=" + e[t];
            })
            .join("&");
        var s = new XMLHttpRequest();
        s.onreadystatechange = function () {
          return i.callback(s, o, r);
        };
        s.open("get", t + (a ? "?" + a : ""));
        s.withCredentials = true;
        s.setRequestHeader("Content-type", "application/json");
        s.send(null);
      };
      t.post = function (t, e, n, o, r) {
        var i = this;
        if (n) (e = e || {}).idEntity = n;
        var a = new XMLHttpRequest();
        a.onreadystatechange = function () {
          return i.callback(a, o, r);
        };
        a.open("post", t);
        a.setRequestHeader("Content-type", "application/json");
        a.withCredentials = true;
        a.send(JSON.stringify(e));
      };
      return t;
    })();
    e.default = n;
  });
  t(bp);
  var Op = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(K);
    var i = o(gp);
    var a = o(bp);
    var s = o($);
    var u = (function (t) {
      n(e, t);
      function e() {
        var e = t.call(this) || this;
        i.default.inst().on(r.default.SOCKET_ERROR, function (t) {
          return e.event(r.default.SOCKET_ERROR, [t]);
        });
        e.list = [];
        return e;
      }
      e.inst = function () {
        if (!this.$inst) {
          this.$inst = new e();
        }
        return this.$inst;
      };
      e.Send = function (a, s, u) {
        var l = e.inst();
        return function (t, e, n) {
          var r = n.value;
          var i = s && s.length > 0;
          n.value = function () {
            var t = [];
            for (var e = 0; e < arguments.length; e++) {
              t[e] = arguments[e];
            }
            var n = this;
            var o = {};
            t.forEach(function (t, e) {
              return (o[i ? s[e] : e] = t);
            });
            l.registerReceiveEvent(a, r, n, [u]);
            l.send(a, o);
          };
        };
      };
      e.prototype.pushReceiveData = function (t) {
        this.list.push({ type: t.protoType, params: t });
        return this;
      };
      e.prototype.test = function (t) {
        this.pushReceiveData(t);
        return this;
      };
      e.prototype.send = function (t, e) {
        i.default.inst().send(t, e);
        if ([1077, 1078].indexOf(t) < 0) {
          XOF.warn("发送协议", t, e);
        }
        return this;
      };
      e.prototype.connect = function () {
        var t = i.default.inst();
        t.once(r.default.SOCKET_CONNECT, this.event, this, [
          r.default.SOCKET_CONNECT,
        ]);
        t.once(r.default.SOCKET_DISCONNECT, this.event, this, [
          r.default.SOCKET_DISCONNECT,
        ]);
        t.on(r.default.SOCKET_RECEICE, this.pushReceiveData, this);
        t.connect();
      };
      e.prototype.close = function (t) {
        var e = i.default.inst();
        e.close(t);
      };
      e.prototype.addResponse = function (t, e, n) {
        var o = { protoType: t, state: n ? e.state : 40, body: e.body };
        this.pushReceiveData(o);
      };
      e.prototype.get = function (e, t, n) {
        var o = this;
        if (n === void 0) {
          n = true;
        }
        a.default.get(
          s.default.request + e,
          t,
          n ? this.token : "",
          function (t) {
            return o.addResponse(e, t, true);
          },
          function (t) {
            return o.addResponse(e, t, false);
          }
        );
      };
      e.prototype.post = function (e, t, n) {
        var o = this;
        if (n === void 0) {
          n = true;
        }
        a.default.post(
          s.default.request + e,
          t,
          n ? this.token : "",
          function (t) {
            return o.addResponse(e, t, true);
          },
          function (t) {
            return o.addResponse(e, t, false);
          }
        );
      };
      e.prototype.setToken = function (t) {
        this.token = t;
      };
      e.prototype.registerReceiveEventOnce = function (t, e, n, o) {
        this.once(t, e, n);
        return this;
      };
      e.prototype.registerReceiveEvent = function (t, e, n, o) {
        this.on(t, e, n);
        return this;
      };
      e.prototype.unregisterReceiveEvent = function (t, e, n) {
        this.off(t, e, n);
        return this;
      };
      e.prototype.deal = function () {
        var t, e;
        while ((t = this.list.shift())) {
          e = Date.now();
          if (this.hasListener(t.type)) {
            var n = t.params,
              o = n.body,
              r = n.state;
            if ([1077, 1078].indexOf(t.type) < 0) {
              console.warn("回调协议", t.type, r, t.params);
            }
            this.event(t.type, [o, r, t.params]);
            if (Date.now() - e > 30) {
              XOF.log("回调消息" + t.type + "执行时间过长.");
            }
          } else {
            XOF.log("接收到未注册回调的协议: " + t.type);
          }
        }
      };
      e.prototype.event = function (t, e) {
        if (this.events_ && this.events_[t]) {
          var n = this.events_[t].length;
          var o = void 0;
          for (o = 0; o < n; o++) {
            var r = this.events_[t][o];
            if (r) {
              r.runWith(e);
              break;
            }
          }
          if (o >= 0) {
            var r = this.events_[t][o];
            if (!r || r.once) this.events_[t].splice(o, 1);
          }
        }
        return this;
      };
      return e;
    })(XOF.EventDispatcher);
    e.default = u;
  });
  t(Op);
  var wp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(W);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.initSkin("ui/rolemenu/itemselect", t, t);
        t.on(XOF.Event.ADDED_TO_STAGE, t.onAdded, t);
        t.onUpdateState();
        return t;
      }
      t.prototype.onRmoved = function () {
        this.off(XOF.TouchEvent.TAP, this.onTap, this);
        this.off(XOF.Event.REMOVED_FROM_STAGE, this.onRmoved, this);
      };
      t.prototype.onAdded = function () {
        this.on(XOF.TouchEvent.TAP, this.onTap, this);
        this.on(XOF.Event.REMOVED_FROM_STAGE, this.onRmoved, this);
      };
      Object.defineProperty(t.prototype, "selected", {
        get: function () {
          return this.$selected;
        },
        set: function (t) {
          this.$selected = t;
          this.onUpdateState();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "label", {
        get: function () {
          return this.lab.text;
        },
        set: function (t) {
          this.lab.text = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onTap = function () {
        this.img.visible = true;
        if (this.parent) {
          this.parent.event("group_change", [this]);
        }
      };
      t.prototype.onUpdateState = function () {
        this.img.visible = this.selected;
        this.imgLine.visible = !this.img.visible;
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(wp);
  var Ap = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(x);
    var a = o(wl);
    var s = o(w);
    var u = o(Pl);
    var i = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        var e = t;
        t.bg = new XOF.Image();
        t.bg.skin = "interface/0.png";
        e.addChild(t.bg);
        t.barBg = new XOF.Sprite();
        e.addChild(t.barBg);
        var n = (t.btnMove = new u.default());
        n.setImages(
          "interface/chat/9.png",
          "interface/chat/10.png",
          "interface/chat/11.png",
          "interface/chat/12.png"
        );
        t.barBg.addChild(n);
        var o = (t.btnDown = new u.default());
        o.setImages(
          "interface/chat/5.png",
          "interface/chat/6.png",
          "interface/chat/7.png",
          "interface/chat/8.png"
        );
        e.addChild(o);
        var r = (t.btnUp = new u.default());
        r.setImages(
          "interface/chat/1.png",
          "interface/chat/2.png",
          "interface/chat/3.png",
          "interface/chat/4.png"
        );
        e.addChild(r);
        t.min = 0;
        t.max = 100;
        t.unit = 1;
        t.autoHide = true;
        return t;
      }
      t.prototype.size = function (t, e) {
        i.prototype.size.call(this, t, e);
        var n = 13;
        this.bg.pos(0, 2);
        this.bg.size(t, e - 4);
        this.barBg.pos(0, n);
        this.barBg.size(9, e - n * 2);
        this.btnDown.pos(0, e - n);
        return this;
      };
      Object.defineProperty(t.prototype, "max", {
        get: function () {
          return this.$max;
        },
        set: function (t) {
          this.$max = t;
          this.updateBarVisible();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "min", {
        get: function () {
          return this.$min;
        },
        set: function (t) {
          this.$min = t;
          this.updateBarVisible();
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onChangeed = function () {
        var t = 16;
        var e = this.barBg.height - t;
        var n = this.btnMove.y / e;
        var o = this.max - this.min;
        this.$value = this.min + Math.floor(n * o);
        this.event(r.default.SCROLLBAR_CHANGE);
      };
      t.prototype.onTurn = function (t) {
        var e = this.unit * t;
        this.value += e;
        this.event(r.default.SCROLLBAR_CHANGE);
      };
      Object.defineProperty(t.prototype, "value", {
        get: function () {
          return this.$value;
        },
        set: function (t) {
          this.$value = s.default.rangeFixed(t, this.min, this.max);
          this.updateBarPosition();
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.updateBarVisible = function () {
        var t = this.max > this.min;
        this.btnMove.visible = this.autoHide ? this.max > this.min : true;
        this.btnUp.disabled = this.btnDown.disabled = !t;
      };
      t.prototype.updateBarPosition = function () {
        var t = 16;
        var e = this.barBg.height - t;
        var n = this.value - this.min;
        var o = this.max - this.min;
        this.btnMove.y = Math.floor((n / (o || 1)) * e);
      };
      t.prototype.onDragStart = function () {
        var t = 16;
        a.default.stratDarg(this.btnMove, 9, t, {
          x: 0,
          y: 0,
          width: 0,
          height: this.barBg.height,
        });
      };
      t.prototype.onDragStart2 = function (t) {
        if ((t === null || t === void 0 ? void 0 : t.target) == this.btnMove)
          return;
        if (this.max > this.min) {
          var e = 16 / 2;
          var n = s.default.rangeFixed(
            this.barBg.mouseY - e,
            0,
            this.barBg.height - e * 2
          );
          this.btnMove.y = n;
          this.onChangeed();
        }
      };
      t.prototype.register = function () {
        this.btnMove.on(XOF.TouchEvent.TOUCH_BEGIN, this.onDragStart, this);
        this.btnMove.on(r.default.SCROLLBAR_CHANGE, this.onChangeed, this);
        this.barBg.on(XOF.TouchEvent.TOUCH_BEGIN, this.onDragStart2, this);
        this.btnDown.on(XOF.TouchEvent.TAP, this.onTurn, this, [1]);
        this.btnUp.on(XOF.TouchEvent.TAP, this.onTurn, this, [-1]);
      };
      t.prototype.unregister = function () {
        this.btnMove.off(XOF.TouchEvent.TOUCH_BEGIN, this.onDragStart, this);
        this.btnMove.off(r.default.SCROLLBAR_CHANGE, this.onChangeed, this);
        this.barBg.off(XOF.TouchEvent.TOUCH_BEGIN, this.onDragStart2, this);
        this.btnDown.off(XOF.TouchEvent.TAP, this.onTurn, this);
        this.btnUp.off(XOF.TouchEvent.TAP, this.onTurn, this);
        a.default.stopDrag(this.btnMove);
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(Ap);
  var Ep = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.drawX = 0;
        return t;
      }
      t.prototype.draw = function (t) {
        t.pushStyle();
        if (this.skin_ || this.texture_) {
          this.$setTexture();
          if (this.texture_) {
            var e = this.texture_.width,
              n = this.texture_.height;
            var o = this.width;
            var r = Math.floor(this.drawX % e);
            var i = Math.floor(e - r);
            if (i > o) {
              i = o;
            } else {
              t.drawRepeact(
                this.texture_,
                -this.pivotX + i,
                -this.pivotY,
                o - i,
                this.height
              );
            }
            t.draw(
              this.texture_,
              -this.pivotX,
              -this.pivotY,
              i,
              this.height,
              this.fillMode,
              this.grid,
              [r, 0, i, n]
            );
          }
        }
        t.popStyle();
      };
      return t;
    })(XOF.Image);
    e.default = o;
  });
  t(Ep);
  var Tp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.arcX = 0;
        t.arcY = 0;
        t.radius = 0;
        return t;
      }
      t.prototype.renderChildren = function (t) {
        t.$.save();
        t.$.beginPath();
        t.$.arc(t.x + this.arcX, t.y + this.arcY, this.radius, 0, 2 * Math.PI);
        t.$.clip();
        e.prototype.renderChildren.call(this, t);
        t.$.closePath();
        t.$.restore();
      };
      t.prototype.$initRenderer = function () {
        e.prototype.$initRenderer.call(this);
        this.$renderer.mask = this.$mask = new PIXI.Graphics();
        this.$renderer.addChild(this.$mask);
      };
      t.prototype.$renderUpdate = function () {
        e.prototype.$renderUpdate.call(this);
        this.$mask.clear();
        this.$mask.beginFill(0);
        this.$mask.drawCircle(this.arcX, this.arcY, this.radius);
        this.$mask.endFill();
      };
      return t;
    })(XOF.Sprite);
    e.default = o;
  });
  t(Tp);
  var Cp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(x);
    var r = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.on("group_change", t.onGroupChangeIndex, t);
        return t;
      }
      Object.defineProperty(t.prototype, "selectIndex", {
        get: function () {
          return this.$selectIndex;
        },
        set: function (t) {
          this.$setSelect(t);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.$setSelect = function (t) {
        var e = this.children_[t];
        if (e) {
          this.onGroupChangeIndex(e);
        } else {
          XOF.log("RadioGroup 子元素" + t + "不存在.");
        }
      };
      t.prototype.onGroupChangeIndex = function (t, e) {
        if (e === void 0) {
          e = true;
        }
        var n = this.getChildIndex(t);
        if (this.$selectIndex == n) return;
        this.$selectIndex = n;
        for (var o = 0; o < this.numChild; o++) {
          var r = this.getChildAt(o);
          r.selected = n == o;
        }
        if (e) this.event(i.default.RADIOGROUP_CHANGED, [this.$selectIndex]);
      };
      return t;
    })(XOF.Sprite);
    e.default = r;
  });
  t(Cp);
  var Pp = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(W);
    var i = n(_l);
    var a = (function (n) {
      o(t, n);
      function t() {
        var t;
        var e = (n !== null && n.apply(this, arguments)) || this;
        e.imgs =
          ((t = {}),
          (t[605] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_00.png",
          }),
          (t[602] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_01.png",
          }),
          (t[609] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_02.png",
          }),
          (t[601] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_03.png",
          }),
          (t[603] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_04.png",
          }),
          (t[604] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_06.png",
          }),
          (t[607] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_07.png",
          }),
          (t[606] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_08.png",
          }),
          (t[610] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_10.png",
          }),
          (t[608] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_11.png",
          }),
          (t[2001] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_03.png",
          }),
          (t[2002] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_16.png",
          }),
          (t[2003] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_01.png",
          }),
          (t[2004] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_04.png",
          }),
          (t[2005] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_13.png",
          }),
          (t[2006] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_15.png",
          }),
          (t[2007] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_12.png",
          }),
          (t[2008] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_06.png",
          }),
          (t[2009] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_08.png",
          }),
          (t[2010] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_00.png",
          }),
          (t[2011] = {
            skin: "ui_interface_m/ui_atlas_common/M5UI_SlotIcon_18.png",
          }),
          t);
        return e;
      }
      t.prototype.initSkin = function () {
        r.default.initSkin("ui/Bag/ProfileEquipmentItem", this, this);
      };
      t.prototype.dataChanged_ = function () {
        n.prototype.dataChanged_.call(this);
        this.imgEquip.skin = "";
        var t = this.data;
        if (!t.itemData) {
          if (this.imgs[this.id]) {
            this.imgEquip.skin = this.imgs[this.id].skin;
            XOF.loader.loadImage(
              this.imgEquip.skin,
              undefined,
              undefined,
              this.onLoaded,
              this
            );
          } else {
            XOF.log("ProfileEquipmentItem 类型" + this.id + "未定义.");
          }
        }
      };
      t.prototype.onLoaded = function () {
        var t = XOF.loader.get(this.imgEquip.skin);
        if (t) {
          this.imgEquip.size(t.width, t.height);
          this.imgEquip.pos(
            Math.floor((this.width - t.width) / 2),
            Math.floor((this.height - t.height) / 2)
          );
        }
      };
      return t;
    })(i.default);
    e.default = a;
  });
  t(Pp);
  var jp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(W);
    var i = o(wl);
    var a = o(Q);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.initSkin("ui/m_controler/fightround", t, t);
        t.labRound.font = i.default.getBitmapFont(
          "font/bloodwarui.png",
          "font/bloodwarui.fnt"
        );
        t.labRound.visible =
          t.imgRoundLight.visible =
          t.imgRound.visible =
            false;
        t.imgReady.visible = true;
        return t;
      }
      t.prototype.playReadyAnimation = function (t, e, n) {
        var o = this;
        if (e === void 0) {
          e = 0;
        }
        if (n === void 0) {
          n = false;
        }
        this.imgRoundLight.visible = true;
        this.imgRoundLight.alpha = 0;
        a.default.removeTweens(this.imgRoundLight);
        var r = a.default.get(this.imgRoundLight);
        if (e > 0) {
          if (n) {
            this.imgRoundLight.alpha = 1;
          } else {
            r.to({ alpha: 1 }, 300);
          }
          r.call(function () {
            o.labRound.visible = o.imgRound.visible = false;
            o.imgReady.visible = true;
          })
            .wait(100)
            .to({ alpha: 0 }, 300)
            .call(function () {})
            .wait(e)
            .wait(100);
        }
        r.to({ alpha: 1 }, 300)
          .call(function () {
            o.labRound.visible = o.imgRound.visible = true;
            o.imgReady.visible = false;
            o.labRound.text = t + "";
          })
          .wait(100)
          .to({ alpha: 0 }, 300)
          .call(function () {
            return (o.imgRoundLight.visible = false);
          });
        r.remove();
      };
      return t;
    })(XOF.Sprite);
    e.default = s;
  });
  t(jp);
  var Sp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = o(q);
    var r = o(we);
    var u = o(yt);
    var l = o(Q);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.fontSize = 20;
        t.itemHeight = 24;
        t.startY = 140;
        t.lines = 6;
        t.stay = true;
        t.items = [];
        t.stays = [];
        return t;
      }
      t.prototype.addTips = function (t) {
        this.stays.push(t);
        this.add();
      };
      t.prototype.add = function () {
        var t = this;
        if (this.stay && this.stays.length) {
          this.stay = false;
          var e = this.stays.shift();
          var n = u.default.pop("ColorLabel2", f);
          n.fontSize = this.fontSize;
          n.textColor = "#E6C89B";
          this.items.push(n);
          this.addChild(n);
          n.alpha = 0;
          n.size(400, n.fontSize);
          n.pos(0, this.startY);
          n.text = e;
          l.default
            .get(n)
            .to({ alpha: 1 }, 200)
            .wait(5e3)
            .to({ alpha: 0 }, 1e3)
            .call(this.removeItem, this, [n])
            .remove();
          for (var o = 0, r = this.items.length; o < r; o++) {
            var i = this.items[o];
            if (o < r - this.lines) {
              l.default.removeTweens(i);
              l.default
                .get(i)
                .to({ alpha: 0 }, 200)
                .call(this.removeItem, this, [i])
                .remove();
            }
            var a = l.default.get(i).to({ y: i.y - this.itemHeight }, 200);
            if (o == r - 1)
              a.call(function () {
                t.stay = true;
                s.default.timerMgr.callLater(t.add, t);
              }, this);
            a.remove();
          }
        }
      };
      t.prototype.removeItem = function (t) {
        this.items.splice(this.items.indexOf(t), 1);
        u.default.push(t.removeSelf());
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.$POOL_TYPE = "ColorLabel2";
        return t;
      }
      return t;
    })(r.default);
  });
  t(Sp);
  var Mp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(I);
    var a = o(W);
    var s = o(wl);
    var u = o(w);
    var l = o(mt);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/M_Controler/HeroHead", t, t);
        t.imgHp.fillMode = t.imgMp.fillMode = "repeat";
        t.labHp.font = s.default.getBitmapFont(
          "font/counttext.png",
          "font/counttext.fnt"
        );
        t.labEnergy.font = s.default.getBitmapFont(
          "font/counttext.png",
          "font/counttext.fnt"
        );
        return t;
      }
      t.prototype.updateView = function () {
        this.labLv.text = r.default.userData.hero.lv + "";
        var t = r.default.userData.hero.maxExp;
        var e = 0.88,
          n = 0.39;
        if (t == -1) {
          this.gExp.rate = n + (e - n) * 1;
        } else {
          this.gExp.rate = n + (e - n) * (r.default.userData.hero.exp / t);
        }
        this.labEnergy.text = r.default.userData.hero.vitality + "";
      };
      t.prototype.updateHp = function () {
        var t = l.default.map;
        if (t && t.hero) {
          this.imgHp.width = Math.ceil(
            u.default.rangeFixed(t.hero.hp / t.hero.maxHp, 0, 1) * 197
          );
          this.imgMp.width = Math.ceil(
            u.default.rangeFixed(t.hero.mp / t.hero.maxMp, 0, 1) * 161
          );
          this.labHp.text =
            Math.floor(t.hero.hp) + "/" + Math.floor(t.hero.maxHp);
        }
      };
      t.prototype.onOpen = function () {
        r.default.eventMgr.on(1039, this.updateHp, this);
        r.default.eventMgr.on(1032, this.updateView, this);
        this.updateView();
        var t = r.default.viewMgr.getOpenView(i.default.Map);
        if (t.hero) {
          this.buffPanel.setRole(t.hero);
        } else {
          console.log("游戏初始化错误..");
        }
      };
      t.prototype.onClose = function () {
        r.default.eventMgr.off(1039, this.updateHp, this);
        r.default.eventMgr.off(1032, this.updateView, this);
      };
      return t;
    })(XOF.Sprite);
    e.default = f;
  });
  t(Mp);
  var kp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.touchThrough = true;
        t.sortPos = t.sortDirection = t.ySpace = t.xSpace = 0;
        t.groupCount = 88;
        return t;
      }
      Object.defineProperty(t.prototype, "gridWidth", {
        get: function () {
          return this.$gridWidth;
        },
        set: function (t) {
          if (t != this.$gridWidth) {
            this.$gridWidth = t;
            this.reorder();
          }
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "gridHeight", {
        get: function () {
          return this.$gridHeight;
        },
        set: function (t) {
          if (t != this.$gridHeight) {
            this.$gridHeight = t;
            this.reorder();
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.getSortPos = function (t) {
        var e = 0,
          n = 0;
        var o = this.gridWidth,
          r = this.gridHeight,
          i = this.xSpace,
          a = this.ySpace;
        if (this.sortPos == 1) {
          n = this.height - this.gridHeight;
          r = -this.gridHeight;
          a = -this.ySpace;
        } else if (this.sortPos == 3) {
          e = this.width - this.gridWidth;
        } else if (this.sortPos == 2) {
          if (this.sortDirection == 1) {
            e = this.width - this.gridWidth;
            o = -this.gridWidth;
          }
        }
        if (this.sortPos == 0 || this.sortPos == 1) {
          if (this.sortDirection == 1) {
            e = this.width - this.gridWidth;
            o = -this.gridWidth;
            i = -this.xSpace;
          }
        }
        var s = t % this.groupCount;
        var u = Math.floor(t / this.groupCount);
        return [e + s * (o + i), n + u * (r + a)];
      };
      t.prototype.reorder = function () {
        var i = this;
        this.children_
          .map(function (t) {
            return t;
          })
          .sort(function (t, e) {
            return t.data.data.sort - e.data.data.sort;
          })
          .forEach(function (t, e) {
            i.setChildIndex(t, e);
            var n = i.getSortPos(e),
              o = n[0],
              r = n[1];
            t.pos(o, r);
          });
      };
      return t;
    })(XOF.Box);
    e.default = o;
  });
  t(kp);
  var xp = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.Animation = void 0;
    function n(t) {
      return -0.5 * (Math.cos(Math.PI * t) - 1);
    }
    var o = (function () {
      function t(t, e) {
        this.easerFunction = n;
        this.isPlaying = false;
        this.duration = 500;
        this.currentValue = 0;
        this.from = 0;
        this.to = 0;
        this.startTime = 0;
        this.endFunction = null;
        this.updateFunction = t;
        this.thisObject = e;
      }
      t.prototype.play = function () {
        this.stop();
        this.start();
      };
      t.prototype.start = function () {
        this.isPlaying = false;
        this.currentValue = 0;
        this.startTime = XOF.now();
        this.doInterval(this.startTime);
        XOF.Timer.startTimer(this.doInterval, this);
      };
      t.prototype.stop = function () {
        this.isPlaying = false;
        this.startTime = 0;
        XOF.Timer.stopTimer(this.doInterval, this);
      };
      t.prototype.doInterval = function (t) {
        t = t || XOF.now();
        var e = t - this.startTime;
        if (!this.isPlaying) {
          this.isPlaying = true;
        }
        var n = this.duration;
        var o = n == 0 ? 1 : Math.min(e, n) / n;
        if (this.easerFunction) {
          o = this.easerFunction(o);
        }
        this.currentValue = this.from + (this.to - this.from) * o;
        if (this.updateFunction)
          this.updateFunction.call(this.thisObject, this);
        var r = e >= n;
        if (r) {
          this.stop();
        }
        if (r && this.endFunction) {
          this.endFunction.call(this.thisObject, this);
        }
        return true;
      };
      return t;
    })();
    e.Animation = o;
  });
  t(xp);
  xp.Animation;
  var Dp = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.TouchScroll = void 0;
    var o = 4;
    var d = [1, 1.33, 1.66, 2];
    var h = 2.33;
    var v = 0.02;
    var y = 0.998;
    var _ = 0.95;
    var m = Math.log(y);
    function r(t) {
      var e = t - 1;
      return e * e * e + 1;
    }
    var n = (function () {
      function t(t, e, n) {
        this.$scrollFactor = 1;
        this.previousTime = 0;
        this.velocity = 0;
        this.previousVelocity = [];
        this.currentPosition = 0;
        this.previousPosition = 0;
        this.currentScrollPos = 0;
        this.maxScrollPos = 0;
        this.offsetPoint = 0;
        this.$bounces = true;
        this.started = true;
        this.updateFunction = t;
        this.endFunction = e;
        this.target = n;
        this.animation = new xp.Animation(this.onScrollingUpdate, this);
        this.animation.endFunction = this.finishScrolling;
        this.animation.easerFunction = r;
      }
      t.prototype.isPlaying = function () {
        return this.animation.isPlaying;
      };
      t.prototype.stop = function () {
        this.animation.stop();
        XOF.Timer.stopTimer(this.onTick, this);
        this.started = false;
      };
      t.prototype.isStarted = function () {
        return this.started;
      };
      t.prototype.start = function (t) {
        this.started = true;
        this.velocity = 0;
        this.previousVelocity.length = 0;
        this.previousTime = XOF.now();
        this.previousPosition = this.currentPosition = t;
        this.offsetPoint = t;
        XOF.Timer.startTimer(this.onTick, this);
      };
      t.prototype.update = function (t, e, n) {
        e = Math.max(e, 0);
        this.currentPosition = t;
        this.maxScrollPos = e;
        var o = this.offsetPoint - t;
        var r = o + n;
        this.offsetPoint = t;
        if (r < 0) {
          if (!this.$bounces) {
            r = 0;
          } else {
            r -= o * 0.5;
          }
        }
        if (r > e) {
          if (!this.$bounces) {
            r = e;
          } else {
            r -= o * 0.5;
          }
        }
        this.currentScrollPos = r;
        this.updateFunction.call(this.target, r);
      };
      t.prototype.finish = function (t, e) {
        XOF.Timer.stopTimer(this.onTick, this);
        this.started = false;
        var n = this.velocity * h;
        var o = this.previousVelocity;
        var r = o.length;
        var i = h;
        for (var a = 0; a < r; a++) {
          var s = d[a];
          n += o[0] * s;
          i += s;
        }
        var u = n / i;
        var l = Math.abs(u);
        var f = 0;
        var c = 0;
        if (l > v) {
          c = t + ((u - v) / m) * 2 * this.$scrollFactor;
          if (c < 0 || c > e) {
            c = t;
            while (Math.abs(u) > v) {
              c -= u;
              if (c < 0 || c > e) {
                u *= y * _;
              } else {
                u *= y;
              }
              f++;
            }
          } else {
            f = Math.log(v / l) / m;
          }
        } else {
          c = t;
        }
        if (this.target["$getThrowInfo"]) {
          var p = this.target["$getThrowInfo"](t, c);
          c = p.toPos;
        }
        if (f > 0) {
          if (!this.$bounces) {
            if (c < 0) {
              c = 0;
            } else if (c > e) {
              c = e;
            }
          }
          this.throwTo(c, f);
        } else {
          this.finishScrolling();
        }
      };
      t.prototype.onTick = function (t) {
        t = t || XOF.now();
        var e = t - this.previousTime;
        if (e > 10) {
          var n = this.previousVelocity;
          if (n.length >= o) {
            n.shift();
          }
          this.velocity = (this.currentPosition - this.previousPosition) / e;
          n.push(this.velocity);
          this.previousTime = t;
          this.previousPosition = this.currentPosition;
        }
        return true;
      };
      t.prototype.finishScrolling = function (t) {
        var e = this.currentScrollPos;
        var n = this.maxScrollPos;
        var o = e;
        if (e < 0) {
          o = 0;
        }
        if (e > n) {
          o = n;
        }
        this.throwTo(o, 300);
      };
      t.prototype.throwTo = function (t, e) {
        if (e === void 0) {
          e = 500;
        }
        var n = this.currentScrollPos;
        if (n == t) {
          this.endFunction.call(this.target);
          return;
        }
        var o = this.animation;
        o.duration = e;
        o.from = n;
        o.to = t;
        o.play();
      };
      t.prototype.onScrollingUpdate = function (t) {
        this.currentScrollPos = t.currentValue;
        this.updateFunction.call(this.target, t.currentValue);
      };
      return t;
    })();
    e.TouchScroll = n;
  });
  t(Dp);
  Dp.TouchScroll;
  var Ip = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(x);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.scrollEnabled = true;
        t.registerEvents();
        t.$touchScrollH = new Dp.TouchScroll(
          t.horizontalUpdateHandler,
          t.horizontalEndHandler,
          t
        );
        t.$touchScrollV = new Dp.TouchScroll(
          t.verticalUpdateHandler,
          t.verticalEndHanlder,
          t
        );
        t.horizontalCanScroll = t.verticalCanScroll = true;
        return t;
      }
      Object.defineProperty(t.prototype, "content", {
        get: function () {
          var t = this.getChildByName("content");
          if (t) {
            this.$content = t;
            return t;
          }
          t = this.getChildAt(0);
          if (t) {
            this.$content = t;
            return t;
          }
          if (!this.$content) {
            this.$content = new XOF.Box();
          }
          return this.$content;
        },
        set: function (t) {
          if (t == this.$content) return;
          if (this.$content) {
            XOF.log("已经存在默认的容器了");
            return;
          }
          this.$content = t;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.registerEvents = function () {
        this.on(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBegin, this);
      };
      t.prototype.unregisterEvents = function () {
        XOF.stage.off(XOF.TouchEvent.TOUCH_MOVE, this.onTouchMove, this);
        this.off(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBegin, this);
        this.off(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.off(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, this.onTouchEnd, this);
        this.off(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
      };
      t.prototype.onTouchBegin = function (t) {
        XOF.stage.on(XOF.TouchEvent.TOUCH_MOVE, this.onTouchMove, this);
        this.on(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, this.onTouchEnd, this);
        this.on(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.on(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
        if (this.$touchScrollH.isStarted() || this.$touchScrollV.isPlaying()) {
          this.dispatchCancelEvent(t);
        }
        this.stopAnimation();
        if (this.verticalCanScroll) {
          this.$touchScrollV.start(XOF.stage.mouseY);
        }
        if (this.horizontalCanScroll) {
          this.$touchScrollH.start(XOF.stage.mouseX);
        }
        this.touchX = XOF.stage.mouseX;
        this.touchY = XOF.stage.mouseY;
        this.touchId = t.touchId;
      };
      t.prototype.dispatchCancelEvent = function (t) {
        if (!this.$content) {
          return;
        }
        XOF.player.$childrendCancelTouch(this, t.touchId);
      };
      t.prototype.onTouchEnd = function (t) {
        XOF.stage.off(XOF.TouchEvent.TOUCH_MOVE, this.onTouchMove, this);
        this.off(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.off(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, this.onTouchEnd, this);
        this.off(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
        if (this.$touchScrollV.isStarted()) {
          this.$touchScrollV.finish(
            this.scrollV,
            this.contentHeight - this.height
          );
        }
        if (this.$touchScrollH.isStarted()) {
          this.$touchScrollH.finish(
            this.scrollH,
            this.contentWidth - this.width
          );
        }
      };
      t.prototype.onTouchMove = function (t) {
        if (this.touchId != t.touchId) return;
        if (this.touchX == XOF.stage.mouseX && this.touchY == XOF.stage.mouseY)
          return;
        this.dispatchCancelEvent(t);
        if (this.verticalCanScroll) {
          this.$touchScrollV.update(
            XOF.stage.mouseY,
            this.contentHeight - this.height,
            this.scrollV
          );
        }
        if (this.horizontalCanScroll) {
          this.$touchScrollH.update(
            XOF.stage.mouseX,
            this.contentWidth - this.width,
            this.scrollH
          );
        }
      };
      t.prototype.$setScrollH = function (t) {
        e.prototype.$setScrollH.call(this, t);
        this.dispatchContentEvent();
      };
      t.prototype.$setScrollV = function (t) {
        e.prototype.$setScrollV.call(this, t);
        this.dispatchContentEvent();
      };
      t.prototype.verticalUpdateHandler = function (t) {
        this.scrollV = t;
      };
      t.prototype.verticalEndHanlder = function () {};
      t.prototype.horizontalUpdateHandler = function (t) {
        this.scrollH = t;
      };
      t.prototype.horizontalEndHandler = function () {};
      t.prototype.stopAnimation = function () {
        var t = this.$touchScrollV;
        var e = this.$touchScrollH;
        if (t.animation.isPlaying);
        else if (e.animation.isPlaying);
        t.stop();
        e.stop();
      };
      t.prototype.dispatchContentEvent = function () {
        this.content.event(r.default.SCROLLBAR_CHANGE);
      };
      Object.defineProperty(t.prototype, "contentWidth", {
        get: function () {
          return this.content.width;
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "contentHeight", {
        get: function () {
          return this.content.height;
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(XOF.Box);
    e.default = i;
  });
  t(Ip);
  var Rp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(x);
    var f = o(Ip);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.horizontalGap = 0;
        t.verticalGap = 0;
        t.paddingLeft = 0;
        t.paddingTop = 0;
        t.paddingBottom = 0;
        t.paddingRight = 0;
        t.$indexToRenderer = [];
        t.columnCount = 1;
        t.rowCount = Number.MAX_SAFE_INTEGER;
        t.on(XOF.TouchEvent.TOUCH_BEGIN, t.onTouchBegin, t);
        return t;
      }
      Object.defineProperty(t.prototype, "dataProvider", {
        get: function () {
          return (this.$dataProvider = this.$dataProvider || []);
        },
        set: function (t) {
          this.$dataProvider = t;
          this.$lastStartIndex = -1;
          this.onCollectionChange();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "itemRenderer", {
        get: function () {
          return this.$itemRenderer;
        },
        set: function (t) {
          var e;
          if (t != this.$itemRenderer) {
            this.$itemRenderer = t;
            while (
              (e = this.$indexToRenderer) === null || e === void 0
                ? void 0
                : e.length
            ) {
              var n = this.$indexToRenderer.pop();
              n.removeSelf();
            }
          }
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onCollectionChange = function () {
        var t, e, n, o;
        var r =
          (e =
            (t =
              this === null || this === void 0 ? void 0 : this.dataProvider) ===
              null || t === void 0
              ? void 0
              : t.length) !== null && e !== void 0
            ? e
            : 0;
        var i =
          (o =
            (n = this.$indexToRenderer) === null || n === void 0
              ? void 0
              : n.length) !== null && o !== void 0
            ? o
            : 0;
        if (r >= i) {
          for (var a = 0; a < r - i; a++) {
            this.createOneRenderer(this.itemRenderer);
          }
        } else if (i > 0) {
          while (this.$indexToRenderer.length > r) {
            var s = this.$indexToRenderer.pop();
            this.removeChild(s);
          }
        }
        for (var a = 0; a < r; a++) {
          var u = this.getItemRendererByIndex(a);
          this.updateRenderer(u, a, this.dataProvider[a]);
        }
        this.updateDisplayList();
        this.updateListSize();
      };
      t.prototype.refresh = function () {
        this.onCollectionChange();
      };
      t.prototype.getItemRendererByIndex = function (t) {
        return this.$indexToRenderer[t];
      };
      t.prototype.updateListSize = function () {
        var t;
        var e = this.dataProvider.length;
        var n = 100,
          o = 100;
        var r =
          (t = this.$indexToRenderer) === null || t === void 0 ? void 0 : t[0];
        if (r) {
          n = r.width;
          o = r.height;
        }
        var i = this.parent;
        var a = this.columnCount,
          s = this.rowCount;
        if (i instanceof f.default) {
          if (i.verticalCanScroll) {
            s = Math.ceil(i.height / (o + this.verticalGap));
          }
          if (i.horizontalCanScroll) {
            a = Math.ceil(i.width / (n + this.horizontalGap));
          }
        } else {
          if (this.columnCount == Number.MAX_SAFE_INTEGER) {
            a = Math.ceil(e / this.rowCount);
          } else if (this.rowCount == Number.MAX_SAFE_INTEGER) {
            s = Math.ceil(e / this.columnCount);
          }
        }
        var u = Math.max(a, Math.ceil(e / s)) * (n + this.horizontalGap);
        var l = Math.max(s, Math.ceil(e / a)) * (o + this.verticalGap);
        this.width =
          this.paddingLeft +
          Math.max(0, u - this.horizontalGap) +
          this.paddingRight;
        this.height =
          this.paddingTop +
          Math.max(0, l - this.verticalGap) +
          this.paddingBottom;
      };
      t.prototype.createOneRenderer = function (t) {
        var e = new t();
        e.touchEnabled = true;
        this.addChild(e);
        this.$indexToRenderer.push(e);
        return e;
      };
      t.prototype.resetRendererItemIndex = function (t) {
        var e = this.$indexToRenderer[t];
        if (e) e.itemIndex = t;
      };
      t.prototype.getRendererStartIndex = function () {
        return 0;
      };
      t.prototype.updateDisplayList = function () {
        var t = this.getRendererStartIndex();
        if (this.$lastStartIndex != t) {
          var e = this.dataProvider.length;
          var n = 100,
            o = 100;
          var r = this.$indexToRenderer[0];
          if (r) {
            n = r.width;
            o = r.height;
          }
          var i = t;
          for (var a = void 0, s = void 0; i < e; i++) {
            var u = this.getItemRendererByIndex(i - t);
            if (u) {
              a =
                this.paddingLeft +
                (i % this.columnCount) * (n + this.horizontalGap);
              s =
                this.paddingTop +
                Math.floor(i / this.columnCount) * (o + this.verticalGap);
              u.visible = true;
              this.updateRenderer(u, i, this.dataProvider[i]);
              this.sizeAndPositionElement(u, a, s, n, o);
            }
          }
          for (var l = i - t; l < this.$indexToRenderer.length; l++) {
            this.$indexToRenderer[l].visible = false;
          }
        }
        this.$lastStartIndex = t;
      };
      t.prototype.sizeAndPositionElement = function (t, e, n, o, r) {
        t.pos(Math.round(e), Math.round(n));
      };
      t.prototype.updateRenderer = function (t, e, n) {
        t.itemIndex = e;
        t.data = n;
        return t;
      };
      t.prototype.onTouchCancel = function (t) {
        this.$downTarget = undefined;
      };
      t.prototype.onTouchBegin = function (t) {
        var e = t === null || t === void 0 ? void 0 : t.target;
        var n = this.contains(e);
        if (n) {
          var o = this.numChild;
          for (var r = 0, i = void 0; r < o; r++) {
            i = this.getChildAt(r);
            if (i.contains(e)) {
              this.$downTarget = i;
              break;
            }
          }
          this.on(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
          this.on(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchCancel, this);
          this.on(
            XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
            this.onTouchCancel,
            this
          );
        }
      };
      t.prototype.onTouchEnd = function (t) {
        if (this.$downTarget) {
          this.$downTarget.event(r.default.ITEM_TAP);
          this.event(r.default.ITEM_TAP, [
            this.$downTarget.data,
            this.$downTarget,
            t,
          ]);
        }
        this.onTouchCancel(t);
        this.off(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.off(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchCancel, this);
        this.off(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onTouchCancel,
          this
        );
      };
      return t;
    })(XOF.Box);
    e.default = i;
  });
  t(Rp);
  var Lp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(x);
    var i = o(Rp);
    var a = (function (d) {
      n(t, d);
      function t() {
        var t = d.call(this) || this;
        t.calColumnCount = t.calRowCount = 0;
        t.useVirtucalList = true;
        t.on(r.default.SCROLLBAR_CHANGE, t.updateDisplayList, t);
        return t;
      }
      t.prototype.getRendererStartIndex = function () {
        if (this.useVirtucalList) {
          var t = this.parent;
          var e = 100,
            n = 100;
          var o = this.$indexToRenderer[0];
          if (o) {
            e = o.width;
            n = o.height;
          }
          var r = 0,
            i = 0;
          if (t.verticalCanScroll) {
            r = Math.floor(
              (t.scrollV - this.paddingTop) / (n + this.verticalGap)
            );
          }
          if (t.horizontalCanScroll) {
            i = Math.floor(
              (t.scrollH - this.paddingLeft) / (e + this.horizontalGap)
            );
          }
          return Math.max(
            0,
            Math.max(0, r * this.calColumnCount) + Math.max(0, i)
          );
        }
        return d.prototype.getRendererStartIndex.call(this);
      };
      t.prototype.onCollectionChange = function () {
        var t;
        if (!this.itemRenderer) return;
        if (this.useVirtucalList) {
          var e =
            this.$indexToRenderer[0] ||
            this.createOneRenderer(this.itemRenderer);
          var n = this.parent;
          var o = this.columnCount,
            r = this.rowCount,
            i = 0,
            a = 0;
          if (n) {
            var s = e.width + this.horizontalGap;
            var u = e.height + this.verticalGap;
            if (n.verticalCanScroll) {
              r = Math.ceil(n.height / u);
              a = 1;
            }
            if (n.horizontalCanScroll) {
              o = Math.ceil(n.width / s);
              i = 1;
            }
          }
          this.calColumnCount = o;
          this.calRowCount = r;
          var l = Math.min((o + i) * (r + a), this.dataProvider.length);
          var f =
            (t = this.$indexToRenderer.length) !== null && t !== void 0 ? t : 0;
          if (l > f) {
            for (var c = 0; c < l - f; c++) {
              this.createOneRenderer(this.itemRenderer);
            }
          } else if (f > 0) {
            while (this.$indexToRenderer.length > l) {
              var p = this.$indexToRenderer.pop();
              this.removeChild(p);
            }
          }
          this.updateDisplayList();
          this.updateListSize();
        } else {
          d.prototype.onCollectionChange.call(this);
        }
      };
      return t;
    })(i.default);
    e.default = a;
  });
  t(Lp);
  var Fp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Q);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.on(XOF.TouchEvent.TOUCH_BEGIN, t.onTouchBegin, t);
        t.on(XOF.TouchEvent.TOUCH_END, t.onTouchEnd, t);
        t.on(XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE, t.onTouchEnd, t);
        t.pressScale = 0.9;
        t.releaseScale = 1;
        return t;
      }
      Object.defineProperty(t.prototype, "releaseScale", {
        get: function () {
          return this.$releaseScale;
        },
        set: function (t) {
          if (t == this.$releaseScale) return;
          this.$releaseScale = t;
          this.scale(this.$releaseScale, this.$releaseScale);
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.onTouchBegin = function () {
        r.default.removeTweens(this);
        r.default
          .get(this)
          .to({ scaleX: this.pressScale, scaleY: this.pressScale }, 100)
          .remove();
      };
      t.prototype.onTouchEnd = function () {
        r.default.removeTweens(this);
        r.default
          .get(this)
          .to({ scaleX: this.releaseScale, scaleY: this.releaseScale }, 100)
          .remove();
      };
      return t;
    })(XOF.Sprite);
    e.default = i;
  });
  t(Fp);
  var Bp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(Q);
    var i = o(W);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/M_Controler/FightItemSlot", t, t);
        t.on(XOF.TouchEvent.TOUCH_BEGIN, t.onClick, t);
        t.imgEnabled.visible = t.imgWhite.visible = false;
        t.gTime.rate = 0;
        t.labCount.text = "";
        return t;
      }
      t.prototype.onClick = function () {};
      t.prototype.updateCountdown = function (t) {
        var e = this.gTime.rate;
        this.gTime.rate = t;
        if (t == 0 && e > 0) {
          this.countdownComplete();
        }
      };
      t.prototype.countdownComplete = function () {
        r.default.removeTweens(this.imgWhite);
        r.default
          .get(this.imgWhite)
          .set({ visible: true, alpha: 0.6 })
          .to({ alpha: 1 }, 80)
          .to({ alpha: 0.6 }, 80)
          .set({ visible: false })
          .remove();
      };
      t.prototype.stopEffect = function () {
        r.default.removeTweens(this);
        r.default.removeTweens(this.imgWhite);
        this.imgWhite.visible = false;
      };
      t.prototype.dataChanged_ = function () {
        var t;
        this.timestamp = XOF.now();
        var e = this.data;
        this.imgIcon.skin = "";
        this.imgEnabled.visible = false;
        if (e.itemData) {
          if (this.itemId != e.itemData.id) this.stopEffect();
          this.imgIcon.skin = e.itemData.icon;
          this.imgEnabled.visible =
            ((t = e === null || e === void 0 ? void 0 : e.extra) === null ||
            t === void 0
              ? void 0
              : t.enabled) === false;
          this.labCount.text = e.count > 0 ? e.count + "" : "";
        } else {
          this.gTime.rate = 0;
          this.stopEffect();
          this.labCount.text = "";
        }
      };
      Object.defineProperty(t.prototype, "data", {
        get: function () {
          return this.data_;
        },
        set: function (t) {
          this.data_ = t;
          this.dataChanged_();
        },
        enumerable: false,
        configurable: true,
      });
      Object.defineProperty(t.prototype, "itemId", {
        get: function () {
          var t, e;
          return (e =
            (t = this === null || this === void 0 ? void 0 : this.data_) ===
              null || t === void 0
              ? void 0
              : t.itemData) === null || e === void 0
            ? void 0
            : e.id;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.hitTest_ = function (t, e) {
        var n = this.width / 2;
        var o = this.height / 2;
        var r = Math.sqrt(Math.pow(t - n, 2) + Math.pow(e - o, 2));
        if (r <= n) {
          return true;
        }
        return false;
      };
      return t;
    })(XOF.Sprite);
    e.default = a;
  });
  t(Bp);
  var Np = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(x);
    var i = o(W);
    var a = o(Q);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/Dungeon/DungeonRewardItem", t, t);
        t.imgEffect.visible = t.imgLight.visible = false;
        t.on(XOF.TouchEvent.TAP, t.onClick, t);
        t.playCount = 1;
        return t;
      }
      t.prototype.playAnimation = function () {
        var t = this;
        this.imgBox.visible = this.imgLight.visible = false;
        this.imgEffect.visible = true;
        a.default.removeTweens(this.imgEffect);
        var e = a.default.get(this.imgEffect);
        for (var n = 0; n <= 11; n++) {
          e.set({
            skin: "interface2/reward_ver3.0/box.img/" + n + ".png",
          }).wait(100);
          if (n == 4)
            e.call(function () {
              return t.event(r.default.DUNGEON_REWARD_ANIMATION, [t.id]);
            });
        }
        e.call(function () {
          return (t.imgEffect.visible = false);
        });
        e.remove();
      };
      t.prototype.onClick = function () {
        if (this.playCount <= 0) return;
        this.playCount--;
        this.event(r.default.DUNGEON_REWARD_SELECT, [this.id]);
        this.playAnimation();
      };
      return t;
    })(XOF.Sprite);
    e.default = s;
  });
  t(Np);
  var Xp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(vl);
    var i = o(W);
    var a = o(st);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/Dungeon/DungeonRewardListItem", t, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        var t = this.data,
          e = t.itemID,
          n = t.count;
        var o = a.default.getItemData(e);
        this.imgIcon.skin = o.icon;
        this.lab.textColor = a.default.getQualityColor(o.quality);
        this.lab.text = n > 1 ? o.name + " X " + n : o.name;
      };
      return t;
    })(r.default);
    e.default = s;
  });
  t(Xp);
  var Up = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(W);
    var i = o(k);
    var a = o(Xp);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.initSkin("ui/Dungeon/DungeonRewardList", t, t);
        t.listItem.itemRenderer = a.default;
        return t;
      }
      t.prototype.setData = function (t, e, n) {
        this.labCoin.text = i.default.formatMoney(e) + "金币";
        this.labName.text = t;
        this.listItem.dataProvider = n;
      };
      return t;
    })(XOF.Sprite);
    e.default = s;
  });
  t(Up);
  var Hp = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function (n) {
      o(t, n);
      function t() {
        var t = (n !== null && n.apply(this, arguments)) || this;
        t.arcX = 0;
        t.arcY = 0;
        t.radius = 0;
        t.$rate = 1;
        return t;
      }
      t.prototype.renderChildren = function (t) {
        if (this.rate == 0) return;
        var e = 1.5;
        t.$.save();
        t.$.beginPath();
        t.$.moveTo(t.x + this.arcX, t.y + this.arcY);
        t.$.arc(
          t.x + this.arcX,
          t.y + this.arcY,
          this.radius,
          Math.PI * e,
          Math.PI * (e - 2 + 2 * (1 - this.rate)),
          true
        );
        t.$.clip();
        n.prototype.renderChildren.call(this, t);
        t.$.closePath();
        t.$.restore();
      };
      Object.defineProperty(t.prototype, "rate", {
        get: function () {
          return this.$rate;
        },
        set: function (t) {
          this.$rate = t;
          this.updateFill();
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.$initRenderer = function () {
        n.prototype.$initRenderer.call(this);
        this.$renderer.mask = this.$mask = new PIXI.Graphics();
        this.$renderer.addChild(this.$mask);
      };
      t.prototype.$renderUpdate = function () {
        n.prototype.$renderUpdate.call(this);
        this.updateFill();
      };
      t.prototype.updateFill = function () {
        this.$mask.clear();
        if (this.rate <= 0) return;
        var t = 1.5;
        this.$mask.beginFill(0);
        this.$mask.moveTo(this.arcX, this.arcY);
        this.$mask.arc(
          this.arcX,
          this.arcY,
          this.radius,
          Math.PI * t,
          Math.PI * (t - 2 + 2 * (1 - this.rate)),
          true
        );
        this.$mask.endFill();
      };
      return t;
    })(XOF.Sprite);
    e.default = n;
  });
  t(Hp);
  var Gp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(W);
    var i = o(Q);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.initSkin("ui/M_Controler/btnSkill", t, t);
        t.on(XOF.TouchEvent.TOUCH_BEGIN, t.onClick, t);
        t.imgEnabled.visible = t.imgWhite.visible = false;
        t.gTime.rate = 0;
        return t;
      }
      t.prototype.onClick = function () {
        this.effect();
      };
      t.prototype.effect = function () {
        i.default.removeTweens(this.imgIcon);
        i.default
          .get(this.imgIcon)
          .set({ scaleX: 1, scaleY: 1 })
          .to({ scaleX: 1.3, scaleY: 1.3 }, 80)
          .to({ scaleX: 1, scaleY: 1 }, 80)
          .remove();
      };
      Object.defineProperty(t.prototype, "data", {
        get: function () {
          return this.data_;
        },
        set: function (t) {
          this.data_ = t;
          this.dataChanged_();
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.countdownComplete = function () {
        i.default.removeTweens(this.imgWhite);
        i.default
          .get(this.imgWhite)
          .set({ visible: true, alpha: 0.6 })
          .to({ alpha: 1 }, 80)
          .to({ alpha: 0.6 }, 80)
          .set({ visible: false })
          .remove();
      };
      t.prototype.updateCountdown = function (t) {
        var e = this.gTime.rate;
        this.gTime.rate = t;
        if (t <= 0 && e > 0) {
          this.countdownComplete();
        }
      };
      t.prototype.dataChanged_ = function () {
        var t;
        var e = this.data;
        this.imgIcon.skin = "";
        this.imgEnabled.visible = false;
        if (e.itemData) {
          if (this.itemId != e.itemData.id) this.stopEffect();
          if (this.id == 511) {
            this.imgIcon.skin = "ui_interface/3.png";
            this.imgIcon.size(128, 128);
            this.imgIcon.pos(64, 64);
          } else {
            this.imgIcon.skin = e.itemData.icon;
          }
          this.imgEnabled.visible = !e.extra.enabled;
        } else {
          this.stopEffect();
        }
        this.itemId = (t = e.itemData) === null || t === void 0 ? void 0 : t.id;
      };
      t.prototype.stopEffect = function () {
        i.default.removeTweens(this.imgWhite);
        this.imgWhite.visible = false;
      };
      t.prototype.hitTest_ = function (t, e) {
        var n = this.width / 2;
        var o = this.height / 2;
        var r = Math.sqrt(Math.pow(t - n, 2) + Math.pow(e - o, 2));
        if (r <= n) {
          return true;
        }
        return false;
      };
      return t;
    })(XOF.Sprite);
    e.default = a;
  });
  t(Gp);
  var Vp = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(dt);
    var o = (function () {
      function t() {}
      t.getMonthGiftId = function () {
        var t = new Date().getMonth() + 1;
        return r.default.conf.vip.month[t].itemid;
      };
      t.getActiveCount = function () {
        var t, e, n, o;
        return (o =
          (n =
            (e =
              (t = r.default.conf.vip) === null || t === void 0
                ? void 0
                : t.base) === null || e === void 0
              ? void 0
              : e.active) === null || n === void 0
            ? void 0
            : n.value) !== null && o !== void 0
          ? o
          : 0;
      };
      return t;
    })();
    e.default = o;
  });
  t(Vp);
  var $p = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(W);
    var a = o(wl);
    var s = o(Vp);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/M_Controler/CityHead", t, t);
        t.labEnergy.font = a.default.getBitmapFont(
          "font/counttext.png",
          "font/counttext.fnt"
        );
        return t;
      }
      t.prototype.open = function () {
        r.default.eventMgr.on(1032, this.updateHead, this);
        this.btnAddActive.on(XOF.TouchEvent.TAP, this.onClickActiveAdd, this);
      };
      t.prototype.close = function () {
        this.btnAddActive.off(XOF.TouchEvent.TAP, this.onClickActiveAdd, this);
        r.default.eventMgr.off(1032, this.updateHead, this);
      };
      t.prototype.updateHead = function () {
        this.labLv.text = r.default.userData.hero.lv + "";
        var t = r.default.userData.hero.maxExp;
        this.imgExp.width = Math.min(
          192,
          Math.floor(
            (t <= 0 ? 1 : r.default.userData.hero.exp / Math.max(1, t)) * 192
          )
        );
        this.labEnergy.text = r.default.userData.hero.vitality + "";
      };
      t.prototype.onClickActiveAdd = function () {
        r.default.comm.msgBox(
          "开通会员每日可以额外获得" + s.default.getActiveCount() + "点活力"
        );
      };
      return t;
    })(XOF.Box);
    e.default = u;
  });
  t($p);
  var qp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(x);
    var a = o(W);
    var s = o(Q);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.lastLineNum = 0;
        a.default.initSkin("ui/Chat/Chat", t, t);
        t.lab.height = undefined;
        t.hideButton(true);
        t.imgBg.grid = [8, 8, 6, 6];
        t.lab.text = "";
        return t;
      }
      t.prototype.onOpen = function () {
        r.default.eventMgr.on(1038, this.onChat, this);
        r.default.eventMgr.on(1074, this.onChat, this);
        this.on(XOF.TouchEvent.TAP, this.onClick, this);
        this.panel.on(XOF.TouchEvent.TOUCH_ENTER, this.hideButton, this, [
          false,
        ]);
        this.panel.on(XOF.TouchEvent.TOUCH_OUT, this.hideButton, this, [true]);
        this.content.on(i.default.SCROLLBAR_CHANGE, this.onScroll, this);
        this.content.on(XOF.TouchEvent.TAP, this.onTouchBegin, this);
        this.content.on(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.content.on(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
        this.content.on(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onTouchEnd,
          this
        );
        this.onChat(true);
      };
      t.prototype.onTouchBegin = function (t) {
        this.clickCancel = false;
        this.touchIn = t.touchId;
      };
      t.prototype.onTouchEnd = function (t) {
        this.touchIn = undefined;
      };
      t.prototype.onScroll = function (t) {
        this.clickCancel = true;
      };
      t.prototype.onClose = function () {
        r.default.eventMgr.off(1038, this.onChat, this);
        r.default.eventMgr.off(1074, this.onChat, this);
        this.off(XOF.TouchEvent.TAP, this.onClick, this);
        this.content.off(i.default.SCROLLBAR_CHANGE, this.onScroll, this);
        this.content.off(XOF.TouchEvent.TAP, this.onTouchBegin, this);
        this.content.off(XOF.TouchEvent.TOUCH_END, this.onTouchEnd, this);
        this.content.off(XOF.TouchEvent.TOUCH_CANCEL, this.onTouchEnd, this);
        this.content.off(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onTouchEnd,
          this
        );
        this.panel.off(XOF.TouchEvent.TOUCH_ENTER, this.hideButton, this);
        this.panel.off(XOF.TouchEvent.TOUCH_OUT, this.hideButton, this);
      };
      t.prototype.onChat = function (t) {
        if (t === void 0) {
          t = false;
        }
        this.lab.text = this.strs.join("\n");
        this.updateView();
        var e = 1;
        if (this.lab.lineNum > this.lastLineNum) {
          e = this.lab.lineNum - this.lastLineNum;
        } else {
          this.panel.scrollV =
            this.panel.contentHeight -
            this.panel.height -
            (this.lab.fontSize + this.lab.lineSpacing);
        }
        if (!this.touchIn) {
          this.scrollToBottom(t ? 0 : e * 200);
        }
        this.lastLineNum = this.lab.lineNum;
      };
      Object.defineProperty(t.prototype, "strs", {
        get: function () {
          return r.default.userData.chat.text;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.updateView = function () {
        this.content.height = Math.max(
          this.panel.height,
          (this.lab.fontSize + this.lab.lineSpacing) * this.lab.lineNum
        );
      };
      t.prototype.scrollToBottom = function (t) {
        if (t === void 0) {
          t = 0;
        }
        var e = this.panel.contentHeight - this.panel.height;
        if (e < 0) e = 0;
        if (t > 0) {
          s.default.removeTweens(this.panel);
          s.default.get(this.panel).to({ scrollV: e }, t).remove();
        } else {
          this.panel.scrollV = e;
        }
      };
      t.prototype.hideButton = function (t) {};
      t.prototype.onClick = function () {
        this.touchIn = undefined;
        if (this.clickCancel) return;
        r.default.platform.input("输入聊天内容", "", {
          confirmCallback: this.onInputText,
          confirmThisObj: this,
        });
      };
      t.prototype.onInputText = function (t) {
        r.default.userData.chat.send((t + "").slice(0, 20));
      };
      return t;
    })(XOF.Box);
    e.default = u;
  });
  t(qp);
  var Kp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    e.MapSelectItemView = void 0;
    var r = o(dt);
    var i = o(W);
    var a = o(wl);
    var s = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/M_Controler/MapSelectItem", t, t);
        t.labLv.font = a.default.getBitmapFont(
          "font/white_stroke_small02.png",
          "font/white_stroke_small02.fnt"
        );
        t.labLv.text = "l1";
        return t;
      }
      t.prototype.setBoxType = function (t) {
        var e = r.default.conf.dungeonselectbox[t];
        if (!e) {
          e = r.default.conf.dungeonselectbox[0];
        }
        this.imgBox.skin = e.img;
        this.imgBox.pivotX = e.x;
        this.imgBox.pivotY = e.y;
        this.imgBox.pos(0, 0);
      };
      return t;
    })(XOF.Sprite);
    e.MapSelectItemView = s;
  });
  t(Kp);
  Kp.MapSelectItemView;
  var Yp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(wl);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.relative = true;
        return t;
      }
      t.prototype.$updateList_ = function () {
        XOF.Timer.callLater(this.$adjustRelative, this);
      };
      t.prototype.$adjustRelative = function () {
        if (this.relative) {
          r.default.relativeSet(
            this,
            this.centerX,
            this.centerY,
            this.left,
            this.right,
            this.top,
            this.bottom
          );
        }
      };
      Object.defineProperty(t.prototype, "relative", {
        get: function () {
          return this.$relative;
        },
        set: function (t) {
          this.$relative = t;
          if (this.$relative) {
            this.on(XOF.Event.RESIZE, this.$updateList_, this);
            this.on(XOF.Event.ADDED, this.$updateList_, this);
          } else {
            this.off(XOF.Event.RESIZE, this.$updateList_, this);
            this.off(XOF.Event.ADDED, this.$updateList_, this);
          }
        },
        enumerable: false,
        configurable: true,
      });
      return t;
    })(XOF.Box);
    e.default = i;
  });
  t(Yp);
  var Wp = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(V);
    var v = o(dt);
    var r = o(vl);
    var a = o(W);
    var s = o(Yl);
    var y = o(st);
    var _ = o(rl);
    var m = o(k);
    var u = o(Q);
    var l = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        a.default.initSkin("ui/Login/LoginCharacterSelectItem", t, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        var t, e, n, o;
        r.prototype.dataChanged_.call(this);
        this.imgSelect.visible = this.select;
        if (this.data) {
          this.labName.text = i.default.tr(
            83,
            (e =
              (t = this.data) === null || t === void 0 ? void 0 : t.level) !==
              null && e !== void 0
              ? e
              : 1,
            this.data.name
          );
          this.labJob.text =
            (o =
              (n = v.default.conf.character) === null || n === void 0
                ? void 0
                : n[this.data.job]) === null || o === void 0
              ? void 0
              : o.name;
          this.initBodyData();
          this.updateBody();
        } else {
          u.default.removeTweens(this.imgSelect);
          this.labJob.text = this.labName.text = "";
          if (this.body) {
            this.body.removeSelf();
            this.body.destory();
            delete this.body;
          }
          this.lastEquips = undefined;
        }
      };
      t.prototype.initBodyData = function () {
        if (!this.body) {
          this.body = new s.default();
          this.body.noshowTitle = true;
          this.gBody.addChild(this.body);
        }
      };
      Object.defineProperty(t.prototype, "selectd_", {
        get: function () {
          return this.select;
        },
        set: function (t) {
          if (t != this.select) {
            if (t) {
              u.default
                .get(this.imgSelect, { loop: true })
                .set({ alpha: 1 })
                .to({ alpha: 0.3 }, 1e3)
                .to({ alpha: 1 }, 1e3);
            }
          }
          this.select = t;
          this.dataChanged_();
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.updateBody = function () {
        var t;
        var e, n, o, r, i, a;
        var s = [];
        var u = this.data.job;
        var l = v.default.conf.character[u];
        if (l.bodyEquipmentId) s.push(l.bodyEquipmentId);
        if (l.weaponEquipmentId) s.push(l.weaponEquipmentId);
        if (l.skinEquipmentId) s.push.apply(s, l.skinEquipmentId);
        for (var f in this.data.wears) {
          var c = y.default.getItemData(
            (o =
              (n =
                (e = this.data) === null || e === void 0 ? void 0 : e.wears) ===
                null || n === void 0
                ? void 0
                : n[f]) === null || o === void 0
              ? void 0
              : o.itemID
          );
          if (c === null || c === void 0 ? void 0 : c.equ) {
            s.push(c.equ);
          }
        }
        if (this.data.skins) {
          var p = this.data.skins;
          for (var f in p) {
            var d = y.default.getItemData(
              (r = p === null || p === void 0 ? void 0 : p[f]) === null ||
                r === void 0
                ? void 0
                : r.itemID
            );
            if (
              (d === null || d === void 0 ? void 0 : d.class) ==
              at.SkinClass.BODY
            ) {
              if (
                _.default.getBoolValue(_.default.system_setting_showskin) ==
                false
              ) {
                continue;
              }
            }
            if (d === null || d === void 0 ? void 0 : d.equ) {
              s.push(d.equ);
            }
            if (
              (i = d === null || d === void 0 ? void 0 : d.equs) === null ||
              i === void 0
                ? void 0
                : i.length
            ) {
              s.push.apply(s, d.equs);
            }
          }
        }
        if (
          s.length > 0 &&
          ((a = this === null || this === void 0 ? void 0 : this.lastEquips) ===
            null || a === void 0
            ? void 0
            : a.length) == s.length
        ) {
          var h = true;
          for (var f in s) {
            if (this.lastEquips[f] != s[f]) {
              h = false;
            }
          }
          if (h) return;
        }
        (t = this.body).setEquipments.apply(t, s);
        this.lastEquips = m.default.copy(s);
      };
      return t;
    })(r.default);
    e.default = l;
  });
  t(Wp);
  var zp = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(W);
    var r = n(Pl);
    var i = n(Ql);
    var a = n(jl);
    var s = n(wp);
    var u = n(Ap);
    var l = n(we);
    var f = n(Ep);
    var c = n(et);
    var p = n(Tp);
    var d = n(Cp);
    var h = n(_l);
    var v = n(Pp);
    var y = n(jp);
    var _ = n(Sp);
    var m = n(Il);
    var g = n(Mp);
    var b = n(kp);
    var O = n(N);
    var w = n(Ip);
    var A = n(Lp);
    var E = n(Hc);
    var T = n(Fp);
    var C = n(Wc);
    var P = n(Bp);
    var j = n(Np);
    var S = n(Up);
    var M = n(Hp);
    var k = n(Gp);
    var x = n($p);
    var D = n(Vl);
    var I = n(qp);
    var R = n(Rp);
    var L = n(Yp);
    var F = n(Wp);
    var B = (function () {
      function t() {}
      t.register = function () {
        o.default.registerComponent("XOF.Sprite", XOF.Sprite);
        o.default.registerComponent("XOF.Image", XOF.Image);
        o.default.registerComponent("XOF.Label", XOF.Label);
        o.default.registerComponent("XOF.Box", XOF.Box);
        o.default.registerComponent("Button", r.default);
        o.default.registerComponent("LabelButton", E.default);
        o.default.registerComponent("Scroller", w.default);
        o.default.registerComponent("List", A.default);
        o.default.registerComponent("ScaleButton", i.default);
        o.default.registerComponent("BitmapLabel", a.default);
        o.default.registerComponent("MenuProfileBtnTitle", s.default);
        o.default.registerComponent("VerticalScrollBar", u.default);
        o.default.registerComponent("ColorLabel", l.default);
        o.default.registerComponent("RollImage", f.default);
        o.default.registerComponent("NumberLabel", c.default);
        o.default.registerComponent("CircularBox", p.default);
        o.default.registerComponent("RadioGroup", d.default);
        o.default.registerComponent("ItemView", h.default);
        o.default.registerComponent("ProfileEquipmentItem", v.default);
        o.default.registerComponent("FightRoundView", y.default);
        o.default.registerComponent("TipListView", _.default);
        o.default.registerComponent("BuffPanelView", m.default);
        o.default.registerComponent("HeroHeadView", g.default);
        o.default.registerComponent("IconListView", b.default);
        o.default.registerComponent("RoleMenuBackView", O.default);
        o.default.registerComponent("ScaleComponent", T.default);
        o.default.registerComponent("MenuSkillIconView", C.default);
        o.default.registerComponent(
          "MenuSkillUpgradeCostView",
          Tf.MenuSkillUpgradeCostView
        );
        o.default.registerComponent("ItemSlotView", P.default);
        o.default.registerComponent("DungeonRewardItemView", j.default);
        o.default.registerComponent("DungeonRewardListView", S.default);
        o.default.registerComponent("RadiusBox", M.default);
        o.default.registerComponent("BtnSkill", k.default);
        o.default.registerComponent("CityHeadView", x.default);
        o.default.registerComponent("JoysticView", D.default);
        o.default.registerComponent("ChatView", I.default);
        o.default.registerComponent("DataGroup", R.default);
        o.default.registerComponent("MapSelectItemView", Kp.MapSelectItemView);
        o.default.registerComponent("RelativeBox", L.default);
        o.default.registerComponent("LoginCharacterSelectItemView", F.default);
      };
      return t;
    })();
    e.default = B;
  });
  t(zp);
  var o = 0.1;
  var Qp = {};
  var Jp = {};
  var Zp = {
    home: { bornTime: 0, wordTime: 0, onlineTime: 0, flags: {} },
    hero: {
      name: "不想升级呀",
      lv: 3,
      job: "swordman",
      exp: 20,
      sp: 20,
      hp: 50,
      mp: 50,
      equips: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0, 9: 0, 10: 0 },
      skin: {},
    },
    equipments: {
      index: 4,
      list: {
        2: { id: 1002021 },
        3: { id: 1001002, durability: 5 },
        4: { id: 1001006 },
      },
    },
    buddy: [],
    bag: {
      list: {
        1: { id: 2001001, count: 1 },
        2: { id: 2000004, count: 1 },
        3: { id: 2000003, count: 1 },
        4: { id: 2000006, count: 1 },
        5: { id: 2000007, count: 1 },
        6: { id: 2000012, count: 12 },
        7: { id: 2, count: 1 },
        501: { id: 2000001, count: 10 },
        502: { id: 2000002, count: 5 },
      },
      cd: {},
      coin: 500,
      gold: 0,
    },
    skill: {
      locks: [106],
      ls: [],
      slots: {
        511: { id: 122 },
        512: { id: 106 },
        513: { id: 102 },
        514: { id: 134 },
        515: { id: 125 },
        516: { id: 136 },
        517: { id: 137 },
        518: { id: 129 },
        519: { id: 132 },
        520: { id: 100 },
      },
    },
    map: { level: 1, round: 1 },
    quest: {
      list: {
        10003: { id: "10003" },
        10004: { id: "10004" },
        10005: { id: "10005" },
        10006: { id: "10006" },
        10007: { id: "10007" },
      },
      finish: [],
    },
  };
  var td = { version: o, dlc: Qp, user: Jp, content: Zp };
  var ed = Object.freeze({
    __proto__: null,
    version: o,
    dlc: Qp,
    user: Jp,
    content: Zp,
    default: td,
  });
  var nd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(q);
    var r = o(R);
    var i = o(W);
    var s = o(k);
    var u = o(st);
    var l = o(_l);
    var f = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/Mail/MailDetails", t, t);
        return t;
      }
      t.prototype.onOpen = function (t) {
        e.prototype.onOpen.call(this);
        this.listItems.itemRenderer = l.default;
        this.id = t;
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnGet.on(XOF.TouchEvent.TAP, this.onClickGet, this);
        this.updateView();
      };
      t.prototype.updateView = function () {
        for (var t = 0, e = a.default.userData.mail.list; t < e.length; t++) {
          var n = e[t];
          if (n.id == this.id) {
            this.labTitle2.text = n.title;
            this.labTime.text = s.default.timeFormat(
              n.createDate * 1e3,
              "yyyy-MM-dd hh:mm"
            );
            this.labText.text = n.remarks;
            var o = [];
            for (var r in n.items) {
              o.push({
                itemData: u.default.getItemData(n.items[r].id),
                count: n.items[r].count,
              });
            }
            this.listItems.dataProvider = o;
            this.sc.width = Math.min(
              590,
              o.length * (84 + this.listItems.horizontalGap) -
                this.listItems.horizontalGap
            );
            this.sc.horizontalCanScroll = this.sc.width >= 590;
            var i = this.bg.width / 2;
            this.sc.x = i - this.sc.width / 2;
            break;
          }
        }
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnGet.off(XOF.TouchEvent.TAP, this.onClickGet, this);
        this.listItems.itemRenderer = undefined;
      };
      t.prototype.onClickGet = function () {
        var e = this;
        a.default.userData.mail.get(this.id).then(function (t) {
          if (t) {
            e.close();
          }
        });
      };
      return t;
    })(r.default);
    e.default = f;
  });
  t(nd);
  var od = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(vl);
    var a = o(W);
    var s = o(st);
    var u = o(k);
    var i = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        a.default.initSkin("ui/Mail/MailItem", t, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        var t;
        i.prototype.dataChanged_.call(this);
        var e = this.data;
        this.labTitle.text = e.data.title;
        if ((t = e.data.items) === null || t === void 0 ? void 0 : t.length) {
          var n = e.data.items[0],
            o = n.id,
            r = n.count;
          this.itemBox.data = {
            itemData: s.default.getItemData(o),
            count: r,
            tap: false,
          };
        } else {
          this.itemBox.data = {};
        }
        this.labTime.text = u.default.timeFormat(
          e.data.createDate * 1e3,
          "yyyy-MM-dd hh:mm"
        );
        this.imgLight.visible = !!e.selected;
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(od);
  var rd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(R);
    var s = o(x);
    var u = o(I);
    var l = o(W);
    var f = o(od);
    var c = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        l.default.initSkin("ui/Mail/Mail", t, t);
        t.listMail.itemRenderer = f.default;
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(s.default.CLOSE, this.close, this);
        this.btnGetAll.on(XOF.TouchEvent.TAP, this.onClickAll, this);
        this.btnUpdate.on(XOF.TouchEvent.TAP, this.onClickUpdate, this);
        this.listMail.on(s.default.ITEM_TAP, this.onClickItem, this);
        i.default.eventMgr.on(1067, this.updateView, this);
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.bg.onClose();
        this.btnGetAll.off(XOF.TouchEvent.TAP, this.onClickAll, this);
        this.btnUpdate.off(XOF.TouchEvent.TAP, this.onClickUpdate, this);
        this.listMail.off(s.default.ITEM_TAP, this.onClickItem, this);
        i.default.eventMgr.off(1067, this.updateView, this);
      };
      t.prototype.onClickAll = function () {
        var t = i.default.userData.mail.list;
        if (t.length) {
          i.default.userData.mail.getAll();
        } else {
          i.default.eventMgr.event(1055, [r.default.tr(176)]);
        }
      };
      t.prototype.onClickUpdate = function () {
        i.default.userData.mail.load();
      };
      t.prototype.updateView = function () {
        var t = [],
          e = i.default.userData.mail.list;
        for (var n = 0; n < e.length; n++) {
          t.push({ data: e[n], selected: e[n].id == this.id });
        }
        this.listMail.dataProvider = t;
        this.labTips.visible = t.length == 0;
      };
      t.prototype.onClickItem = function (t) {
        this.id = t.data.id;
        this.updateView();
        i.default.viewMgr.open(u.default.MailDetails, [t.data.id]);
      };
      return t;
    })(a.default);
    e.default = c;
  });
  t(rd);
  var id = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(D);
    var a = o(I);
    var s = o(nd);
    var u = o(rd);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.viewMgr.register(a.default.Mail, u.default);
        r.default.viewMgr.register(a.default.MailDetails, s.default);
        return t;
      }
      return t;
    })(i.default);
    e.default = l;
  });
  t(id);
  var ad = e(function (t, e) {
    var o =
      (mo && mo.__spreadArray) ||
      function (t, e) {
        for (var n = 0, o = e.length, r = t.length; n < o; n++, r++)
          t[r] = e[n];
        return t;
      };
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(V);
    var i = n(q);
    var a = n(I);
    var s = (function () {
      function t() {}
      t.prototype.msr = function (t) {
        this.tip(r.default.sr(t));
      };
      t.prototype.mtr = function (t) {
        var e = [];
        for (var n = 1; n < arguments.length; n++) {
          e[n - 1] = arguments[n];
        }
        this.tip(r.default.tr.apply(r.default, o([t], e)));
      };
      t.prototype.tip = function (t) {
        i.default.eventMgr.event(1055, [t]);
      };
      t.prototype.msgBox = function (t, e) {
        if (e) i.default.viewMgr.close(a.default.MsgBox);
        i.default.viewMgr.open(a.default.MsgBox, [t]);
      };
      t.prototype.netloading = function (t) {
        if (t >= 0) {
          i.default.viewMgr.close(a.default.NetLoading);
        }
        if (t > 0) {
          i.default.viewMgr.open(a.default.NetLoading, [t]);
        }
      };
      t.prototype.itemDetails = function (t, e, n) {
        i.default.eventMgr.event(1033, [t, e, n]);
      };
      return t;
    })();
    e.default = s;
  });
  t(ad);
  var sd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(V);
    var r = o(vl);
    var a = o(W);
    var s = o(st);
    var u = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        a.default.initSkin("ui/dungeon/DungeonItemSetListItem", t, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        var t, e, n;
        r.prototype.dataChanged_.call(this);
        var o = this.data;
        this.itemBox.data = { itemData: o.itemData };
        this.labTitle.text = o.itemData.name;
        this.labTitle.textColor = s.default.getQualityColor(o.itemData.quality);
        this.labDesc.text = i.default.tr(
          104,
          (e =
            (t = o === null || o === void 0 ? void 0 : o.itemData) === null ||
            t === void 0
              ? void 0
              : t.level) !== null && e !== void 0
            ? e
            : 1
        );
        this.imgLight.visible = o.selected;
        this.labWear.text =
          "槽位" +
          ((n = o === null || o === void 0 ? void 0 : o.extra) !== null &&
          n !== void 0
            ? n
            : "");
        this.labWear.visible = o.extra > 0;
      };
      return t;
    })(r.default);
    e.default = u;
  });
  t(sd);
  var ud = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var r =
      (mo && mo.__createBinding) ||
      (Object.create
        ? function (t, e, n, o) {
            if (o === undefined) o = n;
            Object.defineProperty(t, o, {
              enumerable: true,
              get: function () {
                return e[n];
              },
            });
          }
        : function (t, e, n, o) {
            if (o === undefined) o = n;
            t[o] = e[n];
          });
    var i =
      (mo && mo.__setModuleDefault) ||
      (Object.create
        ? function (t, e) {
            Object.defineProperty(t, "default", { enumerable: true, value: e });
          }
        : function (t, e) {
            t["default"] = e;
          });
    var n =
      (mo && mo.__importStar) ||
      function (t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (t != null)
          for (var n in t)
            if (n !== "default" && Object.prototype.hasOwnProperty.call(t, n))
              r(e, t, n);
        i(e, t);
        return e;
      };
    var a =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = a(V);
    var u = a(q);
    var l = a(R);
    var f = a(x);
    var c = a(W);
    var p = a(st);
    var d = n(it);
    var h = a(sd);
    var v = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        c.default.initSkin("ui/dungeon/DungeonItemSetList", t, t);
        t.listItem.itemRenderer = h.default;
        return t;
      }
      t.prototype.onOpen = function (t, e) {
        n.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.listItem.on(f.default.ITEM_TAP, this.onClickItem, this);
        this.slots = t;
        this.slotIndex = e;
        this.selectId = undefined;
        this.updateView();
      };
      t.prototype.onClose = function () {
        n.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.listItem.off(f.default.ITEM_TAP, this.onClickItem, this);
        delete this.slots;
        delete this.selectId;
        delete this.slotIndex;
      };
      t.prototype.updateView = function () {
        var t = [];
        for (var e = 0, n = u.default.userData.bag.items; e < n.length; e++) {
          var o = n[e];
          var r = p.default.getItemData(o.itemID);
          if (r.type == d.default.ITEM && r.class == d.ItemClass.ITEM) {
            t.push({
              itemData: r,
              selected: this.selectId == r.id,
              extra: this.getItemSlotIndex(r.id),
            });
          }
        }
        this.listItem.dataProvider = t;
        if (this.slots[this.slotIndex] != "0") {
          if (!this.selectId) {
            this.btnOk.label = s.default.tr(190);
          } else {
            this.btnOk.label = s.default.tr(191);
          }
        } else {
          this.btnOk.label = s.default.tr(42);
        }
      };
      t.prototype.onClickOk = function () {
        this.event(f.default.CONFIRM, [this.selectId || 0]);
        this.close();
      };
      t.prototype.onClickItem = function (t) {
        var e;
        this.selectId =
          (e = t === null || t === void 0 ? void 0 : t.itemData) === null ||
          e === void 0
            ? void 0
            : e.id;
        this.updateView();
      };
      t.prototype.getItemSlotIndex = function (t) {
        for (var e in this.slots) {
          if (this.slots[e] == t) {
            return [e];
          }
        }
        return 0;
      };
      return t;
    })(l.default);
    e.default = v;
  });
  t(ud);
  var ld = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(V);
    var i = n(q);
    var a = n(R);
    var s = n(x);
    var u = n(I);
    var l = n(W);
    var f = n(k);
    var c = n(st);
    var p = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        l.default.initSkin("ui/dungeon/DungeonItemSet", t, t);
        t.slots = {};
        return t;
      }
      t.prototype.onOpen = function () {
        var e = this;
        n.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.itemBox.children_.forEach(function (t) {
          t.on(XOF.TouchEvent.TAP, e.onClickItem, e, [t]);
        });
        this.slots = f.default.copy(i.default.userData.dungeon.itemSlots);
        this.labTips.text = r.default.tr(186);
        for (var t in this.slots) {
          if (i.default.userData.bag.getItemCount(this.slots[t]) > 0);
          else {
            this.slots[t] = "0";
          }
        }
        this.updateView();
      };
      t.prototype.onClose = function () {
        var e = this;
        n.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.itemBox.children_.forEach(function (t) {
          t.off(XOF.TouchEvent.TAP, e.onClickItem, e);
        });
        delete this.slots;
      };
      t.prototype.updateView = function () {
        for (var t = 0, e = 1; t < 4; t++, e++) {
          var n = this.itemBox.getChildAt(t);
          var o = parseInt(this.slots[e]);
          n.id = e;
          if (o) {
            n.data = { itemData: c.default.getItemData(o) };
          } else {
            n.data = { itemData: { icon: "", name: "" } };
          }
        }
      };
      t.prototype.onClickItem = function (t) {
        var o = this;
        var r = t.id;
        i.default.viewMgr.open(u.default.DungeonItemSetList, [this.slots, r]);
        var e = i.default.viewMgr.getOpenView(u.default.DungeonItemSetList);
        if (e) {
          e.once(s.default.CONFIRM, function (t) {
            var e = c.default.getItemData(t);
            if (
              (e === null || e === void 0 ? void 0 : e.level) >
              i.default.userData.hero.lv
            ) {
              i.default.comm.mtr(205);
              return;
            }
            if (t >= 0 && r) {
              for (var n in o.slots) {
                if (o.slots[n] == t) {
                  o.slots[n] = "0";
                  break;
                }
              }
              o.slots[r] = t + "";
              o.updateView();
            }
          });
        }
      };
      t.prototype.onClickOk = function () {
        var e = this;
        i.default.comm.netloading(5e3);
        i.default.userData.dungeon
          .updateItemSet(
            this.slots[1],
            this.slots[2],
            this.slots[3],
            this.slots[4]
          )
          .then(function (t) {
            if (t) e.close();
            i.default.comm.netloading(0);
          });
      };
      return t;
    })(a.default);
    e.default = p;
  });
  t(ld);
  var fd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var a = o(q);
    var r = o(R);
    var s = o(x);
    var u = o(W);
    var l = o(wl);
    var f = o(Q);
    var c = o(st);
    var i = (function (i) {
      n(t, i);
      function t() {
        var t = i.call(this) || this;
        u.default.initSkin("ui/Dungeon/DungeonReward", t, t);
        t.rewardList.visible = false;
        t.labTime.font = l.default.getBitmapFont(
          "font/num_countdown.png",
          "font/num_countdown.fnt"
        );
        t.touchThrough = false;
        return t;
      }
      t.prototype.onOpen = function () {
        var t = this;
        i.prototype.onOpen.call(this);
        this.countdown = 5;
        this.alpha = 1;
        this.imgBlack.alpha =
          this.img2.alpha =
          this.imgTitle.alpha =
          this.gBox.alpha =
            0;
        this.labTime.visible = this.gBox.touchEnabled = false;
        f.default
          .get(this.img2, { loop: true })
          .set({ rotate: 0 })
          .to({ rotate: 360 }, 4e4);
        f.default
          .get(this.imgBlack)
          .to({ alpha: 0.9 }, 1e3)
          .call(function () {
            t.gBox.touchEnabled = true;
            t.labTime.visible = true;
            t.labTime.text = t.countdown + "";
            a.default.timerMgr.delay(1e3, t.countdown, t.onCountdown, t);
          })
          .remove();
        f.default
          .get(this)
          .wait(400)
          .call(function () {
            f.default.get(t.img2).to({ alpha: 1 }, 600).remove();
            f.default.get(t.imgTitle).to({ alpha: 1 }, 600).remove();
            f.default.get(t.gBox).to({ alpha: 1 }, 600).remove();
          })
          .remove();
        for (var e = 0; e < this.gBox.numChild; e++) {
          var n = this.gBox.getChildAt(e);
          n.id = e;
          n.playCount = 1;
          n.on(s.default.DUNGEON_REWARD_ANIMATION, this.onAnimation, this);
          n.on(s.default.DUNGEON_REWARD_SELECT, this.onSelect, this);
        }
        var o = 0;
        var r = a.default.userData.map.rewardList || [];
        for (var e = r.length - 1; e >= 0; e--) {
          if (r[e].itemID == c.default.resourceIds.coin + "") {
            o += r[e].count;
            r.splice(e, 1);
          }
        }
        this.rewardList.setData(a.default.userData.hero.name, o, r);
      };
      t.prototype.onClose = function () {
        i.prototype.onClose.call(this);
        f.default.removeTweens(this.img2);
        f.default.removeTweens(this.imgBlack);
        f.default.removeTweens(this.imgTitle);
        f.default.removeTweens(this.gBox);
        f.default.removeTweens(this);
        a.default.timerMgr.remove(this.onCountdown, this);
        for (var t = 0; t < this.gBox.numChild; t++) {
          var e = this.gBox.getChildAt(t);
          e.off(s.default.DUNGEON_REWARD_ANIMATION, this.onAnimation, this);
          e.off(s.default.DUNGEON_REWARD_SELECT, this.onSelect, this);
        }
        a.default.eventMgr.event(1016);
      };
      t.prototype.hide = function () {
        f.default
          .get(this)
          .wait(3e3)
          .to({ alpha: 0 }, 800)
          .call(this.close, this);
      };
      t.prototype.onSelect = function () {
        for (var t = 0; t < this.gBox.numChild; t++) {
          var e = this.gBox.getChildAt(t);
          e.playCount = 0;
        }
      };
      t.prototype.onAnimation = function (t) {
        var e = this.gBox.getChildAt(t);
        this.rewardList.pos(this.gBox.x + e.x, 140);
        this.rewardList.visible = true;
        a.default.timerMgr.remove(this.onCountdown, this);
        this.labTime.visible = false;
        this.hide();
      };
      t.prototype.onCountdown = function () {
        this.countdown -= 1;
        this.updateView();
        if (this.countdown <= 0) {
          this.gBox.getChildAt(0).onClick();
        }
      };
      t.prototype.updateView = function () {
        this.labTime.text = this.countdown + "";
      };
      return t;
    })(r.default);
    e.default = i;
  });
  t(fd);
  var cd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o(q);
    var r = o(R);
    var a = o(W);
    var s = o(k);
    var u = o(Q);
    var l = o(T);
    var f = (function (r) {
      n(t, r);
      function t() {
        var t = r.call(this) || this;
        a.default.initSkin("ui/Dungeon/DungeonDropMask", t, t);
        t.touchThrough = true;
        t.touchEnabled = false;
        t.orderIndex = l.default.MAIN_UI;
        return t;
      }
      t.prototype.onOpen = function (t) {
        r.prototype.onOpen.call(this);
        var e = u.default.get(this.imgBlack);
        this.imgBlack.visible = false;
        var n = "";
        if (t == 4) {
          n = "interface2/reward_ver3.0/earlyeffect/earlyeffect2.img/{0}.png";
        } else if (t == 6) {
          n = "interface2/reward_ver3.0/earlyeffect/earlyeffect.img/{0}.png";
          i.default.sound.play("LEGENDARY_EPIC_ITEM_FALL_02", {
            completeDestroy: true,
          });
        }
        if (n) {
          this.imgBlack.visible = true;
          for (var o = 0; o <= 11; o++) {
            e.set({ skin: s.default.format(n, o) }).wait(100);
          }
        }
        e.wait(50);
        e.call(this.close, this);
        e.remove();
      };
      t.prototype.onClose = function () {
        r.prototype.onClose.call(this);
      };
      return t;
    })(r.default);
    e.default = f;
  });
  t(cd);
  var pd = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = n(q);
    var i = n(R);
    var a = n(I);
    var s = n(W);
    n(dl);
    var _ = n(st);
    n(hl);
    var u = n(_l);
    var m = n(jo);
    var l = n(ml);
    var f = n(gl);
    n(V);
    var g = n(tl);
    var c = (function (n) {
      o(t, n);
      function t() {
        var t = n.call(this) || this;
        t.viewCache = true;
        s.default.initSkin("ui/Dungeon/TowerSelect", t, t);
        t.listMonsterIcon.itemRenderer = l.default;
        t.listReward.itemRenderer = u.default;
        t.listFirstReward.itemRenderer = u.default;
        t.initTower();
        return t;
      }
      t.prototype.onOpen = function () {
        n.prototype.onOpen.call(this);
        this.labTitle.text = "试炼";
        this.btnClose.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickEnter, this);
        this.btnItem.on(XOF.TouchEvent.TAP, this.onClickItem, this);
        this.btnSkill.on(XOF.TouchEvent.TAP, this.onClickSkills, this);
        var t = g.default.getTowerCount();
        var e = 0;
        this.selectTower(Math.min(e + 1, t));
        this.scrollToTower(this.layer);
      };
      t.prototype.onClose = function () {
        n.prototype.onClose.call(this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickEnter, this);
        this.btnItem.off(XOF.TouchEvent.TAP, this.onClickItem, this);
        this.btnSkill.off(XOF.TouchEvent.TAP, this.onClickSkills, this);
      };
      t.prototype.onClickEnter = function () {
        {
          r.default.eventMgr.event(1055, ["暂未开启"]);
          return;
        }
      };
      t.prototype.onClickItem = function () {
        r.default.viewMgr.open(a.default.DungeonItemSet);
      };
      t.prototype.onClickSkills = function () {
        r.default.comm.mtr(188);
      };
      t.prototype.initTower = function () {
        g.default.getTowerCount();
        var t = g.default.getTowerTop();
        var e = 260;
        var n = 0;
        for (var o = t; o >= 1; o--, n++) {
          var r = g.default.getTowerData(o, 1);
          if (!r) break;
          var i = new f.default();
          i.level = o;
          i.on(XOF.TouchEvent.TAP, this.onClickTower, this, [o, i]);
          i.pos(74, e + n * 112);
          this.gTower.addChild(i);
        }
        {
          var i = new f.default();
          i.setStyle(3);
          i.pos(80, e - 112);
          this.gTower.addChild(i);
        }
        this.gTower.height = n * 112 + e;
      };
      t.prototype.scrollToTower = function (t) {
        var e = g.default.getTowerCount();
        var n = 260;
        var o = e;
        var r = o * 112 + n;
        this.scTower.scrollV = Math.max(
          0,
          r - (t - 1) * 112 - this.scTower.height
        );
      };
      t.prototype.updateView = function () {
        this.ScMonsterIcon.stopAnimation();
        this.ScMonsterIcon.scrollH = 0;
        var t = g.default.getTowerData(this.layer, 1);
        var e = [];
        var n = [];
        var o = [];
        if (t) {
          this.labLayer.text = t.title;
          var r = [];
          var i = [];
          var a = ["soldier", "archer", "special", "boss"];
          for (var s = 1; s < Number.MAX_SAFE_INTEGER; s++) {
            var u = g.default.getTowerData(this.layer, s);
            if (!u) break;
            for (var l = 0, f = a; l < f.length; l++) {
              var c = f[l];
              var p = c == "boss";
              for (var d in u[c]) {
                var h = u[c][d];
                if (p) i.push(h);
                if (r.indexOf(h) >= 0) continue;
                r.push(h);
                var v = m.default.getData(h);
                e.push({
                  id: h,
                  icon: v === null || v === void 0 ? void 0 : v.icon,
                  isBoss: p,
                });
              }
            }
          }
          e.forEach(function (t) {
            return (t.isBoss = i.indexOf(t.id) >= 0);
          });
          e = e
            .sort(function (t, e) {
              return i.indexOf(t) - i.indexOf(e);
            })
            .reverse();
          for (var y in t.monsterdrop) {
            n.push({ itemData: _.default.getItemData(parseInt(y)) });
          }
          for (var y in t.first) {
            o.push({
              itemData: _.default.getItemData(parseInt(y)),
              count: t.first[y],
            });
          }
        }
        this.listMonsterIcon.dataProvider = e;
        this.listReward.dataProvider = n;
        this.listFirstReward.dataProvider = o;
      };
      t.prototype.onClickTower = function (t, e) {
        this.selectTower(t);
        r.default.sound.play(
          "CLICK_BUTTON4",
          { completeDestroy: true, overload: true },
          this.hashCode
        );
      };
      t.prototype.selectTower = function (t) {
        var n = this;
        if (this.layer == t) return;
        this.layer = t;
        var o;
        this.gTower.children_.forEach(function (t) {
          var e = n.layer == t.level;
          t.select = e;
          if (e) o = t;
        });
        if (o) this.gTower.setChildIndex(o, this.gTower.numChild - 1);
        this.updateView();
      };
      return t;
    })(i.default);
    e.default = c;
  });
  t(pd);
  var dd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var s = o(q);
    var r = o(R);
    var i = o(x);
    var a = o(W);
    var u = o(wl);
    var l = o(w);
    var f = o(st);
    var c = o(mt);
    var p = o(Vl);
    var d = o(dt);
    var h = o(rl);
    var v = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/M_Controler/FightSet", t, t);
        t.joysticView = new p.default();
        t.joysticView.reset();
        t.joysticView.touchEnabled = false;
        t.bJoystic.addChild(t.joysticView);
        t.joysticView.touchEnabled =
          t.skillsGroupView.touchEnabled =
          t.itemsGroupView.touchEnabled =
            false;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.bg2.onOpen();
        this.bg2.once(i.default.CLOSE, this.close, this);
        this.skillsGroup.on(
          XOF.TouchEvent.TOUCH_BEGIN,
          this.onTouchBegin,
          this,
          [this.skillsGroup]
        );
        this.itemsGroup.on(
          XOF.TouchEvent.TOUCH_BEGIN,
          this.onTouchBegin,
          this,
          [this.itemsGroup]
        );
        this.bJoystic.on(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBegin, this, [
          this.bJoystic,
        ]);
        this.btnScaleDown.on(XOF.TouchEvent.TAP, this.onClickScaleDown, this);
        this.btnScaleUp.on(XOF.TouchEvent.TAP, this.onClickScaleUp, this);
        this.btnXDown.on(XOF.TouchEvent.TAP, this.onClickXDown, this);
        this.btnXUp.on(XOF.TouchEvent.TAP, this.onClickXUp, this);
        this.btnYDown.on(XOF.TouchEvent.TAP, this.onClickYDown, this);
        this.btnYUp.on(XOF.TouchEvent.TAP, this.onClickYUp, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickSave, this);
        this.btnReset.on(XOF.TouchEvent.TAP, this.onClickReset, this);
        this.iniPos();
        this.updateItems();
        this.updateSkills();
        this.select = this.bJoystic;
        this.updateSelect();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.bg2.onClose();
        this.skillsGroup.off(
          XOF.TouchEvent.TOUCH_BEGIN,
          this.onTouchBegin,
          this
        );
        this.itemsGroup.off(
          XOF.TouchEvent.TOUCH_BEGIN,
          this.onTouchBegin,
          this
        );
        this.bJoystic.off(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBegin, this);
        this.btnScaleDown.off(XOF.TouchEvent.TAP, this.onClickScaleDown, this);
        this.btnScaleUp.off(XOF.TouchEvent.TAP, this.onClickScaleUp, this);
        this.btnXDown.off(XOF.TouchEvent.TAP, this.onClickXDown, this);
        this.btnXUp.off(XOF.TouchEvent.TAP, this.onClickXUp, this);
        this.btnYDown.off(XOF.TouchEvent.TAP, this.onClickYDown, this);
        this.btnYUp.off(XOF.TouchEvent.TAP, this.onClickYUp, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickSave, this);
        this.btnReset.off(XOF.TouchEvent.TAP, this.onClickReset, this);
      };
      t.prototype.onTouchBegin = function (t) {
        this.select = t;
        this.updateSelect();
        u.default.stratDarg(t, t.width, t.height, {
          x: 0,
          y: 68,
          width: Number.MAX_SAFE_INTEGER,
          height: Number.MAX_SAFE_INTEGER,
        });
      };
      t.prototype.iniPos = function () {
        this.onClickReset();
      };
      t.prototype.updateItems = function () {
        var t = s.default.userData.bag;
        var e = c.default.map;
        if (!t) return;
        if (!e) return;
        for (var n = 0; n < 4; n++) {
          var o = { showBg: false };
          var r = s.default.userData.dungeon.itemSlots[n + 1];
          if (r) {
            o.itemData = f.default.getItemData(r);
            o.count = 0;
            o.extra = { enabled: true };
          }
          var i = this.itemsGroupView.getChildAt(n);
          i.data = o;
        }
      };
      t.prototype.updateSkills = function () {
        var t = s.default.userData.skill;
        var e = ["a", "s", "d", "f", "g", "h", "q", "w", "e", "r", "t", "y"];
        for (
          var n = 0;
          n < Math.min(this.skillsGroupView.numChild, e.length);
          n++
        ) {
          var o = this.skillsGroupView.getChildByName("sslot" + (n + 1));
          var r = o.data || {};
          var i = t.slots[511 + n];
          if (i === null || i === void 0 ? void 0 : i.id) {
            var a = d.default.conf.skills.all[i.id];
            r.itemData = a;
            r.extra = {
              slotType: "skill",
              lv: t.getSkillLv(i.id),
              enabled: true,
            };
          } else {
            r.itemData = undefined;
          }
          o.data = r;
        }
      };
      t.prototype.updateSelect = function () {
        var t = [this.itemsGroup, this.skillsGroup, this.bJoystic];
        for (var e = 0, n = t; e < n.length; e++) {
          var o = n[e];
          if (this.select == o) {
            o.getChildAt(0).alpha = 1;
          } else {
            o.getChildAt(0).alpha = 0.2;
          }
        }
        if (this.select) {
          this.labScale.text =
            "大小:" + l.default.toFixed(this.select.scaleX, 2);
          this.labX.text = "横向:" + l.default.toFixed(this.select.x, 2);
          this.labY.text = "纵向:" + l.default.toFixed(this.select.y, 2);
        }
      };
      t.prototype.onClickScaleDown = function () {
        if (this.select) {
          this.select.scaleY = this.select.scaleX -= 0.05;
        }
        this.updateSelect();
      };
      t.prototype.onClickScaleUp = function () {
        if (this.select) {
          this.select.scaleY = this.select.scaleX += 0.05;
        }
        this.updateSelect();
      };
      t.prototype.onClickSave = function () {
        s.default.platform.setItem(
          h.default.fightui_skillsGroup_scale,
          this.skillsGroup.scaleX
        );
        s.default.platform.setItem(
          h.default.fightui_skillsGroup_x,
          this.skillsGroup.x
        );
        s.default.platform.setItem(
          h.default.fightui_skillsGroup_y,
          this.skillsGroup.y
        );
        s.default.platform.setItem(
          h.default.fightui_itemsGroup_scale,
          this.itemsGroup.scaleX
        );
        s.default.platform.setItem(
          h.default.fightui_itemsGroup_x,
          this.itemsGroup.x
        );
        s.default.platform.setItem(
          h.default.fightui_itemsGroup_y,
          this.itemsGroup.y
        );
        s.default.platform.setItem(
          h.default.fightui_joystic_scale,
          this.bJoystic.scaleX
        );
        s.default.platform.setItem(
          h.default.fightui_joystic_x,
          this.bJoystic.x
        );
        s.default.platform.setItem(
          h.default.fightui_joystic_y,
          this.bJoystic.y
        );
        s.default.eventMgr.event(1028);
        s.default.comm.tip("保存成功");
      };
      t.prototype.onClickReset = function () {
        this.skillsGroup.scaleX = this.skillsGroup.scaleY = parseFloat(
          s.default.platform.getItem(h.default.fightui_skillsGroup_scale, 1)
        );
        this.skillsGroup.x = parseFloat(
          s.default.platform.getItem(h.default.fightui_skillsGroup_x, 905)
        );
        this.skillsGroup.y = parseFloat(
          s.default.platform.getItem(h.default.fightui_skillsGroup_y, 315)
        );
        this.itemsGroup.scaleX = this.itemsGroup.scaleY = parseFloat(
          s.default.platform.getItem(h.default.fightui_itemsGroup_scale, 1)
        );
        this.itemsGroup.x = parseFloat(
          s.default.platform.getItem(h.default.fightui_itemsGroup_x, 446)
        );
        this.itemsGroup.y = parseFloat(
          s.default.platform.getItem(h.default.fightui_itemsGroup_y, 625)
        );
        this.bJoystic.scaleX = this.bJoystic.scaleY = parseFloat(
          s.default.platform.getItem(h.default.fightui_joystic_scale, 0.9)
        );
        this.bJoystic.x = parseFloat(
          s.default.platform.getItem(h.default.fightui_joystic_x, 70)
        );
        this.bJoystic.y = parseFloat(
          s.default.platform.getItem(h.default.fightui_joystic_y, 420)
        );
      };
      t.prototype.onClickXDown = function () {
        if (this.select) {
          this.select.x += -5;
        }
        this.updateSelect();
      };
      t.prototype.onClickXUp = function () {
        if (this.select) {
          this.select.x += 5;
        }
        this.updateSelect();
      };
      t.prototype.onClickYDown = function () {
        if (this.select) {
          this.select.y += -5;
        }
        this.updateSelect();
      };
      t.prototype.onClickYUp = function () {
        if (this.select) {
          this.select.y += 5;
        }
        this.updateSelect();
      };
      return t;
    })(r.default);
    e.default = v;
  });
  t(dd);
  var hd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(dt);
    var p = o(q);
    var i = o(R);
    var a = o(I);
    var s = o(W);
    var u = o(dl);
    var v = o(st);
    var l = o(hl);
    var f = o(_l);
    var y = o(jo);
    var c = o(ml);
    var d = o(V);
    var _ = o(tl);
    var h = o(g);
    var m = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.viewCache = true;
        s.default.initSkin("ui/Dungeon/HellSelect", t, t);
        t.listMonsterIcon.itemRenderer = c.default;
        t.listReward.itemRenderer = f.default;
        t.layer = 1001;
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnClose.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickEnter, this);
        this.btnItem.on(XOF.TouchEvent.TAP, this.onClickItem, this);
        this.btnSkill.on(XOF.TouchEvent.TAP, this.onClickSkills, this);
        this.btnSwitch.on(XOF.TouchEvent.TAP, this.onClickSwitch, this);
        this.updateAnimation();
        this.updateView();
        p.default.timerMgr.frame(1, -1, this.update, this);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnClose.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickEnter, this);
        this.btnItem.off(XOF.TouchEvent.TAP, this.onClickItem, this);
        this.btnSkill.off(XOF.TouchEvent.TAP, this.onClickSkills, this);
        p.default.timerMgr.remove(this.update, this);
      };
      t.prototype.onClickSwitch = function () {
        if (this.layer == 1001) {
          this.selectTower(1002);
        } else {
          this.selectTower(1001);
        }
        p.default.sound.play(
          "CLICK_BUTTON4",
          { completeDestroy: true, overload: true },
          this.hashCode
        );
      };
      t.prototype.onClickEnter = function () {
        var t = l.default.getConsumeUpCount();
        var e = false,
          f;
        if (t < 4) {
          f = u.default.getConsumeList().filter(function (t) {
            return v.default.getItemData(t).level <= p.default.userData.hero.lv;
          });
          if (f.length > t) {
            e = true;
          }
        }
        var n = this;
        function c() {
          p.default.sound.play("QUEST_ACCEPT", { completeDestroy: true });
          p.default.userData.map.enterHell(92e6, n.layer);
          n.close();
        }
        if (e) {
          p.default.comm.msgBox({
            text: d.default.tr(206),
            confirm: {
              label: d.default.tr(207),
              callback: function () {
                return c();
              },
              close: true,
            },
            cancel: {
              close: true,
              label: d.default.tr(42),
              callback: function () {
                var t = [];
                var e = [];
                var n = {};
                for (var o in p.default.userData.dungeon.itemSlots) {
                  var r = p.default.userData.dungeon.itemSlots[o];
                  if (p.default.userData.bag.getItemCount(r) > 0) {
                    n[o] = r;
                    t.push(r + "");
                  } else {
                    e.push(o);
                  }
                }
                for (var i = 0, a = e; i < a.length; i++) {
                  var r = a[i];
                  for (var s = 0, u = f; s < u.length; s++) {
                    var l = u[s];
                    if (t.indexOf(l + "") >= 0) continue;
                    n[r] = l + "";
                    t.push(l + "");
                    break;
                  }
                }
                p.default.userData.dungeon
                  .updateItemSet2(n[1], n[2], n[3], n[4])
                  .then(function () {
                    return c();
                  });
              },
            },
          });
        } else {
          c();
        }
      };
      t.prototype.onClickItem = function () {
        p.default.viewMgr.open(a.default.DungeonItemSet);
      };
      t.prototype.onClickSkills = function () {
        p.default.viewMgr.open(a.default.FightSet);
      };
      t.prototype.updateAnimation = function () {
        this.gImg.removeChildren();
        var t = new h.default(
          r.default.getAnimationData(
            "passiveobject/kcontents3/hell/obj/animation/r_wait_1step.ani.json"
          )
        );
        this.gImg.addChild(t);
        if (this.layer == 1001) {
          var e = new h.default(
            r.default.getAnimationData(
              "passiveobject/kcontents3/hell/obj/animation/r_loop_1.ani.json"
            )
          );
          this.gImg.addChild(e);
        } else {
          var e = new h.default(
            r.default.getAnimationData(
              "passiveobject/kcontents3/hell/obj/animation/sr_loop_1.ani.json"
            )
          );
          this.gImg.addChild(e);
        }
      };
      t.prototype.update = function () {
        for (var t = 0, e = this.gImg.children_; t < e.length; t++) {
          var n = e[t];
          if (n instanceof h.default) {
            n.update(XOF.Timer.dt * 1e3);
          }
        }
      };
      t.prototype.updateView = function () {
        this.ScMonsterIcon.stopAnimation();
        this.ScMonsterIcon.scrollH = 0;
        var t = _.default.getTowerData(this.layer, 1);
        var e = [];
        var n = [];
        if (t) {
          this.labLayer.text = t.title;
          var o = [];
          var r = [];
          var i = ["soldier", "archer", "special", "boss"];
          for (var a = 1; a < Number.MAX_SAFE_INTEGER; a++) {
            var s = _.default.getTowerData(this.layer, a);
            if (!s) break;
            for (var u = 0, l = i; u < l.length; u++) {
              var f = l[u];
              var c = f == "boss";
              for (var p in s[f]) {
                var d = s[f][p];
                if (c) r.push(d);
                if (o.indexOf(d) >= 0) continue;
                o.push(d);
              }
            }
          }
          o.sort(function (t, e) {
            return r.indexOf(e) - r.indexOf(t);
          });
          e = o.map(function (t) {
            var e;
            return {
              id: t,
              icon:
                (e = y.default.getData(t)) === null || e === void 0
                  ? void 0
                  : e.icon,
              isBoss: r.indexOf(t) >= 0,
            };
          });
          for (var h in t.monsterdrop) {
            n.push({ itemData: v.default.getItemData(parseInt(h)) });
          }
        }
        this.listMonsterIcon.dataProvider = e;
        this.listReward.dataProvider = n;
      };
      t.prototype.selectTower = function (t) {
        if (this.layer == t) return;
        this.layer = t;
        this.updateAnimation();
        this.updateView();
      };
      return t;
    })(i.default);
    e.default = m;
  });
  t(hd);
  var vd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(D);
    var a = o(I);
    var s = o(mt);
    var u = o(ud);
    var l = o(ld);
    var f = o(fd);
    var c = o(V);
    var p = o(cd);
    var d = o(pd);
    var h = o(dd);
    var v = o(hd);
    var y = o(_t);
    var _ = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.viewMgr.register(a.default.DungeonReward, f.default);
        r.default.viewMgr.register(a.default.DungeonItemSet, l.default);
        r.default.viewMgr.register(a.default.DungeonItemSetList, u.default);
        r.default.viewMgr.register(a.default.DungeonDropMask, p.default);
        r.default.viewMgr.register(a.default.TestTower, d.default);
        r.default.viewMgr.register(a.default.HellTower, v.default);
        r.default.viewMgr.register(a.default.FightSet, h.default);
        r.default.eventMgr.on(1016, t.onRewardFinish, t);
        r.default.eventMgr.on(1015, t.onCleanLevel, t);
        r.default.eventMgr.on(1049, t.onHeroDeath, t);
        r.default.eventMgr.on(1027, t.onDropMask, t);
        return t;
      }
      t.prototype.onDropMask = function (t) {
        r.default.viewMgr.open(a.default.DungeonDropMask, [t]);
      };
      t.prototype.onCleanLevel = function () {
        var t = this;
        var e = s.default.map.hero;
        if (
          y.default.getDungeonTypeByDungeonId(
            r.default.userData.map.dungeonId
          ) != Zu.DungeonType.Hell
        ) {
          r.default.userData.map.reward().then(function (t) {
            if (t) {
              r.default.timerMgr.delay(2500, 1, function () {
                r.default.viewMgr.open(a.default.DungeonReward);
                e.setStayTime(0);
                e.rest(false);
              });
            }
          });
        } else {
          r.default.timerMgr.delay(3500, 1, function () {
            t.onRewardFinish();
          });
        }
      };
      t.prototype.onHeroDeath = function () {
        r.default.timerMgr.delay(1500, 1, function () {
          if (
            r.default.userData.map.isBoss() &&
            r.default.userData.map.monsterCount <= 0
          )
            return;
          if (r.default.viewMgr.isOpen(a.default.DungeonPaused)) return;
          if (r.default.userData.map.currentScreen() != 2) return;
          r.default.comm.msgBox({
            text: c.default.tr(208),
            confirm: {
              callback: function () {
                return r.default.userData.map.dungeonReturn();
              },
              close: true,
            },
            close: { hide: true },
          });
        });
      };
      t.prototype.onRewardFinish = function () {
        r.default.timerMgr.delay(200, 1, function () {
          if (r.default.viewMgr.isOpen(a.default.DungeonPaused)) return;
          r.default.comm.msgBox({
            text: c.default.tr(209),
            confirm: {
              callback: function () {
                return r.default.userData.map.dungeonReturn();
              },
              close: true,
            },
          });
        });
      };
      return t;
    })(i.default);
    e.default = _;
  });
  t(vd);
  var yd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(R);
    var a = o(W);
    var s = o(st);
    var u = o(Vp);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/Vip/VipMonthGift", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClick, this);
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.btnCancel.off(XOF.TouchEvent.TAP, this.close, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClick, this);
      };
      t.prototype.updateView = function () {
        var t = u.default.getMonthGiftId();
        this.itemBox.data = { count: 1, itemData: s.default.getItemData(t) };
      };
      t.prototype.onClick = function () {
        r.default.userData.vip.getMonth();
      };
      return t;
    })(i.default);
    e.default = l;
  });
  t(yd);
  var _d = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(D);
    var a = o(I);
    var s = o(yd);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.viewMgr.register(a.default.VipMonthGift, s.default);
        return t;
      }
      return t;
    })(i.default);
    e.default = u;
  });
  t(_d);
  var md = [
    2596549, 80, 75, 3, 4, 10, 0, 0, 0, 8, 0, 231, 82, 89, 83, 115, 223, 192,
    11, 109, 12, 0, 0, 247, 63, 1, 0, 7, 0, 0, 0, 97, 105, 46, 106, 115, 111,
    110, 237, 157, 91, 119, 219, 198, 21, 133, 127, 75, 248, 76, 87, 115, 193,
    133, 244, 155, 146, 216, 113, 186, 148, 214, 181, 156, 246, 161, 203, 203,
    107, 76, 194, 36, 45, 16, 96, 1, 48, 138, 154, 149, 255, 94, 128, 18, 37,
    12, 9, 2, 152, 57, 195, 146, 178, 247, 74, 108, 235, 66, 12, 6, 131, 185,
    124, 251, 96, 99, 206, 31, 131, 89, 250, 41, 94, 36, 127, 249, 146, 167,
    201, 224, 229, 31, 131, 226, 110, 21, 13, 94, 14, 222, 165, 105, 49, 24, 14,
    38, 243, 69, 60, 205, 162, 242, 55, 255, 126, 252, 213, 117, 20, 71, 147,
    34, 205, 202, 95, 47, 166, 131, 151, 252, 208, 167, 254, 179, 142, 146, 73,
    244, 240, 41, 209, 252, 169, 31, 210, 100, 186, 40, 22, 229, 169, 135, 131,
    207, 235, 100, 82, 255, 209, 207, 249, 235, 69, 150, 23, 175, 146, 34, 218,
    158, 75, 254, 57, 124, 170, 161, 74, 166, 233, 178, 86, 153, 149, 202, 212,
    50, 47, 75, 255, 112, 255, 97, 175, 249, 148, 151, 19, 253, 124, 247, 223,
    95, 23, 234, 238, 225, 36, 126, 173, 40, 143, 49, 246, 161, 118, 210, 206,
    131, 131, 218, 193, 190, 233, 193, 97, 237, 96, 185, 57, 184, 250, 111, 120,
    168, 77, 71, 54, 109, 90, 59, 221, 248, 112, 209, 156, 153, 151, 253, 70,
    229, 239, 85, 54, 139, 138, 109, 25, 188, 165, 124, 209, 175, 111, 201, 94,
    157, 139, 123, 22, 45, 145, 148, 29, 104, 246, 88, 66, 253, 166, 7, 108,
    200, 253, 15, 38, 93, 141, 7, 253, 234, 25, 246, 251, 216, 136, 124, 57,
    227, 90, 29, 249, 238, 229, 52, 247, 195, 95, 210, 223, 162, 239, 183, 93,
    67, 176, 90, 1, 47, 132, 63, 100, 122, 79, 108, 46, 226, 178, 40, 212, 228,
    102, 91, 4, 175, 21, 49, 80, 155, 95, 241, 129, 94, 76, 103, 195, 10, 97,
    57, 136, 133, 172, 21, 38, 122, 13, 196, 170, 1, 182, 71, 123, 218, 48, 30,
    114, 198, 134, 101, 147, 84, 29, 227, 126, 76, 154, 93, 132, 223, 111, 138,
    12, 76, 174, 181, 94, 219, 80, 175, 109, 121, 185, 67, 207, 47, 111, 250,
    166, 186, 6, 243, 143, 24, 237, 53, 154, 217, 241, 227, 150, 70, 223, 185,
    90, 201, 76, 174, 246, 117, 26, 199, 233, 173, 54, 189, 72, 190, 51, 79, 15,
    205, 199, 173, 180, 237, 94, 82, 106, 3, 172, 253, 74, 201, 179, 147, 108,
    157, 157, 118, 79, 103, 212, 141, 180, 33, 43, 195, 230, 33, 107, 210, 162,
    35, 211, 78, 252, 56, 231, 200, 122, 239, 121, 193, 203, 241, 198, 12, 103,
    45, 175, 62, 107, 89, 21, 192, 181, 105, 143, 89, 148, 32, 244, 33, 96, 94,
    64, 189, 103, 85, 125, 218, 244, 120, 79, 59, 254, 69, 192, 182, 51, 150,
    197, 204, 229, 249, 150, 227, 195, 11, 246, 80, 198, 96, 30, 241, 66, 227,
    201, 187, 126, 244, 104, 111, 108, 106, 151, 63, 152, 71, 89, 122, 62, 188,
    251, 122, 145, 76, 95, 37, 209, 178, 170, 126, 186, 46, 86, 235, 162, 26,
    124, 209, 230, 39, 219, 65, 165, 221, 210, 251, 229, 200, 103, 31, 250, 221,
    155, 159, 167, 241, 182, 82, 94, 251, 116, 254, 56, 21, 36, 77, 149, 240,
    91, 14, 253, 151, 90, 20, 13, 0, 204, 251, 214, 113, 255, 212, 219, 179,
    134, 174, 16, 184, 71, 51, 143, 247, 155, 185, 106, 231, 214, 222, 87, 141,
    189, 247, 233, 211, 194, 212, 216, 116, 156, 181, 93, 3, 231, 253, 26, 233,
    167, 168, 120, 179, 210, 106, 63, 95, 61, 158, 65, 212, 202, 111, 90, 88,
    150, 171, 122, 237, 106, 7, 214, 251, 86, 178, 142, 227, 97, 211, 95, 126,
    143, 54, 120, 155, 230, 53, 28, 175, 55, 100, 59, 69, 212, 250, 39, 247, 91,
    90, 137, 134, 216, 127, 75, 139, 227, 208, 245, 195, 114, 220, 61, 67, 53,
    32, 140, 70, 217, 27, 132, 241, 75, 108, 243, 90, 123, 188, 224, 212, 234,
    11, 65, 21, 7, 178, 93, 28, 116, 3, 177, 153, 52, 191, 89, 196, 241, 224, 9,
    165, 219, 9, 165, 71, 25, 193, 126, 25, 194, 180, 140, 6, 82, 146, 198, 226,
    102, 100, 43, 110, 218, 56, 187, 27, 209, 152, 61, 162, 113, 42, 162, 73,
    65, 68, 52, 41, 169, 136, 38, 61, 34, 162, 105, 56, 110, 129, 104, 50, 104,
    67, 180, 225, 96, 153, 38, 121, 17, 101, 23, 242, 102, 145, 204, 202, 123,
    153, 95, 124, 73, 191, 156, 138, 88, 158, 38, 78, 73, 15, 9, 233, 0, 210,
    118, 100, 181, 92, 191, 75, 55, 43, 195, 129, 213, 218, 239, 30, 176, 81,
    177, 93, 241, 155, 215, 229, 160, 109, 162, 13, 157, 68, 44, 71, 157, 181,
    124, 27, 171, 187, 235, 116, 157, 76, 7, 251, 20, 50, 248, 225, 242, 239,
    229, 255, 31, 127, 121, 245, 234, 253, 192, 8, 130, 185, 38, 133, 2, 191,
    15, 67, 239, 214, 132, 243, 134, 170, 92, 93, 254, 250, 211, 27, 195, 217,
    146, 139, 238, 80, 208, 238, 58, 46, 137, 193, 77, 238, 105, 133, 235, 3,
    162, 95, 64, 230, 16, 114, 180, 215, 65, 83, 212, 60, 172, 55, 84, 124, 171,
    238, 242, 235, 245, 100, 18, 229, 121, 7, 141, 236, 86, 101, 220, 53, 58, 5,
    35, 115, 1, 215, 186, 76, 21, 71, 234, 187, 160, 149, 75, 74, 200, 172, 66,
    118, 77, 84, 36, 241, 130, 123, 52, 99, 149, 11, 238, 209, 140, 213, 47,
    184, 71, 19, 22, 114, 64, 87, 179, 238, 145, 3, 186, 154, 117, 143, 4, 227,
    82, 99, 245, 48, 111, 127, 232, 105, 61, 202, 38, 24, 66, 90, 143, 138, 0,
    38, 195, 104, 148, 153, 48, 180, 179, 30, 166, 38, 76, 170, 89, 152, 155,
    48, 244, 178, 60, 137, 253, 130, 83, 52, 97, 33, 7, 244, 232, 120, 93, 224,
    3, 186, 25, 106, 58, 18, 141, 119, 179, 232, 145, 3, 90, 42, 174, 140, 85,
    47, 152, 68, 19, 22, 114, 64, 75, 213, 149, 177, 226, 5, 143, 104, 198, 42,
    23, 44, 162, 25, 171, 95, 176, 136, 38, 44, 228, 128, 238, 102, 221, 35, 7,
    116, 55, 235, 30, 57, 160, 187, 89, 247, 197, 95, 176, 135, 14, 40, 95, 104,
    40, 91, 3, 74, 24, 26, 154, 214, 0, 51, 134, 130, 169, 190, 62, 255, 85,
    223, 177, 133, 238, 255, 127, 91, 232, 0, 211, 143, 134, 130, 53, 160, 252,
    163, 33, 93, 13, 9, 158, 196, 170, 161, 144, 73, 108, 230, 3, 145, 73, 236,
    6, 235, 244, 232, 58, 214, 170, 254, 251, 155, 86, 213, 179, 7, 72, 84, 77,
    158, 125, 218, 111, 247, 225, 211, 164, 88, 13, 36, 0, 65, 241, 228, 58,
    225, 63, 146, 250, 8, 83, 7, 92, 159, 247, 59, 224, 250, 60, 201, 87, 3, 55,
    35, 105, 176, 128, 213, 7, 56, 145, 50, 218, 88, 83, 244, 227, 3, 172, 98,
    109, 112, 202, 79, 186, 88, 193, 111, 83, 241, 89, 167, 77, 26, 96, 25, 107,
    99, 143, 88, 92, 198, 26, 66, 128, 67, 21, 137, 160, 50, 79, 96, 194, 181,
    172, 60, 48, 36, 126, 141, 198, 250, 107, 118, 20, 240, 109, 223, 81, 192,
    183, 89, 209, 202, 183, 92, 155, 155, 34, 188, 245, 92, 141, 75, 207, 85,
    211, 67, 36, 116, 12, 174, 104, 227, 185, 16, 48, 184, 81, 31, 152, 171, 41,
    199, 112, 35, 160, 170, 55, 224, 164, 46, 118, 3, 205, 88, 57, 147, 29, 234,
    49, 154, 236, 134, 78, 255, 92, 190, 160, 119, 29, 96, 29, 151, 188, 10, 88,
    9, 184, 234, 149, 221, 169, 60, 180, 185, 130, 237, 168, 227, 176, 73, 208,
    28, 55, 95, 193, 21, 98, 186, 131, 116, 108, 115, 133, 246, 171, 221, 252,
    49, 156, 230, 187, 5, 122, 13, 159, 194, 13, 203, 230, 114, 99, 63, 12, 195,
    102, 50, 36, 193, 166, 34, 142, 251, 129, 253, 33, 113, 101, 44, 247, 188,
    224, 112, 237, 105, 172, 226, 203, 126, 187, 32, 95, 102, 125, 236, 252,
    120, 225, 118, 238, 31, 58, 4, 6, 55, 75, 100, 249, 67, 171, 195, 69, 178,
    28, 248, 149, 138, 171, 100, 25, 11, 25, 87, 179, 81, 100, 196, 117, 178,
    130, 85, 112, 165, 44, 99, 1, 137, 9, 97, 75, 8, 86, 198, 197, 178, 212,
    223, 138, 125, 115, 14, 215, 107, 50, 189, 110, 35, 180, 96, 133, 52, 33,
    113, 188, 43, 184, 108, 54, 48, 253, 29, 1, 43, 38, 166, 132, 192, 234, 242,
    153, 29, 151, 207, 142, 207, 236, 184, 128, 118, 124, 102, 199, 37, 180,
    227, 85, 150, 113, 21, 109, 205, 58, 118, 62, 92, 184, 89, 19, 160, 117,
    147, 206, 207, 11, 87, 56, 20, 50, 9, 200, 167, 38, 59, 9, 8, 88, 214, 113,
    46, 240, 22, 18, 18, 69, 133, 233, 142, 194, 161, 168, 48, 221, 81, 40, 20,
    13, 166, 251, 8, 131, 162, 193, 109, 130, 138, 53, 214, 242, 42, 235, 242,
    193, 195, 251, 39, 100, 145, 210, 116, 131, 91, 5, 73, 101, 186, 193, 197,
    29, 41, 76, 55, 88, 20, 36, 245, 223, 6, 151, 137, 164, 252, 219, 224, 42,
    145, 84, 127, 249, 3, 51, 174, 174, 101, 168, 134, 203, 107, 155, 71, 179,
    65, 82, 250, 21, 95, 233, 64, 161, 24, 245, 105, 124, 129, 83, 125, 26, 149,
    200, 214, 119, 122, 87, 147, 29, 161, 223, 242, 137, 244, 139, 79, 100, 179,
    193, 58, 47, 178, 211, 1, 142, 147, 154, 168, 134, 244, 56, 57, 6, 76, 118,
    167, 155, 47, 254, 12, 104, 163, 118, 9, 53, 78, 1, 37, 118, 137, 90, 131,
    116, 138, 55, 74, 6, 238, 202, 148, 52, 251, 193, 13, 252, 224, 17, 197, 84,
    245, 42, 59, 5, 148, 98, 113, 171, 100, 58, 133, 171, 115, 25, 42, 225, 242,
    92, 126, 22, 148, 11, 2, 93, 193, 186, 32, 209, 245, 220, 137, 63, 225, 26,
    93, 193, 170, 184, 72, 215, 147, 87, 182, 231, 183, 98, 221, 49, 187, 244,
    213, 154, 93, 142, 122, 49, 155, 104, 117, 12, 175, 153, 195, 19, 197, 235,
    182, 195, 109, 77, 10, 176, 125, 0, 108, 90, 186, 155, 88, 61, 211, 231,
    126, 226, 190, 238, 247, 19, 247, 198, 248, 152, 16, 131, 127, 110, 198,
    208, 182, 16, 219, 138, 24, 140, 239, 42, 37, 179, 168, 185, 253, 75, 13,
    88, 53, 183, 255, 41, 2, 15, 57, 47, 165, 159, 232, 190, 61, 199, 75, 166,
    177, 182, 89, 134, 223, 103, 69, 98, 124, 190, 129, 168, 177, 61, 181, 59,
    127, 249, 11, 85, 187, 115, 109, 124, 76, 206, 66, 158, 250, 116, 159, 3,
    86, 51, 194, 134, 2, 54, 13, 24, 232, 137, 116, 14, 40, 222, 71, 74, 110,
    120, 140, 231, 77, 10, 20, 158, 19, 239, 13, 32, 250, 23, 142, 150, 175,
    229, 206, 95, 56, 106, 101, 65, 253, 135, 167, 143, 158, 33, 7, 246, 58,
    208, 56, 7, 204, 198, 49, 5, 6, 44, 203, 187, 63, 92, 80, 7, 7, 246, 236,
    73, 225, 130, 64, 120, 160, 229, 11, 26, 225, 129, 214, 46, 200, 132, 165,
    68, 155, 47, 8, 133, 109, 34, 72, 212, 90, 18, 91, 126, 51, 166, 173, 43,
    156, 125, 104, 210, 129, 20, 183, 172, 224, 227, 106, 5, 175, 146, 108, 83,
    159, 191, 199, 211, 254, 154, 25, 13, 176, 38, 49, 54, 189, 53, 33, 48, 9,
    139, 168, 181, 225, 99, 28, 130, 195, 129, 67, 176, 85, 97, 147, 157, 6, 10,
    231, 182, 69, 49, 141, 123, 194, 65, 175, 34, 231, 27, 94, 205, 123, 152,
    241, 14, 154, 51, 125, 182, 133, 214, 171, 232, 90, 141, 166, 85, 93, 56,
    32, 25, 126, 188, 134, 147, 70, 74, 166, 144, 201, 128, 7, 157, 123, 62,
    215, 161, 86, 174, 40, 142, 72, 25, 4, 140, 118, 197, 16, 89, 225, 122, 138,
    181, 132, 69, 115, 140, 16, 41, 180, 134, 53, 34, 154, 11, 83, 193, 53, 135,
    211, 21, 112, 149, 213, 42, 22, 221, 215, 192, 91, 121, 114, 10, 79, 240,
    99, 121, 182, 9, 175, 56, 152, 119, 181, 68, 56, 35, 90, 201, 106, 5, 30,
    153, 150, 178, 24, 12, 88, 103, 90, 203, 162, 150, 93, 53, 188, 224, 9, 46,
    75, 163, 191, 224, 9, 46, 132, 150, 241, 130, 39, 184, 172, 179, 241, 134,
    39, 56, 103, 253, 250, 11, 158, 224, 146, 246, 235, 111, 120, 130, 115, 222,
    175, 191, 96, 9, 30, 3, 156, 172, 83, 153, 116, 124, 225, 63, 43, 193, 165,
    159, 114, 126, 193, 15, 92, 192, 218, 11, 118, 224, 145, 105, 31, 111, 184,
    129, 11, 223, 233, 13, 47, 112, 238, 144, 245, 130, 21, 56, 99, 181, 23,
    140, 192, 105, 147, 147, 81, 27, 95, 194, 249, 224, 18, 182, 242, 103, 46,
    20, 112, 216, 113, 13, 232, 27, 208, 178, 180, 97, 35, 23, 82, 124, 46, 68,
    133, 207, 177, 227, 96, 193, 237, 207, 154, 1, 48, 223, 107, 28, 2, 75, 238,
    51, 33, 48, 125, 37, 80, 240, 82, 1, 176, 226, 51, 91, 200, 4, 84, 151, 83,
    33, 175, 129, 59, 176, 230, 193, 144, 145, 117, 7, 214, 145, 9, 24, 238, 9,
    158, 128, 145, 77, 222, 222, 105, 126, 184, 220, 129, 121, 213, 127, 41, 0,
    152, 236, 128, 167, 225, 96, 201, 223, 157, 200, 127, 230, 205, 39, 41, 70,
    187, 3, 43, 238, 51, 33, 176, 234, 18, 129, 249, 190, 22, 49, 89, 119, 83,
    190, 51, 3, 89, 197, 214, 93, 86, 49, 167, 251, 68, 160, 170, 147, 233, 51,
    75, 190, 31, 153, 212, 140, 41, 1, 21, 77, 239, 171, 47, 214, 164, 166, 247,
    213, 143, 53, 233, 100, 215, 61, 102, 169, 28, 247, 169, 60, 232, 206, 69,
    120, 209, 27, 158, 99, 253, 108, 181, 126, 108, 124, 194, 98, 223, 26, 95,
    95, 199, 167, 181, 180, 54, 227, 149, 173, 78, 159, 101, 29, 95, 177, 233,
    79, 176, 1, 171, 148, 146, 57, 255, 217, 192, 191, 175, 57, 210, 21, 250,
    247, 233, 213, 144, 224, 212, 177, 218, 119, 231, 132, 50, 14, 85, 128, 76,
    108, 226, 18, 95, 112, 239, 174, 1, 199, 242, 53, 5, 200, 86, 60, 121, 48,
    224, 129, 160, 101, 101, 174, 118, 0, 115, 169, 117, 101, 126, 186, 32, 159,
    89, 173, 51, 150, 169, 54, 165, 237, 3, 51, 89, 151, 110, 203, 229, 186,
    186, 177, 180, 178, 76, 207, 109, 36, 152, 209, 210, 50, 103, 97, 251, 117,
    1, 87, 21, 197, 33, 181, 53, 27, 126, 10, 230, 95, 200, 101, 190, 229, 203,
    246, 103, 22, 235, 207, 77, 149, 125, 232, 51, 147, 19, 13, 64, 96, 217, 49,
    234, 129, 13, 48, 89, 114, 215, 142, 102, 21, 38, 63, 110, 110, 185, 154,
    223, 240, 227, 110, 1, 22, 43, 105, 89, 185, 118, 28, 204, 151, 13, 174,
    193, 174, 5, 194, 255, 57, 244, 227, 166, 54, 125, 209, 246, 192, 79, 99,
    255, 98, 78, 99, 82, 9, 103, 67, 171, 102, 187, 165, 112, 96, 183, 52, 11,
    133, 89, 101, 66, 103, 47, 69, 33, 229, 32, 10, 41, 207, 36, 22, 102, 186,
    81, 32, 175, 165, 27, 149, 15, 111, 49, 98, 217, 165, 231, 153, 160, 226,
    54, 148, 241, 224, 102, 3, 55, 83, 234, 63, 59, 149, 170, 45, 108, 134, 209,
    166, 99, 164, 108, 31, 35, 101, 150, 11, 83, 127, 164, 100, 88, 80, 101,
    251, 19, 203, 164, 23, 230, 127, 158, 250, 85, 222, 64, 13, 251, 199, 199,
    113, 63, 42, 213, 11, 87, 246, 94, 49, 62, 139, 241, 192, 69, 41, 26, 209,
    112, 231, 85, 97, 138, 113, 241, 160, 92, 248, 233, 32, 18, 93, 146, 39, 27,
    254, 210, 153, 238, 49, 104, 87, 23, 218, 235, 236, 10, 75, 45, 16, 203, 65,
    11, 196, 98, 244, 195, 33, 152, 166, 46, 41, 237, 216, 179, 167, 228, 237,
    217, 85, 68, 204, 134, 219, 196, 106, 8, 91, 135, 81, 88, 14, 163, 234, 83,
    52, 205, 60, 19, 242, 179, 255, 76, 200, 143, 81, 19, 215, 151, 0, 187, 211,
    133, 101, 174, 128, 223, 2, 14, 127, 39, 130, 128, 74, 228, 224, 17, 146,
    188, 248, 26, 80, 90, 31, 7, 238, 104, 106, 252, 132, 226, 65, 209, 255,
    167, 205, 245, 68, 230, 224, 238, 204, 197, 116, 84, 202, 7, 29, 149, 140,
    231, 54, 27, 72, 176, 73, 118, 220, 234, 67, 18, 215, 62, 36, 242, 32, 97,
    3, 160, 96, 119, 94, 61, 216, 121, 117, 150, 29, 147, 18, 42, 80, 127, 166,
    219, 141, 167, 172, 142, 135, 27, 1, 149, 121, 231, 125, 153, 100, 179, 243,
    62, 147, 220, 252, 245, 152, 205, 162, 9, 7, 139, 198, 120, 110, 7, 235,
    199, 119, 11, 55, 44, 92, 199, 70, 151, 92, 238, 42, 197, 142, 225, 73, 238,
    42, 188, 4, 24, 189, 180, 188, 151, 107, 158, 163, 18, 58, 236, 82, 137, 91,
    75, 37, 142, 80, 0, 42, 187, 35, 20, 200, 87, 21, 119, 132, 2, 80, 213, 29,
    161, 0, 84, 115, 71, 104, 124, 137, 74, 57, 151, 143, 80, 0, 106, 184, 35,
    20, 128, 154, 238, 8, 141, 103, 42, 180, 93, 122, 71, 19, 133, 203, 37, 10,
    17, 40, 43, 151, 155, 241, 199, 141, 86, 106, 97, 164, 98, 79, 99, 0, 169,
    186, 211, 24, 128, 106, 238, 52, 6, 160, 186, 59, 141, 227, 139, 106, 13,
    119, 26, 3, 80, 211, 157, 198, 0, 212, 114, 177, 49, 144, 82, 149, 234, 43,
    77, 33, 146, 192, 148, 186, 43, 103, 48, 17, 44, 81, 185, 145, 137, 48, 5,
    162, 233, 196, 170, 32, 165, 205, 170, 224, 42, 22, 143, 147, 227, 97, 60,
    151, 33, 71, 138, 9, 151, 186, 100, 222, 255, 183, 95, 49, 248, 223, 58,
    231, 123, 41, 216, 218, 147, 15, 52, 137, 124, 19, 76, 95, 56, 214, 116, 25,
    219, 14, 96, 45, 251, 137, 192, 234, 215, 214, 201, 25, 174, 227, 164, 100,
    103, 177, 33, 227, 202, 22, 171, 95, 0, 86, 113, 88, 72, 217, 171, 58, 44,
    96, 26, 165, 48, 196, 180, 15, 160, 178, 39, 149, 33, 98, 232, 67, 88, 195,
    54, 30, 128, 176, 180, 163, 6, 142, 181, 108, 161, 16, 193, 202, 151, 195,
    2, 160, 146, 133, 2, 86, 125, 246, 165, 80, 96, 213, 231, 226, 176, 128, 85,
    159, 61, 187, 6, 88, 245, 82, 37, 98, 44, 160, 136, 41, 117, 34, 194, 202,
    0, 105, 227, 38, 95, 198, 43, 218, 211, 21, 162, 145, 255, 203, 213, 255,
    17, 44, 41, 22, 49, 22, 240, 223, 23, 87, 24, 45, 192, 127, 95, 92, 101, 20,
    194, 114, 36, 128, 2, 204, 99, 113, 49, 14, 132, 213, 220, 184, 128, 211,
    75, 74, 70, 105, 225, 88, 195, 142, 171, 34, 252, 139, 233, 88, 19, 8, 150,
    123, 206, 34, 12, 12, 95, 54, 170, 192, 25, 237, 235, 70, 16, 86, 182, 38,
    108, 72, 100, 34, 149, 35, 198, 2, 206, 9, 169, 29, 49, 22, 66, 164, 113,
    46, 41, 200, 155, 72, 234, 71, 29, 127, 171, 73, 1, 169, 225, 15, 5, 169,
    32, 117, 252, 161, 32, 37, 164, 134, 71, 247, 205, 166, 194, 27, 176, 188,
    154, 205, 133, 67, 80, 54, 25, 14, 65, 21, 251, 66, 131, 176, 170, 125, 188,
    67, 88, 150, 99, 223, 128, 189, 40, 85, 164, 138, 67, 13, 251, 199, 35, 80,
    211, 253, 241, 8, 150, 227, 125, 33, 88, 221, 18, 191, 16, 134, 156, 232,
    127, 7, 14, 149, 221, 191, 133, 96, 21, 247, 111, 33, 88, 150, 251, 213,
    129, 176, 171, 91, 242, 23, 4, 101, 51, 56, 16, 148, 203, 224, 64, 88, 142,
    255, 5, 97, 89, 3, 44, 132, 126, 41, 229, 206, 129, 67, 37, 247, 111, 33,
    88, 217, 253, 91, 8, 150, 37, 197, 116, 32, 218, 29, 150, 21, 3, 65, 89, 90,
    12, 4, 229, 120, 49, 16, 150, 35, 198, 64, 88, 214, 245, 13, 9, 183, 164,
    22, 91, 97, 168, 233, 164, 26, 20, 53, 255, 178, 197, 227, 56, 91, 108, 221,
    174, 139, 121, 17, 255, 132, 87, 249, 223, 169, 231, 187, 238, 42, 247, 191,
    152, 93, 243, 83, 253, 167, 120, 201, 255, 214, 194, 165, 187, 226, 37, 55,
    163, 187, 165, 103, 11, 149, 0, 200, 155, 114, 29, 127, 105, 90, 70, 115,
    75, 159, 74, 233, 217, 51, 139, 221, 221, 63, 186, 217, 73, 176, 229, 137,
    117, 94, 77, 88, 70, 107, 155, 224, 248, 121, 90, 102, 59, 4, 53, 173, 21,
    122, 186, 155, 120, 231, 23, 38, 222, 180, 58, 212, 46, 193, 100, 152, 234,
    209, 242, 168, 219, 242, 208, 42, 237, 130, 37, 75, 82, 166, 45, 25, 199,
    146, 87, 109, 195, 177, 228, 85, 59, 113, 44, 57, 251, 19, 142, 37, 225, 78,
    197, 177, 186, 229, 0, 12, 224, 170, 92, 46, 155, 131, 148, 153, 150, 203,
    230, 64, 88, 235, 47, 50, 112, 146, 169, 231, 23, 98, 255, 92, 140, 98, 214,
    116, 226, 99, 184, 252, 2, 46, 27, 185, 108, 130, 21, 58, 55, 161, 108, 193,
    177, 138, 147, 9, 52, 0, 171, 58, 9, 32, 130, 229, 164, 123, 16, 86, 119,
    162, 3, 4, 107, 56, 213, 1, 130, 53, 157, 236, 0, 193, 114, 60, 201, 176,
    132, 1, 80, 193, 254, 191, 151, 42, 216, 139, 93, 39, 140, 1, 207, 195, 86,
    53, 237, 173, 255, 108, 85, 217, 89, 147, 178, 222, 87, 130, 240, 178, 235,
    177, 247, 127, 235, 218, 224, 229, 23, 120, 249, 38, 140, 205, 28, 255, 177,
    77, 242, 56, 9, 178, 76, 59, 132, 63, 81, 150, 200, 99, 71, 189, 135, 69,
    253, 104, 120, 125, 27, 94, 179, 141, 244, 11, 119, 155, 11, 194, 201, 69,
    211, 185, 121, 121, 130, 240, 134, 251, 90, 186, 33, 162, 112, 211, 125, 45,
    43, 198, 131, 112, 203, 193, 53, 236, 99, 133, 42, 193, 6, 191, 212, 126,
    171, 205, 163, 165, 60, 183, 173, 161, 133, 4, 106, 36, 145, 77, 203, 242,
    7, 192, 190, 93, 139, 201, 217, 46, 100, 106, 158, 31, 254, 224, 226, 154,
    173, 228, 102, 44, 45, 243, 117, 238, 24, 144, 47, 99, 51, 77, 28, 76, 110,
    238, 113, 244, 162, 105, 251, 147, 70, 130, 176, 98, 186, 52, 68, 225, 228,
    42, 90, 127, 155, 224, 247, 120, 122, 29, 177, 91, 48, 134, 39, 87, 18, 55,
    159, 172, 24, 158, 60, 201, 251, 39, 227, 83, 209, 45, 125, 239, 194, 230,
    67, 137, 21, 180, 129, 71, 131, 54, 220, 77, 127, 75, 157, 182, 72, 106, 23,
    221, 112, 74, 177, 160, 13, 199, 120, 193, 13, 39, 52, 139, 44, 214, 200, 9,
    218, 112, 170, 200, 101, 39, 203, 140, 205, 136, 176, 140, 210, 252, 96,
    195, 9, 229, 126, 59, 193, 119, 225, 156, 30, 11, 24, 151, 182, 230, 31,
    240, 184, 182, 199, 138, 143, 75, 72, 230, 154, 224, 187, 80, 133, 218, 25,
    190, 11, 181, 163, 120, 134, 239, 194, 165, 110, 21, 240, 93, 168, 132, 114,
    134, 239, 194, 213, 93, 238, 2, 25, 215, 240, 88, 192, 184, 244, 142, 38,
    55, 157, 14, 12, 76, 47, 233, 141, 131, 109, 39, 35, 67, 192, 132, 59, 214,
    145, 197, 255, 51, 181, 239, 150, 145, 1, 96, 197, 47, 192, 136, 7, 224,
    187, 250, 105, 34, 96, 205, 79, 19, 1, 235, 199, 52, 227, 124, 194, 30, 199,
    52, 1, 176, 121, 76, 19, 0, 91, 199, 52, 227, 25, 144, 189, 143, 105, 2,
    228, 179, 234, 171, 41, 69, 60, 129, 172, 110, 202, 71, 198, 2, 72, 56, 167,
    226, 3, 112, 160, 238, 58, 213, 227, 70, 67, 208, 206, 44, 61, 80, 150, 159,
    250, 129, 134, 140, 109, 248, 21, 5, 42, 29, 132, 41, 46, 109, 224, 96, 203,
    143, 12, 217, 184, 219, 143, 12, 0, 83, 241, 52, 131, 1, 167, 64, 149, 211,
    4, 134, 176, 46, 74, 84, 49, 133, 3, 48, 37, 194, 84, 201, 200, 16, 176,
    230, 9, 33, 100, 215, 42, 85, 197, 122, 120, 8, 237, 36, 171, 128, 226, 33,
    97, 171, 100, 108, 16, 218, 242, 14, 12, 0, 95, 245, 32, 172, 42, 12, 166,
    140, 21, 177, 76, 16, 152, 156, 2, 178, 35, 129, 192, 228, 20, 84, 252, 63,
    19, 170, 138, 61, 169, 32, 48, 57, 5, 117, 224, 96, 114, 8, 72, 12, 8, 129,
    13, 231, 92, 11, 129, 29, 84, 85, 5, 110, 200, 147, 171, 106, 192, 21, 121,
    146, 85, 13, 17, 220, 30, 108, 85, 7, 8, 248, 147, 174, 66, 30, 107, 181,
    28, 104, 192, 42, 84, 215, 100, 134, 151, 180, 81, 109, 208, 239, 5, 51,
    205, 212, 6, 53, 163, 124, 150, 42, 13, 186, 195, 25, 177, 127, 129, 216,
    141, 250, 89, 242, 199, 136, 189, 246, 240, 9, 62, 196, 249, 123, 250, 12,
    31, 2, 182, 124, 10, 6, 153, 166, 244, 3, 168, 207, 254, 2, 97, 127, 110,
    225, 174, 170, 173, 199, 139, 250, 115, 183, 163, 177, 12, 29, 254, 49, 223,
    212, 164, 141, 121, 148, 204, 53, 255, 70, 154, 233, 134, 13, 54, 63, 5,
    211, 5, 197, 115, 221, 253, 249, 124, 38, 203, 155, 54, 222, 91, 222, 180,
    97, 85, 207, 220, 125, 99, 78, 99, 162, 179, 190, 48, 209, 89, 70, 250, 204,
    67, 228, 138, 195, 245, 57, 180, 237, 15, 5, 250, 243, 208, 182, 100, 245,
    207, 148, 148, 47, 228, 34, 57, 231, 43, 91, 158, 121, 168, 15, 148, 222,
    202, 108, 29, 214, 192, 89, 111, 91, 124, 56, 58, 54, 103, 33, 186, 38, 19,
    226, 19, 155, 114, 247, 153, 122, 254, 12, 133, 167, 220, 109, 91, 25, 246,
    121, 142, 79, 185, 250, 55, 54, 249, 146, 197, 231, 124, 180, 150, 169, 224,
    230, 86, 175, 108, 222, 220, 212, 191, 32, 62, 235, 225, 22, 154, 210, 143,
    241, 73, 207, 35, 84, 65, 4, 225, 235, 8, 85, 16, 180, 125, 140, 13, 120,
    189, 140, 116, 140, 13, 65, 203, 7, 26, 240, 22, 82, 131, 108, 211, 61, 45,
    134, 85, 29, 22, 240, 49, 31, 205, 97, 1, 175, 140, 225, 201, 134, 12, 124,
    217, 134, 103, 27, 50, 176, 207, 134, 47, 7, 205, 200, 198, 240, 245, 160,
    25, 217, 23, 219, 23, 170, 2, 129, 138, 48, 185, 2, 6, 68, 100, 170, 122,
    38, 48, 164, 78, 120, 250, 237, 143, 164, 51, 167, 223, 255, 72, 38, 103,
    250, 3, 128, 164, 94, 166, 63, 1, 200, 229, 56, 253, 9, 64, 110, 179, 233,
    79, 0, 84, 92, 125, 84, 68, 35, 155, 214, 159, 128, 142, 148, 106, 251, 19,
    48, 16, 235, 224, 236, 68, 6, 72, 130, 67, 133, 204, 171, 224, 96, 82, 6,
    186, 240, 212, 203, 163, 23, 248, 194, 193, 180, 107, 18, 174, 123, 80, 225,
    242, 198, 243, 133, 170, 89, 222, 120, 190, 112, 169, 227, 21, 247, 236, 41,
    79, 65, 203, 31, 62, 208, 70, 208, 146, 157, 102, 153, 162, 214, 110, 234,
    229, 247, 251, 66, 225, 109, 84, 203, 252, 178, 66, 102, 187, 253, 83, 8, 2,
    147, 96, 58, 227, 123, 87, 153, 231, 140, 239, 93, 109, 246, 205, 34, 8,
    250, 228, 181, 250, 38, 154, 110, 245, 136, 166, 149, 126, 54, 61, 110, 9,
    175, 167, 247, 120, 61, 25, 205, 242, 126, 218, 162, 81, 172, 177, 246, 251,
    88, 99, 109, 43, 90, 158, 207, 206, 147, 243, 35, 45, 28, 191, 11, 228, 230,
    83, 90, 56, 166, 145, 45, 179, 108, 140, 3, 243, 76, 2, 242, 223, 39, 156,
    141, 128, 60, 89, 233, 178, 121, 130, 211, 41, 107, 95, 156, 178, 230, 196,
    203, 52, 190, 2, 226, 229, 127, 8, 93, 119, 163, 214, 122, 191, 75, 73, 119,
    51, 205, 245, 170, 21, 48, 19, 37, 77, 3, 92, 251, 77, 114, 109, 109, 159,
    92, 43, 190, 209, 55, 39, 34, 90, 123, 147, 93, 107, 237, 144, 123, 38, 127,
    72, 88, 41, 199, 255, 225, 23, 50, 200, 214, 156, 87, 181, 45, 223, 153,
    253, 149, 111, 115, 63, 125, 155, 15, 17, 77, 71, 156, 185, 15, 106, 2, 96,
    246, 85, 204, 172, 41, 246, 4, 160, 29, 212, 68, 184, 138, 4, 81, 50, 127,
    235, 78, 205, 125, 72, 202, 196, 26, 111, 242, 222, 78, 87, 224, 156, 73,
    181, 192, 5, 123, 154, 240, 201, 227, 250, 30, 160, 177, 129, 230, 173, 168,
    182, 164, 36, 216, 168, 154, 45, 175, 50, 37, 120, 203, 126, 115, 71, 151,
    237, 239, 104, 57, 107, 221, 230, 17, 163, 120, 211, 189, 70, 81, 188, 229,
    241, 40, 69, 30, 197, 147, 119, 90, 230, 4, 249, 128, 240, 180, 52, 132,
    186, 68, 108, 5, 148, 138, 139, 217, 10, 40, 3, 23, 179, 21, 80, 35, 46, 86,
    93, 45, 33, 36, 102, 95, 129, 218, 113, 49, 251, 8, 180, 128, 139, 13, 95,
    106, 13, 172, 128, 91, 3, 116, 193, 197, 130, 23, 67, 10, 202, 103, 191, 76,
    199, 71, 246, 8, 51, 33, 98, 143, 48, 19, 34, 86, 124, 177, 59, 34, 86, 93,
    216, 176, 0, 223, 128, 91, 119, 115, 95, 90, 75, 183, 196, 186, 63, 248, 69,
    57, 248, 137, 43, 215, 135, 187, 210, 226, 202, 149, 151, 238, 230, 232,
    202, 57, 4, 25, 220, 223, 19, 131, 251, 210, 224, 108, 191, 29, 240, 184,
    99, 6, 154, 214, 34, 140, 24, 223, 92, 169, 99, 124, 50, 196, 125, 251, 152,
    198, 170, 127, 142, 185, 191, 55, 31, 134, 251, 41, 119, 44, 189, 205, 22,
    221, 92, 145, 228, 227, 61, 145, 124, 237, 108, 150, 185, 18, 238, 79, 251,
    161, 245, 122, 121, 90, 105, 189, 46, 62, 60, 164, 191, 95, 122, 115, 181,
    142, 233, 113, 181, 254, 75, 60, 183, 120, 245, 245, 240, 222, 171, 175,
    175, 141, 205, 82, 134, 170, 183, 65, 65, 158, 196, 246, 30, 121, 18, 219,
    210, 220, 60, 163, 205, 71, 186, 155, 173, 210, 166, 67, 17, 157, 217, 226,
    60, 242, 33, 193, 181, 205, 89, 46, 191, 173, 190, 233, 31, 110, 245, 217,
    63, 28, 215, 215, 43, 110, 224, 227, 149, 209, 225, 120, 24, 29, 222, 58,
    156, 23, 55, 171, 40, 212, 224, 15, 211, 111, 129, 6, 231, 165, 191, 89,
    247, 82, 49, 98, 252, 201, 221, 198, 223, 99, 118, 249, 158, 189, 141, 117,
    105, 111, 14, 203, 249, 92, 246, 190, 15, 62, 2, 203, 230, 23, 218, 218,
    220, 172, 141, 48, 192, 233, 117, 54, 54, 91, 39, 12, 164, 214, 125, 43, 12,
    164, 54, 124, 227, 236, 182, 218, 118, 55, 243, 151, 176, 238, 24, 149, 118,
    5, 132, 81, 45, 148, 163, 76, 37, 160, 15, 206, 221, 206, 213, 134, 103,
    171, 201, 195, 76, 89, 238, 61, 214, 67, 76, 84, 63, 116, 151, 47, 38, 170,
    229, 214, 200, 92, 213, 33, 55, 194, 112, 238, 40, 65, 73, 228, 199, 175,
    206, 81, 42, 180, 10, 211, 185, 77, 171, 71, 156, 206, 93, 224, 159, 107,
    60, 230, 68, 197, 241, 220, 49, 116, 124, 226, 207, 192, 212, 133, 139, 69,
    87, 246, 219, 36, 198, 218, 202, 27, 191, 149, 86, 30, 126, 43, 54, 255,
    165, 86, 81, 139, 122, 172, 249, 190, 124, 211, 124, 95, 238, 189, 203, 73,
    62, 254, 154, 160, 207, 175, 12, 112, 243, 211, 0, 215, 202, 233, 47, 49,
    94, 145, 16, 230, 182, 96, 117, 130, 117, 128, 130, 205, 17, 75, 106, 173,
    152, 96, 119, 113, 9, 117, 16, 220, 22, 28, 126, 132, 25, 27, 97, 188, 92,
    245, 208, 0, 127, 195, 89, 37, 114, 173, 83, 27, 162, 116, 71, 173, 249, 1,
    110, 83, 86, 35, 34, 189, 104, 189, 14, 104, 205, 197, 199, 2, 145, 158,
    211, 253, 53, 23, 31, 75, 36, 129, 111, 195, 150, 136, 52, 44, 22, 241, 20,
    218, 22, 108, 94, 112, 128, 130, 221, 9, 234, 137, 98, 91, 112, 252, 141,
    199, 230, 174, 96, 122, 44, 17, 240, 165, 164, 224, 5, 11, 40, 56, 43, 72,
    228, 219, 116, 6, 213, 45, 107, 78, 19, 179, 229, 213, 232, 202, 99, 116,
    217, 5, 49, 134, 190, 144, 93, 65, 119, 105, 81, 60, 135, 176, 96, 211, 239,
    120, 142, 133, 5, 155, 238, 93, 208, 41, 220, 43, 92, 90, 22, 67, 166, 223,
    47, 65, 45, 47, 134, 76, 109, 97, 117, 183, 176, 36, 23, 218, 171, 56, 70,
    123, 196, 49, 102, 55, 180, 254, 128, 233, 110, 188, 149, 242, 123, 227,
    173, 148, 239, 29, 209, 81, 237, 198, 83, 184, 119, 203, 127, 16, 76, 15,
    193, 60, 131, 94, 114, 15, 143, 9, 19, 12, 110, 132, 85, 172, 78, 183, 5,
    109, 137, 72, 90, 5, 157, 213, 211, 128, 127, 184, 93, 97, 87, 208, 150,
    137, 88, 201, 233, 121, 107, 119, 94, 207, 178, 18, 185, 239, 138, 77, 245,
    254, 196, 182, 186, 146, 170, 209, 52, 108, 94, 79, 67, 254, 180, 192, 215,
    118, 231, 245, 172, 41, 185, 36, 167, 20, 192, 105, 56, 156, 95, 122, 18,
    47, 228, 93, 193, 226, 23, 74, 235, 13, 19, 180, 133, 34, 241, 220, 158,
    177, 205, 117, 214, 147, 116, 247, 249, 220, 21, 244, 87, 243, 210, 161,
    105, 109, 213, 36, 67, 35, 156, 232, 126, 109, 213, 36, 58, 173, 133, 190,
    176, 59, 173, 173, 150, 68, 167, 181, 178, 148, 54, 167, 245, 100, 119, 235,
    180, 206, 224, 44, 124, 172, 147, 142, 237, 174, 147, 221, 45, 115, 16, 27,
    223, 52, 135, 151, 241, 41, 221, 82, 222, 200, 135, 57, 184, 188, 145, 63,
    115, 112, 122, 154, 203, 23, 185, 170, 195, 254, 171, 234, 158, 242, 168,
    238, 153, 150, 230, 42, 216, 64, 193, 232, 60, 210, 155, 148, 59, 111, 11,
    22, 231, 173, 89, 194, 106, 114, 29, 191, 48, 21, 142, 247, 142, 236, 164,
    246, 121, 49, 97, 130, 118, 149, 104, 227, 140, 160, 193, 40, 82, 58, 35,
    56, 220, 91, 246, 198, 245, 223, 10, 90, 154, 92, 89, 229, 171, 75, 81, 173,
    239, 23, 74, 173, 247, 38, 109, 209, 235, 87, 192, 244, 226, 90, 214, 218,
    106, 195, 244, 210, 178, 47, 180, 14, 14, 207, 85, 221, 246, 84, 48, 61, 51,
    44, 104, 218, 177, 16, 49, 193, 234, 206, 11, 177, 130, 79, 60, 155, 245,
    250, 114, 59, 222, 22, 244, 91, 127, 173, 224, 111, 232, 220, 149, 234, 24,
    144, 222, 204, 159, 75, 223, 71, 9, 21, 90, 115, 179, 141, 91, 158, 184,
    212, 140, 9, 198, 245, 137, 139, 35, 242, 125, 173, 183, 46, 146, 26, 34,
    38, 151, 253, 198, 143, 62, 111, 241, 27, 63, 184, 11, 78, 95, 81, 255, 47,
    115, 166, 196, 181, 87, 37, 48, 134, 72, 191, 168, 60, 214, 86, 71, 126,
    138, 155, 26, 174, 251, 163, 128, 63, 68, 225, 18, 29, 95, 194, 52, 209,
    179, 138, 121, 232, 132, 119, 20, 147, 15, 173, 0, 78, 11, 98, 241, 176,
    190, 119, 90, 15, 11, 204, 243, 114, 152, 132, 233, 154, 130, 214, 118, 151,
    192, 47, 162, 247, 26, 70, 187, 156, 119, 146, 179, 118, 193, 4, 206, 17,
    165, 11, 229, 60, 252, 193, 187, 166, 159, 172, 105, 237, 151, 9, 140, 36,
    202, 31, 209, 244, 240, 135, 188, 203, 88, 10, 221, 206, 36, 51, 121, 10,
    31, 182, 150, 174, 39, 188, 124, 185, 194, 215, 246, 155, 192, 94, 162, 114,
    205, 100, 206, 87, 79, 230, 211, 132, 56, 246, 19, 98, 233, 244, 13, 157,
    190, 237, 132, 56, 124, 66, 98, 179, 206, 19, 41, 142, 203, 76, 234, 216,
    240, 235, 164, 111, 62, 188, 72, 243, 164, 111, 36, 189, 234, 251, 30, 235,
    235, 30, 193, 46, 134, 233, 246, 250, 214, 155, 163, 242, 189, 93, 237, 27,
    169, 221, 188, 191, 4, 168, 77, 123, 54, 127, 161, 250, 54, 237, 66, 129,
    190, 252, 1, 125, 229, 189, 217, 188, 26, 164, 119, 193, 175, 217, 94, 165,
    118, 87, 1, 130, 203, 237, 5, 255, 186, 245, 61, 60, 227, 112, 210, 183, 44,
    211, 175, 114, 104, 205, 126, 210, 183, 16, 45, 250, 230, 114, 213, 103, 55,
    235, 163, 155, 64, 95, 253, 204, 132, 254, 240, 210, 194, 46, 183, 43, 119,
    237, 15, 2, 172, 45, 14, 183, 151, 123, 222, 13, 238, 111, 84, 140, 31, 50,
    167, 111, 167, 190, 124, 185, 234, 215, 199, 2, 129, 15, 198, 241, 122, 179,
    51, 125, 73, 183, 51, 78, 122, 77, 99, 171, 169, 180, 247, 207, 241, 171,
    206, 232, 218, 139, 4, 152, 97, 156, 110, 175, 233, 230, 253, 85, 252, 122,
    20, 78, 243, 20, 76, 14, 115, 223, 179, 194, 199, 121, 217, 105, 10, 38,
    139, 194, 41, 165, 107, 42, 92, 123, 152, 0, 107, 140, 243, 158, 181, 95,
    144, 166, 181, 183, 9, 112, 189, 184, 92, 111, 28, 126, 59, 107, 251, 251,
    168, 61, 113, 63, 46, 114, 109, 139, 2, 172, 47, 153, 110, 47, 242, 158,
    184, 87, 211, 180, 246, 133, 5, 6, 151, 208, 103, 38, 110, 123, 191, 244,
    245, 164, 173, 210, 252, 252, 164, 30, 158, 1, 62, 74, 44, 199, 198, 161,
    71, 137, 69, 22, 203, 227, 245, 248, 170, 150, 71, 109, 40, 11, 60, 46, 225,
    219, 75, 60, 223, 35, 53, 250, 166, 254, 30, 41, 125, 116, 13, 234, 138,
    138, 203, 23, 171, 184, 46, 38, 151, 162, 135, 245, 46, 217, 184, 69, 221,
    179, 240, 239, 243, 62, 62, 150, 203, 161, 219, 184, 158, 90, 101, 181, 85,
    54, 125, 205, 185, 172, 139, 189, 165, 192, 222, 18, 253, 176, 178, 55, 29,
    121, 119, 41, 15, 82, 46, 214, 149, 2, 235, 74, 222, 111, 93, 29, 186, 197,
    201, 72, 150, 126, 125, 90, 30, 122, 199, 31, 181, 12, 135, 238, 3, 39, 45,
    167, 105, 214, 146, 195, 225, 109, 233, 103, 45, 249, 170, 90, 46, 70, 148,
    2, 35, 74, 226, 199, 181, 124, 158, 188, 188, 155, 150, 181, 207, 20, 48,
    160, 36, 221, 46, 47, 111, 115, 11, 187, 139, 123, 16, 119, 241, 158, 20,
    120, 79, 146, 47, 19, 247, 133, 120, 207, 213, 79, 149, 115, 177, 157, 20,
    216, 78, 82, 174, 34, 231, 211, 12, 163, 146, 227, 50, 37, 154, 189, 127,
    214, 186, 77, 93, 227, 188, 79, 157, 95, 101, 185, 166, 156, 139, 193, 164,
    192, 96, 210, 105, 207, 206, 47, 67, 206, 197, 91, 82, 224, 45, 41, 221, 52,
    59, 155, 230, 124, 244, 53, 14, 165, 247, 83, 119, 177, 149, 20, 216, 74,
    202, 55, 77, 214, 249, 129, 249, 224, 58, 74, 249, 242, 85, 119, 154, 14,
    191, 99, 187, 234, 126, 69, 225, 63, 238, 46, 201, 114, 227, 154, 102, 203,
    88, 194, 210, 141, 141, 147, 44, 55, 174, 137, 175, 41, 124, 88, 220, 165,
    0, 220, 37, 125, 183, 187, 180, 249, 240, 201, 103, 149, 232, 174, 175, 158,
    182, 59, 40, 242, 103, 76, 160, 238, 166, 229, 226, 39, 5, 212, 251, 73,
    175, 242, 36, 145, 222, 201, 43, 124, 86, 109, 23, 131, 41, 0, 131, 73, 195,
    158, 167, 239, 184, 209, 201, 235, 27, 29, 61, 164, 206, 201, 44, 228, 163,
    133, 120, 212, 50, 243, 53, 159, 42, 9, 139, 193, 20, 128, 193, 164, 241,
    83, 242, 180, 124, 149, 105, 122, 55, 105, 23, 191, 41, 0, 191, 73, 211,
    158, 166, 95, 128, 150, 181, 53, 57, 176, 151, 52, 127, 74, 154, 222, 206,
    60, 188, 175, 186, 97, 25, 80, 67, 158, 239, 120, 84, 195, 188, 53, 81, 78,
    111, 156, 57, 62, 70, 79, 215, 85, 119, 113, 155, 2, 112, 155, 180, 236,
    153, 250, 5, 104, 185, 88, 77, 1, 88, 77, 97, 186, 97, 166, 238, 98, 94, 77,
    204, 197, 104, 10, 192, 104, 10, 180, 39, 230, 23, 160, 229, 98, 43, 5, 96,
    43, 5, 190, 97, 98, 206, 109, 134, 94, 250, 17, 52, 61, 138, 184, 31, 182,
    142, 194, 210, 133, 38, 36, 89, 196, 61, 254, 120, 20, 55, 77, 139, 184, 28,
    174, 121, 75, 26, 23, 235, 40, 2, 235, 40, 92, 180, 49, 201, 44, 173, 190,
    85, 115, 91, 143, 176, 124, 116, 215, 89, 47, 110, 233, 90, 136, 183, 190,
    96, 249, 140, 204, 189, 155, 184, 139, 151, 20, 129, 151, 20, 244, 19, 196,
    221, 165, 252, 160, 148, 139, 117, 20, 81, 71, 241, 11, 246, 38, 241, 209,
    219, 127, 122, 53, 167, 89, 205, 211, 171, 84, 206, 106, 150, 89, 77, 145,
    107, 238, 241, 142, 139, 121, 20, 129, 121, 20, 226, 174, 230, 23, 161, 230,
    226, 23, 69, 224, 23, 133, 11, 246, 39, 73, 223, 150, 47, 189, 189, 185, 55,
    220, 163, 30, 106, 211, 81, 208, 100, 211, 141, 131, 129, 38, 155, 142, 130,
    78, 181, 233, 40, 168, 169, 77, 7, 65, 91, 106, 76, 79, 65, 83, 99, 122, 10,
    154, 108, 58, 10, 218, 213, 166, 163, 160, 75, 109, 58, 10, 234, 106, 211,
    65, 208, 158, 108, 58, 10, 58, 213, 166, 163, 160, 169, 54, 29, 4, 13, 141,
    228, 178, 233, 40, 232, 82, 155, 142, 130, 154, 218, 116, 20, 212, 213, 166,
    131, 160, 177, 165, 115, 217, 116, 20, 180, 169, 77, 71, 65, 187, 218, 116,
    20, 116, 169, 77, 71, 65, 77, 109, 58, 10, 154, 202, 196, 65, 208, 40, 180,
    117, 217, 116, 20, 84, 55, 175, 48, 168, 214, 5, 197, 160, 83, 109, 58, 10,
    154, 202, 196, 81, 208, 84, 38, 14, 130, 90, 42, 19, 71, 65, 83, 153, 56,
    10, 218, 213, 166, 163, 160, 83, 109, 58, 8, 26, 219, 116, 151, 77, 199, 64,
    231, 81, 212, 166, 163, 160, 85, 109, 58, 10, 154, 202, 196, 81, 208, 100,
    211, 81, 208, 212, 50, 24, 130, 150, 100, 211, 81, 208, 100, 211, 81, 208,
    174, 54, 29, 5, 77, 61, 109, 33, 104, 180, 122, 25, 108, 216, 158, 53, 217,
    116, 16, 52, 182, 116, 6, 27, 182, 103, 184, 43, 131, 13, 219, 51, 10, 182,
    15, 54, 108, 207, 150, 108, 58, 10, 154, 202, 196, 65, 208, 221, 233, 149,
    13, 219, 51, 44, 157, 201, 134, 237, 25, 91, 58, 147, 13, 219, 51, 212, 160,
    201, 134, 237, 185, 107, 211, 177, 97, 123, 134, 26, 52, 217, 176, 61, 119,
    247, 222, 5, 79, 36, 83, 155, 142, 130, 186, 218, 116, 16, 52, 174, 35, 45,
    56, 108, 111, 243, 10, 14, 219, 51, 217, 116, 20, 212, 212, 166, 131, 160,
    187, 123, 47, 28, 182, 45, 217, 116, 20, 116, 170, 77, 71, 65, 151, 218,
    116, 16, 116, 251, 72, 112, 216, 246, 212, 94, 150, 130, 186, 138, 109, 12,
    116, 29, 67, 197, 54, 10, 58, 85, 108, 163, 160, 169, 189, 44, 4, 13, 97,
    198, 216, 176, 189, 74, 42, 19, 71, 65, 147, 216, 6, 65, 119, 43, 82, 54,
    108, 175, 208, 72, 156, 13, 219, 107, 151, 20, 99, 195, 246, 138, 69, 177,
    179, 97, 123, 69, 157, 109, 103, 195, 246, 234, 85, 197, 54, 10, 186, 84,
    108, 131, 160, 81, 207, 193, 217, 176, 189, 162, 180, 194, 37, 182, 81, 208,
    161, 98, 219, 108, 12, 52, 117, 122, 165, 160, 174, 98, 27, 4, 221, 29, 175,
    38, 11, 93, 169, 76, 28, 5, 77, 101, 226, 32, 168, 37, 177, 141, 130, 54,
    21, 219, 40, 232, 84, 177, 141, 129, 218, 113, 168, 216, 70, 65, 151, 138,
    109, 20, 212, 84, 108, 163, 160, 174, 98, 27, 4, 141, 35, 146, 75, 108, 131,
    160, 91, 247, 154, 236, 68, 154, 169, 255, 41, 5, 93, 42, 182, 81, 80, 83,
    177, 141, 130, 186, 138, 109, 16, 52, 246, 145, 46, 177, 141, 130, 166, 254,
    167, 16, 52, 90, 167, 93, 98, 27, 5, 109, 42, 182, 81, 208, 161, 98, 27, 5,
    157, 42, 182, 49, 80, 143, 223, 211, 75, 108, 163, 160, 69, 197, 54, 10, 90,
    85, 108, 163, 160, 77, 197, 54, 10, 106, 42, 182, 81, 80, 87, 177, 13, 130,
    150, 36, 182, 81, 80, 83, 177, 13, 130, 70, 70, 186, 196, 54, 10, 90, 85,
    108, 163, 160, 77, 197, 54, 10, 234, 42, 182, 65, 208, 16, 102, 58, 27, 182,
    189, 53, 21, 219, 40, 104, 87, 177, 141, 130, 46, 21, 219, 32, 104, 148,
    181, 233, 108, 216, 246, 168, 252, 63, 216, 176, 237, 97, 233, 12, 54, 108,
    123, 220, 246, 26, 108, 216, 246, 184, 237, 53, 58, 60, 145, 92, 197, 54, 8,
    26, 238, 202, 96, 195, 182, 135, 187, 50, 216, 176, 237, 35, 137, 109, 16,
    116, 247, 202, 132, 195, 246, 76, 101, 226, 40, 232, 82, 177, 141, 130, 154,
    138, 109, 16, 116, 165, 50, 113, 16, 212, 82, 153, 56, 10, 234, 42, 182, 65,
    80, 79, 253, 79, 17, 104, 61, 202, 161, 98, 27, 4, 221, 55, 226, 209, 176,
    253, 0, 77, 101, 226, 40, 168, 171, 216, 6, 65, 35, 35, 173, 206, 78, 164,
    125, 82, 220, 202, 46, 180, 117, 28, 229, 132, 250, 187, 71, 161, 229, 149,
    208, 18, 179, 119, 161, 9, 255, 1, 218, 212, 166, 163, 160, 174, 54, 29, 4,
    141, 243, 211, 133, 38, 252, 186, 187, 247, 26, 154, 240, 107, 139, 2, 62,
    134, 38, 252, 7, 232, 82, 155, 14, 130, 198, 238, 138, 161, 9, 191, 182, 40,
    224, 99, 104, 194, 127, 128, 46, 181, 233, 32, 168, 165, 166, 171, 12, 116,
    23, 13, 54, 52, 225, 215, 93, 52, 184, 141, 241, 201, 3, 191, 28, 95, 17,
    186, 84, 225, 163, 70, 106, 170, 240, 81, 80, 87, 133, 15, 130, 70, 117, 47,
    111, 236, 236, 141, 39, 146, 119, 118, 246, 110, 45, 115, 178, 19, 169, 166,
    218, 116, 20, 180, 171, 194, 71, 65, 135, 42, 124, 20, 116, 170, 194, 71,
    65, 151, 42, 124, 241, 224, 7, 160, 166, 10, 31, 5, 77, 10, 31, 4, 109, 69,
    21, 62, 10, 90, 85, 225, 163, 160, 77, 21, 62, 10, 218, 85, 225, 163, 160,
    169, 211, 43, 5, 77, 10, 31, 5, 93, 170, 240, 81, 80, 83, 133, 143, 130,
    186, 42, 124, 16, 52, 60, 252, 75, 225, 163, 160, 73, 225, 163, 160, 85, 21,
    62, 10, 218, 68, 13, 98, 106, 167, 63, 64, 135, 122, 131, 212, 72, 167, 122,
    131, 20, 116, 169, 55, 72, 65, 77, 189, 65, 10, 234, 234, 13, 66, 208, 221,
    138, 180, 179, 19, 41, 174, 174, 92, 222, 32, 5, 173, 234, 13, 82, 80, 125,
    56, 96, 208, 174, 222, 32, 5, 29, 234, 13, 82, 208, 84, 16, 143, 130, 46,
    245, 6, 41, 168, 169, 55, 72, 65, 83, 123, 89, 8, 154, 219, 203, 82, 208,
    212, 94, 150, 130, 86, 245, 6, 41, 104, 83, 111, 144, 130, 166, 246, 178,
    20, 116, 170, 55, 72, 65, 123, 212, 142, 148, 59, 213, 10, 198, 162, 234,
    241, 136, 97, 94, 178, 131, 20, 224, 65, 88, 171, 85, 164, 212, 234, 89,
    221, 139, 144, 176, 86, 210, 53, 165, 45, 51, 170, 137, 43, 71, 199, 200,
    198, 245, 185, 250, 174, 250, 232, 103, 185, 127, 222, 159, 210, 170, 137,
    155, 59, 226, 252, 78, 120, 189, 167, 97, 111, 102, 254, 181, 42, 182, 2,
    66, 28, 185, 121, 126, 175, 170, 136, 185, 42, 114, 90, 180, 12, 170, 230,
    157, 109, 248, 166, 197, 29, 170, 81, 161, 111, 14, 148, 208, 123, 57, 245,
    167, 220, 159, 29, 219, 251, 175, 191, 147, 48, 211, 189, 252, 86, 141, 227,
    43, 50, 182, 161, 218, 171, 1, 107, 90, 248, 186, 86, 139, 163, 96, 117, 16,
    172, 205, 241, 245, 221, 124, 208, 210, 237, 190, 219, 55, 23, 65, 95, 141,
    231, 207, 40, 125, 170, 234, 70, 21, 220, 131, 15, 43, 89, 37, 164, 124, 76,
    141, 231, 38, 173, 84, 90, 109, 211, 117, 79, 50, 156, 139, 168, 60, 244,
    163, 204, 136, 255, 28, 222, 17, 161, 18, 94, 141, 246, 142, 182, 38, 73,
    112, 80, 209, 42, 119, 186, 159, 27, 107, 69, 161, 50, 235, 64, 213, 218,
    103, 76, 211, 106, 165, 15, 89, 35, 72, 253, 42, 183, 188, 179, 173, 253,
    188, 228, 1, 22, 57, 201, 103, 213, 151, 174, 227, 23, 45, 63, 146, 188, 46,
    33, 54, 241, 117, 237, 77, 105, 100, 209, 105, 70, 21, 176, 74, 119, 186,
    83, 141, 102, 244, 90, 134, 208, 222, 218, 125, 55, 61, 155, 24, 170, 17,
    72, 173, 230, 180, 24, 75, 99, 202, 108, 107, 196, 8, 1, 137, 112, 39, 42,
    185, 171, 25, 42, 153, 106, 126, 26, 245, 166, 200, 26, 100, 154, 159, 218,
    93, 44, 94, 23, 225, 122, 161, 121, 2, 10, 86, 124, 81, 199, 29, 86, 27,
    111, 247, 110, 115, 154, 172, 84, 6, 89, 204, 184, 70, 177, 44, 189, 41, 55,
    245, 84, 76, 180, 160, 40, 183, 171, 233, 65, 27, 125, 177, 40, 121, 212,
    161, 94, 179, 210, 149, 120, 121, 138, 157, 165, 177, 254, 84, 74, 223, 84,
    159, 255, 36, 215, 98, 105, 237, 245, 98, 177, 10, 206, 108, 181, 156, 118,
    31, 58, 105, 213, 154, 227, 195, 149, 250, 128, 250, 145, 71, 110, 71, 217,
    220, 55, 231, 43, 93, 161, 181, 235, 185, 240, 180, 202, 173, 51, 114, 235,
    188, 217, 118, 77, 73, 172, 154, 227, 169, 26, 177, 250, 191, 199, 78, 70,
    133, 221, 131, 152, 76, 27, 5, 118, 178, 224, 36, 88, 9, 48, 195, 65, 156,
    195, 138, 172, 4, 243, 123, 21, 56, 231, 58, 59, 193, 126, 31, 185, 190,
    173, 103, 136, 246, 59, 124, 90, 81, 143, 37, 59, 169, 43, 98, 2, 178, 146,
    192, 218, 99, 222, 168, 122, 234, 77, 9, 240, 161, 28, 169, 227, 214, 180,
    146, 157, 252, 11, 43, 93, 245, 170, 75, 88, 121, 83, 2, 122, 252, 217, 92,
    188, 99, 141, 194, 105, 126, 200, 155, 210, 86, 190, 52, 111, 147, 75, 211,
    90, 221, 190, 129, 211, 44, 52, 52, 87, 7, 162, 153, 104, 206, 98, 63, 91,
    172, 211, 125, 36, 80, 103, 222, 148, 238, 69, 92, 123, 83, 186, 35, 37,
    222, 41, 245, 241, 226, 76, 206, 197, 120, 207, 92, 87, 234, 212, 155, 210,
    227, 165, 2, 149, 160, 64, 41, 165, 66, 54, 163, 34, 90, 209, 122, 143, 122,
    233, 100, 222, 148, 240, 140, 183, 193, 139, 215, 217, 245, 251, 228, 17,
    111, 202, 255, 246, 63, 254, 207, 255, 251, 255, 251, 95, 251, 191, 105, 90,
    50, 166, 81, 177, 25, 170, 197, 178, 177, 236, 250, 83, 244, 169, 122, 72,
    185, 176, 140, 240, 243, 43, 169, 236, 123, 143, 253, 234, 35, 254, 117,
    153, 255, 206, 21, 63, 191, 210, 92, 149, 250, 69, 247, 22, 162, 91, 81,
    154, 225, 138, 243, 218, 173, 34, 16, 191, 112, 184, 86, 188, 195, 246, 251,
    251, 71, 61, 205, 24, 153, 152, 47, 142, 25, 144, 123, 50, 206, 107, 149,
    230, 175, 70, 41, 69, 68, 146, 31, 85, 191, 119, 85, 246, 104, 235, 77, 215,
    178, 89, 87, 125, 177, 190, 183, 172, 73, 142, 181, 111, 51, 184, 171, 31,
    107, 112, 39, 140, 135, 17, 85, 93, 95, 251, 118, 208, 201, 106, 117, 62,
    208, 237, 54, 74, 204, 205, 182, 70, 184, 43, 230, 219, 236, 145, 72, 158,
    172, 111, 110, 209, 206, 116, 201, 109, 34, 57, 102, 196, 72, 8, 111, 81,
    147, 124, 43, 137, 229, 117, 188, 206, 84, 59, 235, 80, 122, 35, 156, 196,
    229, 59, 245, 117, 223, 98, 35, 138, 218, 115, 29, 166, 201, 86, 7, 159,
    147, 121, 137, 149, 170, 54, 165, 163, 125, 218, 171, 93, 121, 83, 201, 60,
    176, 234, 52, 78, 171, 154, 178, 140, 211, 17, 218, 22, 154, 183, 164, 172,
    250, 243, 201, 117, 50, 37, 44, 219, 205, 43, 165, 159, 170, 20, 205, 214,
    130, 110, 222, 155, 48, 169, 83, 165, 141, 179, 242, 207, 199, 30, 96, 57,
    135, 103, 39, 213, 190, 54, 240, 183, 219, 89, 33, 218, 201, 70, 75, 41,
    223, 108, 215, 186, 59, 128, 158, 87, 159, 255, 36, 215, 174, 162, 222, 163,
    25, 163, 64, 170, 141, 141, 19, 207, 198, 52, 247, 181, 191, 109, 180, 206,
    53, 245, 19, 143, 252, 80, 31, 148, 49, 38, 179, 231, 57, 182, 210, 117, 27,
    31, 168, 189, 111, 128, 27, 115, 177, 237, 162, 210, 58, 71, 58, 85, 163,
    38, 230, 225, 157, 112, 111, 85, 82, 145, 233, 149, 176, 25, 149, 176, 25,
    85, 175, 25, 149, 176, 245, 182, 130, 246, 186, 30, 170, 180, 168, 1, 132,
    9, 99, 182, 181, 29, 107, 185, 73, 95, 217, 219, 212, 226, 29, 141, 203,
    235, 231, 22, 124, 110, 193, 119, 105, 237, 77, 87, 99, 63, 84, 244, 10, 42,
    117, 99, 191, 15, 92, 95, 201, 177, 125, 182, 92, 210, 163, 134, 178, 112,
    204, 162, 194, 178, 168, 149, 97, 228, 71, 192, 74, 230, 190, 110, 20, 28,
    59, 147, 85, 232, 206, 164, 194, 108, 243, 177, 182, 121, 44, 121, 38, 129,
    90, 26, 29, 58, 90, 230, 102, 149, 223, 16, 85, 249, 138, 74, 16, 71, 229,
    99, 218, 124, 211, 52, 169, 71, 166, 180, 184, 144, 180, 56, 158, 210, 226,
    82, 90, 220, 33, 7, 169, 41, 167, 197, 9, 88, 209, 4, 243, 224, 152, 9, 100,
    180, 202, 149, 3, 169, 13, 20, 81, 57, 152, 251, 92, 241, 117, 108, 111,
    247, 29, 97, 216, 204, 186, 32, 7, 95, 22, 12, 123, 67, 211, 131, 239, 140,
    108, 163, 198, 151, 221, 124, 73, 75, 227, 142, 26, 243, 112, 247, 37, 65,
    131, 132, 177, 202, 151, 240, 29, 59, 153, 187, 103, 158, 144, 133, 208, 41,
    119, 47, 229, 238, 165, 220, 189, 148, 187, 151, 114, 247, 82, 238, 222, 3,
    201, 221, 227, 41, 119, 47, 229, 238, 165, 220, 189, 49, 230, 238, 169, 126,
    114, 247, 118, 25, 90, 33, 169, 123, 187, 32, 76, 209, 224, 169, 176, 196,
    189, 109, 124, 48, 40, 111, 111, 55, 174, 160, 180, 189, 237, 99, 41, 107,
    47, 101, 237, 165, 172, 189, 148, 181, 215, 50, 107, 79, 166, 172, 189, 239,
    57, 107, 143, 183, 203, 218, 43, 190, 247, 172, 189, 124, 224, 172, 61, 158,
    178, 246, 166, 157, 181, 167, 90, 102, 237, 241, 148, 181, 215, 50, 107, 79,
    180, 202, 218, 115, 33, 158, 210, 246, 34, 167, 237, 237, 114, 224, 120, 19,
    23, 47, 48, 105, 111, 251, 216, 247, 152, 179, 183, 205, 189, 8, 75, 217,
    219, 62, 22, 150, 177, 183, 203, 244, 248, 222, 18, 246, 182, 80, 195, 242,
    245, 118, 41, 111, 65, 233, 122, 187, 16, 201, 119, 152, 173, 183, 75, 181,
    251, 126, 146, 245, 170, 162, 8, 167, 45, 40, 65, 169, 148, 128, 25, 87,
    129, 169, 115, 130, 128, 135, 37, 242, 48, 72, 40, 216, 5, 11, 76, 9, 196,
    157, 125, 94, 200, 80, 66, 112, 13, 160, 2, 241, 35, 40, 215, 68, 30, 152,
    192, 70, 52, 62, 69, 72, 32, 44, 165, 244, 201, 20, 194, 170, 248, 34, 152,
    120, 168, 69, 104, 98, 30, 24, 36, 34, 215, 129, 176, 80, 208, 10, 18, 154,
    206, 167, 192, 131, 13, 75, 58, 44, 237, 125, 122, 18, 195, 42, 172, 66,
    232, 147, 169, 131, 150, 52, 62, 112, 43, 4, 15, 196, 144, 225, 218, 8, 78,
    249, 100, 2, 151, 60, 142, 107, 50, 233, 72, 245, 169, 128, 132, 136, 117,
    230, 95, 78, 143, 190, 106, 154, 165, 164, 83, 158, 95, 72, 158, 159, 72,
    121, 126, 41, 207, 239, 144, 131, 138, 239, 176, 252, 93, 182, 78, 146, 131,
    167, 152, 214, 251, 217, 123, 210, 228, 29, 83, 48, 184, 149, 62, 184, 143,
    72, 73, 13, 251, 238, 223, 72, 9, 38, 145, 83, 114, 112, 39, 85, 240, 139,
    185, 179, 235, 76, 61, 114, 148, 169, 199, 195, 51, 245, 228, 65, 142, 86,
    46, 155, 231, 178, 29, 188, 137, 104, 147, 123, 84, 52, 201, 206, 161, 249,
    193, 155, 40, 254, 147, 9, 214, 1, 78, 202, 252, 212, 126, 116, 160, 136,
    241, 39, 90, 180, 30, 29, 19, 38, 111, 76, 202, 182, 56, 81, 98, 210, 163,
    40, 105, 77, 39, 96, 54, 147, 243, 199, 59, 120, 147, 201, 27, 164, 170, 53,
    197, 193, 83, 150, 230, 77, 141, 178, 189, 212, 193, 155, 168, 89, 153, 134,
    90, 173, 222, 68, 184, 225, 19, 70, 89, 251, 55, 49, 179, 158, 8, 109, 189,
    50, 133, 121, 7, 83, 69, 107, 156, 192, 181, 106, 156, 175, 121, 176, 198,
    105, 41, 85, 202, 108, 196, 118, 115, 199, 168, 104, 190, 158, 14, 222, 196,
    77, 174, 45, 109, 36, 11, 14, 71, 199, 185, 201, 67, 20, 237, 71, 87, 102,
    90, 151, 43, 61, 101, 15, 14, 158, 91, 40, 90, 228, 22, 254, 250, 245, 246,
    11, 252, 231, 56, 221, 110, 247, 53, 181, 127, 205, 236, 95, 115, 251, 215,
    194, 254, 181, 180, 127, 253, 32, 49, 9, 116, 32, 246, 112, 176, 164, 35,
    238, 161, 98, 201, 72, 220, 195, 168, 251, 164, 196, 237, 203, 189, 83, 11,
    143, 34, 68, 174, 23, 216, 119, 246, 56, 186, 133, 218, 239, 13, 246, 4, 67,
    38, 77, 202, 157, 215, 27, 172, 187, 107, 90, 86, 55, 215, 92, 47, 112, 228,
    19, 105, 85, 41, 12, 228, 122, 131, 127, 166, 225, 238, 13, 245, 201, 134,
    156, 233, 240, 7, 49, 223, 176, 209, 131, 152, 10, 195, 89, 3, 84, 49, 235,
    176, 209, 131, 38, 241, 176, 17, 174, 38, 247, 176, 230, 201, 230, 217, 131,
    245, 239, 240, 75, 32, 12, 124, 135, 61, 135, 176, 254, 37, 213, 168, 51,
    30, 21, 227, 237, 8, 98, 79, 69, 60, 122, 73, 195, 108, 196, 154, 183, 56,
    146, 195, 84, 37, 33, 177, 230, 29, 142, 220, 0, 70, 42, 137, 117, 53, 47,
    177, 111, 209, 155, 20, 21, 226, 79, 20, 97, 63, 238, 207, 170, 137, 137,
    53, 47, 9, 200, 77, 220, 189, 229, 68, 154, 23, 238, 205, 157, 122, 212,
    145, 232, 133, 209, 138, 74, 150, 220, 238, 105, 143, 84, 67, 77, 77, 130,
    167, 245, 5, 100, 243, 2, 195, 235, 150, 176, 57, 145, 192, 172, 164, 217,
    195, 82, 112, 120, 56, 15, 123, 248, 112, 103, 75, 228, 25, 213, 45, 94, 80,
    128, 10, 161, 178, 197, 11, 128, 155, 128, 254, 161, 175, 216, 177, 53, 24,
    154, 78, 250, 237, 230, 222, 145, 155, 152, 99, 24, 184, 80, 222, 139, 110,
    151, 102, 0, 179, 86, 72, 239, 21, 183, 221, 116, 67, 253, 37, 188, 145,
    221, 169, 132, 2, 207, 82, 168, 86, 82, 212, 154, 145, 238, 51, 86, 154,
    163, 46, 9, 127, 80, 106, 214, 80, 3, 114, 35, 171, 105, 131, 39, 49, 239,
    164, 217, 147, 152, 122, 194, 221, 242, 231, 68, 222, 70, 205, 147, 1, 89,
    39, 66, 182, 83, 182, 38, 241, 68, 179, 86, 203, 132, 230, 2, 204, 15, 73,
    155, 203, 67, 74, 129, 155, 153, 139, 32, 39, 57, 90, 224, 49, 115, 45, 26,
    62, 141, 242, 136, 53, 89, 229, 188, 0, 218, 145, 60, 152,
  ];
  var gd = Object.freeze({ __proto__: null, default: md });
  var bd = n(gd);
  var Od = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var c = n(bd);
    var p = n(q);
    function d(t) {
      var e = new Uint8Array(t);
      var n = [];
      for (var o = 0; o < (t.byteLength || t["length"] || 1); o++) {
        n.push(e[o].toString(16).toUpperCase());
      }
      return n;
    }
    var o = (function () {
      function t() {}
      t.test = function (t) {
        if (p.default.platform.platformType == "PCWeb") {
          return true;
        }
        var e = this;
        var n = false;
        try {
          var o = c.default[0];
          if (t.byteLength != o) {
            n = false;
            return false;
          }
          for (var r = 0, i = 1; r < 10; r++) {
            var a = Math.floor((o - 200) / 10) * r;
            var s = 1e3 + r * 10;
            var u = t.slice(a, a + s);
            var l = d(u);
            var f = d(c.default.slice(i, i + s));
            i += s;
            if (l.join(",") != f.join(",")) {
              n = false;
              return false;
            }
          }
          n = true;
        } catch (t) {
          XOF.log(t);
          n = false;
        }
        return (e.check = n);
      };
      t.check = false;
      return t;
    })();
    e.default = o;
  });
  t(Od);
  var wd = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    var n = (function () {
      function t() {}
      t.setConf = function (t) {
        for (var e in t) {
          XOF.BitmapSheets.setConf(e, t[e]);
        }
      };
      return t;
    })();
    e.default = n;
  });
  t(wd);
  var Ad = {
    campfire_0000: {
      frame: { x: 4, y: 127, w: 65, h: 118 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 1, y: 0, w: 65, h: 118 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0001: {
      frame: { x: 135, y: 4, w: 62, h: 108 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 4, y: 11, w: 62, h: 108 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0002: {
      frame: { x: 4, y: 4, w: 65, h: 119 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 2, y: 0, w: 65, h: 119 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0003: {
      frame: { x: 4, y: 249, w: 63, h: 117 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 2, y: 1, w: 63, h: 117 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0004: {
      frame: { x: 4, y: 370, w: 62, h: 118 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 2, y: 0, w: 62, h: 118 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0005: {
      frame: { x: 73, y: 128, w: 60, h: 113 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 2, y: 4, w: 60, h: 113 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0006: {
      frame: { x: 71, y: 249, w: 59, h: 117 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 1, y: 0, w: 59, h: 117 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0007: {
      frame: { x: 203, y: 104, w: 52, h: 112 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 7, y: 5, w: 52, h: 112 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0008: {
      frame: { x: 199, y: 347, w: 55, h: 112 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 6, y: 5, w: 55, h: 112 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0009: {
      frame: { x: 194, y: 226, w: 53, h: 117 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 6, y: 1, w: 53, h: 117 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0010: {
      frame: { x: 134, y: 245, w: 56, h: 118 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 6, y: 0, w: 56, h: 118 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0011: {
      frame: { x: 139, y: 367, w: 56, h: 113 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 6, y: 6, w: 56, h: 113 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0012: {
      frame: { x: 73, y: 4, w: 58, h: 120 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 6, y: 0, w: 58, h: 120 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0013: {
      frame: { x: 137, y: 116, w: 62, h: 106 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 4, y: 13, w: 62, h: 106 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0014: {
      frame: { x: 201, y: 4, w: 62, h: 96 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 4, y: 21, w: 62, h: 96 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_0015: {
      frame: { x: 70, y: 370, w: 65, h: 110 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 2, y: 7, w: 65, h: 110 },
      sourceSize: { w: 67, h: 124 },
    },
    campfire_wood: {
      frame: { x: 70, y: 484, w: 54, h: 28 },
      rotated: false,
      trimmed: true,
      spriteSourceSize: { x: 8, y: 91, w: 54, h: 28 },
      sourceSize: { w: 67, h: 124 },
    },
  };
  var Ed = {
    campfire: [
      "campfire_0000",
      "campfire_0001",
      "campfire_0002",
      "campfire_0003",
      "campfire_0004",
      "campfire_0005",
      "campfire_0006",
      "campfire_0007",
      "campfire_0008",
      "campfire_0009",
      "campfire_0010",
      "campfire_0011",
      "campfire_0012",
      "campfire_0013",
      "campfire_0014",
      "campfire_0015",
    ],
  };
  var Td = {
    app: "https://www.codeandweb.com/texturepacker",
    version: "1.0",
    image: "campfire.png",
    format: "RGBA8888",
    size: { w: 512, h: 512 },
    scale: "1",
  };
  var Cd = { frames: Ad, animations: Ed, meta: Td };
  var Pd = Object.freeze({
    __proto__: null,
    frames: Ad,
    animations: Ed,
    meta: Td,
    default: Cd,
  });
  var jd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = o($);
    var a = o(q);
    var s = o(bp);
    var u = o(K);
    var r = (function (t) {
      n(e, t);
      function e() {
        return t.call(this) || this;
      }
      Object.defineProperty(e.prototype, "downloadCount", {
        get: function () {
          var t, e;
          return (e =
            (t = this.downloads) === null || t === void 0
              ? void 0
              : t.length) !== null && e !== void 0
            ? e
            : 0;
        },
        enumerable: false,
        configurable: true,
      });
      e.prototype.startUpdate = function () {
        var r = this;
        this.curDownloadIndex = 0;
        this.curInstallIndex = 0;
        if (this.downloadCount > 0) {
          var n = function (t, e) {
            var n = 0;
            if (e == 0) {
              n = 1;
              var o = 49 / r.downloadCount;
              return n + r.curDownloadIndex * o + o * t;
            } else if (e == 1) {
              n = 51;
              var o = 48 / r.downloadCount;
              return n + r.curInstallIndex * o + o * t;
            }
            return 0;
          };
          var o = function () {
            var e = r.downloads[r.curInstallIndex];
            var t = function (t) {
              if (t == 1) {
                r.curInstallIndex += 1;
                r.dispatch(n(0, 1), e.gameVersion);
                if (r.curInstallIndex >= r.downloadCount) {
                  r.dispatch(100, e.gameVersion);
                } else {
                  XOF.Timer.callLater(o);
                }
              } else if (t == -1) {
                r.dispatch(-3, e.gameVersion);
              } else if (t > 0) {
                r.dispatch(n(t, 1), e.gameVersion);
              }
            };
            a.default.platform.installUpdate(e.version, e.gameVersion, t);
          };
          var i = function () {
            var e = r.downloads[r.curDownloadIndex];
            var t = function (t) {
              if (t == 1) {
                r.curDownloadIndex += 1;
                r.dispatch(n(0, 0), e.gameVersion);
                if (r.curDownloadIndex >= r.downloadCount) {
                  r.dispatch(-4, e.gameVersion);
                  XOF.Timer.callLater(o);
                } else {
                  XOF.Timer.callLater(i);
                }
              } else if (t == -3) {
                r.dispatch(-2, e.gameVersion);
              } else if (t > 0) {
                r.dispatch(n(t, 0), e.gameVersion);
              }
            };
            a.default.platform.download(e, t);
          };
          i();
        }
      };
      e.prototype.dispatch = function (t, e) {
        this.event(u.default.HOT_UPDATE_STATE, [t, e]);
      };
      e.prototype.checkUpdate = function () {
        var r = this;
        var t = i.default.update;
        var e = function (t) {
          var e = t.body;
          var n;
          if (e) {
            n = e;
            var o = l(n, a.default.platform.clientVersion);
            if (o.status == 0);
            else if (o.status == -3) {
              r.UpdateNeed = true;
              r.downloads = o.downloads;
            } else if (o.status == -2) {
              r.reinstallNeed = true;
            }
          } else {
            r.checkError = true;
          }
          r.event(u.default.HOT_UPDATE, []);
        };
        var n = function () {
          r.checkError = true;
          r.event(u.default.HOT_UPDATE, []);
        };
        s.default.get(t, { t: Date.now() }, undefined, e, n);
      };
      return e;
    })(XOF.EventDispatcher);
    e.default = r;
    function l(t, e) {
      var n = { status: -1, size: 0, downloads: [] };
      if (t[e]) {
        var o = t[e].update;
        if (o) {
          var r = 0,
            i = [];
          while (t[o]) {
            var a = t[o];
            if (a.reinstall) {
              n.status = -2;
              break;
            }
            r += a.size;
            i.push(a);
            if (a.restart) {
              break;
            }
            o = a.update;
          }
          if (i.length > 0) {
            n.size = r;
            n.downloads = i;
            n.status = -3;
          }
        } else {
          n.status = 0;
        }
      }
      return n;
    }
  });
  t(jd);
  var Sd = n(Pd);
  var Md = e(function (t, e) {
    var o =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    var r;
    Object.defineProperty(e, "__esModule", { value: true });
    var y = n($);
    var i = n(q);
    var a = n(K);
    var _ = n(Yp);
    var m = n(Se);
    var g = n(Ce);
    var s = n(k);
    var b = n(Q);
    var O = n(Sd);
    var u = n(jd);
    var w =
      ((r = {}),
      (r[1] = "正在解压游戏资源，请稍等..."),
      (r[2] = "数据资源解压出错，请重新启动应用..."),
      (r[3] = "正在解压游戏资源，当前进度{0}%..."),
      (r[4] = "游戏资源解压完成，正在进入游戏..."),
      (r[5] = "确定"),
      (r[6] = "正在检查游戏更新"),
      (r[7] = "当前版本过旧，请前往官网下载最新版本"),
      (r[8] = "正在下载{0}游戏更新包"),
      (r[9] = "正在安装{0}游戏更新包"),
      (r[10] = "更新完成，正在重新加载数据"),
      (r[11] = "连接游戏服务器失败，请检查网络设置"),
      (r[12] = "正在加载游戏数据"),
      (r[13] = "下载更新包失败，请检查网络设置"),
      (r[14] = "解压更新包失败，请重启后尝试"),
      (r[15] = "准备安装游戏更新包"),
      r);
    var l;
    var f = (function (n) {
      o(e, n);
      function e(t) {
        var e = n.call(this) || this;
        e.start = t;
        e.createView();
        return e;
      }
      e.prototype.createView = function () {
        if (XOF.stage.getChildByName("unpack")) {
          return;
        }
        var t = new XOF.Image();
        t.touchEnabled = true;
        t.size(y.default.width, y.default.height);
        t.skin = "first/1.png";
        t.name = "unpack";
        var e = new _.default();
        e.name = "box";
        e.size(837, 720);
        e.centerX = 0;
        e.centerY = 0;
        t.addChild(e);
        var n = new XOF.Image();
        n.skin = "first/UI_PSMode_BG.png";
        e.addChild(n);
        var o = new XOF.Image();
        o.pos(110, 165);
        o.skin = "first/UI_PSMode_Glow.png";
        e.addChild(o);
        b.default
          .get(o, { loop: true })
          .set({ alpha: 1 })
          .to({ alpha: 0.7 }, 500)
          .to({ alpha: 1 }, 500);
        var r = O.default;
        var i = new XOF.Image();
        i.skin = "first/campfire.png";
        i.pos(380, 320);
        var a = b.default.get(i, { loop: true });
        for (var s = 0, u = r.animations.campfire; s < u.length; s++) {
          var l = u[s];
          var f = r.frames[l].frame;
          var c = r.frames[l].spriteSourceSize;
          a.set({
            quad: [f.x, f.y, f.w, f.h],
            width: f.w,
            height: f.h,
            pivotX: -c.x,
            pivotY: -c.y,
          }).wait(80);
        }
        e.addChild(i);
        var p = new XOF.Image();
        p.skin = "first/loading_pg.png";
        p.width = 1200;
        p.grid = [3, 0, 1e3, 8];
        p.pos((e.width - p.width) / 2, 630);
        e.addChild(p);
        var d = new XOF.Image();
        d.name = "bar";
        d.width = 0;
        d.grid = p.grid;
        d.pos(p.x, p.y + 2);
        d.skin = "first/loading_bar.png";
        e.addChild(d);
        var h = new XOF.Label();
        h.name = "lab";
        h.fontSize = 24;
        h.size(600, 200);
        h.pos((y.default.width - h.width) / 2, y.default.height - 60);
        h.textAlign = "center";
        h.textColor = "#ffffff";
        h.text = w[12];
        t.addChild(h);
        var v = new XOF.Image();
        v.size(y.default.width, y.default.height);
        v.skin = "first/1.png";
        t.addChild(v);
        t.once(XOF.Event.REMOVED_FROM_STAGE, this.clean, this);
        XOF.stage.addChild(t);
        this.lab = h;
        this.bar = d;
        this.panel = t;
        this.black = v;
        this.bg2 = o;
        this.fire = i;
        t.visible = false;
        this.isCreated = true;
        m.default.loadImages(
          [
            { url: "first/1.png", type: g.default.IMAGE },
            { url: "first/campfire.png", type: g.default.IMAGE },
            { url: "first/loading_bar.png", type: g.default.IMAGE },
            { url: "first/loading_pg.png", type: g.default.IMAGE },
            { url: "first/UI_PSMode_BG.png", type: g.default.IMAGE },
            { url: "first/UI_PSMode_Glow.png", type: g.default.IMAGE },
          ],
          this.onLoaded,
          this
        );
      };
      e.prototype.updateProgress = function (t) {
        if (!this.isCreated) return;
        var e = XOF.stage.getChildByName("unpack");
        if (!e) return;
        var n = e.getChildByName("lab");
        if (!n) return;
        n.text = s.default.format(w[3], (t * 100).toFixed(2));
        var o = e.getChildByName("box");
        if (!o) return;
        var r = o.getChildByName("bar");
        if (!r) return;
        r.width = Math.min(Math.floor(t * 1200), 1200);
      };
      e.prototype.onUnpacked = function () {
        if (!this.isCreated) return;
        var t = XOF.stage.getChildByName("unpack");
        if (!t) return;
        var e = t.getChildByName("lab");
        if (!e) return;
        e.text = w[4];
      };
      e.prototype.unpack = function () {
        var e = this;
        i.default.platform.unpackRes({
          onUnpack: function () {
            return e.onUnpack();
          },
          onUnpackProgress: function (t) {
            return e.updateProgress(t);
          },
          onUnpacked: function () {
            return e.onUnpacked();
          },
          onUnpackError: function () {
            return e.onUnpackError();
          },
          onStarted: function () {
            return e.onStart();
          },
        });
      };
      e.prototype.onUnpack = function () {
        this.lab.text = w[1];
      };
      e.prototype.onUnpackError = function () {
        i.default.platform.confirm(w[2], { buttons: [w[5]] }, function (t) {
          i.default.platform.quit();
        });
      };
      e.prototype.clean = function () {
        b.default.removeTweens(this.bg2);
        b.default.removeTweens(this.fire);
        b.default.removeTweens(this.black);
        b.default.removeTweens(this.panel);
        b.default.removeTweens(this.bar);
      };
      e.prototype.onStart = function () {
        if (l === null || l === void 0 ? void 0 : l.UpdateNeed) {
          this.startUpdate();
        } else {
          b.default
            .get(this.bar)
            .to({ width: 1200 }, 100)
            .wait(100)
            .call(this.start);
        }
      };
      e.prototype.onLoaded = function () {
        this.panel.visible = true;
        i.default.platform.closeSplashscreen();
        b.default
          .get(this.black)
          .to({ alpha: 0 }, 1e3)
          .call(this.checkUpdate, this)
          .remove();
      };
      e.check = function (t) {
        if (i.default.platform.platformType == "HBuilder") {
          new e(t);
        } else {
          t();
        }
      };
      e.close = function () {
        XOF.stage.removeChildByName("unpack");
      };
      e.prototype.checkUpdate = function () {
        l = new u.default();
        l.on(a.default.HOT_UPDATE, this.hotUpdate, this);
        l.checkUpdate();
      };
      e.prototype.startUpdate = function () {
        this.bar.width = 0;
        this.lab.text = w[6];
        l.on(a.default.HOT_UPDATE_STATE, this.hotUpdateState, this);
        l.startUpdate();
      };
      e.prototype.hotUpdate = function () {
        if (l.checkError) {
          i.default.platform.confirm(w[11], { buttons: [w[5]] }, function () {
            return i.default.platform.quit();
          });
        } else if (l.reinstallNeed) {
          i.default.platform.confirm(w[7], { buttons: [w[5]] }, function () {
            return i.default.platform.quit();
          });
        } else if (i.default.platform.installRes == false) {
          this.unpack();
        } else {
          this.onStart();
        }
      };
      e.prototype.hotUpdateState = function (t, e) {
        if (t == 101);
        else if (t == 100) {
          this.lab.text = w[10];
          i.default.timerMgr.delay(
            1500,
            1,
            i.default.platform.restart,
            i.default.platform
          );
        } else if (t == 0) {
          this.lab.text = w[6];
        } else if (t == -1) {
          this.lab.text = w[7];
        } else if (t == -2) {
          this.lab.text = w[13];
        } else if (t == -3) {
          this.lab.text = w[14];
        } else if (t == -4) {
          this.lab.text = w[15];
        } else if (t > 0 && t <= 50) {
          this.lab.text = s.default.format(w[8], e);
        } else if (t > 50 && t < 100) {
          this.lab.text = s.default.format(w[9], e);
        }
        if (t >= 0) {
          this.bar.width = Math.max(
            0,
            Math.min(1200, Math.floor((t / 100) * 1200))
          );
        }
      };
      return e;
    })(XOF.EventDispatcher);
    e.default = f;
  });
  t(Md);
  var kd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(dt);
    var a = o(q);
    var s = o(R);
    var u = o(x);
    var l = o(W);
    var f = o(k);
    var c = o(w);
    var p = o(T);
    var d = o(st);
    var h = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        t.orderIndex = p.default.TIPS;
        l.default.initSkin("ui/Storage/StorageCount", t, t);
        t.btnOk.label = i.default.tr(42);
        t.btnOk.textPressOffsetY = 1;
        return t;
      }
      t.prototype.onOpen = function (t, e, n) {
        if (n === void 0) {
          n = 99;
        }
        o.prototype.onOpen.call(this);
        this.btnCancel.on(XOF.TouchEvent.TAP, this.onClickClose, this);
        this.btnOk.on(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnUp.on(XOF.TouchEvent.TAP, this.onClickChange, this, [1]);
        this.btnUp10.on(XOF.TouchEvent.TAP, this.onClickChange, this, [10]);
        this.btnDown.on(XOF.TouchEvent.TAP, this.onClickChange, this, [-1]);
        this.btnDown10.on(XOF.TouchEvent.TAP, this.onClickChange, this, [-10]);
        this.btnUp.on(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBeginUp, this);
        this.btnDown.on(
          XOF.TouchEvent.TOUCH_BEGIN,
          this.onTouchBeginDown,
          this
        );
        this.btnUp.on(XOF.TouchEvent.TOUCH_CANCEL, this.onStopAutoChange, this);
        this.btnDown.on(
          XOF.TouchEvent.TOUCH_CANCEL,
          this.onStopAutoChange,
          this
        );
        this.btnUp.on(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onStopAutoChange,
          this
        );
        this.btnDown.on(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onStopAutoChange,
          this
        );
        this.btnUp.on(XOF.TouchEvent.TOUCH_END, this.onStopAutoChange, this);
        this.btnDown.on(XOF.TouchEvent.TOUCH_END, this.onStopAutoChange, this);
        this.btnMax.on(XOF.TouchEvent.TAP, this.onClickMax, this);
        this.labCount.on(XOF.TouchEvent.TAP, this.onInput, this);
        this.itemBox.data = t;
        this.labTitle.text = r.default.tr(163);
        this.showPriceGroup(true);
        this.value = 1;
        this.max = n;
        this.price = e;
        this.updateView();
        this.labName.text = t.itemData.name;
        this.btnUp.visible =
          this.btnDown.visible =
          this.btnMax.visible =
            this.max > 1;
        this.labName.textColor = d.default.getQualityColor(t.itemData.quality);
        this.btnDown10.visible = this.btnUp10.visible = false;
      };
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.onStopAutoChange();
        this.btnCancel.off(XOF.TouchEvent.TAP, this.onClickClose, this);
        this.btnOk.off(XOF.TouchEvent.TAP, this.onClickOk, this);
        this.btnUp.off(XOF.TouchEvent.TAP, this.onClickChange, this);
        this.btnUp10.off(XOF.TouchEvent.TAP, this.onClickChange, this);
        this.btnDown.off(XOF.TouchEvent.TAP, this.onClickChange, this);
        this.btnDown10.off(XOF.TouchEvent.TAP, this.onClickChange, this);
        this.btnUp.off(XOF.TouchEvent.TOUCH_BEGIN, this.onTouchBeginUp, this);
        this.btnDown.off(
          XOF.TouchEvent.TOUCH_BEGIN,
          this.onTouchBeginDown,
          this
        );
        this.btnUp.off(
          XOF.TouchEvent.TOUCH_CANCEL,
          this.onStopAutoChange,
          this
        );
        this.btnDown.off(
          XOF.TouchEvent.TOUCH_CANCEL,
          this.onStopAutoChange,
          this
        );
        this.btnUp.off(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onStopAutoChange,
          this
        );
        this.btnDown.off(
          XOF.TouchEvent.MOUSE_RELEASE_OUTSIDE,
          this.onStopAutoChange,
          this
        );
        this.btnUp.off(XOF.TouchEvent.TOUCH_END, this.onStopAutoChange, this);
        this.btnDown.off(XOF.TouchEvent.TOUCH_END, this.onStopAutoChange, this);
        this.labCount.off(XOF.TouchEvent.TAP, this.onInput, this);
        this.btnMax.off(XOF.TouchEvent.TAP, this.onClickMax, this);
        f.default.removeAllEvents(this);
      };
      t.prototype.updateView = function () {
        this.labCount.text = this.value + "";
      };
      t.prototype.onClickOk = function () {
        this.event(u.default.CONFIRM, [this.value]);
        a.default.viewMgr.closeView(this);
      };
      t.prototype.close = function () {
        this.onClickClose();
      };
      t.prototype.onClickClose = function () {
        a.default.viewMgr.closeView(this);
      };
      t.prototype.onClickChange = function (t) {
        this.value += t;
        if (this.value < 1) this.value = 1;
        else if (this.value > this.max) this.value = this.max;
        this.updateView();
      };
      t.prototype.onClickMax = function () {
        this.value = this.max;
        this.updateView();
      };
      t.prototype.showPriceGroup = function (t) {};
      t.prototype.onTouchBeginUp = function () {
        var t = this;
        this.onStopAutoChange();
        this.timer = a.default.timerMgr.delay(800, 1, function () {
          return a.default.timerMgr.delay(70, -1, t.onClickChange, t, 1);
        });
      };
      t.prototype.onTouchBeginDown = function () {
        var t = this;
        this.onStopAutoChange();
        this.timer = a.default.timerMgr.delay(800, 1, function () {
          return a.default.timerMgr.delay(70, -1, t.onClickChange, t, -1);
        });
      };
      t.prototype.onStopAutoChange = function () {
        if (this.timer) {
          a.default.timerMgr.removeTimerHandler(this.timer);
          this.timer = undefined;
        }
        a.default.timerMgr.remove(this.onClickChange, this);
      };
      t.prototype.onInput = function () {
        var e = this;
        a.default.platform.input("输入数量", this.value + "", {
          confirmCallback: function (t) {
            e.value = parseInt(c.default.toNumber(t));
            e.onClickChange(0);
          },
          confirmThisObj: this,
        });
      };
      return t;
    })(s.default);
    e.default = h;
  });
  t(kd);
  var xd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(_l);
    var i = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        t.imgLight.skin =
          "ui_interface_m/ui_atlas_common/UI_Common_IconCheck.png";
        t.imgLight.alpha = 1;
        t.imgLight.height = t.imgLight.width = undefined;
        t.imgLight.scale(0.8, 0.8);
        t.imgLight.pos(8, 8 + 3);
        return t;
      }
      return t;
    })(r.default);
    e.default = i;
  });
  t(xd);
  var Dd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var p = o(q);
    var i = o(R);
    var a = o(x);
    var s = o(I);
    var u = o(W);
    var l = o(k);
    var d = o(st);
    var f = o(xd);
    var c = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        u.default.initSkin("ui/Storage/Storage", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.itemSelects = [];
        this.listStorage.itemRenderer = this.listItem.itemRenderer = f.default;
        this.listItem.on(a.default.ITEM_TAP, this.onClickItem, this);
        this.listStorage.on(a.default.ITEM_TAP, this.onClickStorage, this);
        this.btnGet.on(XOF.TouchEvent.TAP, this.onClickTake, this);
        this.btnPut.on(XOF.TouchEvent.TAP, this.onClickPut, this);
        this.btnAll.on(XOF.TouchEvent.TAP, this.onClickAll, this);
        p.default.eventMgr.on(1072, this.updateView, this);
        this.updateView();
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.listItem.off(a.default.ITEM_TAP, this.onClickItem, this);
        this.listStorage.off(a.default.ITEM_TAP, this.onClickStorage, this);
        p.default.eventMgr.off(1072, this.updateView, this);
        this.btnGet.off(XOF.TouchEvent.TAP, this.onClickTake, this);
        this.btnPut.off(XOF.TouchEvent.TAP, this.onClickPut, this);
        this.btnAll.off(XOF.TouchEvent.TAP, this.onClickAll, this);
        this.listStorage.itemRenderer = this.listItem.itemRenderer = undefined;
      };
      t.prototype.updateItems = function () {
        var t = p.default.userData.bag;
        var e = [];
        var n = []
          .concat(p.default.userData.equip.equips)
          .concat(p.default.userData.equip.skins)
          .concat(t.items);
        for (var o = 0, r = 0; o < n.length; o++) {
          var i = { showBg: true };
          var a = n[o];
          if (a && a.count && a.itemID) {
            var s = a.itemID;
            var u = d.default.getItemData(s);
            var l = a.id ? "_" + a.id : s;
            if (u.trade > 0) {
              i.id = l;
              i.object = a;
              i.extra = a;
              i.isBag = false;
              i.tap = false;
              i.itemData = u;
              i.count = a.count;
              i.cd = t.getItemCountdown(s);
              i.light = this.itemSelects.indexOf(l) >= 0;
              e[r] = i;
              r++;
            }
          }
        }
        var f = Math.ceil(e.length / 5) * 5;
        for (var o = e.length; o < f; o++) {
          e.push({ showBg: true });
        }
        var c = this.listItem;
        c.dataProvider = e.sort(function (t, e) {
          if (t.itemData && e.itemData) {
            if (t.itemData.quality != e.itemData.quality) {
              return e.itemData.quality - t.itemData.quality;
            } else {
              return t.itemData.id - e.itemData.id;
            }
          } else if (t.itemData) {
            return -1;
          } else if (e.itemData) {
            return 1;
          }
          return 1;
        });
      };
      t.prototype.updateView = function () {
        this.updateItems();
        this.updateStorage();
        this.labCoin.text = l.default.formatMoney(
          p.default.userData.storage.coin
        );
      };
      t.prototype.updateStorage = function () {
        var t = p.default.userData.storage.count;
        var e = [];
        var n = [].concat(p.default.userData.storage.list);
        var o = Math.ceil(t / 5) * 5;
        for (var r = 0; r < o; r++) {
          e.push({ showBg: true });
        }
        for (var r = 0, i = 0; r < n.length; r++) {
          var a = { showBg: true };
          var s = n[r];
          if (s && s.count && s.itemID) {
            var u = s.itemID;
            var l = d.default.getItemData(u);
            var f = s.id ? "_" + s.id : u;
            {
              a.id = f;
              a.object = s;
              a.extra = s;
              a.isBag = false;
              a.tap = false;
              a.itemData = l;
              a.count = s.count;
              a.light = this.itemSelects.indexOf(f) >= 0;
              e[i] = a;
              i++;
            }
          }
        }
        var c = this.listStorage;
        c.dataProvider = e.sort(function (t, e) {
          if (t.itemData && e.itemData) {
            if (t.itemData.quality != e.itemData.quality) {
              return e.itemData.quality - t.itemData.quality;
            } else {
              return t.itemData.id - e.itemData.id;
            }
          } else if (t.itemData) {
            return -1;
          } else if (e.itemData) {
            return 1;
          }
          return 1;
        });
      };
      t.prototype.onClickStorage = function (n) {
        if (n.itemData) {
          p.default.viewMgr.open(s.default.StorageCount, [n, {}, n.count]);
          var t = p.default.viewMgr.getOpenView(s.default.StorageCount);
          t.labTitle.text = r.default.tr(269);
          t.once(a.default.CONFIRM, function (t) {
            var e;
            if (
              (e = n === null || n === void 0 ? void 0 : n.extra) === null ||
              e === void 0
                ? void 0
                : e.id
            ) {
              p.default.userData.storage.get(undefined, n.extra.id, t);
            } else {
              p.default.userData.storage.get(n.itemData.id, undefined, t);
            }
          });
        }
      };
      t.prototype.onClickItem = function (n) {
        if (n.itemData) {
          p.default.viewMgr.open(s.default.StorageCount, [n, {}, n.count]);
          var t = p.default.viewMgr.getOpenView(s.default.StorageCount);
          t.labTitle.text = r.default.tr(268);
          t.once(a.default.CONFIRM, function (t) {
            var e;
            if (
              (e = n === null || n === void 0 ? void 0 : n.extra) === null ||
              e === void 0
                ? void 0
                : e.id
            ) {
              p.default.userData.storage.put(undefined, n.extra.id, t);
            } else {
              p.default.userData.storage.put(n.itemData.id, undefined, t);
            }
          });
        }
      };
      t.prototype.onClickTake = function () {
        if (p.default.userData.storage.coin > 0) {
          var e = {
            itemData: d.default.getItemData(d.default.resourceIds.coin),
            count: p.default.userData.storage.coin,
            tap: false,
          };
          p.default.viewMgr.open(s.default.StorageCount, [e, {}, e.count]);
          var t = p.default.viewMgr.getOpenView(s.default.StorageCount);
          t.labTitle.text = r.default.tr(271);
          t.once(a.default.CONFIRM, function (t) {
            p.default.userData.storage.get(e.itemData.id, undefined, t);
          });
        } else {
          p.default.comm.mtr(273);
        }
      };
      t.prototype.onClickPut = function () {
        var e = {
          itemData: d.default.getItemData(d.default.resourceIds.coin),
          count: p.default.userData.bag.coin,
          tap: false,
        };
        p.default.viewMgr.open(s.default.StorageCount, [e, {}, e.count]);
        var t = p.default.viewMgr.getOpenView(s.default.StorageCount);
        t.labTitle.text = r.default.tr(270);
        t.once(a.default.CONFIRM, function (t) {
          p.default.userData.storage.put(e.itemData.id, undefined, t);
        });
      };
      t.prototype.onClickAll = function () {
        p.default.userData.storage.putAll();
      };
      return t;
    })(i.default);
    e.default = c;
  });
  t(Dd);
  var Id = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(R);
    var s = o(h);
    var u = o(x);
    var l = o(W);
    var f = o(Dd);
    var c = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        l.default.initSkin("ui/activity/Activity", t, t);
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        o.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(u.default.CLOSE, this.close, this);
        this.views = [{ label: r.default.tr(265), view: f.default }];
        var t = this.views;
        var e = 0;
        for (; e < t.length; e++) {
          var n = this.btnList.getChildAt(e);
          if (!n) break;
          n.label = t[e].label;
        }
        for (; e < this.btnList.numChild; e++) {
          this.btnList.getChildAt(e).visible = false;
        }
        this.btnList.on(u.default.RADIOGROUP_CHANGED, this.onSelectIndex, this);
        this.btnList.selectIndex = 0;
        this.updateView();
      };
      t.prototype.updateView = function () {};
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.bg.onClose();
        this.closeCurView();
      };
      t.prototype.onOpenView = function (t) {
        if (t == 0) {
          i.default.userData.storage.load();
        }
      };
      t.prototype.closeCurView = function () {
        if (this.curView) {
          var t = this.curView;
          t.event(s.default.onClose);
          this.curView.removeSelf();
          this.curView = undefined;
        }
      };
      t.prototype.onSelectIndex = function () {
        var t = this.btnList.selectIndex;
        var e = this.views[t];
        if (e) {
          this.closeCurView();
          this.curView = undefined;
          if (e.view) {
            var n = new e.view();
            n.event(s.default.onOpen);
            n.event(s.default.onOpened);
            this.curView = n;
            this.addChild(this.curView);
            this.onOpenView(t);
          }
        }
      };
      return t;
    })(a.default);
    e.default = c;
  });
  t(Id);
  var Rd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(D);
    var a = o(I);
    var s = o(kd);
    var u = o(Id);
    var l = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.viewMgr.register(a.default.Storage, u.default);
        r.default.viewMgr.register(a.default.StorageCount, s.default);
        return t;
      }
      return t;
    })(i.default);
    e.default = l;
  });
  t(Rd);
  var Ld = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(vl);
    var i = o(W);
    var a = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        i.default.initSkin("ui/Rank/RankVipItem", t, t);
        return t;
      }
      t.prototype.dataChanged_ = function () {
        e.prototype.dataChanged_.call(this);
        this.labName.text = this.data.name;
        this.labRank.text = this.data.rank + "";
        this.labServer.text = this.data.server;
        this.labValue.text = "无";
      };
      return t;
    })(r.default);
    e.default = a;
  });
  t(Ld);
  var Fd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(R);
    var a = o(W);
    var s = o(Ld);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        a.default.initSkin("ui/Rank/RankVip", t, t);
        return t;
      }
      t.prototype.onOpen = function () {
        e.prototype.onOpen.call(this);
        this.list.itemRenderer = s.default;
        this.updateView();
        r.default.eventMgr.on(1076, this.updateView, this);
      };
      t.prototype.onClose = function () {
        e.prototype.onClose.call(this);
        this.list.dataProvider = this.list.itemRenderer = undefined;
        r.default.eventMgr.off(1076, this.updateView, this);
      };
      t.prototype.updateView = function () {
        var n = [];
        r.default.userData.rank.vipList.forEach(function (t, e) {
          n.push({ name: t.name, server: t.region, value: 1, rank: e + 1 });
        });
        this.list.dataProvider = n;
      };
      return t;
    })(i.default);
    e.default = u;
  });
  t(Fd);
  var Bd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(V);
    var i = o(q);
    var a = o(R);
    var s = o(h);
    var u = o(x);
    var l = o(W);
    var f = o(Fd);
    var c = (function (o) {
      n(t, o);
      function t() {
        var t = o.call(this) || this;
        l.default.initSkin("ui/activity/Activity", t, t);
        t.fullview = true;
        return t;
      }
      t.prototype.onOpen = function () {
        o.prototype.onOpen.call(this);
        this.bg.onOpen();
        this.bg.once(u.default.CLOSE, this.close, this);
        this.views = [{ label: r.default.tr(311), view: f.default }];
        var t = this.views;
        var e = 0;
        for (; e < t.length; e++) {
          var n = this.btnList.getChildAt(e);
          if (!n) break;
          n.label = t[e].label;
        }
        for (; e < this.btnList.numChild; e++) {
          this.btnList.getChildAt(e).visible = false;
        }
        this.btnList.on(u.default.RADIOGROUP_CHANGED, this.onSelectIndex, this);
        this.btnList.selectIndex = 0;
        this.updateView();
      };
      t.prototype.updateView = function () {};
      t.prototype.onClose = function () {
        o.prototype.onClose.call(this);
        this.bg.onClose();
        this.closeCurView();
      };
      t.prototype.onOpenView = function (t) {
        if (t == 0) {
          i.default.userData.rank.loadVipList();
        }
      };
      t.prototype.closeCurView = function () {
        if (this.curView) {
          var t = this.curView;
          t.event(s.default.onClose);
          this.curView.removeSelf();
          this.curView = undefined;
        }
      };
      t.prototype.onSelectIndex = function () {
        var t = this.btnList.selectIndex;
        var e = this.views[t];
        if (e) {
          this.closeCurView();
          this.curView = undefined;
          if (e.view) {
            var n = new e.view();
            n.event(s.default.onOpen);
            n.event(s.default.onOpened);
            this.curView = n;
            this.addChild(this.curView);
            this.onOpenView(t);
          }
        }
      };
      return t;
    })(a.default);
    e.default = c;
  });
  t(Bd);
  var Nd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var r = o(q);
    var i = o(D);
    var a = o(I);
    var s = o(Bd);
    var u = (function (e) {
      n(t, e);
      function t() {
        var t = e.call(this) || this;
        r.default.viewMgr.register(a.default.RankMain, s.default);
        return t;
      }
      return t;
    })(i.default);
    e.default = u;
  });
  t(Nd);
  var Xd = n(ed);
  var Ud = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    var o =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var f = o(q);
    var r = o(K);
    var i = o(Y);
    var a = o(El);
    var s = o(Sf);
    var u = o(xf);
    var l = o(zf);
    var c = o(oc);
    var p = o(ic);
    var d = o(sc);
    var h = o(Dc);
    var v = o(Ic);
    var y = o(Uc);
    var _ = o(Kc);
    var m = o(Qc);
    var g = o(ul);
    var b = o($);
    var O = o(Jc);
    var w = o(dt);
    var A = o(mp);
    var E = o(Op);
    var T = o(V);
    var C = o(W);
    var P = o(zp);
    var j = o(Se);
    var S = o(Xd);
    var M = o(id);
    var k = o(ad);
    var x = o(vd);
    var D = o(_d);
    var I = o(yt);
    var R = o(rl);
    var L = o(Od);
    var F = o(wd);
    var B = o(Md);
    var N = o(Rd);
    var X = o(Nd);
    var U = o(wl);
    var H = "配置文件加载出错!";
    var G = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.fullSreenMode = 2;
        t.lastWidth = 0;
        return t;
      }
      t.prototype.init = function () {
        var t = this;
        XOF.player.enableMouseMode = true;
        XOF.stage.removeChildren();
        this.onFullChange(XOF.player.isFullSceen);
        XOF.stage.on(XOF.Event.FULL_SCEEN, this.onFullChange, this, [true]);
        XOF.stage.on(XOF.Event.FULL_SCEEN_QUIT, this.onFullChange, this, [
          false,
        ]);
        f.default.platform.once("start", function () {
          return B.default.check(function () {
            return t.onStarted();
          });
        });
        f.default.platform.start(b.default.gameVersion);
      };
      t.prototype.addBlack = function (t) {
        if (
          f.default.isMobile ||
          f.default.platform.platformType == "HBuilder"
        ) {
          if (t > 0) {
            var e = XOF.stage.getChildByName("blackLeft");
            var n = XOF.stage.getChildByName("blackRight");
            if (!e) {
              e = new XOF.Image();
              e.size(t, b.default.height);
              e.skin = "first/1.png";
              e.name = "blackLeft";
              XOF.stage.addChild(e);
              n = new XOF.Image();
              n.size(t, b.default.height);
              n.skin = "first/1.png";
              n.name = "blackRight";
              e.touchEnabled = n.touchEnabled = true;
              XOF.stage.addChild(n);
            }
            e.x = -e.width;
            n.x = XOF.stage.width;
          }
        }
      };
      t.prototype.onStarted = function () {
        var n = this;
        XOF.loader.prefix =
          f.default.platform.convertLocalFileSystemURL("assets/");
        var t = E.default.inst();
        f.default.proxy = t;
        f.default.userData = new h.default();
        f.default.eventMgr = new v.default();
        f.default.comm = new k.default();
        f.default.gameControler = new O.default();
        f.default.gameControler.enabledKeyboard =
          f.default.platform.platformType != "HBuilder";
        f.default.sound.init();
        f.default.viewMgr.init();
        I.default.reset();
        t.on(
          r.default.SOCKET_DISCONNECT,
          f.default.eventMgr.event,
          f.default.eventMgr,
          [r.default.SOCKET_DISCONNECT]
        );
        t.on(r.default.SOCKET_ERROR, function (t) {
          if (t == -1) {
            f.default.comm.mtr(192);
            XOF.log("返回异常数据.");
          } else if (t == -2) {
            f.default.comm.mtr(193);
            XOF.log("返回空白数据.");
          }
        });
        XOF.stage.on(XOF.Event.ENTER_FRAME, t.deal, t);
        XOF.stage.on("backbutton", function () {
          if (f.default.isGame) {
            f.default.eventMgr.event(r.default.BACKHOME);
          } else {
            f.default.platform.quit();
          }
        });
        XOF.stage.on("pause", this.onPause, this);
        XOF.stage.on("resume", this.onResume, this);
        this.onFullChange(XOF.player.isFullSceen);
        R.default.init();
        this.initConfig(function () {
          P.default.register();
          A.default.init();
          if (!f.default.isMobile) {
            f.default.ctrlMgr.register(i.default.Mouse, new p.default());
          }
          if (
            f.default.platform.getItem(R.default.system_setting_music, "1") !=
            "1"
          ) {
            f.default.sound.pause();
          }
          f.default.ctrlMgr.register(i.default.Login, new l.default());
          f.default.eventMgr.once(
            r.default.STEP3_ROLE_SELECT,
            n.onLoadRoleData,
            n
          );
          f.default.eventMgr.once(
            r.default.STEP4_ROLE_DATA_LOADED,
            n.onLogin,
            n
          );
          f.default.eventMgr.once(r.default.STEP6_START_BEFORE, n.onStart, n);
          var t = function () {
            f.default.platform.confirm(
              T.default.tr(151),
              { buttons: [T.default.tr(149)] },
              function () {
                f.default.platform.quit();
              }
            );
          };
          XOF.loader.once(XOF.Event.ERROR, t);
          j.default.loadImages(j.default.getLoginRes(), function () {
            U.default.getBitmapFont("font/level.png", "font/level.fnt");
            n.hideMouse();
            f.default.eventMgr.event(r.default.STEP1_LOGIN_ACCOUNTS);
            XOF.loader.off(XOF.Event.ERROR, t, undefined, true);
            if (f.default.platform.platformType == "HBuilder") {
              f.default.timerMgr.delay(
                200,
                1,
                function () {
                  f.default.platform.closeSplashscreen();
                  B.default.close();
                  f.default.isGame = true;
                },
                f.default.platform
              );
            } else {
              B.default.close();
            }
          });
          g.default.inst.event(1);
          var e = new XOF.Label();
          e.pos(320, 5);
          XOF.Timer.startTimer(function () {
            return (e.text =
              "FPS:" + XOF.player.fps + ("\nv" + b.default.version));
          });
          XOF.stage.addChild(e);
          XOF.stage.on("CLICK_BUTTON", function () {
            f.default.sound.play("CLICK_MOVE", { completeDestroy: true });
          });
        });
      };
      t.prototype.onLoadRoleData = function (t) {
        f.default.userData.init();
        f.default.userData.hero.setData(t);
        Promise.all([
          f.default.userData.bag.load(),
          f.default.userData.equip.loadEquips(),
          f.default.userData.equip.loadSkins(),
          f.default.userData.hero.loadEquips(),
          f.default.userData.hero.loadSkins(),
          f.default.userData.mail.load(),
          f.default.userData.skill.load(),
          f.default.userData.dungeon.loadItemSet(),
          f.default.userData.totalRecharge.load(),
          f.default.userData.skinCollct.load(),
          f.default.userData.equipCollct.load(),
          f.default.userData.shop.load(),
        ])
          .then(function () {
            f.default.eventMgr.event(r.default.STEP4_ROLE_DATA_LOADED, [
              S.default,
            ]);
          })
          .catch(function (t) {
            XOF.log("加载角色数据异常:" + t);
            f.default.platform.confirm(
              T.default.tr(148),
              { buttons: [T.default.tr(149)] },
              function () {
                f.default.platform.restart();
              }
            );
          });
      };
      t.prototype.onStart = function () {
        f.default.ctrlMgr.getCtrl(i.default.Map).onStart();
        f.default.ctrlMgr.getCtrl(i.default.Home).onStart();
        f.default.eventMgr.event(r.default.GAME_START);
      };
      t.prototype.onLogin = function (t) {
        var e = this;
        function n(t) {
          f.default.userData.reset(t);
          e.initModules();
          f.default.eventMgr.event(r.default.GAME_LOGIN);
        }
        n(t);
      };
      t.prototype.initConfig = function (t) {
        var i = {};
        var a = function () {
          T.default.setConf(i["i18n.json"], i["serverState.json"]);
          w.default.setOImg(i["oimg.json"]);
          XOF.loader.loadImage("0.png", undefined, undefined, function () {
            XOF.loader.getItem = function (t) {
              if (w.default.oimgs[t]) {
                return XOF.loader.get("0.png");
              }
            };
          });
          j.default.setConf(i["preload.json"]);
          w.default.setConf(i);
          f.default.sound.setConf(i["audio.json"]);
          C.default.loadPackage(i["ui.json"]);
          F.default.setConf(i["bitmapsheets.json"]);
          f.default.eventMgr.event(r.default.INIT_CONFIGS);
          t && t();
        };
        JSZipUtils.getBinaryContent("conf.fpkg", function (t, e) {
          if (t) {
            f.default.platform.alert(H + t);
            throw t;
          }
          if (L.default.test(e)) {
            var n = new JSZip(e, {});
            var o = Object.keys(n.files);
            var r = function () {
              if (o.length <= 0) {
                a();
              } else {
                var t = o.pop();
                var e = n.file(t).asText();
                i[t] = JSON.parse(e);
                if (f.default.platform.platformType == "HBuilder") {
                  f.default.timerMgr.frame(5, 1, r);
                } else {
                  XOF.Timer.callLater(r);
                }
              }
            };
            r();
          } else {
            f.default.platform.alert(H);
          }
        });
      };
      t.prototype.initModules = function () {
        f.default.ctrlMgr.register(i.default.Hero, new u.default());
        f.default.ctrlMgr.register(i.default.Map, new a.default());
        f.default.ctrlMgr.register(i.default.Home, new s.default());
        f.default.ctrlMgr.register(i.default.Setting, new d.default());
        f.default.ctrlMgr.register(i.default.Bag, new c.default());
        f.default.ctrlMgr.register(i.default.Shop, new y.default());
        f.default.ctrlMgr.register(i.default.Quest, new _.default());
        f.default.ctrlMgr.register(i.default.Skill, new m.default());
        f.default.ctrlMgr.register(i.default.Mail, new M.default());
        f.default.ctrlMgr.register(i.default.Dungeon, new x.default());
        f.default.ctrlMgr.register(i.default.Vip, new D.default());
        f.default.ctrlMgr.register(i.default.Storage, new N.default());
        f.default.ctrlMgr.register(i.default.Rank, new X.default());
        f.default.eventMgr.event(r.default.INIT_MODULES);
      };
      t.prototype.onFullChange = function (t) {
        var e = XOF.player.canvas;
        var n = b.default.width;
        var o = b.default.height;
        var r = f.default.platform.getScreneWidth();
        var i = f.default.platform.getScreneHeight();
        var a = r <= b.default.width || i <= b.default.height;
        if (f.default.isMobile || a) {
          t = true;
          this.fullSreenMode = 1;
          n = r;
          o = i;
          if (f.default.isMobile || t) {
            var s = o / b.default.height;
            var u = Math.min(Math.round(n / s), b.default.maxWdith);
            XOF.stage.size(u, b.default.height);
            b.default.width = u;
            b.default.mapWidth = Math.floor(u / 1.5);
            XOF.player.showType = "ShowCenter";
          }
          if (window.devicePixelRatio) {
            e.width = n * window.devicePixelRatio;
            e.height = o * window.devicePixelRatio;
            XOF.player.mouseScaleX = window.devicePixelRatio;
            XOF.player.mouseScaleY = window.devicePixelRatio;
          } else {
            e.width = n;
            e.height = o;
          }
          e.style.width = n + "px";
          e.style.height = o + "px";
          e.style.border = "0";
          e.style.borderRadius = "0";
          e.style.padding = "0";
          e.style.marginTop = "0px";
          e.style.marginLeft = "0px";
          e.style.display = "block";
          e.parentElement.style.margin = "0";
          this.onResize();
        } else {
          var l = this.fullSreenMode;
          if (t) {
            n = r;
            o = i;
            if (l == 1) {
              e.width = n;
              e.height = o;
            }
            e.style.width = n + "px";
            e.style.height = o + "px";
            e.style.border = "0";
            e.style.borderRadius = "0";
            e.style.padding = "0";
            e.style.marginTop = "0px";
            e.style.marginLeft = "0px";
            e.style.display = "block";
            e.parentElement.style.margin = "0";
          } else {
            e.width = b.default.width;
            e.height = b.default.height;
            e.style.display = "block";
            e.style.border = "1px solid #333";
            e.style.borderRadius = "2px";
            e.parentElement.setAttribute("style", "width:1280px;margin: auto;");
            e.parentElement.style.background = "url('res/bg.jpg') no-repeat";
          }
          XOF.player.mouseScaleX = b.default.width / n;
          XOF.player.mouseScaleY = b.default.height / o;
          this.onResize();
        }
        XOF.player.canvasChanged();
      };
      t.prototype.onResize = function () {
        if (XOF.player.canvas.width > this.lastWidth) {
          this.addBlack((XOF.player.canvas.width - XOF.stage.width) / 2);
        }
        this.lastWidth = XOF.player.canvas.width;
        if (this.fullSreenMode == 1);
      };
      t.prototype.onPause = function () {
        f.default.sound.pause();
      };
      t.prototype.onResume = function () {
        f.default.sound.resume();
      };
      t.prototype.hideMouse = function () {
        XOF.player.canvas.style.cursor = "none";
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = G;
  });
  t(Ud);
  var Hd = e(function (t, e) {
    Object.defineProperty(e, "__esModule", { value: true });
    e.RuntimeType = void 0;
    var n;
    (function (t) {
      t.WEB = "web";
      t.NATIVE = "native";
      t.RUNTIME2 = "runtime2";
      t.MYGAME = "mygame";
      t.WXGAME = "wxgame";
      t.BAIDUGAME = "baidugame";
      t.QGAME = "qgame";
      t.OPPOGAME = "oppogame";
      t.QQGAME = "qqgame";
      t.VIVOGAME = "vivogame";
    })((n = e.RuntimeType || (e.RuntimeType = {})));
    var o = (function () {
      function t() {}
      t.os = "Unknown";
      t.renderMode = "Unknown";
      t.runtimeType = n.WEB;
      return t;
    })();
    e.default = o;
  });
  t(Hd);
  Hd.RuntimeType;
  var Gd = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var i = n(Hd);
    var o = (function () {
      function r() {}
      r.detect = function () {
        var t = i.default;
        var e = navigator.userAgent.toLowerCase();
        t["isMobile" + ""] =
          e.indexOf("mobile") != -1 || e.indexOf("android") != -1;
        if (t.isMobile) {
          if (
            e.indexOf("windows") < 0 &&
            (e.indexOf("iphone") != -1 ||
              e.indexOf("ipad") != -1 ||
              e.indexOf("ipod") != -1)
          ) {
            t["os" + ""] = "iOS";
          } else if (e.indexOf("android") != -1 && e.indexOf("linux") != -1) {
            t["os" + ""] = "Android";
          } else if (e.indexOf("windows") != -1) {
            t["os" + ""] = "Windows Phone";
          }
        } else {
          if (e.indexOf("windows nt") != -1) {
            t["os" + ""] = "Windows PC";
          } else if (
            navigator.platform == "MacIntel" &&
            navigator.maxTouchPoints > 1
          ) {
            t["os" + ""] = "iOS";
            t["isMobile" + ""] = true;
          } else if (e.indexOf("mac os") != -1) {
            t["os" + ""] = "Mac OS";
          }
        }
        var n = (
          navigator.language || navigator["browserLanguage"]
        ).toLowerCase();
        var o = n.split("-");
        if (o.length > 1) {
          o[1] = o[1].toUpperCase();
        }
        t["language" + ""] = o.join("-");
        r.injectUIntFixOnIE9();
      };
      r.injectUIntFixOnIE9 = function () {
        if (
          /msie 9.0/i.test(navigator.userAgent) &&
          !/opera/i.test(navigator.userAgent)
        ) {
          var t =
            "\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n" +
            "<script type='text/vbscript' language='VBScript'>\r\n" +
            "Function IEBinaryToArray_ByteStr(Binary)\r\n" +
            "   IEBinaryToArray_ByteStr = CStr(Binary)\r\n" +
            "End Function\r\n" +
            "Function IEBinaryToArray_ByteStr_Last(Binary)\r\n" +
            "   Dim lastIndex\r\n" +
            "   lastIndex = LenB(Binary)\r\n" +
            "   if lastIndex mod 2 Then\r\n" +
            "       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n" +
            "   Else\r\n" +
            "       IEBinaryToArray_ByteStr_Last = " +
            '""' +
            "\r\n" +
            "   End If\r\n" +
            "End Function\r\n" +
            "</script>\r\n" +
            "\x3c!-- convertResponseBodyToText --\x3e\r\n" +
            "<script>\r\n" +
            "let convertResponseBodyToText = function (binary) {\r\n" +
            "   let byteMapping = {};\r\n" +
            "   for ( let i = 0; i < 256; i++ ) {\r\n" +
            "       for ( let j = 0; j < 256; j++ ) {\r\n" +
            "           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n" +
            "           String.fromCharCode(i) + String.fromCharCode(j);\r\n" +
            "       }\r\n" +
            "   }\r\n" +
            "   let rawBytes = IEBinaryToArray_ByteStr(binary);\r\n" +
            "   let lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n" +
            "   return rawBytes.replace(/[\\s\\S]/g," +
            "                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n" +
            "};\r\n" +
            "</script>\r\n";
          document.write(t);
        }
      };
      return r;
    })();
    e.default = o;
  });
  t(Gd);
  var Vd = e(function (t, e) {
    var n =
      (mo && mo.__extends) ||
      (function () {
        var o = function (t, e) {
          o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n)) t[n] = e[n];
            };
          return o(t, e);
        };
        return function (t, e) {
          if (typeof e !== "function" && e !== null)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          o(t, e);
          function n() {
            this.constructor = t;
          }
          t.prototype =
            e === null
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n());
        };
      })();
    Object.defineProperty(e, "__esModule", { value: true });
    var o = (function (e) {
      n(t, e);
      function t() {
        var t = (e !== null && e.apply(this, arguments)) || this;
        t.clientVersion = "1.0";
        t.platformType = "HBuilder";
        return t;
      }
      t.prototype.getScreneWidth = function () {
        return plus.screen.resolutionWidth;
      };
      Object.defineProperty(t.prototype, "installRes", {
        get: function () {
          return this.compareVersion(this.localVersion, this.gameVersion) >= 0;
        },
        enumerable: false,
        configurable: true,
      });
      t.prototype.getScreneHeight = function () {
        return plus.screen.resolutionHeight;
      };
      t.prototype.alert = function (t) {
        var e = this;
        plus.nativeUI.confirm(t, function () {
          return e.hideSystemNavigation();
        });
      };
      t.prototype.input = function (t, e, n) {
        var o = this;
        if (t === void 0) {
          t = "";
        }
        plus.nativeUI.prompt(
          t,
          function (t) {
            var e = t.value;
            o.hideSystemNavigation();
            if (n) {
              if (t.index == 0) {
                if (n === null || n === void 0 ? void 0 : n.confirmCallback) {
                  n.confirmCallback.apply(n.confirmThisObj, [e]);
                }
              } else {
                if (n === null || n === void 0 ? void 0 : n.cancelCallback) {
                  n.cancelCallback.apply(n.cancelThisObj);
                }
              }
            }
          },
          "提示",
          "",
          ["确认", "取消"]
        );
      };
      t.prototype.closeSplashscreen = function () {
        if (plus.navigator.hasSplashscreen()) {
          plus.navigator.closeSplashscreen();
        }
        this.hideSystemNavigation();
      };
      t.prototype.showToast = function (t) {
        plus.nativeUI.toast(t);
      };
      t.prototype.showConfirm = function (t, e, n) {
        if (e === void 0) {
          e = "提示";
        }
        var o = this;
        plus.nativeUI.confirm(
          t,
          function (t) {
            o.hideSystemNavigation();
            if (t.index == 0) {
              if (n === null || n === void 0 ? void 0 : n.confirmCallback) {
                n.confirmCallback.apply(n.confirmThisObj);
              }
            } else {
              if (n === null || n === void 0 ? void 0 : n.cancelCallback) {
                n.cancelCallback.apply(n.cancelThisObj);
              }
            }
          },
          { title: e, buttons: ["确定", "取消"], verticalAlign: "bottom" }
        );
      };
      t.prototype.confirm = function (t, e, n, o) {
        var r = this;
        plus.nativeUI.confirm(
          t,
          function (t) {
            r.hideSystemNavigation();
            n.apply(o, [t.index]);
          },
          e
        );
      };
      t.prototype.quit = function () {
        plus.runtime.quit();
      };
      t.prototype.restart = function () {
        plus.runtime.restart();
      };
      t.prototype.unzip = function (t, e, n) {
        var o = plus.io.convertLocalFileSystemURL(t);
        var r = plus.io.convertLocalFileSystemURL(e);
        var i = plus.android.implements("zip.ZipProgressUtil$ZipListener", {
          zipStart: function () {
            n.onUnpack();
            n.onUnpackProgress(0);
          },
          zipSuccess: function () {
            n.onUnpacked();
          },
          zipProgress: function (t) {
            n.onUnpackProgress(t);
          },
          zipFail: function () {
            n.onUnpackError();
          },
        });
        var a = plus.android.importClass("zip.UnZipMainThread");
        var s = new a(o, r, i);
        s.start();
      };
      t.prototype.unpackRes = function (e) {
        var t = this;
        if (t.installRes == false) {
          t.unzip("_www/assets.zip", "_doc/", {
            onUnpack: e.onUnpack,
            onUnpacked: function () {
              e.onUnpacked();
              t.writeResVerstion(t.gameVersion, function (t) {
                if (t) {
                  e.onStarted();
                } else {
                  e.onUnpackError();
                }
              });
            },
            onUnpackProgress: e.onUnpackProgress,
            onUnpackError: e.onUnpackError,
          });
        }
      };
      t.prototype.start = function (t) {
        this.hideSystemNavigation();
        var e = this;
        var n = false,
          o = false;
        function r() {
          if ((n == o) == true) {
            e.event("start");
          }
        }
        e.gameVersion = t;
        plus.runtime.getProperty(plus.runtime.appid, function (t) {
          e.clientVersion = t.version;
          o = true;
          r();
        });
        this.readFile("res_version.txt", function (t) {
          e.localVersion = t;
          n = true;
          r();
        });
      };
      t.prototype.convertLocalFileSystemURL = function (t) {
        return "file://" + plus.io.convertLocalFileSystemURL("_doc/" + t);
      };
      t.prototype.setItem = function (t, e) {
        plus.storage.setItem(t, e + "");
      };
      t.prototype.getItem = function (t, e) {
        var n = plus.storage.getItem(t);
        return n || e;
      };
      t.prototype.hideSystemNavigation = function () {
        plus.navigator.hideSystemNavigation();
        plus.navigator.setFullscreen(true);
      };
      t.prototype.checkUpdate = function () {
        return false;
      };
      t.prototype.download_ = function (n, o, r) {
        var i = 0;
        function a(t, e) {
          if (e == 200) {
            if (t.state == 4) {
              r(1);
            } else if (t.state == 3) {
              var n = t.downloadedSize / t.totalSize;
              if (n > i) {
                r(n * 1e4 > 9999 ? 0.9999 : n);
              }
              i = n;
            } else if (t.state == 2) {
              r(-2);
            } else {
              r(-1);
            }
          } else if (e != undefined) {
            r(-3);
          }
        }
        this.exits(o, function (t) {
          if (t) {
            r(1);
          } else {
            var e = plus.downloader.createDownload(n, {
              filename: "_doc/" + o,
            });
            e.addEventListener("statechanged", a, false);
            e.start();
          }
        });
      };
      t.prototype.download = function (t, e) {
        var n = this;
        var o = true;
        var r = true;
        var i = 0;
        var a = 0;
        function s() {
          if (a > 0 && i >= a) {
            if (o == false) {
              n.download_(
                t.res,
                "update/res" + t.version + ".zip",
                function (t) {
                  if (t == 1) {
                    o = true;
                    s();
                  } else if (t < 0) {
                    e(t);
                  } else {
                    e(0.49 * t);
                  }
                }
              );
            } else if (r == false) {
              n.download_(
                t.download,
                "update/" + t.version + ".wgtu",
                function (t) {
                  if (t == 1) {
                    r = true;
                    s();
                  } else if (t < 0) {
                    e(t);
                  } else {
                    e(0.49 + 0.5 * t);
                  }
                }
              );
            } else {
              e(1);
            }
          } else {
            e(-1);
          }
        }
        if (t.res) {
          a += 1;
          n.exits("update/res" + t.version + ".zip", function (t) {
            if (t);
            else {
              o = false;
            }
            i += 1;
            s();
          });
        } else {
          i += 1;
          s();
        }
        if (t.download) {
          a += 1;
          n.exits("update/" + t.version + ".wgtu", function (t) {
            if (t);
            else {
              r = false;
            }
            i += 1;
            s();
          });
        } else {
          i += 1;
          s();
        }
      };
      t.prototype.writeFile = function (e, n, o) {
        plus.io.requestFileSystem(
          plus.io.PRIVATE_DOC,
          function (t) {
            t.root.getFile(
              e,
              { create: true },
              function (t) {
                t.createWriter(function (t) {
                  t.seek(0);
                  t.write(n);
                  t.onwrite = function (t) {
                    o(true);
                  };
                });
              },
              function () {
                o(false);
              }
            );
          },
          function () {
            o(false);
          }
        );
      };
      t.prototype.readFile = function (e, n) {
        plus.io.requestFileSystem(
          plus.io.PRIVATE_DOC,
          function (t) {
            t.root.getFile(
              e,
              { create: true },
              function (e) {
                e.createWriter(function (t) {
                  e.file(function (t) {
                    var e = new plus.io.FileReader();
                    e.readAsText(t, "utf-8");
                    e.onloadend = function (t) {
                      n(t.target.result);
                    };
                  });
                });
              },
              function () {
                n(undefined);
              }
            );
          },
          function () {
            n(undefined);
          }
        );
      };
      t.prototype.exits = function (e, n, t) {
        if (t === void 0) {
          t = plus.io.PRIVATE_DOC;
        }
        plus.io.requestFileSystem(
          t,
          function (t) {
            t.root.getFile(
              e,
              {},
              function () {
                n(true);
              },
              function () {
                n(false);
              }
            );
          },
          function () {
            n(false);
          }
        );
      };
      t.prototype.installUpdate = function (e, n, o) {
        var r = this;
        function i() {
          o(0.8);
          r.exits("update/" + e + ".wgtu", function (t) {
            if (t) {
              plus.runtime.install(
                "_doc/update/" + e + ".wgtu",
                {},
                function () {
                  o(1);
                },
                function (t) {
                  o(-1);
                }
              );
            } else {
              r.alert("内容包文件不存在:" + e);
              o(-1);
            }
          });
        }
        r.exits("update/res" + e + ".zip", function (t) {
          if (t) {
            r.unzip("_doc/update/res" + e + ".zip", "_doc/", {
              onUnpack: function () {
                o(1e-4);
              },
              onUnpackProgress: function (t) {
                o(0.8 * t);
              },
              onUnpacked: function () {
                r.writeResVerstion(n, function () {
                  i();
                });
              },
              onUnpackError: function () {
                o(-1);
              },
            });
          } else {
            r.writeResVerstion(n, function () {
              i();
            });
          }
        });
      };
      t.prototype.log = function (t, e) {
        this.writeFile("log.txt", t, function (t) {
          e && e(t);
        });
        return;
      };
      t.prototype.writeResVerstion = function (e, n) {
        var o = this;
        this.writeFile("res_version.txt", e, function (t) {
          if (t) {
            o.clientVersion = e;
          }
          n && n(t);
        });
      };
      t.prototype.setBoradText = function (t) {
        var e = plus.android.importClass("android.content.Context");
        var n = plus.android.runtimeMainActivity();
        var o = n.getSystemService(e.CLIPBOARD_SERVICE);
        plus.android.invoke(o, "setText", t);
      };
      t.prototype.compareVersion = function (t, e) {
        var n = t.split(".");
        var o = e.split(".");
        var r = n.length;
        var i = o.length;
        if (r != i) {
          return r <= i ? -1 : 1;
        } else
          for (var a = 0; a < Math.max(r, i); a++) {
            var s = a < r ? parseInt(n[a]) : 0;
            var u = a < i ? parseInt(o[a]) : 0;
            if (s != u) {
              return (s < u ? -1 : 1) * (a + 1);
            }
          }
        return 0;
      };
      return t;
    })(XOF.EventDispatcher);
    e.default = o;
  });
  t(Vd);
  var $d = e(function (t, e) {
    var n =
      (mo && mo.__importDefault) ||
      function (t) {
        return t && t.__esModule ? t : { default: t };
      };
    Object.defineProperty(e, "__esModule", { value: true });
    var o = n(p);
    var r = n(dt);
    var i = n(q);
    var a = n(Ud);
    var s = n(Gd);
    var u = n(Hd);
    var l = n(Vd);
    Array.prototype.sort = o.default.ArraySort;
    s.default.detect();
    i.default.platform = new l.default();
    function f() {
      //开始
      XOF.init(document, document.getElementById("gameMain"), 1280, 720);
      XOF.player.backgroundColor = "#000000";
      XOF.player.preLoadImage = true;
      XOF.player.cleanScreen = true;
      XOF.loader.asyncLimit = 20;
      r.default.init();
      i.default.init();
      i.default.isMobile = u.default.isMobile;
      i.default.isMobileUI = true;
      i.default.isAutoLogin = false;
      if (u.default.isMobile) {
        XOF.player.frameRate = 30;
        XOF.player.setTouchEventListener(2);
      } else {
        XOF.player.frameRate = 60;
      }
      var t = window["ActiveXObject"] || "ActiveXObject" in window;
      function e() {
        var t = new XOF.Label();
        t.pos(10.5, 10.5);
        t.lineSpacing = 2;
        t.stroke = 1;
        t.strokeColor = "#000000";
        t.text =
          "不支持的浏览器，建议使用谷歌浏览器。\nUnsupported browser. Chorme browser is recommended.";
        XOF.stage.addChild(t);
      }
      if (t) {
        e();
      } else {
        new a.default().init();
      }
    }
    var c = function () {
      function t(t) {
        var e = plus.android.runtimeMainActivity();
        var n = e.getWindow();
        plus.android.importClass(n);
        var o = n.getDecorView();
        plus.android.importClass(o);
        var r = plus.android.importClass("android.view.View");
        if (t === 1) {
          o.setSystemUiVisibility(
            r.SYSTEM_UI_FLAG_LAYOUT_STABLE |
              r.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION |
              r.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN |
              r.SYSTEM_UI_FLAG_HIDE_NAVIGATION |
              r.SYSTEM_UI_FLAG_FULLSCREEN |
              r.SYSTEM_UI_FLAG_IMMERSIVE
          );
        } else if (t === 2) {
          o.setSystemUiVisibility(
            r.SYSTEM_UI_FLAG_LAYOUT_STABLE |
              r.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN |
              r.SYSTEM_UI_FLAG_FULLSCREEN |
              r.SYSTEM_UI_FLAG_IMMERSIVE
          );
        } else if (t === 3) {
          o.setSystemUiVisibility(
            r.SYSTEM_UI_FLAG_LAYOUT_STABLE |
              r.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION |
              r.SYSTEM_UI_FLAG_HIDE_NAVIGATION |
              r.SYSTEM_UI_FLAG_IMMERSIVE
          );
        } else if (t === 0) {
          o.setSystemUiVisibility(r.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);
        }
      }
      var n = function () {
        t(1);
        plus.navigator.hideSystemNavigation();
        plus.navigator.setFullscreen(true);
      };
      n();
      f();
      document.addEventListener(
        "pause",
        function () {
          XOF.stage.event("pause");
        },
        false
      );
      document.addEventListener(
        "resume",
        function () {
          XOF.stage.event("resume");
          n();
        },
        false
      );
      plus.key.addEventListener(
        "backbutton",
        function () {
          XOF.stage.event("backbutton");
        },
        false
      );
      document.addEventListener(
        "keyboardchange",
        function (t) {
          var e = t.height;
          if (e > 0);
          else {
            n();
          }
        },
        false
      );
    };
    if (i.default.platform.platformType == "HBuilder") {
      if (window["plus"]) {
        c();
      } else {
        document.addEventListener("plusready", c, false);
      }
    } else {
      f();
    }
  });
  var qd = t($d);
  return qd;
})();
